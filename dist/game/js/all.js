function __extends(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},egret;!function(t){function e(){return""}function i(t){throw new Error("#"+t)}function r(){}function n(){}function a(){}t.getString=e,t.$error=i,t.$warn=r,t.$markReadOnly=n,t.$markCannotUse=a}(egret||(egret={}));var egret;!function(t){function e(e,i,r){e||t.$error(1003,"classDefinition"),e.prototype||t.$error(1012,"classDefinition"),void 0===i&&t.$error(1003,"className");var n=e.prototype;n.__class__=i;var a=[i];r&&(a=a.concat(r));var o=n.__types__;if(n.__types__)for(var s=o.length,h=0;s>h;h++){var l=o[h];-1==a.indexOf(l)&&a.push(l)}n.__types__=a}t.registerClass=e}(egret||(egret={}));var __define=this.__define||function(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:r})},egret;!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}return Object.defineProperty(e.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),e}();t.HashObject=e,__reflect(e.prototype,"egret.HashObject",["egret.IHashObject"]),t.$markReadOnly(e,"hashCode")}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0);var a=i.call(this)||this;return a.x=t,a.y=e,a.width=r,a.height=n,a}return __extends(r,i),r.release=function(t){t&&e.push(t)},r.create=function(){var t=e.pop();return t||(t=new r),t},Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.setTo=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},r.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},r.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},r.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},r.prototype.$intersectInPlace=function(t){var e=this.x,i=this.y,r=t.x,n=t.y,a=Math.max(e,r),o=Math.min(e+this.width,r+t.width);if(o>=a){var s=Math.max(i,n),h=Math.min(i+this.height,n+t.height);if(h>=s)return this.setTo(a,s,o-a,h-s),this}return this.setEmpty(),this},r.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},r.prototype.isEmpty=function(){return this.width<=0||this.height<=0},r.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y?!0:!1},r.prototype.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,r=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<r&&t.y>=this.y&&t.y<n&&e>this.x&&r>=e&&i>this.y&&n>=i},r.prototype.equals=function(t){return this===t?!0:this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},r.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},r.prototype.offset=function(t,e){this.x+=t,this.y+=e},r.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},r.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},r.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return e.setTo(i,r,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-r),e},r.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},r.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return i*this.width+e*this.height},r}(t.HashObject);t.Rectangle=i,__reflect(i.prototype,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t){void 0===t&&(t=null);var e=i.call(this)||this;return e.$EventDispatcher={0:t?t:e,1:{},2:{},3:0},e}return __extends(r,i),r.prototype.$getEventMap=function(t){var e=this.$EventDispatcher,i=t?e[2]:e[1];return i},r.prototype.addEventListener=function(t,e,i,r,n){this.$addListener(t,e,i,r,n)},r.prototype.once=function(t,e,i,r,n){this.$addListener(t,e,i,r,n,!0)},r.prototype.$addListener=function(e,i,r,n,a,o){i||t.$error(1003,"listener");var s=this.$EventDispatcher,h=n?s[2]:s[1],l=h[e];l?0!==s[3]&&(h[e]=l=l.concat()):l=h[e]=[],this.$insertEventBin(l,e,i,r,n,a,o)},r.prototype.$insertEventBin=function(t,e,i,r,n,a,o){a=0|+a;for(var s=-1,h=t.length,l=0;h>l;l++){var u=t[l];if(u.listener==i&&u.thisObject==r&&u.target==this)return!1;-1==s&&u.priority<a&&(s=l)}var c={type:e,listener:i,thisObject:r,priority:a,target:this,useCapture:n,dispatchOnce:!!o};return-1!==s?t.splice(s,0,c):t.push(c),!0},r.prototype.removeEventListener=function(t,e,i,r){var n=this.$EventDispatcher,a=r?n[2]:n[1],o=a[t];o&&(0!==n[3]&&(a[t]=o=o.concat()),this.$removeEventBin(o,e,i),0==o.length&&(a[t]=null))},r.prototype.$removeEventBin=function(t,e,i){for(var r=t.length,n=0;r>n;n++){var a=t[n];if(a.listener==e&&a.thisObject==i&&a.target==this)return t.splice(n,1),!0}return!1},r.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},r.prototype.willTrigger=function(t){return this.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},r.prototype.$notifyListener=function(t,i){var r=this.$EventDispatcher,n=i?r[2]:r[1],a=n[t.$type];if(!a)return!0;var o=a.length;if(0==o)return!0;var s=e;r[3]++;for(var h=0;o>h;h++){var l=a[h];if(l.listener.call(l.thisObject,t),l.dispatchOnce&&s.push(l),t.$isPropagationImmediateStopped)break}for(r[3]--;s.length;){var l=s.pop();l.target.removeEventListener(l.type,l.listener,l.thisObject,l.useCapture)}return!t.$isDefaultPrevented},r.prototype.dispatchEventWith=function(e,i,r,n){if(i||this.hasEventListener(e)){var a=t.Event.create(t.Event,e,i,n);a.data=r;var o=this.dispatchEvent(a);return t.Event.release(a),o}return!0},r}(t.HashObject);t.EventDispatcher=i,__reflect(i.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){function e(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var i=function(i){function r(){var e=i.call(this)||this;return e.$children=null,e.$parent=null,e.$stage=null,e.$nestLevel=0,e.$visible=!0,e.$displayList=null,e.$alpha=1,e.$touchEnabled=r.defaultTouchEnabled,e.$scrollRect=null,e.$blendMode=0,e.$maskedObject=null,e.$mask=null,e.$maskRect=null,e.$parentDisplayList=null,e.$renderNode=null,e.$displayFlags=2032,e.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new t.Matrix,7:new t.Matrix,8:new t.Matrix,9:new t.Rectangle,10:new t.Rectangle,11:!1,12:0,13:0,14:0/0,15:0/0,16:0,17:0,18:0,19:null,20:null},e}return __extends(r,i),r.prototype.$setFlags=function(t){this.$displayFlags|=t},r.prototype.$removeFlags=function(t){this.$displayFlags&=~t},r.prototype.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var e=this.$parent;e&&e.$removeFlagsUp(t)}},r.prototype.$hasFlags=function(t){return(this.$displayFlags&t)==t},r.prototype.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var e=this.$parent;e&&e.$propagateFlagsUp(t)}},r.prototype.$propagateFlagsDown=function(t,e){void 0===e&&(e=!1),this.$setFlags(t)},r.prototype.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},r.prototype.$invalidateMatrix=function(){this.$setFlags(8),this.$invalidatePosition()},r.prototype.$invalidatePosition=function(){var t=this;t.$invalidateTransform(),t.$propagateFlagsDown(48),t.$parent&&t.$parent.$propagateFlagsUp(4)},Object.defineProperty(r.prototype,"name",{get:function(){return this.$DisplayObject[5]},set:function(t){this.$DisplayObject[5]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),r.prototype.$setParent=function(t){return this.$parent==t?!1:(this.$parent=t,!0)},r.prototype.$onAddToStage=function(e,i){this.$stage=e,this.$nestLevel=i,this.$hasAddToStage=!0,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},r.prototype.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},Object.defineProperty(r.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),r.prototype.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},r.prototype.$setMatrix=function(t,i){void 0===i&&(i=!0);var r=this,n=r.$DisplayObject,a=n[6];return a.equals(t)?!1:(a.copyFrom(t),i&&(n[0]=a.$getScaleX(),n[1]=a.$getScaleY(),n[2]=t.$getSkewX(),n[3]=t.$getSkewY(),n[16]=e(180*n[2]/Math.PI),n[17]=e(180*n[3]/Math.PI),n[4]=e(180*n[3]/Math.PI)),r.$removeFlags(8),r.$invalidatePosition(),!0)},r.prototype.$getConcatenatedMatrix=function(){var e=this.$DisplayObject[7];if(this.$hasFlags(16)){this.$parent?this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),e):e.copyFrom(this.$getMatrix());var i=this.$DisplayObject,r=i[12],n=i[13],a=this.$scrollRect;a?e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-a.x-r,-a.y-n),e):(0!=r||0!=n)&&e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-r,-n),e),this.$displayList&&(this.$displayList.$renderNode.moved=!0),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(16)}return e},r.prototype.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[8]),this.$removeFlags(32)),t[8]},Object.defineProperty(r.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),r.prototype.$getX=function(){return this.$DisplayObject[6].tx},r.prototype.$setX=function(t){t=+t||0;var e=this.$DisplayObject[6];return t==e.tx?!1:(e.tx=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),r.prototype.$getY=function(){return this.$DisplayObject[6].ty},r.prototype.$setY=function(t){t=+t||0;var e=this.$DisplayObject[6];return t==e.ty?!1:(e.ty=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleX=function(){return this.$DisplayObject[0]},r.prototype.$setScaleX=function(t){t=+t||0;var e=this.$DisplayObject;return t==e[0]?!1:(e[0]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleY=function(){return this.$DisplayObject[1]},r.prototype.$setScaleY=function(t){return t=+t||0,t==this.$DisplayObject[1]?!1:(this.$DisplayObject[1]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),r.prototype.$getRotation=function(){return this.$DisplayObject[4]},r.prototype.$setRotation=function(t){t=+t||0,t=e(t);var i=this.$DisplayObject;if(t==i[4])return!1;var r=t-i[4],n=r/180*Math.PI;return i[2]+=n,i[3]+=n,i[4]=t,this.$invalidateMatrix(),!0},Object.defineProperty(r.prototype,"skewX",{get:function(){return this.$DisplayObject[16]},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewX=function(t){t=+t||0;var i=this.$DisplayObject;return t==i[16]?!1:(i[16]=t,t=e(t),t=t/180*Math.PI,i[2]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"skewY",{get:function(){return this.$DisplayObject[17]},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewY=function(t){t=+t||0;var i=this.$DisplayObject;return t==i[17]?!1:(i[17]=t,t=e(t),t=t/180*Math.PI,i[3]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return isNaN(this.$getExplicitWidth())?this.$getOriginalBounds().width:this.$getExplicitWidth()},r.prototype.$getExplicitWidth=function(){return this.$DisplayObject[14]},r.prototype.$setWidth=function(t){return this.$DisplayObject[14]=isNaN(t)?0/0:t,t=+t,0>t?!1:(this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),r.prototype.$getHeight=function(){return isNaN(this.$getExplicitHeight())?this.$getOriginalBounds().height:this.$getExplicitHeight()},r.prototype.$getExplicitHeight=function(){return this.$DisplayObject[15]},r.prototype.$setHeight=function(t){return this.$DisplayObject[15]=isNaN(t)?0/0:t,t=+t,0>t?!1:(this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"anchorOffsetX",{get:function(){return this.$DisplayObject[12]},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),r.prototype.$getAnchorOffsetX=function(){return this.$DisplayObject[12]},r.prototype.$setAnchorOffsetX=function(t){return t=+t||0,t==this.$DisplayObject[12]?!1:(this.$DisplayObject[12]=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"anchorOffsetY",{get:function(){return this.$DisplayObject[13]},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),r.prototype.$getAnchorOffsetY=function(){return this.$DisplayObject[13]},r.prototype.$setAnchorOffsetY=function(t){return t=+t||0,t==this.$DisplayObject[13]?!1:(this.$DisplayObject[13]=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),r.prototype.$setVisible=function(t){return t=!!t,t==this.$visible?!1:(this.$visible=t,this.$propagateFlagsDown(1024),this.$invalidateTransform(),!0)},r.prototype.$getConcatenatedVisible=function(){var t=this.$DisplayObject;if(this.$hasFlags(1024)){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();t[19]=e&&this.$visible}else t[19]=this.$visible;this.$removeFlags(1024)}return t[19]},Object.defineProperty(r.prototype,"cacheAsBitmap",{get:function(){return this.$DisplayObject[11]},set:function(t){t=!!t,this.$DisplayObject[11]=t,this.$setHasDisplayList(t)},enumerable:!0,configurable:!0}),r.prototype.$setHasDisplayList=function(e){var i=!!this.$displayList;if(i!=e)if(e){var r=t.sys.DisplayList.create(this);r&&(this.$displayList=r,this.$parentDisplayList&&this.$parentDisplayList.markDirty(r),this.$cacheAsBitmapChanged())}else this.$displayList=null,this.$cacheAsBitmapChanged()},r.prototype.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderNode&&t&&t.markDirty(this),this.$propagateFlagsDown(48)},Object.defineProperty(r.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),r.prototype.$setAlpha=function(t){return t=+t||0,t==this.$alpha?!1:(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),!0)},r.prototype.$getConcatenatedAlpha=function(){var t=this.$DisplayObject;if(this.$hasFlags(64)){if(this.$parent){var e=this.$parent.$getConcatenatedAlpha();t[18]=e*this.$alpha}else t[18]=this.$alpha;this.$removeFlags(64)}return t[18]},Object.defineProperty(r.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),r.prototype.$getTouchEnabled=function(){return this.$touchEnabled},r.prototype.$setTouchEnabled=function(t){return this.$touchEnabled==t?!1:(this.$touchEnabled=t,!0)},Object.defineProperty(r.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),r.prototype.$setScrollRect=function(e){return e||this.$scrollRect?(e?(this.$scrollRect||(this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(e)):this.$scrollRect=null,this.$invalidatePosition(),!0):!1},Object.defineProperty(r.prototype,"blendMode",{get:function(){return t.sys.numberToBlendMode(this.$blendMode)},set:function(e){var i=t.sys.blendModeToNumber(e);i!=this.$blendMode&&(this.$blendMode=i,this.$invalidateTransform())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this.$mask?this.$mask:this.$maskRect},set:function(t){if(t!==this){if(t)if(t instanceof r){if(t==this.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this,t.$invalidateTransform(),this.$mask=t,this.$maskRect=null}else this.$setMaskRect(t),this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null;else this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null,this.$maskRect=null;this.$invalidateTransform()}},enumerable:!0,configurable:!0}),r.prototype.$setMaskRect=function(e){return e||this.$maskRect?(e?(this.$maskRect||(this.$maskRect=new t.Rectangle),this.$maskRect.copyFrom(e)):this.$maskRect=null,this.$invalidatePosition(),!0):!1},Object.defineProperty(r.prototype,"filters",{get:function(){return this.$DisplayObject[20]},set:function(t){var e=this.$DisplayObject[20];if(!e&&!t)return void(this.$DisplayObject[20]=t);if(this.$invalidateContentBounds(),this.$invalidate(!0),e&&e.length)for(var i=e.length,r=0;i>r;r++)e[r].$removeTarget(this);if(this.$DisplayObject[20]=t,t&&t.length)for(var n=t.length,r=0;n>r;r++)t[r].$addTarget(this)},enumerable:!0,configurable:!0}),r.prototype.$getFilters=function(){return this.$DisplayObject[20]},r.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},r.prototype.getBounds=function(t,e){if(void 0===e&&(e=!0),t=this.$getTransformedBounds(this,t),e){var i=this.$DisplayObject;(0!=i[12]||0!=i[13])&&(t.x-=i[12],t.y-=i[13])}return t},r.prototype.$getTransformedBounds=function(e,i){var r=this.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(r),e==this)return i;var n;if(e){n=t.$TempMatrix;var a=e.$getInvertedConcatenatedMatrix();a.$preMultiplyInto(this.$getConcatenatedMatrix(),n)}else n=this.$getConcatenatedMatrix();return n.$transformBounds(i),i},r.prototype.globalToLocal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.$getInvertedConcatenatedMatrix();return r.transformPoint(t,e,i)},r.prototype.localToGlobal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.$getConcatenatedMatrix();return r.transformPoint(t,e,i)},r.prototype.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},r.prototype.$getOriginalBounds=function(){var t=this.$DisplayObject[9];if(this.$hasFlags(4)){t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderNode.moved=!0);var e=this.$measureFiltersOffset();e&&(t.x+=e.minX,t.y+=e.minY,t.width+=e.maxX,t.height+=e.maxY)}return t},r.prototype.$measureChildBounds=function(t){},r.prototype.$getContentBounds=function(){var t=this.$DisplayObject[10];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(2)),t},r.prototype.$measureContentBounds=function(t){},r.prototype.$invalidate=function(t){if(this.$renderNode&&!this.$hasFlags(384)){this.$setFlags(384);var e=this.$displayList?this.$displayList:this.$parentDisplayList;e&&e.markDirty(this)}},r.prototype.$invalidateTransform=function(){var t=this;if(!t.$hasFlags(512)){t.$setFlags(512);var e=t.$displayList;(e||t.$renderNode)&&t.$parentDisplayList&&t.$parentDisplayList.markDirty(e||t)}},r.prototype.$getRenderNode=function(){var t=this.$renderNode;return t?(128&this.$displayFlags&&(t.cleanBeforeRender(),this.$render(),this.$removeFlags(128),t=this.$renderNode),t):null},r.prototype.$update=function(e,i){var r=this;r.$removeFlagsUp(768);var n=r.$renderNode;n.renderAlpha=r.$getConcatenatedAlpha();var a=r.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var o=r.$displayList||r.$parentDisplayList;if(!o)return!1;var s=n.renderMatrix;s.copyFrom(a);var h=o.root;h!==r.$stage&&r.$getConcatenatedMatrixAt(h,s)}else{var l=i||r.$getContentBounds();n.renderVisible=r.$getConcatenatedVisible();var o=r.$displayList||r.$parentDisplayList,u=n.renderRegion;if(!o)return u.setTo(0,0,0,0),n.moved=!1,!1;if(!n.moved)return!1;n.moved=!1;var s=n.renderMatrix;s.copyFrom(a);var h=o.root;h!==r.$stage&&r.$getConcatenatedMatrixAt(h,s),u.updateRegion(l,s);var c=r.$measureFiltersOffset();c&&(u.minX+=c.minX,u.minY+=c.minY,u.maxX+=c.maxX,u.maxY+=c.maxY,u.updateArea())}return!0},r.prototype.$measureFiltersOffset=function(){var e=this.$DisplayObject[20];if(e&&e.length){for(var i=e.length,r=0,n=0,a=0,o=0,s=0;i>s;s++){var h=e[s];if("blur"==h.type){var l=h.blurX,u=h.blurY;r-=l,n-=u,a+=2*l,o+=2*u}else if("glow"==h.type){var l=h.blurX,u=h.blurY;r-=l,n-=u,a+=2*l,o+=2*u;var c=h.distance||0,p=h.angle||0,d=0,f=0;0!=c&&(d=Math.ceil(c*t.NumberUtils.cos(p)),f=Math.ceil(c*t.NumberUtils.sin(p)),d>0?a+=d:0>d&&(r+=d,a-=d),f>0?o+=f:0>f&&(n+=f,o-=f))}}return{minX:r,minY:n,maxX:a,maxY:o}}return null},r.prototype.$getConcatenatedMatrixAt=function(e,i){var r=e.$getInvertedConcatenatedMatrix();if(0===r.a||0===r.d){var n=this,a=e.$nestLevel;for(i.identity();n.$nestLevel>a;){var o=n.$scrollRect;o&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-o.x,-o.y)),i.concat(n.$getMatrix()),n=n.$parent}}else r.$preMultiplyInto(i,i)},r.prototype.$getConcatenatedAlphaAt=function(t,e){var i=t.$getConcatenatedAlpha();if(0===i){e=1;for(var r=this,n=t.$nestLevel;r.$nestLevel>n;)e*=r.$alpha,r=r.$parent}else e/=i;return e},r.prototype.$render=function(){},r.prototype.$hitTest=function(t,e){var i=this.$DisplayObject;if(!this.$renderNode||!this.$visible||0==i[0]||0==i[1])return null;var r=this.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=this.$getContentBounds(),a=r.a*t+r.c*e+r.tx,o=r.b*t+r.d*e+r.ty;if(n.contains(a,o)){if(!this.$children){var s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(a,o))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null}return this}return null},r.prototype.hitTestPoint=function(e,i,r){if(r){var n=this.$getInvertedConcatenatedMatrix(),a=n.a*e+n.c*i+n.tx,o=n.b*e+n.d*i+n.ty,s=void 0,h=this.$displayList;if(h){var l=h.renderBuffer;try{s=l.getPixels(a-h.offsetX,o-h.offsetY)}catch(u){throw new Error(t.sys.tr(1039))}}else{var l=t.sys.customHitTestBuffer;l.resize(3,3);var c=t.Matrix.create();c.identity(),c.translate(1-a,1-o),t.sys.systemRenderer.render(this,l,c,null,!0),t.Matrix.release(c);try{s=l.getPixels(1,1)}catch(u){throw new Error(t.sys.tr(1039))}}return 0===s[3]?!1:!0}var p=this.$DisplayObject;if(0==p[0]||0==p[1])return!1;var n=this.$getInvertedConcatenatedMatrix(),d=this.getBounds(null,!1),a=n.a*e+n.c*i+n.tx,o=n.b*e+n.d*i+n.ty;if(d.contains(a,o)){var f=this.$scrollRect?this.$scrollRect:this.$maskRect;return f&&!f.contains(a,o)?!1:!0}return!1},r.prototype.$addListener=function(e,n,a,o,s,h){i.prototype.$addListener.call(this,e,n,a,o,s,h);var l=e==t.Event.ENTER_FRAME;if(l||e==t.Event.RENDER){var u=l?r.$enterFrameCallBackList:r.$renderCallBackList;-1==u.indexOf(this)&&u.push(this)}},r.prototype.removeEventListener=function(e,n,a,o){i.prototype.removeEventListener.call(this,e,n,a,o);var s=e==t.Event.ENTER_FRAME;if((s||e==t.Event.RENDER)&&!this.hasEventListener(e)){var h=s?r.$enterFrameCallBackList:r.$renderCallBackList,l=h.indexOf(this);-1!==l&&h.splice(l,1)}},r.prototype.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),r=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,r),!t.$isDefaultPrevented},r.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},r.prototype.$dispatchPropagationEvent=function(t,e,i){for(var r=e.length,n=i-1,a=0;r>a;a++){var o=e[a];if(t.$currentTarget=o,n>a?t.$eventPhase=1:a==i||a==n?t.$eventPhase=2:t.$eventPhase=3,o.$notifyListener(t,i>a),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},r.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},r}(t.EventDispatcher);i.defaultTouchEnabled=!1,i.boundsForUpdate=new t.Rectangle,i.$enterFrameCallBackList=[],i.$renderCallBackList=[],t.DisplayObject=i,__reflect(i.prototype,"egret.DisplayObject",["egret.sys.Renderable"]),t.$markReadOnly(i,"parent"),t.$markReadOnly(i,"stage")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}return __extends(i,e),i.prototype.$propagateFlagsDown=function(t,e){if(void 0===e&&(e=!1),!this.$hasFlags(t)&&(this.$setFlags(t),!e||!this.$displayList))for(var i=this.$children,r=i.length,n=0;r>n;n++)i[n].$propagateFlagsDown(t,e)},Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,r,n){void 0===n&&(n=!0),e==this?t.$error(1005):e instanceof t.DisplayObjectContainer&&e.contains(this)&&t.$error(1004);var a=e.$parent;if(a==this)return this.doSetChildIndex(e,r),e;a&&a.removeChild(e),this.$children.splice(r,0,e),e.$setParent(this);var o=this.$stage;if(o&&e.$onAddToStage(o,this.$nestLevel+1),n&&e.dispatchEventWith(t.Event.ADDED,!0),o)for(var s=i.$EVENT_ADD_TO_STAGE_LIST;s.length;){var h=s.shift();h.$stage&&n&&h.dispatchEventWith(t.Event.ADDED_TO_STAGE)}var l=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(e,l,l),e.$propagateFlagsDown(1648,!0),this.$propagateFlagsUp(4),this.$childAdded(e,r),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},i.prototype.getChildAt=function(e){return e=0|+e,e>=0&&e<this.$children.length?this.$children[e]:(t.$error(1007),null)},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;r>n;n++)if(e=i[n],e.name==t)return e;return null},i.prototype.removeChild=function(e){var i=this.$children.indexOf(e);return i>=0?this.$doRemoveChild(i):(t.$error(1006),null)},i.prototype.removeChildAt=function(e){return e=0|+e,e>=0&&e<this.$children.length?this.$doRemoveChild(e):(t.$error(1007),null)},i.prototype.$doRemoveChild=function(e,r){void 0===r&&(r=!0),e=0|+e;var n=this.$children,a=n[e];if(this.$childRemoved(a,e),r&&a.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){a.$onRemoveFromStage();for(var o=i.$EVENT_REMOVE_FROM_STAGE_LIST;o.length>0;){var s=o.shift();r&&s.$hasAddToStage&&(s.$hasAddToStage=!1,s.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),s.$hasAddToStage=!1,s.$stage=null}}var h=this.$displayList||this.$parentDisplayList;this.assignParentDisplayList(a,h,null),a.$propagateFlagsDown(1648,!0),a.$setParent(null);var l=n.indexOf(a);return-1!=l&&n.splice(l,1),this.$propagateFlagsUp(4),a},i.prototype.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(e,i){var r=this.$children.indexOf(e);0>r&&t.$error(1006),r!=i&&(this.$childRemoved(e,r),this.$children.splice(r,1),this.$children.splice(i,0,e),this.$childAdded(e,i),e.$invalidateTransform(),this.$propagateFlagsUp(4))},i.prototype.swapChildrenAt=function(e,i){e=0|+e,i=0|+i,e>=0&&e<this.$children.length&&i>=0&&i<this.$children.length?this.doSwapChildrenAt(e,i):t.$error(1007)},i.prototype.swapChildren=function(e,i){var r=this.$children.indexOf(e),n=this.$children.indexOf(i);-1==r||-1==n?t.$error(1006):this.doSwapChildrenAt(r,n)},i.prototype.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var r=this.$children,n=r[t],a=r[e];this.$childRemoved(n,t),this.$childRemoved(a,e),r[t]=a,r[e]=n,this.$childAdded(a,t),this.$childAdded(n,e),n.$invalidateTransform(),a.$invalidateTransform(),this.$propagateFlagsUp(4)},i.prototype.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children,n=r.length;i++;for(var a=0;n>a;a++){var o=this.$children[a];o.$onAddToStage(t,i)}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;i>r;r++){var n=t[r];n.$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,a=0,o=0,s=0,h=!1,l=-1;r>l;l++){var u=-1==l?e:i[l].$getTransformedBounds(this,t.$TempRectangle);u.isEmpty()||(h?(n=Math.min(n,u.x),a=Math.max(a,u.x+u.width),o=Math.min(o,u.y),s=Math.max(s,u.y+u.height)):(h=!0,n=u.x,a=n+u.width,o=u.y,s=o+u.height))}e.setTo(n,o,a-n,s-o)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren==t?!1:(this.$touchChildren=t,!0)},i.prototype.$invalidate=function(t){if(e.prototype.$invalidate.call(this,t),t){var i=this.$displayList||this.$parentDisplayList,r=this.$children;if(r)for(var n=r.length-1;n>=0;n--)this.markChildDirty(r[n],i)}},i.prototype.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},i.prototype.markChildDirty=function(t,e){if(!t.$hasFlags(512)){t.$setFlags(512);var i=t.$displayList;if((i||t.$renderNode)&&e&&e.markDirty(i||t),!i){var r=t.$children;
if(r)for(var n=r.length-1;n>=0;n--)this.markChildDirty(r[n],e)}}},i.prototype.$cacheAsBitmapChanged=function(){e.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,i=this.$children,r=i.length-1;r>=0;r--)this.assignParentDisplayList(i[r],t,t)},i.prototype.assignParentDisplayList=function(t,e,i){t.$parentDisplayList=i,t.$setFlags(512);var r=t.$displayList;if((t.$renderNode||r)&&e&&e.markDirty(r||t),!r){var n=t.$children;if(n)for(var a=n.length-1;a>=0;a--)this.assignParentDisplayList(n[a],e,i)}},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,a=r.b*t+r.d*i+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(n,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var s=this.$children,h=!1,l=null,u=s.length-1;u>=0;u--){var c=s[u];if(!c.$maskedObject&&(l=c.$hitTest(t,i))){if(h=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:h?this:e.prototype.$hitTest.call(this,t,i)},i.prototype.$setAlpha=function(t){return t=+t||0,t==this.$alpha?!1:(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),this.$invalidateAllChildren(),!0)},i.prototype.$invalidateAllChildren=function(){var t=this.$children;if(t)for(var e=t.length-1;e>=0;e--){var i=t[e];i.$invalidate(),i.$children&&i.$invalidateAllChildren()}},i}(t.DisplayObject);e.$EVENT_ADD_TO_STAGE_LIST=[],e.$EVENT_REMOVE_FROM_STAGE_LIST=[],t.DisplayObjectContainer=e,__reflect(e.prototype,"egret.DisplayObjectContainer"),t.$markReadOnly(e,"numChildren")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e.type=null,e.$targets=[],e}return __extends(e,t),e.prototype.$addTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return;this.$targets.push(t)},e.prototype.$removeTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return void this.$targets.splice(i,1)},e.prototype.invalidate=function(){for(var t=this.$targets.length,e=0;t>e;e++)this.$targets[e].$invalidateContentBounds()},e.prototype.$toJson=function(){return""},e}(t.HashObject);t.Filter=e,__reflect(e.prototype,"egret.Filter")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){var r=e.call(this)||this;return r._bitmapX=0,r._bitmapY=0,r._textureMap=t.createMap(),r.$texture=i,r._bitmapX=i._bitmapX-i._offsetX,r._bitmapY=i._bitmapY-i._offsetY,r}return __extends(i,e),i.prototype.getTexture=function(t){return this._textureMap[t]},i.prototype.createTexture=function(e,i,r,n,a,o,s,h,l){void 0===o&&(o=0),void 0===s&&(s=0),void 0===h&&(h=o+n),void 0===l&&(l=s+a);var u=new t.Texture;return u._bitmapData=this.$texture._bitmapData,u.$initData(this._bitmapX+i,this._bitmapY+r,n,a,o,s,h,l,this.$texture._sourceWidth,this.$texture._sourceHeight),this._textureMap[e]=u,u},i.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,__reflect(e.prototype,"egret.SpriteSheet")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n){var a=t.call(this)||this;return a.$eventPhase=2,a.$currentTarget=null,a.$target=null,a.$isDefaultPrevented=!1,a.$isPropagationStopped=!1,a.$isPropagationImmediateStopped=!1,a.$type=e,a.$bubbles=!!i,a.$cancelable=!!r,a.data=n,a}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),e.prototype.$setTarget=function(t){return this.$target=t,!0},e.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},e.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},e.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},e.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},e.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,r,n){void 0===r&&(r=!1);var a=e.create(e,i,r),o=e._getPropertyData(e);void 0!=n&&(o.data=n);var s=t.dispatchEvent(a);return e.release(a),s},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,r){var n=t.eventPool;if(n||(n=t.eventPool=[]),n.length){var a=n.pop();return a.$type=e,a.$bubbles=!!i,a.$cancelable=!!r,a.$isDefaultPrevented=!1,a.$isPropagationStopped=!1,a.$isPropagationImmediateStopped=!1,a.$eventPhase=2,a}return new t(e,i,r)},e.release=function(t){t.clean();var e=Object.getPrototypeOf(t).constructor;e.eventPool.push(t)},e}(t.HashObject);e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",t.Event=e,__reflect(e.prototype,"egret.Event"),t.$markReadOnly(e,"type"),t.$markReadOnly(e,"bubbles"),t.$markReadOnly(e,"cancelable"),t.$markReadOnly(e,"eventPhase"),t.$markReadOnly(e,"currentTarget"),t.$markReadOnly(e,"target")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(r){var n=e.call(this)||this;return n.$scale9Grid=null,n.$fillMode="scale",n._pixelHitTest=!1,n.$renderNode=new t.sys.BitmapNode,n.$Bitmap={0:null,1:null,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:i.defaultSmoothing,11:0/0,12:0/0},n.$setBitmapData(r),n}return __extends(i,e),i.prototype.$onAddToStage=function(i,r){e.prototype.$onAddToStage.call(this,i,r);var n=this.$Bitmap[0];n&&t.BitmapData.$addDisplayObject(this,n)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=this.$Bitmap[0];i&&t.BitmapData.$removeDisplayObject(this,i)},Object.defineProperty(i.prototype,"bitmapData",{get:function(){var e=this.$Bitmap[0];return e instanceof t.Texture?null:e},set:function(t){this.$setBitmapData(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){var e=this.$Bitmap[0];return e instanceof t.Texture?e:null},set:function(t){this.$setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype.$setBitmapData=function(e){var i=this.$Bitmap,r=i[0];if(e==r)return!1;if(i[0]=e,!e)return r&&t.BitmapData.$removeDisplayObject(this,r),this.setImageData(null,0,0,0,0,0,0,0,0,0,0),this.$invalidateContentBounds(),!0;if(this.$refreshImageData(),this.$stage){if(r){var n=void 0;n=r._bitmapData&&r._bitmapData.hashCode?r._bitmapData.hashCode:r.hashCode;var a=void 0;if(a=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,n==a)return this.$invalidateContentBounds(),!0;t.BitmapData.$removeDisplayObject(this,r)}t.BitmapData.$addDisplayObject(this,e)}return this.$invalidateContentBounds(),!0},i.prototype.$refreshImageData=function(){var e=this.$Bitmap,i=e[0];if(i)if(i instanceof t.Texture){var r=i;this.setImageData(r._bitmapData,r._bitmapX,r._bitmapY,r._bitmapWidth,r._bitmapHeight,r._offsetX,r._offsetY,r.$getTextureWidth(),r.$getTextureHeight(),r._sourceWidth,r._sourceHeight)}else{var n=i.width,a=i.height;this.setImageData(i,0,0,n,a,0,0,n,a,n,a)}},i.prototype.setImageData=function(t,e,i,r,n,a,o,s,h,l,u){var c=this.$Bitmap;c[1]=t,c[2]=e,c[3]=i,c[4]=r,c[5]=n,c[6]=a,c[7]=o,c[8]=s,c[9]=h,c[13]=l,c[14]=u},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$scale9Grid=t,this.$invalidateContentBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(t){return t==this.$fillMode?!1:(this.$fillMode=t,!0)},Object.defineProperty(i.prototype,"smoothing",{get:function(){var t=this.$Bitmap;return t[10]},set:function(t){t=!!t;var e=this.$Bitmap;t!=e[10]&&(e[10]=t,this.$invalidate())},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(t){var e=this.$Bitmap;return 0>t||t==e[11]?!1:(e[11]=t,this.$invalidateContentBounds(),!0)},i.prototype.$setHeight=function(t){var e=this.$Bitmap;return 0>t||t==e[12]?!1:(e[12]=t,this.$invalidateContentBounds(),!0)},i.prototype.$getWidth=function(){var t=this.$Bitmap;return isNaN(t[11])?this.$getContentBounds().width:t[11]},i.prototype.$getHeight=function(){var t=this.$Bitmap;return isNaN(t[12])?this.$getContentBounds().height:t[12]},i.prototype.$measureContentBounds=function(t){var e=this.$Bitmap;if(e[1]){var i=this.$Bitmap,r=isNaN(i[11])?i[8]:i[11],n=isNaN(i[12])?i[9]:i[12];t.setTo(0,0,r,n)}else{var r=isNaN(e[11])?0:e[11],n=isNaN(e[12])?0:e[12];t.setTo(0,0,r,n)}},i.prototype.$render=function(){var e=this.$Bitmap;if(e[1]){var i=isNaN(e[11])?e[8]:e[11],r=isNaN(e[12])?e[9]:e[12];t.sys.BitmapNode.$updateTextureData(this.$renderNode,e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],i,r,e[13],e[14],this.scale9Grid||e[0].scale9Grid,this.fillMode,e[10])}},Object.defineProperty(i.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r&&this._pixelHitTest&&(r=this.hitTestPixel(t,i)),r},i.prototype.hitTestPixel=function(e,i){var r,n=this.$getInvertedConcatenatedMatrix(),a=n.a*e+n.c*i+n.tx,o=n.b*e+n.d*i+n.ty,s=this.$displayList;if(s){var h=s.renderBuffer;try{r=h.getPixels(a-s.offsetX,o-s.offsetY)}catch(l){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}else{var h=t.sys.customHitTestBuffer;h.resize(3,3);var u=this.$getRenderNode(),c=t.Matrix.create();c.identity(),c.translate(1-a,1-o),t.sys.systemRenderer.drawNodeToBuffer(u,h,c,!0),t.Matrix.release(c);try{r=h.getPixels(1,1)}catch(l){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}return 0===r[3]?null:this},i.$drawImage=function(e,i,r,n,a,o,s,h,l,u,c,p,d,f,g,y,$){console.warn("deprecated method : Bitmap.$drawImage,use egret.sys.BitmapNode.$drawImage instead of it"),t.sys.BitmapNode.$updateTextureData(e,i,r,n,a,o,s,h,l,u,c,p,d,f,g,y,$)},i}(t.DisplayObject);e.defaultSmoothing=!0,t.Bitmap=e,__reflect(e.prototype,"egret.Bitmap")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,a=r.b*e+r.d*i+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(n,a))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var s=this.$children,h=!1,l=null,u=s.length-1;u>=0;u--){var c=s[u];if(!c.$maskedObject&&(l=c.$hitTest(e,i))){if(h=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:h?this:(l=t.DisplayObject.prototype.$hitTest.call(this,e,i),l&&(l=this.$graphics.$hitTest(e,i)),l)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObjectContainer);t.Sprite=e,__reflect(e.prototype,"egret.Sprite")}(egret||(egret={}));var egret;!function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){var t=e.call(this)||this;return t._bitmapX=0,t._bitmapY=0,t._bitmapWidth=0,t._bitmapHeight=0,t._offsetX=0,t._offsetY=0,t._textureWidth=0,t._textureHeight=0,t._sourceWidth=0,t._sourceHeight=0,t._bitmapData=null,t}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),i.prototype.$getTextureWidth=function(){return this._textureWidth},Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),i.prototype.$getTextureHeight=function(){return this._textureHeight},i.prototype.$getScaleBitmapWidth=function(){return this._bitmapWidth*t.$TextureScaleFactor},i.prototype.$getScaleBitmapHeight=function(){return this._bitmapHeight*t.$TextureScaleFactor},Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(t){this._setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){this._bitmapData=e;var i=t.$TextureScaleFactor,r=e.width*i,n=e.height*i;this.$initData(0,0,r,n,0,0,r,n,e.width,e.height)},i.prototype.$initData=function(e,i,r,n,a,o,s,h,l,u){var c=t.$TextureScaleFactor;this._bitmapX=e/c,this._bitmapY=i/c,this._bitmapWidth=r/c,this._bitmapHeight=n/c,this._offsetX=a,this._offsetY=o,this._textureWidth=s,this._textureHeight=h,this._sourceWidth=l,this._sourceHeight=u,t.BitmapData.$invalidate(this)},i.prototype.getPixel32=function(t,e){throw new Error},i.prototype.getPixels=function(t,e,i,r){throw void 0===i&&(i=1),void 0===r&&(r=1),new Error},i.prototype.toDataURL=function(t,e){throw new Error},i.prototype.saveToFile=function(t,e,i){throw new Error},i.prototype.dispose=function(){this._bitmapData&&(this._bitmapData.$dispose(),this._bitmapData=null)},i}(t.HashObject);t.Texture=e,__reflect(e.prototype,"egret.Texture"),t.$markReadOnly(e,"textureWidth"),t.$markReadOnly(e,"textureHeight")}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={})),function(t){var e;!function(e){function i(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.$locale_strings[t.$language][e];if(!n)return"{"+e+"}";for(var a=i.length,o=0;a>o;o++)n=n.replace("{"+o+"}",i[o]);return n}e.tr=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=[],i=Math.PI/180,r=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=r.call(this)||this;return i.x=t,i.y=e,i}return __extends(n,r),n.release=function(t){t&&e.push(t)},n.create=function(t,i){var r=e.pop();return r||(r=new n),r.setTo(t,i)},Object.defineProperty(n.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),n.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.interpolate=function(t,e,i){var r=1-i;return new n(t.x*i+e.x*r,t.y*i+e.y*r)},n.prototype.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},n.prototype.offset=function(t,e){this.x+=t,this.y+=e},n.polar=function(e,r){return new n(e*t.NumberUtils.cos(r/i),e*t.NumberUtils.sin(r/i))},n.prototype.subtract=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},n}(t.HashObject);t.Point=r,__reflect(r.prototype,"egret.Point"),t.$markReadOnly(r,"length"),t.$TempPoint=new r}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function i(){this.type=0,this.needRedraw=!1,this.renderAlpha=1,this.renderVisible=!0,this.renderMatrix=new t.Matrix,this.renderRegion=new e.Region,this.moved=!1,this.drawData=[],this.renderCount=0}return i.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},i.prototype.$getRenderCount=function(){return this.renderCount},i}();e.RenderNode=i,__reflect(i.prototype,"egret.sys.RenderNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}return t.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.curveTo=function(t,e,i,r){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=i,this.$data[n++]=r,this.dataPosition=n},t.prototype.cubicCurveTo=function(t,e,i,r,n,a){this.$commands[this.commandPosition++]=4;var o=this.dataPosition;this.$data[o++]=t,this.$data[o++]=e,this.$data[o++]=i,this.$data[o++]=r,this.$data[o++]=n,this.$data[o++]=a,this.dataPosition=o},t.prototype.drawRect=function(t,e,i,r){var n=t+i,a=e+r;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,a),this.lineTo(t,a),this.lineTo(t,e)},t.prototype.drawRoundRect=function(t,e,i,r,n,a){var o=.5*n|0,s=a?.5*a|0:o;if(!o||!s)return void this.drawRect(t,e,i,r);var h=.5*i,l=.5*r;if(o>h&&(o=h),s>l&&(s=l),h===o&&l===s)return void(o===s?this.drawCircle(t+o,e+s,o):this.drawEllipse(t,e,2*o,2*s));var u=t+i,c=e+r,p=t+o,d=u-o,f=e+s,g=c-s;this.moveTo(u,g),this.curveTo(u,c,d,c),this.lineTo(p,c),this.curveTo(t,c,t,g),this.lineTo(t,f),this.curveTo(t,e,p,e),this.lineTo(d,e),this.curveTo(u,e,u,f),this.lineTo(u,g)},t.prototype.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},t.prototype.drawEllipse=function(t,e,i,r){var n=.5*i,a=.5*r;t+=n,e+=a,this.arcToBezier(t,e,n,a,0,2*Math.PI)},t.prototype.drawArc=function(t,e,i,r,n,a){a?n>=r&&(n-=2*Math.PI):r>=n&&(n+=2*Math.PI),this.arcToBezier(t,e,i,i,r,n,a)},t.prototype.arcToBezier=function(t,e,i,r,n,a,o){var s=.5*Math.PI,h=n,l=h;o?(l+=-s-h%s,a>l&&(l=a)):(l+=s-h%s,l>a&&(l=a));var u=t+Math.cos(h)*i,c=e+Math.sin(h)*r;(this.$lastX!=u||this.$lastY!=c)&&this.moveTo(u,c);for(var p=Math.cos(h),d=Math.sin(h),f=0;4>f;f++){var g=l-h,y=4*Math.tan(g/4)/3,$=u-d*y*i,v=c+p*y*r;p=Math.cos(l),d=Math.sin(l),u=t+p*i,c=e+d*r;var m=u+d*y*i,b=c-p*y*r;if(this.cubicCurveTo($,v,m,b,u,c),l===a)break;h=l,o?(l=h-s,a>l&&(l=a)):(l=h+s,l>a&&(l=a))}},t}();t.Path2D=e,__reflect(e.prototype,"egret.sys.Path2D")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t}t.createMap=e}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n,a,o,s,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===r&&(r=6),void 0===n&&(n=6),void 0===a&&(a=2),void 0===o&&(o=1),void 0===s&&(s=!1),void 0===h&&(h=!1);var l=t.call(this)||this;return l.type="glow",l.$color=e,l.$blue=255&e,l.$green=(65280&e)>>8,l.$red=e>>16,l.$alpha=i,l.$blurX=r,l.$blurY=n,l.$strength=a,l.$quality=o,l.$inner=s,l.$knockout=h,l}return __extends(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},e}(t.Filter);t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret||(egret={}));var egret;!function(t){t.CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"}}(egret||(egret={}));var egret;!function(t){t.DirtyRegionPolicy={OFF:"off",ON:"on"}}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.compileProgram=function(i,r,n){var a=e.compileFragmentShader(i,n),o=e.compileVertexShader(i,r),s=i.createProgram();return i.attachShader(s,o),i.attachShader(s,a),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||t.$warn(1020),s},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(t,e,i){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:null},e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(i){e.canUseWebGL=!1}return e.canUseWebGL},e.deleteWebGLTexture=function(t){if(t){var e=t.glContext;e&&e.deleteTexture(t)}},e}();t.WebGLUtils=e,__reflect(e.prototype,"egret.WebGLUtils")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),t.call(this,e,i,r)||this}return __extends(e,t),e}(t.Event);e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",t.GeolocationEvent=e,__reflect(e.prototype,"egret.GeolocationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var n=e.call(this,t,i,r)||this;return n._status=0,n}return __extends(i,e),Object.defineProperty(i.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),i.dispatchHTTPStatusEvent=function(e,r){var n=t.Event.create(i,i.HTTP_STATUS);n._status=r;var a=e.dispatchEvent(n);return t.Event.release(n),a},i}(t.Event);e.HTTP_STATUS="httpStatus",t.HTTPStatusEvent=e,__reflect(e.prototype,"egret.HTTPStatusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchIOErrorEvent=function(e){var r=t.Event.create(i,i.IO_ERROR),n=e.dispatchEvent(r);return t.Event.release(r),n},i}(t.Event);e.IO_ERROR="ioError",t.IOErrorEvent=e,__reflect(e.prototype,"egret.IOErrorEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.MotionEvent=e,__reflect(e.prototype,"egret.MotionEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.OrientationEvent=e,__reflect(e.prototype,"egret.OrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n,a){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===a&&(a=0);var o=e.call(this,t,i,r)||this;return o.bytesLoaded=0,o.bytesTotal=0,o.bytesLoaded=n,o.bytesTotal=a,o}return __extends(i,e),i.dispatchProgressEvent=function(e,r,n,a){void 0===n&&(n=0),void 0===a&&(a=0);var o=t.Event.create(i,r);o.bytesLoaded=n,o.bytesTotal=a;var s=e.dispatchEvent(o);return t.Event.release(o),s},i}(t.Event);e.PROGRESS="progress",e.SOCKET_DATA="socketData",t.ProgressEvent=e,__reflect(e.prototype,"egret.ProgressEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchStageOrientationEvent=function(e,r){var n=t.Event.create(i,r),a=e.dispatchEvent(n);return t.Event.release(n),a},i}(t.Event);e.ORIENTATION_CHANGE="orientationChange",t.StageOrientationEvent=e,__reflect(e.prototype,"egret.StageOrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n="");var a=e.call(this,t,i,r)||this;return a.text=n,a}return __extends(i,e),i.dispatchTextEvent=function(e,r,n){var a=t.Event.create(i,r);a.text=n;var o=e.dispatchEvent(a);return t.Event.release(a),o},i}(t.Event);e.LINK="link",t.TextEvent=e,__reflect(e.prototype,"egret.TextEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return e.call(this,t,i,r)||this}return __extends(i,e),i.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.dispatchTimerEvent=function(e,r,n,a){var o=t.Event.create(i,r,n,a),s=e.dispatchEvent(o);return t.Event.release(o),s},i}(t.Event);e.TIMER="timer",e.TIMER_COMPLETE="timerComplete",t.TimerEvent=e,__reflect(e.prototype,"egret.TimerEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.format="image",i.$deleteSource=!0,i.source=t,i.width=t.width,i.height=t.height,i}return __extends(i,e),i.prototype.$dispose=function(){t.Capabilities.runtimeType==t.RuntimeType.WEB&&"webgl"==t.Capabilities.renderMode&&this.webGLTexture&&(t.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source=null,i.$dispose(this)},i.$addDisplayObject=function(t,e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode){if(!i._displayList[r])return void(i._displayList[r]=[t]);var n=i._displayList[r];n.indexOf(t)<0&&n.push(t)}},i.$removeDisplayObject=function(t,e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r]){var n=i._displayList[r],a=n.indexOf(t);a>=0&&n.splice(a)}},i.$invalidate=function(e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r])for(var n=i._displayList[r],a=0;a<n.length;a++)n[a]instanceof t.Bitmap&&n[a].$refreshImageData(),n[a].$invalidateContentBounds()},i.$dispose=function(e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r]){for(var n=i._displayList[r],a=0;a<n.length;a++)n[a]instanceof t.Bitmap&&(n[a].$Bitmap[1]=null),n[a].$invalidateContentBounds();delete i._displayList[r]}},i}(t.HashObject);e._displayList=t.createMap(),t.BitmapData=e,__reflect(e.prototype,"egret.BitmapData")}(egret||(egret={}));var egret;!function(t){var e=new t.Point,i=function(i){function r(t,e,r,n,a,o){var s=i.call(this,t,e,r)||this;return s.targetChanged=!0,s.touchDown=!1,s.$initTo(n,a,o),s}return __extends(r,i),r.prototype.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(r.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),r.prototype.getLocalXY=function(){this.targetChanged=!1;var t=this.$target.$getInvertedConcatenatedMatrix();t.transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},r.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},r.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},r.dispatchTouchEvent=function(e,i,n,a,o,s,h,l){if(void 0===l&&(l=!1),!n&&!e.hasEventListener(i))return!0;var u=t.Event.create(r,i,n,a);u.$initTo(o,s,h),u.touchDown=l;var c=e.dispatchEvent(u);return t.Event.release(u),c},r}(t.Event);i.TOUCH_MOVE="touchMove",i.TOUCH_BEGIN="touchBegin",i.TOUCH_END="touchEnd",i.TOUCH_CANCEL="touchcancel",i.TOUCH_TAP="touchTap",i.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",i.TOUCH_ROLL_OUT="touchRollOut",i.TOUCH_ROLL_OVER="touchRollOver",t.TouchEvent=i,__reflect(i.prototype,"egret.TouchEvent"),t.$markReadOnly(i,"stageX"),t.$markReadOnly(i,"stageY"),t.$markReadOnly(i,"localX"),t.$markReadOnly(i,"localY")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){void 0===e&&(e=4),void 0===i&&(i=4),void 0===r&&(r=1);var n=t.call(this)||this;return n.type="blur",n.$blurX=e,n.$blurY=i,n.$quality=r,n}return __extends(e,t),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},e}(t.Filter);t.BlurFilter=e,__reflect(e.prototype,"egret.BlurFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.$matrix=[],i.matrix2=[],i.type="colorTransform",i.setMatrix(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"matrix",{get:function(){for(var t=0;20>t;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.setMatrix=function(t){if(t)for(var e=0;20>e;e++)this.$matrix[e]=t[e];else for(var e=0;20>e;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0},e.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},e}(t.Filter);t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n,a,o,s,h,l,u,c){void 0===e&&(e=4),void 0===i&&(i=45),void 0===r&&(r=0),void 0===n&&(n=1),void 0===a&&(a=4),void 0===o&&(o=4),void 0===s&&(s=1),void 0===h&&(h=1),void 0===l&&(l=!1),void 0===u&&(u=!1),void 0===c&&(c=!1);var p=t.call(this,r,n,a,o,s,h,l,u)||this;return p.$distance=e,p.$angle=i,p.$hideObject=c,p}return __extends(e,t),Object.defineProperty(e.prototype,"distance",{get:function(){return this.$distance},set:function(t){this.$distance!=t&&(this.$distance=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.$angle
},set:function(t){this.$angle!=t&&(this.$angle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},e}(t.GlowFilter);t.DropShadowFilter=e,__reflect(e.prototype,"egret.DropShadowFilter")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.LINEAR="linear",e.RADIAL="radial",t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret||(egret={}));var egret;!function(t){function e(t){return t%=2*Math.PI,0>t&&(t+=2*Math.PI),t}var i=function(i){function r(){var e=i.call(this)||this;return e.lastX=0,e.lastY=0,e.fillPath=null,e.strokePath=null,e.topLeftStrokeWidth=0,e.bottomRightStrokeWidth=0,e.minX=1/0,e.minY=1/0,e.maxX=-(1/0),e.maxY=-(1/0),e.includeLastPosition=!0,e.$renderNode=new t.sys.GraphicsNode,e}return __extends(r,i),r.prototype.$setTarget=function(t){this.targetDisplay&&(this.targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.targetDisplay=t},r.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},r.prototype.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.beginGradientFill=function(t,e,i,r,n){void 0===n&&(n=null),this.fillPath=this.$renderNode.beginGradientFill(t,e,i,r,n,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.endFill=function(){this.fillPath=null},r.prototype.lineStyle=function(t,e,i,r,n,a,o,s){void 0===t&&(t=0/0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===n&&(n="normal"),void 0===a&&(a=null),void 0===o&&(o=null),void 0===s&&(s=3),t=+t||0,0>=t?(this.strokePath=null,this.setStrokeWidth(0)):(e=+e||0,i=+i||0,s=+s||0,this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,i,a,o,s),this.$renderNode.drawData.length>1&&this.strokePath.moveTo(this.lastX,this.lastY))},r.prototype.drawRect=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,a=this.strokePath;n&&n.drawRect(t,e,i,r),a&&a.drawRect(t,e,i,r),this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},r.prototype.drawRoundRect=function(t,e,i,r,n,a){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,a=+a||0;var o=this.fillPath,s=this.strokePath;o&&o.drawRoundRect(t,e,i,r,n,a),s&&s.drawRoundRect(t,e,i,r,n,a);var h=.5*n|0,l=a?.5*a|0:h,u=t+i,c=e+r,p=c-l;this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(u,c),this.updatePosition(u,p),this.$renderNode.dirtyRender=!0},r.prototype.drawCircle=function(t,e,i){t=+t||0,e=+e||0,i=+i||0;var r=this.fillPath,n=this.strokePath;r&&r.drawCircle(t,e,i),n&&n.drawCircle(t,e,i),this.extendBoundsByPoint(t-i,e-i),this.extendBoundsByPoint(t+i,e+i),this.updatePosition(t+i,e),this.$renderNode.dirtyRender=!0},r.prototype.drawEllipse=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,a=this.strokePath;n&&n.drawEllipse(t,e,i,r),a&&a.drawEllipse(t,e,i,r),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t+i,e+.5*r),this.$renderNode.dirtyRender=!0},r.prototype.moveTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,r=this.strokePath;i&&i.moveTo(t,e),r&&r.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e,this.$renderNode.dirtyRender=!0},r.prototype.lineTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,r=this.strokePath;i&&i.lineTo(t,e),r&&r.lineTo(t,e),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},r.prototype.curveTo=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,a=this.strokePath;n&&n.curveTo(t,e,i,r),a&&a.curveTo(t,e,i,r),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.updatePosition(i,r),this.$renderNode.dirtyRender=!0},r.prototype.cubicCurveTo=function(t,e,i,r,n,a){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,a=+a||0;var o=this.fillPath,s=this.strokePath;o&&o.cubicCurveTo(t,e,i,r,n,a),s&&s.cubicCurveTo(t,e,i,r,n,a),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.extendBoundsByPoint(n,a),this.updatePosition(n,a),this.$renderNode.dirtyRender=!0},r.prototype.drawArc=function(t,i,r,n,a,o){if(!(0>r||n===a)){t=+t||0,i=+i||0,r=+r||0,n=+n||0,a=+a||0,o=!!o,n=e(n),a=e(a);var s=this.fillPath,h=this.strokePath;s&&(s.$lastX=this.lastX,s.$lastY=this.lastY,s.drawArc(t,i,r,n,a,o)),h&&(h.$lastX=this.lastX,h.$lastY=this.lastY,h.drawArc(t,i,r,n,a,o)),o?this.arcBounds(t,i,r,a,n):this.arcBounds(t,i,r,n,a);var l=t+Math.cos(a)*r,u=i+Math.sin(a)*r;this.updatePosition(l,u),this.$renderNode.dirtyRender=!0}},r.prototype.arcBounds=function(t,e,i,r,n){var a=Math.PI;if(Math.abs(r-n)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);r>n&&(n+=2*a);for(var o=Math.cos(r)*i,s=Math.cos(n)*i,h=Math.min(o,s),l=Math.max(o,s),u=Math.sin(r)*i,c=Math.sin(n)*i,p=Math.min(u,c),d=Math.max(u,c),f=r/(.5*a),g=n/(.5*a),y=Math.ceil(f);g>=y;y++)switch(y%4){case 0:l=i;break;case 1:d=i;break;case 2:h=-i;break;case 3:p=-i}h=Math.floor(h),p=Math.floor(p),l=Math.ceil(l),d=Math.ceil(d),this.extendBoundsByPoint(h+t,p+e),this.extendBoundsByPoint(l+t,d+e)},r.prototype.clear=function(){this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},r.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},r.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},r.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e),this.targetDisplay.$invalidateContentBounds()},r.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},r.prototype.$hitTest=function(e,i){var r=this.targetDisplay,n=r.$getInvertedConcatenatedMatrix(),a=n.a*e+n.c*i+n.tx,o=n.b*e+n.d*i+n.ty,s=t.sys.canvasHitTestBuffer;s.resize(3,3);var h=this.$renderNode,l=t.Matrix.create();l.identity(),l.translate(1-a,1-o),t.sys.canvasRenderer.drawNodeToBuffer(h,s,l,!0),t.Matrix.release(l);try{var u=s.getPixels(1,1);if(0===u[3])return null}catch(c){throw new Error(t.sys.tr(1039))}return r},r.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean()},r}(t.HashObject);t.Graphics=i,__reflect(i.prototype,"egret.Graphics")}(egret||(egret={}));var egret;!function(t){var e=Math.PI,i=2*e,r=e/180,n=[],a=function(a){function o(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0);var s=a.call(this)||this;return s.a=t,s.b=e,s.c=i,s.d=r,s.tx=n,s.ty=o,s}return __extends(o,a),o.release=function(t){t&&n.push(t)},o.create=function(){var t=n.pop();return t||(t=new o),t},o.prototype.clone=function(){return new o(this.a,this.b,this.c,this.d,this.tx,this.ty)},o.prototype.concat=function(t){var e=this.a*t.a,i=0,r=0,n=this.d*t.d,a=this.tx*t.a+t.tx,o=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(e+=this.b*t.c,n+=this.c*t.b,i+=this.a*t.b+this.b*t.d,r+=this.c*t.a+this.d*t.c,a+=this.ty*t.c,o+=this.tx*t.b),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=a,this.ty=o},o.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},o.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},o.prototype.invert=function(){this.$invertInto(this)},o.prototype.$invertInto=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=this.tx,o=this.ty;if(0==i&&0==r)return t.b=t.c=0,void(0==e||0==n?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,n=t.d=1/n,t.tx=-e*a,t.ty=-n*o));var s=e*n-i*r;if(0==s)return void t.identity();s=1/s;var h=t.a=n*s;i=t.b=-i*s,r=t.c=-r*s,n=t.d=e*s,t.tx=-(h*a+r*o),t.ty=-(i*a+n*o)},o.prototype.rotate=function(e){if(e=+e,0!==e){e/=r;var i=t.NumberUtils.cos(e),n=t.NumberUtils.sin(e),a=this.a,o=this.b,s=this.c,h=this.d,l=this.tx,u=this.ty;this.a=a*i-o*n,this.b=a*n+o*i,this.c=s*i-h*n,this.d=s*n+h*i,this.tx=l*i-u*n,this.ty=l*n+u*i}},o.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},o.prototype.setTo=function(t,e,i,r,n,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a,this},o.prototype.transformPoint=function(e,i,r){var n=this.a*e+this.c*i+this.tx,a=this.b*e+this.d*i+this.ty;return r?(r.setTo(n,a),r):new t.Point(n,a)},o.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},o.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},o.prototype.prepend=function(t,e,i,r,n,a){var o=this.tx;if(1!=t||0!=e||0!=i||1!=r){var s=this.a,h=this.c;this.a=s*t+this.b*i,this.b=s*e+this.b*r,this.c=h*t+this.d*i,this.d=h*e+this.d*r}return this.tx=o*t+this.ty*i+n,this.ty=o*e+this.ty*r+a,this},o.prototype.append=function(t,e,i,r,n,a){var o=this.a,s=this.b,h=this.c,l=this.d;return(1!=t||0!=e||0!=i||1!=r)&&(this.a=t*o+e*h,this.b=t*s+e*l,this.c=i*o+r*h,this.d=i*s+r*l),this.tx=n*o+a*h+this.tx,this.ty=n*s+a*l+this.ty,this},o.prototype.deltaTransformPoint=function(e){var i=this,r=i.a*e.x+i.c*e.y,n=i.b*e.x+i.d*e.y;return new t.Point(r,n)},o.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},o.prototype.createBox=function(e,i,n,a,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=0);var s=this;if(0!==n){n/=r;var h=t.NumberUtils.cos(n),l=t.NumberUtils.sin(n);s.a=h*e,s.b=l*i,s.c=-l*e,s.d=h*i}else s.a=e,s.b=0,s.c=0,s.d=i;s.tx=a,s.ty=o},o.prototype.createGradientBox=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,i,r+t/2,n+e/2)},o.prototype.$transformBounds=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=this.tx,o=this.ty,s=t.x,h=t.y,l=s+t.width,u=h+t.height,c=e*s+r*h+a,p=i*s+n*h+o,d=e*l+r*h+a,f=i*l+n*h+o,g=e*l+r*u+a,y=i*l+n*u+o,$=e*s+r*u+a,v=i*s+n*u+o,m=0;c>d&&(m=c,c=d,d=m),g>$&&(m=g,g=$,$=m),t.x=Math.floor(g>c?c:g),t.width=Math.ceil((d>$?d:$)-t.x),p>f&&(m=p,p=f,f=m),y>v&&(m=y,y=v,v=m),t.y=Math.floor(y>p?p:y),t.height=Math.ceil((f>v?f:v)-t.y)},o.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},o.prototype.$getScaleX=function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},o.prototype.$getScaleY=function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},o.prototype.$getSkewX=function(){return Math.atan2(this.d,this.c)-e/2},o.prototype.$getSkewY=function(){return Math.atan2(this.b,this.a)},o.prototype.$updateScaleAndRotation=function(e,n,a,o){if(!(0!=a&&a!=i||0!=o&&o!=i))return this.a=e,this.b=this.c=0,void(this.d=n);a/=r,o/=r;var s=t.NumberUtils.cos(a),h=t.NumberUtils.sin(a);a==o?(this.a=s*e,this.b=h*e):(this.a=t.NumberUtils.cos(o)*e,this.b=t.NumberUtils.sin(o)*e),this.c=-h*n,this.d=s*n},o.prototype.$preMultiplyInto=function(t,e){var i=t.a*this.a,r=0,n=0,a=t.d*this.d,o=t.tx*this.a+this.tx,s=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(i+=t.b*this.c,a+=t.c*this.b,r+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,o+=t.ty*this.c,s+=t.tx*this.b),e.a=i,e.b=r,e.c=n,e.d=a,e.tx=o,e.ty=s},o}(t.HashObject);t.Matrix=a,__reflect(a.prototype,"egret.Matrix"),t.$TempMatrix=new a}(egret||(egret={}));var egret;!function(t){t.JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"}}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r._verticesDirty=!0,r._bounds=new t.Rectangle,r.$renderNode=new t.sys.MeshNode,r}return __extends(i,e),i.prototype.$render=function(){var e=this.$Bitmap,i=e[1];if(i){var r=(t.$TextureScaleFactor,this.$renderNode);r.smoothing=e[10],r.image=i,r.imageWidth=e[13],r.imageHeight=e[14];var n=isNaN(e[11])?e[8]:e[11],a=isNaN(e[12])?e[9]:e[12],o=n/e[8],s=a/e[9],h=e[4],l=e[5];r.drawMesh(e[2],e[3],h,l,e[6]*o,e[7]*s,o*h,s*l)}},i.prototype.$updateVertices=function(){this._verticesDirty=!0,this.$invalidateContentBounds()},i.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(var r=0,n=i.length;n>r;r+=2){var a=i[r],o=i[r+1];this._bounds.x>a&&(this._bounds.x=a),this._bounds.width<a&&(this._bounds.width=a),this._bounds.y>o&&(this._bounds.y=o),this._bounds.height<o&&(this._bounds.height=o)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i}(t.Bitmap);t.Mesh=e,__reflect(e.prototype,"egret.Mesh")}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]="!",e[1040]="hitTestPoint ! ",e[1041]="{0} , {1} ",e[1042]="drawToTexture,",e[1043]="{0}  : {1} : {2}",e[1044]=" runtime ,",e[1045]="",e[1046]="BitmapText :{0}",e[1047]="egret.localStorage.setItem,key={0}&value={1}",e[1048]="",e[1049]="",e[1050]="ExternalInterfacejs: {0}",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){r.indexOf(t)<0&&r.push(t)}function i(t){var e=r.indexOf(t);return e>=0?(r.splice(e,1),!0):!1}var r=[];t.$pushSoundChannel=e,t.$popSoundChannel=i}(e=t.sys||(t.sys={}))}(egret||(egret={})),function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.onSuccessFunc=null,this.onSuccessThisObject=null,this.onErrorFunc=null,this.onErrorThisObject=null,this.downloadingSizeFunc=null,this.downloadingSizeThisObject=null,this.onResponseHeaderFunc=null,this.onResponseHeaderThisObject=null}return e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new t.PromiseObject},e.prototype.onSuccess=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,t),this.destroy()},e.prototype.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,t),this.destroy()},e.prototype.downloadingSize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,t)},e.prototype.onResponseHeader=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onResponseHeaderFunc&&this.onResponseHeaderFunc.apply(this.onResponseHeaderThisObject,t)},e.prototype.destroy=function(){this.onSuccessFunc=void 0,this.onSuccessThisObject=void 0,this.onErrorFunc=void 0,this.onErrorThisObject=void 0,this.downloadingSizeFunc=void 0,this.downloadingSizeThisObject=void 0,this.onResponseHeaderFunc=void 0,this.onResponseHeaderThisObject=void 0,e.promiseObjectList.push(this)},e}();e.promiseObjectList=[],t.PromiseObject=e,__reflect(e.prototype,"egret.PromiseObject")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.GET="GET",e.POST="POST",t.HttpMethod=e,__reflect(e.prototype,"egret.HttpMethod")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.TEXT="text",e.ARRAY_BUFFER="arraybuffer",t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e){var i=t.minX<e.minX?t.minX:e.minX,r=t.minY<e.minY?t.minY:e.minY,n=t.maxX>e.maxX?t.maxX:e.maxX,a=t.maxY>e.maxY?t.maxY:e.maxY;return(n-i)*(a-r)}var r=function(){function r(e){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.root=e}return r.prototype.setClipRect=function(t,e){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(e),this.clipArea=this.clipWidth*this.clipHeight},r.prototype.addRegion=function(i){var r=i.minX,n=i.minY,a=i.maxX,o=i.maxY;if(this.hasClipRect&&(0>r&&(r=0),0>n&&(n=0),a>this.clipWidth&&(a=this.clipWidth),o>this.clipHeight&&(o=this.clipHeight)),r>=a||n>=o)return!1;if(this.clipRectChanged)return!0;var s=this.dirtyList,h=e.Region.create();return s.push(h.setTo(r,n,a,o)),this.$dirtyRegionPolicy!=t.DirtyRegionPolicy.OFF&&this.mergeDirtyList(s),!0},r.prototype.clear=function(){for(var t=this.dirtyList,i=t.length,r=0;i>r;r++)e.Region.release(t[r]);t.length=0},r.prototype.getDirtyRegions=function(){var i=this.dirtyList;if(this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF||t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&!t["native"].$supportCanvas){this.clipRectChanged=!0,this.clear();var r=e.Region.create();if(this.hasClipRect)i.push(r.setTo(0,0,this.clipWidth,this.clipHeight));else{var n=this.root.$getOriginalBounds();i.push(r.setTo(n.x,n.y,n.width,n.height))}}else if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var r=e.Region.create();i.push(r.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(i););var a=this.dirtyList.length;if(a>0)for(var o=0;a>o;o++)this.dirtyList[o].intValues();return this.dirtyList},r.prototype.mergeDirtyList=function(t){var r=t.length;if(2>r)return!1;for(var n=this.hasClipRect,a=r>3?Number.POSITIVE_INFINITY:0,o=0,s=0,h=0,l=0;r-1>l;l++){var u=t[l];n&&(h+=u.area);for(var c=l+1;r>c;c++){var p=t[c],d=i(u,p)-u.area-p.area;a>d&&(o=l,s=c,a=d)}}if(n&&h/this.clipArea>.95&&(this.clipRectChanged=!0),o!=s){var f=t[s];return t[o].union(f),e.Region.release(f),t.splice(s,1),!0}return!1},r.prototype.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t},r}();e.DirtyRegion=r,__reflect(r.prototype,"egret.sys.DirtyRegion")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(r){var n=i.call(this)||this;return n.isStage=!1,n.$renderNode=new e.BitmapNode,n.renderBuffer=null,n.offsetX=0,n.offsetY=0,n.offsetMatrix=new t.Matrix,n.isDirty=!1,n.needUpdateRegions=!1,n.dirtyNodeList=[],n.dirtyList=null,n.sizeChanged=!1,n.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,n.root=r,n.dirtyRegion=new e.DirtyRegion(r),n.isStage=r instanceof t.Stage,n.dirtyNodes=t.createMap(),n}return __extends(r,i),r.create=function(i){var r=new t.sys.DisplayList(i);try{var n=new e.RenderBuffer;r.renderBuffer=n}catch(a){return null}return r.root=i,r},r.prototype.$getRenderNode=function(){return this.$renderNode},r.prototype.$update=function(e){var i=this.root;if(null==i)return!1;i.$removeFlagsUp(768);var r=this.$renderNode,n=i.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var a=i.$parentDisplayList;if(this.needUpdateRegions&&this.updateDirtyRegions(),!a)return!1;var o=r.renderMatrix;o.copyFrom(n);var s=a.root;s!==i.$stage&&i.$getConcatenatedMatrixAt(s,o)}else{var h=i.$getOriginalBounds(),a=i.$parentDisplayList,l=r.renderRegion;if(this.needUpdateRegions&&this.updateDirtyRegions(),!a)return l.setTo(0,0,0,0),r.moved=!1,!1;if(!r.moved)return!1;r.moved=!1;var o=r.renderMatrix;o.copyFrom(n);var s=a.root;s!==i.$stage&&i.$getConcatenatedMatrixAt(s,o),l.updateRegion(h,o)}return!0},r.prototype.setClipRect=function(t,e){this.dirtyRegion.setClipRect(t,e),this.renderBuffer.resize(t,e)},r.prototype.markDirty=function(t){var e=t.$hashCode;if(!this.dirtyNodes[e]&&(this.dirtyNodes[e]=!0,this.dirtyNodeList.push(t),!this.needUpdateRegions)){this.needUpdateRegions=!0,this.isDirty=!0;var i=this.root.$parentDisplayList;i&&i.markDirty(this)}},r.prototype.updateDirtyRegions=function(){var e=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes=t.createMap(),this.needUpdateRegions=!1;for(var i=this.dirtyRegion,r=e.length,n=0;r>n;n++){var a=e[n],o=a.$getRenderNode();if(o)if(o.needRedraw=!1,this.isStage){o.renderAlpha>0&&o.renderVisible&&i.addRegion(o.renderRegion)&&(o.needRedraw=!0);var s=a.$update(this.$dirtyRegionPolicy);o.renderAlpha>0&&o.renderVisible&&(s||!o.needRedraw)&&i.addRegion(o.renderRegion)&&(o.needRedraw=!0)}else{i.addRegion(o.renderRegion)&&(o.needRedraw=!0);var s=a.$update(this.$dirtyRegionPolicy);(s||!o.needRedraw)&&i.addRegion(o.renderRegion)&&(o.needRedraw=!0)}}return this.dirtyList=i.getDirtyRegions(),this.dirtyList},r.prototype.drawToSurface=function(){var i=0,r=this.dirtyList;if(r&&r.length>0){this.isStage||this.changeSurfaceSize();var n=this.renderBuffer;if(n.beginClip(this.dirtyList,this.offsetX,this.offsetY),r=this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF?null:this.dirtyList,i=e.systemRenderer.render(this.root,n,this.offsetMatrix,r),n.endClip(),!this.isStage){var a=n.surface,o=this.$renderNode;o.drawData.length=0;var s=a.width,h=a.height;this.bitmapData?(this.bitmapData.source=a,this.bitmapData.width=s,this.bitmapData.height=h):this.bitmapData=new t.BitmapData(a),o.image=this.bitmapData,o.imageWidth=s,o.imageHeight=h,o.drawImage(0,0,s,h,-this.offsetX,-this.offsetY,s,h)}}return this.dirtyList=null,this.dirtyRegion.clear(),this.isDirty=!1,i},r.prototype.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,i=this.root.$getOriginalBounds();this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(1,0,0,1,this.offsetX,this.offsetY);var r=this.renderBuffer,n=Math.max(257,i.width),a=Math.max(257,i.height);(this.offsetX!=t||this.offsetY!=e||r.surface.width!=n||r.surface.height!=a)&&(this.sizeChanged?r.resizeTo(n,a,this.offsetX-t,this.offsetY-e):(this.sizeChanged=!0,r.resize(n,a)))},r.prototype.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t,this.dirtyRegion.setDirtyRegionPolicy(t),this.renderBuffer.setDirtyRegionPolicy(t)},r}(t.HashObject);e.DisplayList=i,__reflect(i.prototype,"egret.sys.DisplayList",["egret.sys.Renderable"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(i,r,n,a){if(r&&(t.log=function(){for(var t=arguments.length,i="",r=0;t>r;r++)i+=arguments[r]+" ";e.$logToFPS(i),console.log.apply(console,o(arguments))}),l=a?{}:a,r=!!r,this.showFPS=!!i,this.showLog=r,!this.fps){var s=void 0===a.x?0:a.x,c=void 0===a.y?0:a.y;h=this.fps=new FPS(this.stage,i,r,n,a),h.x=s,h.y=c;for(var p=u.length,d=0;p>d;d++)h.updateInfo(u[d]);u=null}}function r(t){t=!!t,this._showPaintRect!=t&&(this._showPaintRect=t,t?(this.stageDisplayList||(this.stageDisplayList=e.DisplayList.create(this.stage)),this.stage.$displayList=this.stageDisplayList):this.stage.$displayList=this.screenDisplayList)}function n(t){for(var e=t.length,i=[],r=0;e>r;r++){var n=t[r];i[r]=[n.minX,n.minY,n.width,n.height],n.width-=1,n.height-=1}var a=this.paintList;a.push(i),a.length>1&&a.shift();var o=this.screenDisplayList.renderBuffer,s=o.context;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,o.surface.width,o.surface.height),s.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),e=a.length;for(var r=0;e>r;r++){i=a[r];for(var h=i.length-1;h>=0;h--){var l=i[h];this.drawDirtyRect(l[0],l[1],l[2],l[3],s)}}s.save(),s.beginPath(),e=t.length;for(var r=0;e>r;r++){var n=t[r];s.clearRect(n.minX,n.minY,n.width,n.height),s.rect(n.minX,n.minY,n.width,n.height)}s.clip(),s.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),s.restore()}function a(t,e,i,r,n){n.strokeStyle="rgb(255,0,0)",n.lineWidth=5,n.strokeRect(t-.5,e-.5,i,r)}function o(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var s=function(o){function s(e,s,h){var l=o.call(this)||this;return l.isPlaying=!1,e||t.$error(1003,"buffer"),l.entryClassName=h,l.stage=s,l.screenDisplayList=l.createDisplayList(s,e),l.showFPS=!1,l.showLog=!1,l._showPaintRect=!1,l.stageDisplayList=null,l.paintList=[],l.displayFPS=i,l.showPaintRect=r,l.drawPaintRect=n,l.drawDirtyRect=a,l}return __extends(s,o),s.prototype.createDisplayList=function(t,i){var r=new e.DisplayList(t);return r.renderBuffer=i,t.$displayList=r,r},s.prototype.start=function(){!this.isPlaying&&this.stage&&(e.$TempStage=e.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),e.$ticker.$addPlayer(this))},s.prototype.initialize=function(){var e;
if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject?this.stage.addChild(i):t.$error(1002,this.entryClassName)}else t.$error(1001,this.entryClassName)},s.prototype.stop=function(){this.pause(),this.stage=null},s.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,e.$ticker.$removePlayer(this))},s.prototype.$render=function(e,i){(this.showFPS||this.showLog)&&this.stage.addChild(this.fps);var r=this.stage,n=t.getTimer(),a=r.$displayList.updateDirtyRegions(),o=t.getTimer();a=a.concat();var s=r.$displayList.drawToSurface();this._showPaintRect&&this.drawPaintRect(a);var h=t.getTimer();if(e&&this.showFPS){var l=0;if(s>0){for(var u=a.length,c=0,p=0;u>p;p++)c+=a[p].area;l=Math.ceil(1e3*c/(r.stageWidth*r.stageHeight))/10}this.fps.update(s,l,o-n,h-o,i)}},s.prototype.updateStageSize=function(e,i){var r=this.stage;r.$stageWidth=e,r.$stageHeight=i,this.screenDisplayList.setClipRect(e,i),this.stageDisplayList&&this.stageDisplayList.setClipRect(e,i),r.dispatchEventWith(t.Event.RESIZE),r.$invalidate(!0)},s}(t.HashObject);e.Player=s,__reflect(s.prototype,"egret.sys.Player");var h,l,u=[];e.$logToFPS=function(t){return h?void h.updateInfo(t):void u.push(t)},FPS=function(i){function r(e,r,n,a,o){i.call(this),this.isFPS=!0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0,this._stage=e,this.showFPS=r,this.showLog=n,this.logFilter=a,this.touchChildren=!1,this.touchEnabled=!1,this.styles=o,this.fpsDisplay=new t.FPSDisplay(e,r,n,a,o),this.addChild(this.fpsDisplay);var s;try{s=a?new RegExp(a):null}catch(h){t.log(h)}this.filter=function(t){return s?s.test(t):!a||0==t.indexOf(a)}}return __extends(r,i),r.prototype.update=function(i,r,n,a,o){var s=t.getTimer();if(this.totalTime+=s-this.lastTime,this.lastTime=s,this.totalTick++,this.drawCalls+=i,this.dirtyRatio+=r,this.costDirty+=n,this.costRender+=a,this.costTicker+=o,this.totalTime>=1e3){var h=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),e.$ticker.$frameRate),l=Math.round(this.drawCalls/this.totalTick),u=Math.round(this.dirtyRatio/this.totalTick),c=Math.round(this.costDirty/this.totalTick),p=Math.round(this.costRender/this.totalTick),d=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:h,draw:l,dirty:u,costTicker:d,costDirty:c,costRender:p}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0}},r.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},r}(t.Sprite),t.warn=function(){console.warn.apply(console,o(arguments))},t.error=function(){console.error.apply(console,o(arguments))},t.assert=function(){console.assert.apply(console,o(arguments))},t.log=function(){console.log.apply(console,o(arguments))}}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"}}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=[],i=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}return t.release=function(t){e.push(t)},t.create=function(){var i=e.pop();return i||(i=new t),i},t.prototype.setTo=function(t,e,i,r){return this.minX=t,this.minY=e,this.maxX=i,this.maxY=r,this.updateArea(),this},t.prototype.intValues=function(){this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this.updateArea()},t.prototype.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},t.prototype.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},t.prototype.intersect=function(t){return this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?void this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?void this.setEmpty():void this.updateArea())},t.prototype.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},t.prototype.isEmpty=function(){return this.width<=0||this.height<=0},t.prototype.intersects=function(t){if(this.isEmpty())return!1;var e=this.minX>t.minX?this.minX:t.minX,i=this.maxX<t.maxX?this.maxX:t.maxX;return e>i?!1:(e=this.minY>t.minY?this.minY:t.minY,i=this.maxY<t.maxY?this.maxY:t.maxY,i>=e)},t.prototype.updateRegion=function(t,e){if(0==t.width||0==t.height)return void this.setEmpty();var i,r,n,a,o=e,s=o.a,h=o.b,l=o.c,u=o.d,c=o.tx,p=o.ty,d=t.x,f=t.y,g=d+t.width,y=f+t.height;if(1==s&&0==h&&0==l&&1==u)i=d+c-1,r=f+p-1,n=g+c+1,a=y+p+1;else{var $=s*d+l*f+c,v=h*d+u*f+p,m=s*g+l*f+c,b=h*g+u*f+p,x=s*g+l*y+c,T=h*g+u*y+p,_=s*d+l*y+c,O=h*d+u*y+p,E=0;$>m&&(E=$,$=m,m=E),x>_&&(E=x,x=_,_=E),i=(x>$?$:x)-1,n=(m>_?m:_)+1,v>b&&(E=v,v=b,b=E),T>O&&(E=T,T=O,O=E),r=(T>v?v:T)-1,a=(b>O?b:O)+1}this.minX=i,this.minY=r,this.maxX=n,this.maxY=a,this.width=n-i,this.height=a-r,this.area=this.width*this.height},t}();t.Region=i,__reflect(i.prototype,"egret.sys.Region")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.calculateStageSize=function(e,i,r,n,a){var o=i,s=r,h=n,l=a,u=i/h||0,c=r/l||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:h=Math.round(i/c);break;case t.StageScaleMode.FIXED_WIDTH:l=Math.round(r/u);break;case t.StageScaleMode.NO_BORDER:u>c?s=Math.round(l*u):o=Math.round(h*c);break;case t.StageScaleMode.SHOW_ALL:u>c?o=Math.round(h*c):s=Math.round(l*u);break;case t.StageScaleMode.FIXED_NARROW:u>c?h=Math.round(i/c):l=Math.round(r/u);break;case t.StageScaleMode.FIXED_WIDE:u>c?l=Math.round(r/u):h=Math.round(i/c);break;default:h=i,l=r}return o%2!=0&&(o+=1),s%2!=0&&(s+=1),{stageWidth:h,stageHeight:l,displayWidth:o,displayHeight:s}},i}(t.HashObject);e.DefaultScreenAdapter=i,__reflect(i.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.NO_SCALE="noScale",e.SHOW_ALL="showAll",e.NO_BORDER="noBorder",e.EXACT_FIT="exactFit",e.FIXED_WIDTH="fixedWidth",e.FIXED_HEIGHT="fixedHeight",e.FIXED_NARROW="fixedNarrow",e.FIXED_WIDE="fixedWide",t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.$START_TIME=0,e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,e.$ticker&&t.$error(1008,"egret.sys.SystemTicker"),e.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}return i.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(egret_stages.push(t.stage),this.playerList=this.playerList.concat(),this.playerList.push(t))},i.prototype.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){var i=egret_stages.indexOf(t.stage);egret_stages.splice(i,1),this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},i.prototype.$startTick=function(t,e){var i=this.getTickIndex(t,e);-1==i&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},i.prototype.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},i.prototype.getTickIndex=function(t,e){for(var i=this.callBackList,r=this.thisObjectList,n=i.length-1;n>=0;n--)if(i[n]==t&&r[n]==e)return n;return-1},i.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},i.prototype.$setFrameRate=function(e){return e=+e||0,0>=e?!1:this.$frameRate==e?!1:(this.$frameRate=e,e>60&&(e=60),t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&(egret_native.setFrameRate(e),e=60),this.frameDeltaTime=1e3/e,this.lastCount=this.frameInterval=Math.round(6e4/e),!0)},i.prototype.update=function(){var i=t.getTimer(),r=this.callBackList,n=this.thisObjectList,a=r.length,o=e.$requestRenderingFlag,s=t.getTimer();this.callLaterAsyncs();for(var h=0;a>h;h++)r[h].call(n[h],s)&&(o=!0);var l=t.getTimer(),u=s-this.lastTimeStamp;if(this.lastTimeStamp=s,u>=this.frameDeltaTime)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return void(o&&this.render(!1,this.costEnterFrame+l-i));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+l-i);var c=t.getTimer();this.broadcastEnterFrame();var p=t.getTimer();this.costEnterFrame=p-c},i.prototype.render=function(t,i){var r=this.playerList,n=r.length;if(0!=n){this.callLaters(),e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var a=0;n>a;a++)r[a].$render(t,i);e.$requestRenderingFlag=!1}},i.prototype.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.ENTER_FRAME)}},i.prototype.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.RENDER)}},i.prototype.callLaters=function(){var e,i,r;if(t.$callLaterFunctionList.length>0&&(e=t.$callLaterFunctionList,t.$callLaterFunctionList=[],i=t.$callLaterThisList,t.$callLaterThisList=[],r=t.$callLaterArgsList,t.$callLaterArgsList=[]),e)for(var n=e.length,a=0;n>a;a++){var o=e[a];null!=o&&o.apply(i[a],r[a])}},i.prototype.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,r=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var n=0;n<e.length;n++){var a=e[n];null!=a&&a.apply(i[n],r[n])}}},i}();e.SystemTicker=i,__reflect(i.prototype,"egret.sys.SystemTicker"),e.$ticker=new e.SystemTicker}(e=t.sys||(t.sys={}))}(egret||(egret={})),egret_stages=[];var egret;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this)||this;return i.maxTouches=0,i.useTouchesCount=0,i.touchDownTarget={},i.lastTouchX=-1,i.lastTouchY=-1,i.stage=t,i}return __extends(i,e),i.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.prototype.onTouchBegin=function(e,i,r){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);null==this.touchDownTarget[r]&&(this.touchDownTarget[r]=n,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,r,!0)}},i.prototype.onTouchMove=function(e,i,r){if(null!=this.touchDownTarget[r]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,r,!0)}},i.prototype.onTouchEnd=function(e,i,r){if(null!=this.touchDownTarget[r]){var n=this.findTarget(e,i),a=this.touchDownTarget[r];delete this.touchDownTarget[r],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_END,!0,!0,e,i,r,!1),a==n?t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,r,!1):t.TouchEvent.dispatchTouchEvent(a,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,r,!1)}},i.prototype.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,__reflect(i.prototype,"egret.sys.TouchHandler")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=0/0,t.filter=null,t.type=1,t}return __extends(i,e),i.prototype.drawImage=function(t,e,i,r,n,a,o,s){this.drawData.push(t,e,i,r,n,a,o,s),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=0/0,this.filter=null},i.$updateTextureData=function(e,r,n,a,o,s,h,l,u,c,p,d,f,g,y,$,v){if(r){var m=t.$TextureScaleFactor;if(e.smoothing=v,e.image=r,e.imageWidth=f,e.imageHeight=g,y)i.$updateTextureDataWithScale9Grid(e,y,n,a,o,s,h,l,u,c,p,d);else if($==t.BitmapFillMode.SCALE){var b=p/u*m,x=d/c*m;e.drawImage(n,a,o,s,b*h,x*l,b*o,x*s)}else if($==t.BitmapFillMode.CLIP){var T=Math.min(u,p),_=Math.min(c,d),O=o*m,E=s*m;i.drawClipImage(e,m,n,a,O,E,h,l,T,_)}else for(var O=o*m,E=s*m,F=0;p>F;F+=u)for(var w=0;d>w;w+=c){var T=Math.min(p-F,u),_=Math.min(d-w,c);i.drawClipImage(e,m,n,a,O,E,h,l,T,_,F,w)}}},i.$updateTextureDataWithScale9Grid=function(e,i,r,n,a,o,s,h,l,u,c,p){var d=a,f=o;c-=l-a*t.$TextureScaleFactor,p-=u-o*t.$TextureScaleFactor;var g=i.x-s,y=i.y-h,$=g/t.$TextureScaleFactor,v=y/t.$TextureScaleFactor,m=i.width/t.$TextureScaleFactor,b=i.height/t.$TextureScaleFactor;0==b&&(b=1,v>=f&&v--),0==m&&(m=1,$>=d&&$--);var x=r,T=x+$,_=T+m,O=d-$-m,E=n,F=E+v,w=F+b,R=f-v-b,C=O*t.$TextureScaleFactor,S=R*t.$TextureScaleFactor;if(($+O)*t.$TextureScaleFactor>c||(v+R)*t.$TextureScaleFactor>p)return void e.drawImage(r,n,a,o,s,h,c,p);var P=s,D=P+g,L=P+(c-C),M=c-g-C,A=h,N=A+y,B=A+p-S,I=p-y-S;v>0&&($>0&&e.drawImage(x,E,$,v,P,A,g,y),m>0&&e.drawImage(T,E,m,v,D,A,M,y),O>0&&e.drawImage(_,E,O,v,L,A,C,y)),b>0&&($>0&&e.drawImage(x,F,$,b,P,N,g,I),m>0&&e.drawImage(T,F,m,b,D,N,M,I),O>0&&e.drawImage(_,F,O,b,L,N,C,I)),R>0&&($>0&&e.drawImage(x,w,$,R,P,B,g,S),m>0&&e.drawImage(T,w,m,R,D,B,M,S),O>0&&e.drawImage(_,w,O,R,L,B,C,S))},i.drawClipImage=function(t,e,i,r,n,a,o,s,h,l,u,c){void 0===u&&(u=0),void 0===c&&(c=0);var p=o+n-h;p>0&&(n-=p),p=s+a-l,p>0&&(a-=p),t.drawImage(i,r,n/e,a/e,u+o,c+s,n,a)},i}(e.RenderNode);e.BitmapNode=i,__reflect(i.prototype,"egret.sys.BitmapNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=["none","round","square"],r=["bevel","miter","round"],n=function(n){function a(){var t=n.call(this)||this;return t.dirtyRender=!0,t.type=3,t}return __extends(a,n),a.prototype.beginFill=function(t,i,r){void 0===i&&(i=1);var n=new e.FillPath;if(n.fillColor=t,n.fillAlpha=i,r){var a=this.drawData.lastIndexOf(r);this.drawData.splice(a,0,n)}else this.drawData.push(n);return n},a.prototype.beginGradientFill=function(i,r,n,a,o,s){var h=new t.Matrix;o?(h.a=819.2*o.a,h.b=819.2*o.b,h.c=819.2*o.c,h.d=819.2*o.d,h.tx=o.tx,h.ty=o.ty):(h.a=100,h.d=100);var l=new e.GradientFillPath;if(l.gradientType=i,l.colors=r,l.alphas=n,l.ratios=a,l.matrix=h,s){var u=this.drawData.lastIndexOf(s);this.drawData.splice(u,0,l)}else this.drawData.push(l);return l},a.prototype.lineStyle=function(n,a,o,s,h,l){void 0===o&&(o=1),void 0===l&&(l=3),-1==i.indexOf(s)&&(s="round"),-1==r.indexOf(h)&&(h="round");var u=new e.StrokePath;return u.lineWidth=n,u.lineColor=a,u.lineAlpha=o,u.caps=s||t.CapsStyle.ROUND,u.joints=h,u.miterLimit=l,this.drawData.push(u),u},a.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0},a.prototype.cleanBeforeRender=function(){},a.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},a}(e.RenderNode);e.GraphicsNode=n,__reflect(n.prototype,"egret.sys.GraphicsNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=4,e}return __extends(e,t),e.prototype.addNode=function(t){this.drawData.push(t)},e.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;e>=0;e--)t[e].cleanBeforeRender()},e.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;i>=0;i--)t+=e[i].$getRenderCount();return t},e}(t.RenderNode);t.GroupNode=e,__reflect(e.prototype,"egret.sys.GroupNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.image=null,i.smoothing=!0,i.bounds=new t.Rectangle,i.type=7,i.vertices=[],i.uvs=[],i.indices=[],i}return __extends(i,e),i.prototype.drawMesh=function(t,e,i,r,n,a,o,s){this.drawData.push(t,e,i,r,n,a,o,s),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i}(e.RenderNode);e.MeshNode=i,__reflect(i.prototype,"egret.sys.MeshNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i.$renderBuffer=new t.sys.RenderBuffer;var r=new t.BitmapData(i.$renderBuffer.surface);return r.$deleteSource=!1,i._setBitmapData(r),i}return __extends(i,e),i.prototype.drawToTexture=function(e,i,r){if(void 0===r&&(r=1),i&&(0==i.width||0==i.height))return!1;var n=i||e.$getOriginalBounds();if(0==n.width||0==n.height)return!1;r/=t.$TextureScaleFactor;var a=(n.x+n.width)*r,o=(n.y+n.height)*r;i&&(a=n.width*r,o=n.height*r);var s=this.$renderBuffer;if(!s)return!1;s.resize(a,o),this._bitmapData.width=a,this._bitmapData.height=o;var h=t.Matrix.create();return h.identity(),i&&h.translate(-i.x,-i.y),h.scale(r,r),t.sys.systemRenderer.render(e,s,h,null,!0),t.Matrix.release(h),this.$initData(0,0,a,o,0,0,a,o,a,o),!0},i.prototype.getPixel32=function(e,i){var r;if(this.$renderBuffer){var n=t.$TextureScaleFactor;e=Math.round(e/n),i=Math.round(i/n),r=this.$renderBuffer.getPixels(e,i,1,1)}return r},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.$renderBuffer=null},i}(t.Texture);t.RenderTexture=e,__reflect(e.prototype,"egret.RenderTexture")}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=6,e}return __extends(e,t),e.prototype.setAlpha=function(t){0!=this.drawData.length&&(this.drawData.length=0),this.drawData.push(t),this.renderCount++},e}(t.RenderNode);t.SetAlphaNode=e,__reflect(e.prototype,"egret.sys.SetAlphaNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}return __extends(i,e),i.prototype.drawText=function(t,e,i,r){this.drawData.push(t,e,i,r),this.renderCount++,this.dirtyRender=!0},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this)},i.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},i}(e.RenderNode);e.TextNode=i,__reflect(i.prototype,"egret.sys.TextNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=1,e}return __extends(e,t),e}(t.Path2D);t.FillPath=e,__reflect(e.prototype,"egret.sys.FillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=2,e}return __extends(e,t),e}(t.Path2D);t.GradientFillPath=e,__reflect(e.prototype,"egret.sys.GradientFillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=this.$graphics.$hitTest(t,i)),r},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObject);t.Shape=e,__reflect(e.prototype,"egret.Shape"),t.$markReadOnly(e,"graphics")}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=3,e}return __extends(e,t),e}(t.Path2D);t.StrokePath=e,__reflect(e.prototype,"egret.sys.StrokePath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(t,e){var i=null==e.italic?t.italic:e.italic,r=null==e.bold?t.bold:e.bold,n=null==e.size?t.size:e.size,a=e.fontFamily||t.fontFamily,o=i?"italic ":"normal ";return o+=r?"bold ":"normal ",o+=n+"px "+a}function i(t,e){var i=t>>16,r=t>>8&255,n=255&t;return"rgba("+i+","+r+","+n+","+e+")"}function r(e,r,n,a,o,s){var h;h=r==t.GradientType.LINEAR?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(0,0,0,0,0,1);for(var l=n.length,u=0;l>u;u++)h.addColorStop(o[u]/255,i(n[u],a[u]));return h}function n(t,e,i){void 0===i&&(i=0);for(var r=0,n=e.length;n>r;r++)t[r+i]=e[r]}function a(t,e,i,r){for(var n=r[0],a=r[1],o=r[2],s=r[3],h=r[4],l=r[5],u=r[6],c=r[7],p=r[8],d=r[9],f=r[10],g=r[11],y=r[12],$=r[13],v=r[14],m=r[15],b=r[16],x=r[17],T=r[18],_=r[19],O=0,E=e*i*4;E>O;O+=4){var F=t[O+0],w=t[O+1],R=t[O+2],C=t[O+3];t[O+0]=n*F+a*w+o*R+s*C+h,t[O+1]=l*F+u*w+c*R+p*C+d,t[O+2]=f*F+g*w+y*R+$*C+v,t[O+3]=m*F+b*w+x*R+T*C+_}}function o(t,e,i,r,n){s(t,e,i,r),h(t,e,i,n)}function s(t,e,i,r){var a;a=T?new Uint8ClampedArray(4*e):new Array(4*e);for(var o=4*e,s=2*r+1,h=0;i>h;h++){for(var l=h*o,u=0,c=0,p=0,d=0,f=0,g=0,y=4*-r,$=4*r+4;$>y;y+=4){var v=l+y;l>v||v>=l+o||(f=t[v+3],u+=t[v+0]*f,c+=t[v+1]*f,p+=t[v+2]*f,d+=f)}for(var y=l,$=l+o,m=0,b=y-4*r,x=y+4*(r+1);$>y;y+=4,m+=4,x+=4,b+=4)0===d?(a[m+0]=0,a[m+1]=0,a[m+2]=0,a[m+3]=0):(a[m+0]=u/d,a[m+1]=c/d,a[m+2]=p/d,a[m+3]=d/s),f=t[x+3],g=t[b+3],f||0==f?g||0==g?(u+=t[x+0]*f-t[b+0]*g,c+=t[x+1]*f-t[b+1]*g,p+=t[x+2]*f-t[b+2]*g,d+=f-g):(u+=t[x+0]*f,c+=t[x+1]*f,p+=t[x+2]*f,d+=f):(g||0==g)&&(u+=-t[b+0]*g,c+=-t[b+1]*g,p+=-t[b+2]*g,d+=-g);T?t.set(a,l):n(t,a,l)}}function h(t,e,i,r){var n;n=T?new Uint8ClampedArray(4*i):new Array(4*i);for(var a=4*e,o=2*r+1,s=0;e>s;s++){for(var h=4*s,l=0,u=0,c=0,p=0,d=0,f=0,g=-r*a,y=r*a+a;y>g;g+=a){var $=h+g;h>$||$>=h+i*a||(d=t[$+3],l+=t[$+0]*d,u+=t[$+1]*d,c+=t[$+2]*d,p+=d)}for(var g=h,y=h+i*a,v=0,m=h-r*a,b=h+(r+1)*a;y>g;g+=a,v+=4,b+=a,m+=a)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=l/p,n[v+1]=u/p,n[v+2]=c/p,n[v+3]=p/o),d=t[b+3],f=t[m+3],d||0==d?f||0==f?(l+=t[b+0]*d-t[m+0]*f,u+=t[b+1]*d-t[m+1]*f,c+=t[b+2]*d-t[m+2]*f,p+=d-f):(l+=t[b+0]*d,u+=t[b+1]*d,c+=t[b+2]*d,p+=d):(f||0==f)&&(l+=-t[m+0]*f,u+=-t[m+1]*f,c+=-t[m+2]*f,p+=-f);for(var x=4*s,y=x+i*a,_=0;y>x;x+=a,_+=4)t[x+0]=n[_+0],t[x+1]=n[_+1],t[x+2]=n[_+2],t[x+3]=n[_+3]}}function l(t,e,i,r,a,s,h,l,f){var g=u(t,r);c(g,e,i,h,l),o(g,e,i,a,s),p(g,f),d(g,t),t.set(g),T?t.set(g):n(t,g)}function u(t,e){e||(e=[0,0,0,0]);var i;T?i=new Uint8ClampedArray(t):(i=new Array(t.length),n(i,t));for(var r=0,a=i.length;a>r;r+=4){var o=i[r+3];i[r+0]=e[0]*o,i[r+1]=e[1]*o,i[r+2]=e[2]*o}return i}function c(t,e,i,r,a){var o,s,h=Math.sin(r)*a|0,l=Math.cos(r)*a|0;if(T){o=new Int32Array(t.buffer),s=new Int32Array(o.length);for(var u=0;i>u;u++){var c=u+h;if(!(0>c||c>i))for(var p=0;e>p;p++){var d=p+l;0>d||d>e||(s[c*e+d]=o[u*e+p])}}o.set(s)}else{o=t,s=new Array(o.length);for(var u=0;i>u;u++){var c=u+h;if(!(0>c||c>i))for(var p=0;e>p;p++){var d=p+l;0>d||d>e||(s[4*(c*e+d)+0]=o[4*(u*e+p)+0],s[4*(c*e+d)+1]=o[4*(u*e+p)+1],s[4*(c*e+d)+2]=o[4*(u*e+p)+2],s[4*(c*e+d)+3]=o[4*(u*e+p)+3])}}n(o,s)}}function p(t,e){for(var i=0,r=t.length;r>i;i+=4)t[i+3]*=e}function d(t,e){for(var i=0,r=t.length;r>i;i+=4){var n=t[i+0],a=t[i+1],o=t[i+2],s=t[i+3]/255,h=e[i+0],l=e[i+1],u=e[i+2],c=e[i+3]/255;t[i+0]=h+n*(1-c),t[i+1]=l+a*(1-c),t[i+2]=u+o*(1-c),t[i+3]=255*(c+s*(1-c))}}function f(t,e,i){return t*(1-i)+e*i}function g(t,e,i,r,a,o,s,h,l,u,c,p){var d;d=T?new Uint8ClampedArray(t.length):new Array(t.length);for(var g,y,$=r[3],v=0,m=0,b=h*Math.cos(s),x=h*Math.sin(s),_=7,O=12,E=3.141592653589793,F=a/_,w=o/_,R=0;e>R;R++)for(var C=0;i>C;C++){for(var S=0,P=C*e*4+4*R,D=0,L=0,M=t[P+0]/255,A=t[P+1]/255,N=t[P+2]/255,B=t[P+3]/255,I=0;2*E>=I;I+=2*E/O){g=Math.cos(I+S),y=Math.sin(I+S);for(var k=0;_>k;k++){v=k*F*g,m=k*w*y;var j=Math.round(R+v-b),U=Math.round(C+m-x),X=0;if(j>=e||0>j||0>U||U>=i)X=0;else{var Y=U*e*4+4*j;X=t[Y+3]/255}D+=(_-k)*X,L+=_-k}}B=Math.max(B,1e-4);var H=D/L*l*$*(1-u)*Math.max(Math.min(p,c),1-B),W=(L-D)/L*l*$*u*B;B=Math.max(B*c*(1-p),1e-4);var G=W/(W+B),V=f(M,r[0],G),z=f(A,r[1],G),Z=f(N,r[2],G),q=H/(W+B+H),J=f(V,r[0],q),K=f(z,r[1],q),Q=f(Z,r[2],q),te=Math.min(B+H+W,1);d[P+0]=255*J,d[P+1]=255*K,d[P+2]=255*Q,d[P+3]=255*te}T?t.set(d):n(t,d)}var y=["source-over","lighter","destination-out"],$="source-over",v="#000000",m={none:"butt",square:"square",round:"round"},b=[],x=function(){function n(){this.nestLevel=0,this.renderingMask=!1}return n.prototype.render=function(t,e,i,r,n){this.nestLevel++;var a=e.context,o=n?t:null,s=this.drawDisplayObject(t,a,r,i,null,null,o);if(this.nestLevel--,0===this.nestLevel){b.length>6&&(b.length=6);for(var h=b.length,l=0;h>l;l++)b[l].resize(0,0)}return s},n.prototype.drawDisplayObject=function(e,i,r,n,a,o,s){var h,l=0;if(a&&!s?(a.isDirty&&(l+=a.drawToSurface()),h=a.$renderNode):h=e.$getRenderNode(),h){if(r){var u=h.renderRegion;if(o&&!o.intersects(u))h.needRedraw=!1;else if(!h.needRedraw)for(var c=r.length,p=0;c>p;p++)if(u.intersects(r[p])){h.needRedraw=!0;break}}else h.needRedraw=!0;if(h.needRedraw){var d=void 0,f=void 0;s?(d=e.$getConcatenatedAlphaAt(s,e.$getConcatenatedAlpha()),f=t.Matrix.create().copyFrom(e.$getConcatenatedMatrix()),e.$getConcatenatedMatrixAt(s,f),n.$preMultiplyInto(f,f),i.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),t.Matrix.release(f)):(d=h.renderAlpha,f=h.renderMatrix,i.setTransform(f.a,f.b,f.c,f.d,f.tx+n.tx,f.ty+n.ty)),i.globalAlpha=d,l+=this.renderNode(h,i),h.needRedraw=!1}}if(a&&!s)return l;var g=e.$children;if(g)for(var y=g.length,$=0;y>$;$++){var v=g[$];if(!(!v.$visible||v.$alpha<=0||v.$maskedObject)){var m=v.$getFilters();m&&m.length>0?l+=this.drawWithFilter(v,i,r,n,o,s):0!==v.$blendMode||v.$mask&&(v.$mask.$parentDisplayList||s)?l+=this.drawWithClip(v,i,r,n,o,s):v.$scrollRect||v.$maskRect?l+=this.drawWithScrollRect(v,i,r,n,o,s):v.isFPS?this.drawDisplayObject(v,i,r,n,v.$displayList,o,s):l+=this.drawDisplayObject(v,i,r,n,v.$displayList,o,s)}}return l},n.prototype.drawWithFilter=function(e,i,r,n,s,h){if(t.Capabilities.runtimeType==t.RuntimeType.NATIVE){var u,c=0,p=e.$getFilters(),d=0!==e.$blendMode;if(d&&(u=y[e.$blendMode],u||(u=$)),1==p.length&&"colorTransform"==p[0].type&&!e.$children)return d&&(i.globalCompositeOperation=u),i.setGlobalShader(p[0]),c+=e.$mask&&(e.$mask.$parentDisplayList||h)?this.drawWithClip(e,i,r,n,s,h):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,i,r,n,s,h):this.drawDisplayObject(e,i,r,n,e.$displayList,s,h),i.setGlobalShader(null),d&&(i.globalCompositeOperation=$),c;var f=t.Matrix.create();f.copyFrom(e.$getConcatenatedMatrix()),h&&e.$getConcatenatedMatrixAt(h,f);var v;v=t.sys.Region.create();var m=e.$getOriginalBounds();v.updateRegion(m,f);var x=this.createRenderBuffer(v.width,v.height);x.context.setTransform(1,0,0,1,-v.minX,-v.minY);var T=t.Matrix.create().setTo(1,0,0,1,-v.minX,-v.minY);return c+=e.$mask&&(e.$mask.$parentDisplayList||h)?this.drawWithClip(e,x.context,r,T,v,h):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,x.context,r,T,v,h):this.drawDisplayObject(e,x.context,r,T,e.$displayList,v,h),t.Matrix.release(T),c>0&&(d&&(i.globalCompositeOperation=u),c++,i.globalAlpha=1,i.setTransform(1,0,0,1,v.minX+n.tx,v.minY+n.ty),i.setGlobalShader(p[0]),i.drawImage(x.surface,0,0,x.width,x.height,0,0,x.width,x.height),i.setGlobalShader(null),d&&(i.globalCompositeOperation=$)),b.push(x),t.sys.Region.release(v),t.Matrix.release(f),c}var _,O=0,E=e.$getFilters(),F=E.length,w=0!==e.$blendMode;w&&(_=y[e.$blendMode],_||(_=$));var R=t.Matrix.create();R.copyFrom(e.$getConcatenatedMatrix()),h&&e.$getConcatenatedMatrixAt(h,R);var C;C=t.sys.Region.create();var S=e.$getOriginalBounds();C.updateRegion(S,R);var P=this.createRenderBuffer(C.width,C.height),D=P.context;D.setTransform(1,0,0,1,-C.minX,-C.minY);var L=t.Matrix.create().setTo(1,0,0,1,-C.minX,-C.minY);if(O+=e.$mask&&(e.$mask.$parentDisplayList||h)?this.drawWithClip(e,D,r,L,C,h):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,D,r,L,C,h):this.drawDisplayObject(e,D,r,L,e.$displayList,C,h),t.Matrix.release(L),O>0){w&&(i.globalCompositeOperation=_),O++,i.globalAlpha=1,i.setTransform(1,0,0,1,C.minX+n.tx,C.minY+n.ty);for(var M=D.getImageData(0,0,P.surface.width,P.surface.height),A=0;F>A;A++){var N=E[A];if("colorTransform"==N.type)a(M.data,P.surface.width,P.surface.height,N.$matrix);else if("blur"==N.type)o(M.data,P.surface.width,P.surface.height,N.$blurX,N.$blurY);else if("glow"==N.type){var B=N.$red,I=N.$green,k=N.$blue,j=N.$alpha;N.$inner||N.$knockout||N.$hideObject?g(M.data,P.surface.width,P.surface.height,[B/255,I/255,k/255,j],N.$blurX,N.$blurY,N.$angle?N.$angle/180*Math.PI:0,N.$distance||0,N.$strength,N.$inner?1:0,N.$knockout?0:1,N.$hideObject?1:0):l(M.data,P.surface.width,P.surface.height,[B/255,I/255,k/255,j/255],N.$blurX,N.$blurY,N.$angle?N.$angle/180*Math.PI:0,N.$distance||0,N.$strength)}}D.putImageData(M,0,0),i.drawImage(P.surface,0,0),w&&(i.globalCompositeOperation=$)}return b.push(P),t.sys.Region.release(C),t.Matrix.release(R),O},n.prototype.drawWithClip=function(e,i,r,n,a,o){var s,h=0,l=0!==e.$blendMode;l&&(s=y[e.$blendMode],s||(s=$));var u,c=e.$scrollRect?e.$scrollRect:e.$maskRect,p=e.$mask;if(p&&(u=p.$getRenderNode())){var d=u.renderMatrix;if(0==d.a&&0==d.b||0==d.c&&0==d.d)return h}var f,g=t.Matrix.create();if(g.copyFrom(e.$getConcatenatedMatrix()),e.$parentDisplayList){var v=e.$parentDisplayList.root;v!==e.$stage&&e.$getConcatenatedMatrixAt(v,g)}var m;if(p){m=p.$getOriginalBounds(),f=t.sys.Region.create();var x=t.Matrix.create();x.copyFrom(p.$getConcatenatedMatrix()),f.updateRegion(m,x),t.Matrix.release(x)}var T;if(c&&(T=t.sys.Region.create(),T.updateRegion(c,g)),T&&f?(T.intersect(f),t.sys.Region.release(f)):!T&&f&&(T=f),T){if(T.isEmpty()||a&&!a.intersects(T))return t.sys.Region.release(T),t.Matrix.release(g),h}else T=t.sys.Region.create(),m=e.$getOriginalBounds(),T.updateRegion(m,g);var _=!1;if(r){for(var O=r.length,E=0;O>E;E++)if(T.intersects(r[E])){_=!0;break}}else _=!0;if(!_)return t.sys.Region.release(T),t.Matrix.release(g),h;if(!(p||e.$children&&0!=e.$children.length)){if(c){var x=g;i.save(),i.setTransform(x.a,x.b,x.c,x.d,x.tx-T.minX,x.ty-T.minY),i.beginPath(),i.rect(c.x,c.y,c.width,c.height),i.clip()}return l&&(i.globalCompositeOperation=s),h+=this.drawDisplayObject(e,i,r,n,e.$displayList,a,o),l&&(i.globalCompositeOperation=$),c&&i.restore(),h}if(p&&t.Capabilities.$runtimeType==t.RuntimeType.WEB&&(!p.$children||0==p.$children.length)&&u&&3==u.type&&1==u.drawData.length&&1==u.drawData[0].type&&1==u.drawData[0].fillAlpha){this.renderingMask=!0,i.save();var F=this.drawDisplayObject(p,i,r,n,p.$displayList,a,o);if(this.renderingMask=!1,c){var x=g;i.setTransform(x.a,x.b,x.c,x.d,x.tx-T.minX,x.ty-T.minY),i.beginPath(),i.rect(c.x,c.y,c.width,c.height),i.clip()}return F+=this.drawDisplayObject(e,i,r,n,e.$displayList,a,o),i.restore(),F}var w=this.createRenderBuffer(T.width,T.height),R=w.context;if(!R)return h+=this.drawDisplayObject(e,i,r,n,e.$displayList,a,o),t.sys.Region.release(T),t.Matrix.release(g),h;R.setTransform(1,0,0,1,-T.minX,-T.minY);var C=t.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY);if(h+=this.drawDisplayObject(e,R,r,C,e.$displayList,T,o),p)if(t.Capabilities.$runtimeType==t.RuntimeType.WEB&&u&&1==u.$getRenderCount()||p.$displayList)R.globalCompositeOperation="destination-in",h+=this.drawDisplayObject(p,R,r,C,p.$displayList,T,o);
else{var S=this.createRenderBuffer(T.width,T.height),P=S.context;if(!P)return h+=this.drawDisplayObject(e,i,r,n,e.$displayList,a,o),b.push(w),t.sys.Region.release(T),t.Matrix.release(g),h;P.setTransform(1,0,0,1,-T.minX,-T.minY),C=t.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY),h+=this.drawDisplayObject(p,P,r,C,p.$displayList,T,o),R.globalCompositeOperation="destination-in",R.setTransform(1,0,0,1,0,0),R.globalAlpha=1,R.drawImage(S.surface,0,0),b.push(S)}if(t.Matrix.release(C),h>0){if(h++,l&&(i.globalCompositeOperation=s),c){var x=g;i.save(),i.setTransform(x.a,x.b,x.c,x.d,x.tx-T.minX,x.ty-T.minY),i.beginPath(),i.rect(c.x,c.y,c.width,c.height),i.clip()}i.globalAlpha=1,i.setTransform(1,0,0,1,T.minX+n.tx,T.minY+n.ty),i.drawImage(w.surface,0,0),c&&i.restore(),l&&(i.globalCompositeOperation=$)}return b.push(w),t.sys.Region.release(T),t.Matrix.release(g),h},n.prototype.drawWithScrollRect=function(e,i,r,n,a,o){var s=0,h=e.$scrollRect?e.$scrollRect:e.$maskRect;if(h.isEmpty())return s;var l=t.Matrix.create();if(l.copyFrom(e.$getConcatenatedMatrix()),o)e.$getConcatenatedMatrixAt(o,l);else if(e.$parentDisplayList){var u=e.$parentDisplayList.root;u!==e.$stage&&e.$getConcatenatedMatrixAt(u,l)}var c=t.sys.Region.create();if(c.updateRegion(h,l),c.isEmpty()||a&&!a.intersects(c))return t.sys.Region.release(c),t.Matrix.release(l),s;var p=!1;if(r){for(var d=r.length,f=0;d>f;f++)if(c.intersects(r[f])){p=!0;break}}else p=!0;return p?(i.save(),i.setTransform(l.a,l.b,l.c,l.d,l.tx+n.tx,l.ty+n.ty),i.beginPath(),i.rect(h.x,h.y,h.width,h.height),i.clip(),s+=this.drawDisplayObject(e,i,r,n,e.$displayList,c,o),i.restore(),t.sys.Region.release(c),t.Matrix.release(l),s):(t.sys.Region.release(c),t.Matrix.release(l),s)},n.prototype.drawNodeToBuffer=function(t,e,i,r){var n=e.context;n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,n,r)},n.prototype.renderNode=function(t,e,i){var r=0;switch(t.type){case 1:r=this.renderBitmap(t,e);break;case 2:r=1,this.renderText(t,e);break;case 3:r=this.renderGraphics(t,e,i);break;case 4:r=this.renderGroup(t,e);break;case 6:e.globalAlpha=t.drawData[0];break;case 7:r=this.renderMesh(t,e)}return r},n.prototype.renderMesh=function(e,i){if(t.Capabilities.runtimeType!=t.RuntimeType.NATIVE)return 0;var r=e.image,n=e.drawData,a=n.length,o=0,s=e.matrix;for(s&&(i.saveTransform(),i.transform(s.a,s.b,s.c,s.d,s.tx,s.ty));a>o;)i.drawMesh(r.source,n[o++],n[o++],n[o++],n[o++],n[o++],n[o++],n[o++],n[o++],e.imageWidth,e.imageHeight,e.uvs,e.vertices,e.indices,e.bounds);return s&&i.restoreTransform(),1},n.prototype.renderBitmap=function(e,i){var r=e.image;if(!r||!r.source)return 0;i.$imageSmoothingEnabled!=e.smoothing&&(i.imageSmoothingEnabled=e.smoothing,i.$imageSmoothingEnabled=e.smoothing);var n=e.drawData,o=n.length,s=0,h=e.matrix,l=e.blendMode,u=e.alpha,c=!1;h&&(i.saveTransform?i.saveTransform():i.save(),c=!0,i.transform(h.a,h.b,h.c,h.d,h.tx,h.ty)),l&&(i.globalCompositeOperation=y[l]);var p;u==u&&(p=i.globalAlpha,i.globalAlpha*=u);var d=0,f=e.filter;if(f&&8==o)if(t.Capabilities.runtimeType==t.RuntimeType.NATIVE){for(egret_native.Graphics.setGlobalShader(f);o>s;)d++,i.drawImage(r.source,n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++]);egret_native.Graphics.setGlobalShader(null)}else{var g=this.createRenderBuffer(n[6],n[7]),v=g.context;d++,v.drawImage(r.source,n[0],n[1],n[2],n[3],0,0,n[6],n[7]),d++;var m=v.getImageData(0,0,g.surface.width,g.surface.height);a(m.data,g.surface.width,g.surface.height,f.$matrix),v.putImageData(m,0,0),i.drawImage(g.surface,0,0,n[6],n[7],n[4],n[5],n[6],n[7]),b.push(g)}else for(;o>s;)d++,i.drawImage(r.source,n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++]);return c?i.restoreTransform?(i.restoreTransform(),l&&(i.globalCompositeOperation=$),u==u&&(i.globalAlpha=p)):i.restore():(l&&(i.globalCompositeOperation=$),u==u&&(i.globalAlpha=p)),d},n.prototype.renderText=function(i,r){r.textAlign="left",r.textBaseline="middle",r.lineJoin="round";for(var n=i.drawData,a=n.length,o=0;a>o;){var s=n[o++],h=n[o++],l=n[o++],u=n[o++];r.font=e(i,u);var c=null==u.textColor?i.textColor:u.textColor,p=null==u.strokeColor?i.strokeColor:u.strokeColor,d=null==u.stroke?i.stroke:u.stroke;r.fillStyle=t.toColorString(c),r.strokeStyle=t.toColorString(p),d&&(r.lineWidth=2*d,r.strokeText(l,s,h)),r.fillText(l,s,h)}},n.prototype.renderGraphics=function(t,e,n){var a=t.drawData,o=a.length;n=!!n;for(var s=0;o>s;s++){var h=a[s];switch(h.type){case 1:var l=h;e.fillStyle=n?v:i(l.fillColor,l.fillAlpha),this.renderPath(h,e),this.renderingMask?e.clip():e.fill();break;case 2:var u=h;e.fillStyle=n?v:r(e,u.gradientType,u.colors,u.alphas,u.ratios,u.matrix),e.save();var c=u.matrix;this.renderPath(h,e),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),e.fill(),e.restore();break;case 3:var p=h,d=p.lineWidth;e.lineWidth=d,e.strokeStyle=n?v:i(p.lineColor,p.lineAlpha),e.lineCap=m[p.caps],e.lineJoin=p.joints,e.miterLimit=p.miterLimit;var f=1===d||3===d;f&&e.translate(.5,.5),this.renderPath(h,e),e.stroke(),f&&e.translate(-.5,-.5)}}return 0==o?0:1},n.prototype.renderPath=function(t,e){e.beginPath();for(var i=t.$data,r=t.$commands,n=r.length,a=0,o=0;n>o;o++){var s=r[o];switch(s){case 4:e.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case 3:e.quadraticCurveTo(i[a++],i[a++],i[a++],i[a++]);break;case 2:e.lineTo(i[a++],i[a++]);break;case 1:e.moveTo(i[a++],i[a++])}}},n.prototype.renderGroup=function(t,e){for(var i=0,r=t.drawData,n=r.length,a=0;n>a;a++){var o=r[a];i+=this.renderNode(o,e)}return i},n.prototype.createRenderBuffer=function(e,i){var r=b.pop();return r?r.resize(e,i,!0):r=new t.sys.CanvasRenderBuffer(e,i),r},n}();t.CanvasRenderer=x,__reflect(x.prototype,"egret.CanvasRenderer",["egret.sys.SystemRenderer"]);var T=!1;try{T=void 0!==typeof Uint8ClampedArray}catch(_){}}(egret||(egret={}));var egret;!function(t){t.DeviceOrientation=null}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.WEB="web",e.NATIVE="native",t.RuntimeType=e,__reflect(e.prototype,"egret.RuntimeType");var i=function(){function t(){}return Object.defineProperty(t,"language",{get:function(){return t.$language},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMobile",{get:function(){return t.$isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t,"os",{get:function(){return t.$os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"runtimeType",{get:function(){return t.$runtimeType},enumerable:!0,configurable:!0}),Object.defineProperty(t,"supportVersion",{get:function(){return t.$supportVersion},enumerable:!0,configurable:!0}),Object.defineProperty(t,"engineVersion",{get:function(){return"3.2.6"},enumerable:!0,configurable:!0}),t.$setNativeCapabilities=function(e){var i=e.split("-");if(i.length<=4){var r=i[0];switch(r){case"android":r="Android";break;case"ios":r="iOS"}t.$os=r;var n=i[2].substring(1,i[2].length);t.$supportVersion=n}},Object.defineProperty(t,"renderMode",{get:function(){return t.$renderMode},enumerable:!0,configurable:!0}),Object.defineProperty(t,"boundingClientWidth",{get:function(){return t.$boundingClientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t,"boundingClientHeight",{get:function(){return t.$boundingClientHeight},enumerable:!0,configurable:!0}),t}();i.$language="zh-CN",i.$os="Unknown",i.$runtimeType="Unknown",i.$supportVersion="Unknown",i.$renderMode="Unknown",i.$boundingClientWidth=0,i.$boundingClientHeight=0,t.Capabilities=i,__reflect(i.prototype,"egret.Capabilities"),t.$markReadOnly(i,"language",!1),t.$markReadOnly(i,"isMobile",!1),t.$markReadOnly(i,"os",!1),t.$markReadOnly(i,"runtimeType",!1),t.$markReadOnly(i,"supportVersion",!1),t.$markReadOnly(i,"renderMode",!1),t.$markReadOnly(i,"boundingClientWidth",!1),t.$markReadOnly(i,"boundingClientHeight",!1)}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};egret.Capabilities.$isMobile=testDeviceType(),egret.Capabilities.$runtimeType=testRuntimeType()?egret.RuntimeType.WEB:egret.RuntimeType.NATIVE;var egret;!function(t){t.BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"}}(egret||(egret={}));var egret;!function(t){function e(t,e){r[t]=e}function i(t){return r[t]}var r={};t.registerImplementation=e,t.getImplementation=i}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i){var r=t.call(this,e)||this;return r.firstCharHeight=0,"string"==typeof i?r.charList=r.parseConfig(i):i&&i.hasOwnProperty("frames")?r.charList=i.frames:r.charList={},r}return __extends(e,t),e.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},e.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},e.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var r=e.h;void 0===r&&(r=0);var n=e.offY;void 0===n&&(n=0),i=r+n}if(0>=i)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},e.prototype.parseConfig=function(t){t=t.split("\r\n").join("\n");for(var e=t.split("\n"),i=this.getConfigByKey(e[3],"count"),r={},n=4;4+i>n;n++){var a=e[n],o=String.fromCharCode(this.getConfigByKey(a,"id")),s={};r[o]=s,s.x=this.getConfigByKey(a,"x"),s.y=this.getConfigByKey(a,"y"),s.w=this.getConfigByKey(a,"width"),s.h=this.getConfigByKey(a,"height"),s.offX=this.getConfigByKey(a,"xoffset"),s.offY=this.getConfigByKey(a,"yoffset"),s.xadvance=this.getConfigByKey(a,"xadvance")}return r},e.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),r=0,n=i.length;n>r;r++){var a=i[r];if(e==a.substring(0,e.length)){var o=a.substring(e.length+1);return parseInt(o)}}return 0},e}(t.SpriteSheet);t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$textOffsetX=0,i.$textOffsetY=0,i.$textStartX=0,i.$textStartY=0,i.$lineHeights=[],i.$renderNode=new t.sys.BitmapNode,i.$BitmapText={0:0/0,1:0/0,2:"",3:0,4:0,5:null,6:!1,7:!1,8:!1,9:!1,10:"left",11:"top",12:t.Bitmap.defaultSmoothing},i}return __extends(i,e),Object.defineProperty(i.prototype,"smoothing",{get:function(){var t=this.$BitmapText;return t[12]},set:function(t){t=!!t;var e=this.$BitmapText;t!=e[12]&&(e[12]=t,this.$invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.$BitmapText[2]},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),i.prototype.$setText=function(t){null==t&&(t=""),t=String(t);var e=this.$BitmapText;return t==e[2]?!1:(e[2]=t,this.$invalidateContentBounds(),!0)},i.prototype.$getWidth=function(){var t=this.$BitmapText[0];return isNaN(t)?this.$getContentBounds().width:t},i.prototype.$setWidth=function(t){var e=this.$BitmapText;return 0>t||t==e[0]?!1:(e[0]=t,this.$invalidateContentBounds(),!0)},i.prototype.$invalidateContentBounds=function(){e.prototype.$invalidateContentBounds.call(this),this.$BitmapText[7]=!0},i.prototype.$getHeight=function(){var t=this.$BitmapText[1];return isNaN(t)?this.$getContentBounds().height:t},i.prototype.$setHeight=function(t){var e=this.$BitmapText;return 0>t||t==e[1]?!1:(e[1]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"font",{get:function(){return this.$BitmapText[5]},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),i.prototype.$setFont=function(t){var e=this.$BitmapText;return e[5]==t?!1:(e[5]=t,this.$BitmapText[6]=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this.$BitmapText[3]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLineSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[3]==t?!1:(e[3]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this.$BitmapText[4]},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLetterSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[4]==t?!1:(e[4]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"textAlign",{get:function(){return this.$BitmapText[10]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setTextAlign=function(t){var e=this.$BitmapText;return e[10]==t?!1:(e[10]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$BitmapText[11]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setVerticalAlign=function(t){var e=this.$BitmapText;return e[11]==t?!1:(e[11]=t,this.$invalidateContentBounds(),!0)},i.prototype.$render=function(){var e=this.$BitmapText,r=this.$getTextLines(),n=r.length;if(0!=n){var a=this.$textLinesWidth,o=e[5],s=this.$renderNode;o.$texture&&(s.image=o.$texture._bitmapData),s.smoothing=e[12];for(var h=o._getFirstCharHeight(),l=Math.ceil(h*i.EMPTY_FACTOR),u=!isNaN(e[1]),c=e[8],p=e[0],d=e[1],f=e[10],g=this.$textOffsetY+this.$textStartY,y=this.$lineHeights,$=0;n>$;$++){var v=y[$];if(u&&$>0&&g+v>d)break;var m=r[$],b=m.length,x=this.$textOffsetX;if(f!=t.HorizontalAlign.LEFT){var T=p>c?p:c;f==t.HorizontalAlign.RIGHT?x+=T-a[$]:f==t.HorizontalAlign.CENTER&&(x+=Math.floor((T-a[$])/2))}for(var _=0;b>_;_++){var O=m.charAt(_),E=o.getTexture(O);if(E){var F=E._bitmapWidth,w=E._bitmapHeight;s.imageWidth=E._sourceWidth,s.imageHeight=E._sourceHeight,s.drawImage(E._bitmapX,E._bitmapY,F,w,x+E._offsetX,g+E._offsetY,E.$getScaleBitmapWidth(),E.$getScaleBitmapHeight()),x+=(o.getConfig(O,"xadvance")||E.$getTextureWidth())+e[4]}else" "==O?x+=l:t.$warn(1046,O)}g+=v+e[3]}}},i.prototype.$measureContentBounds=function(t){var e=this.$getTextLines();0==e.length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$BitmapText[8]-this.$textOffsetX,this.$BitmapText[9]-this.$textOffsetY)},Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$BitmapText[8]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$BitmapText[9]},enumerable:!0,configurable:!0}),i.prototype.$getTextLines=function(){function e(t){return m&&n.length>0&&f>m?!1:(f+=l+c,s||h||(u-=p),n.push(t),o.push(l),a.push(u),d=Math.max(u,d),!0)}var r=this.$BitmapText;if(!r[7])return this.textLines;var n=[];this.textLines=n;var a=[];this.$textLinesWidth=a,r[7]=!1;var o=[];if(this.$lineHeights=o,!r[2]||!r[5])return n;for(var s,h,l,u,c=r[3],p=r[4],d=0,f=0,g=0,y=0,$=!isNaN(r[0]),v=r[0],m=r[1],b=r[5],x=b._getFirstCharHeight(),T=Math.ceil(x*i.EMPTY_FACTOR),_=r[2],O=_.split(/(?:\r\n|\r|\n)/),E=O.length,F=!0,w=0;E>w;w++){var R=O[w],C=R.length;l=0,u=0,s=!0,h=!1;for(var S=0;C>S;S++){s||(u+=p);var P=R.charAt(S),D=void 0,L=void 0,M=0,A=0,N=b.getTexture(P);if(N)D=N.$getTextureWidth(),L=N.$getTextureHeight(),M=N._offsetX,A=N._offsetY;else{if(" "!=P){t.$warn(1046,P),s&&(s=!1);continue}D=T,L=x}if(s&&(s=!1,g=Math.min(M,g)),F&&(F=!1,y=Math.min(A,y)),$&&S>0&&u+D>v){if(!e(R.substring(0,S)))break;R=R.substring(S),C=R.length,S=0,u=S==C-1?D:b.getConfig(P,"xadvance")||D,l=L}else u+=S==C-1?D:b.getConfig(P,"xadvance")||D,l=Math.max(L,l)}if(m&&w>0&&f>m)break;if(h=!0,!e(R))break}f-=c,r[8]=d,r[9]=f,this.$textOffsetX=g,this.$textOffsetY=y,this.$textStartX=0,this.$textStartY=0;var B;return v>d&&(B=r[10],B==t.HorizontalAlign.RIGHT?this.$textStartX=v-d:B==t.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((v-d)/2))),m>f&&(B=r[11],B==t.VerticalAlign.BOTTOM?this.$textStartY=m-f:B==t.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((m-f)/2))),n},i}(t.DisplayObject);e.EMPTY_FACTOR=.33,t.BitmapText=e,__reflect(e.prototype,"egret.BitmapText")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.JUSTIFY="justify",e.CONTENT_JUSTIFY="contentJustify",t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}return e.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],r=this.replaceArr[e][1];t=t.replace(i,r)}return t},e.prototype.parser=function(e){this.stackArray=[],this.resutlArr=[];for(var i=0,r=e.length;r>i;){var n=e.indexOf("<",i);if(0>n)this.addToResultArr(e.substring(i)),i=r;else{this.addToResultArr(e.substring(i,n));var a=e.indexOf(">",n);-1==a?(t.$error(1038),a=n):"/"==e.charAt(n+1)?this.stackArray.pop():this.addToArray(e.substring(n+1,a)),i=a+1}}return this.resutlArr},e.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.stackArray.length>0?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.prototype.changeStringToObject=function(t){t=t.trim();var e={},i=[];if("i"==t.charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var r=0,n=void 0;n=t.match(this.getHeadReg());){var a=n[0],o="";t=t.substring(a.length).trim(),'"'==t.charAt(0)?(r=t.indexOf('"',1),o=t.substring(1,r),r+=1):"'"==t.charAt(0)?(r=t.indexOf("'",1),o=t.substring(1,r),r+=1):(o=t.match(/(\S)+/)[0],r=o.length),this.addProperty(e,a.substring(0,a.length-1).trim(),o.trim()),t=t.substring(r).trim()}}return e},e.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.prototype.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},e.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var r in i)null==e[r]&&(e[r]=i[r]);this.stackArray.push(e)}},e}();t.HtmlTextParser=e,__reflect(e.prototype,"egret.HtmlTextParser")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}return __extends(i,e),i.prototype.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},i.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},i.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},i.prototype._getText=function(){return this.stageText.$getText()},i.prototype._setText=function(t){this.stageText.$setText(t)},i.prototype._setColor=function(t){this.stageText.$setColor(t)},i.prototype.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||(this._text.$isTyping=!0),this._text.$invalidateContentBounds(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,!0)))},i.prototype.blurHandler=function(e){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$isTyping=!1,this._text.$invalidateContentBounds(),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,!0)))},i.prototype.onMouseDownHandler=function(t){this.$onFocus()},i.prototype.$onFocus=function(){this._text.visible&&(this._isFocus||(this.tempStage.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.$show()))},i.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},i.prototype.updateTextHandler=function(e){var i,r,n=this._text.$TextField,a=this.stageText.$getText(),o=!1;null!=n[35]&&(i=new RegExp("["+n[35]+"]","g"),r=a.match(i),a=r?r.join(""):"",o=!0),null!=n[36]&&(i=new RegExp("[^"+n[36]+"]","g"),r=a.match(i),a=r?r.join(""):"",o=!0),o&&this.stageText.$getText()!=a&&this.stageText.$setText(a),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,!0))},i.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},i.prototype._hideInput=function(){this.stageText.$removeFromStage()},i.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},i.prototype._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();var t=this._text.$stage;if(null==t);else for(var e=this._text,i=e.$visible;;){if(!i)break;if(e=e.parent,e==t)break;i=e.$visible}this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},i}(t.HashObject);t.InputController=e,__reflect(e.prototype,"egret.InputController")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i,n){n=n||{};var a=null==n.italic?i[16]:n.italic,o=null==n.bold?i[15]:n.bold,s=null==n.size?i[0]:n.size,h=n.fontFamily||i[8]||r.default_fontFamily;return t.sys.measureText(e,h,s,o,a)}var i=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])"),r=function(r){function n(){var e=r.call(this)||this;e.$inputEnabled=!1,e.inputUtils=null,e.graphicsNode=null,e.isFlow=!1,e.textArr=[],e.linesArr=[],e.$isTyping=!1;var i=new t.sys.TextNode;return i.fontFamily=n.default_fontFamily,e.textNode=i,e.$renderNode=i,e.$TextField={0:n.default_size,1:0,2:n.default_textColor,3:0/0,4:0/0,5:0,6:0,7:0,8:n.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT},e}return __extends(n,r),n.prototype.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},n.prototype.$setTouchEnabled=function(t){var e=r.prototype.$setTouchEnabled.call(this,t);return this.isInput()&&(this.$inputEnabled=!0),e},Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),n.prototype.$setFontFamily=function(t){var e=this.$TextField;return e[8]==t?!1:(e[8]=t,this.invalidateFontString(),!0)},Object.defineProperty(n.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),n.prototype.$setSize=function(t){t=+t||0;var e=this.$TextField;return e[0]==t?!1:(e[0]=t,this.invalidateFontString(),!0)},Object.defineProperty(n.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),n.prototype.$setBold=function(t){t=!!t;var e=this.$TextField;return t==e[15]?!1:(e[15]=t,this.invalidateFontString(),!0)},Object.defineProperty(n.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),n.prototype.$setItalic=function(t){t=!!t;var e=this.$TextField;return t==e[16]?!1:(e[16]=t,this.invalidateFontString(),!0)},n.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextAlign=function(t){var e=this.$TextField;return e[9]==t?!1:(e[9]=t,this.$invalidateTextField(),!0)},Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]==t?!1:(e[10]=t,this.$invalidateTextField(),!0)},Object.defineProperty(n.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),n.prototype.$setLineSpacing=function(t){t=+t||0;var e=this.$TextField;return e[1]==t?!1:(e[1]=t,this.$invalidateTextField(),!0)},Object.defineProperty(n.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextColor=function(t){t=0|+t;var e=this.$TextField;return e[2]==t?!1:(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidate(),!0)},Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),n.prototype.$setWordWrap=function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))},Object.defineProperty(n.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),n.prototype.$setType=function(e){var i=this.$TextField;return i[24]!=e?(i[24]=e,e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0):!1},Object.defineProperty(n.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(t){this.$TextField[37]=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),n.prototype.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},n.prototype.$setBaseText=function(t){null==t&&(t=""),t=t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:i}]),!0}return!1},n.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),n.prototype.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],this.setMiddleStyle([{text:i}]),!0}return!1},Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){t=+t||0,this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e?(this.$invalidateTextField(),i[25]=e,i[26]=t.toColorString(e),!0):!1},Object.defineProperty(n.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),n.prototype.$setStroke=function(t){return this.$TextField[27]!=t?(this.$invalidateTextField(),this.$TextField[27]=t,!0):!1},Object.defineProperty(n.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),n.prototype.$setMaxChars=function(t){return this.$TextField[21]!=t?(this.$TextField[21]=t,!0):!1},Object.defineProperty(n.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),n.prototype.$setSelection=function(t,e){return!1},n.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(n.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),n.prototype.$setMultiline=function(t){return this.$TextField[30]=t,this.$invalidateTextField(),!0},Object.defineProperty(n.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),n.prototype.$setWidth=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=0/0}else{if(e[3]==t)return!1;e[3]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),!0)},n.prototype.$setHeight=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=0/0}else{if(e[4]==t)return!1;e[4]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),!0)},n.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},n.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(n.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorder=function(t){this.$TextField[31]=!!t,this.$invalidate()},Object.defineProperty(n.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorderColor=function(t){this.$TextField[32]=+t||0,this.$invalidate()
},Object.defineProperty(n.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackground=function(t){this.$TextField[33]=t,this.$invalidate()},Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackgroundColor=function(t){this.$TextField[34]=t,this.$invalidate()},n.prototype.fillBackground=function(e){var i=this.graphicsNode;i&&i.clear();var r=this.$TextField;if(r[33]||r[31]||e&&e.length>0){if(!i){i=this.graphicsNode=new t.sys.GraphicsNode;var n=new t.sys.GroupNode;n.addNode(i),n.addNode(this.textNode),this.$renderNode=n}var a=void 0,o=void 0;if(r[33]&&(a=i.beginFill(r[34]),a.drawRect(0,0,this.$getWidth(),this.$getHeight())),r[31]&&(o=i.lineStyle(1,r[32]),o.drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1)),e&&e.length>0)for(var s=r[2],h=-1,l=e.length,u=0;l>u;u+=4){var c=e[u],p=e[u+1],d=e[u+2],f=e[u+3]||s;(0>h||h!=f)&&(h=f,o=i.lineStyle(2,f,1,t.CapsStyle.NONE)),o.moveTo(c,p),o.lineTo(c+d,p)}}if(i){var g=this.$getRenderBounds();i.x=g.x,i.y=g.y,i.width=g.width,i.height=g.height,t.Rectangle.release(g)}},n.prototype.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},n.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&this.textNode.clean()},n.prototype.$onAddToStage=function(e,i){r.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},n.prototype.$invalidateTextField=function(){this.$invalidateContentBounds(),this.$TextField[18]=!0},n.prototype.$update=function(e,i){var n=this.$getRenderBounds(),a=r.prototype.$update.call(this,e,n);return t.Rectangle.release(n),a},n.prototype.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var r=2*this.$TextField[27];return r>0&&(i.width+=2*r,i.height+=2*r),i.x-=r+2,i.y-=r+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},n.prototype.$measureContentBounds=function(e){this.$getLinesArr();var i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],r=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4];e.setTo(0,0,i,r)},n.prototype.$render=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if((this.$hasAnyFlags(2032)||this.$hasAnyFlags(1648))&&this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3])return;var e=this.drawText();this.fillBackground(e);var i=this.$getRenderBounds(),r=this.textNode;r.x=i.x,r.y=i.y,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),t.Rectangle.release(i)},Object.defineProperty(n.prototype,"textFlow",{get:function(){return this.textArr},set:function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){var r=t[i];e+=r.text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))},enumerable:!0,configurable:!0}),n.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;r>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},n.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textWidth",{get:function(){return this.$getLinesArr(),this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this.$getLinesArr(),t.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),n.prototype.appendText=function(t){this.appendElement({text:t})},n.prototype.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},n.prototype.$getLinesArr=function(){var r=this.$TextField;if(!r[18])return this.linesArr;r[18]=!1;var n=this.textArr;this.linesArr.length=0,r[6]=0,r[5]=0;var a=r[3];if(!isNaN(a)&&0==a)return r[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var o,s=this.linesArr,h=0,l=0,u=0,c=0,p=0,d=n.length;d>p;p++){var f=n[p];if(f.text){f.style=f.style||{};for(var g=f.text.toString(),y=g.split(/(?:\r\n|\r|\n)/),$=0,v=y.length;v>$;$++){null==s[c]&&(o={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},s[c]=o,h=0,u=0,l=0),u=r[24]==t.TextFieldType.INPUT?r[0]:Math.max(u,f.style.size||r[0]);var m=!0;if(""==y[$])$==v-1&&(m=!1);else{var b=e(y[$],r,f.style);if(isNaN(a))h+=b,l+=y[$].length,o.elements.push({width:b,text:y[$],style:f.style}),$==v-1&&(m=!1);else if(a>=h+b)o.elements.push({width:b,text:y[$],style:f.style}),h+=b,l+=y[$].length,$==v-1&&(m=!1);else{var x=0,T=0,_=y[$],O=void 0;O=r[19]?_.split(i):_.match(/./g);for(var E=O.length,F=0;E>x;x++){var w=O[x].length,R=!1;if(1==w&&E-1>x){var C=O[x].charCodeAt(0),S=O[x+1].charCodeAt(0);if(C>=55296&&56319>=C&&56320==(64512&S)){var P=O[x]+O[x+1];w=2,R=!0,b=e(P,r,f.style)}else b=e(O[x],r,f.style)}else b=e(O[x],r,f.style);if(0!=h&&h+b>a&&h+x!=0)break;if(T+b>a)for(var D=O[x].match(/./g),L=0,M=D.length;M>L;L++){var w=D[L].length,A=!1;if(1==w&&M-1>L){var C=D[L].charCodeAt(0),S=D[L+1].charCodeAt(0);if(C>=55296&&56319>=C&&56320==(64512&S)){var P=D[L]+D[L+1];w=2,A=!0,b=e(P,r,f.style)}else b=e(D[L],r,f.style)}else b=e(D[L],r,f.style);if(L>0&&h+b>a)break;F+=w,T+=b,h+=b,l+=F,A&&L++}else F+=w,T+=b,h+=b,l+=F;R&&x++}if(x>0){o.elements.push({width:T,text:_.substring(0,F),style:f.style});var N=_.substring(F),B=void 0,I=N.length;for(B=0;I>B&&" "==N.charAt(B);B++);y[$]=N.substring(B)}""!=y[$]&&($--,m=!1)}}m&&(l++,o.hasNextLine=!0),$<y.length-1&&(o.width=h,o.height=u,o.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u,c++)}p==n.length-1&&o&&(o.width=h,o.height=u,o.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u)}else o&&(o.width=h,o.height=u,o.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u)}return r[29]=s.length,s},n.prototype.drawText=function(){var e=this.textNode,i=this.$TextField;e.bold=i[15],e.fontFamily=i[8]||n.default_fontFamily,e.italic=i[16],e.size=i[0],e.stroke=i[27],e.strokeColor=i[25],e.textColor=i[2];var r=this.$getLinesArr();if(0==i[5])return[];var a=isNaN(i[3])?i[5]:i[3],o=t.TextFieldUtils.$getTextHeight(this),s=0,h=t.TextFieldUtils.$getStartLine(this),l=i[4];if(!isNaN(l)&&l>o){var u=t.TextFieldUtils.$getValign(this);s+=u*(l-o)}s=Math.round(s);for(var c=t.TextFieldUtils.$getHalign(this),p=0,d=[],f=h,g=i[29];g>f;f++){var y=r[f],$=y.height;if(s+=$/2,f!=h){if(i[24]==t.TextFieldType.INPUT&&!i[30])break;if(!isNaN(l)&&s>l)break}p=Math.round((a-y.width)*c);for(var v=0,m=y.elements.length;m>v;v++){var b=y.elements[v],x=b.style.size||i[0];e.drawText(p,s+($-x)/2,b.text,b.style),b.style.underline&&d.push(p,s+$/2,b.width,b.style.textColor),p+=b.width}s+=$/2+i[1]}return d},n.prototype.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var r=i.style;if(r&&r.href)if(r.href.match(/^event:/)){var n=r.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,r.href.substring(n.length))}else open(r.href,r.target||"_blank")}}},n}(t.DisplayObject);r.default_fontFamily="Arial",r.default_size=30,r.default_textColor=16777215,t.TextField=r,__reflect(r.prototype,"egret.TextField"),t.$markReadOnly(r,"numLines"),t.$markReadOnly(r,"textWidth"),t.$markReadOnly(r,"textHeight")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.TEXT="text",e.TEL="tel",e.PASSWORD="password",t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.DYNAMIC="dynamic",e.INPUT="input",t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.$getStartLine=function(t){var i=t.$TextField,r=e.$getTextHeight(t),n=0,a=i[4];return isNaN(a)||(a>r||r>a&&(n=Math.max(i[28]-1,0),n=Math.min(i[29]-1,n)),i[30]||(n=Math.max(i[28]-1,0),i[29]>0&&(n=Math.min(i[29]-1,n)))),n},e.$getHalign=function(e){var i=e.$getLinesArr(),r=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?r=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(r=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(r=0),r},e.$getTextHeight=function(e){var i=t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0];return i},e.$getValign=function(i){var r=e.$getTextHeight(i),n=i.$TextField[4];if(!isNaN(n)&&n>r){var a=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?a=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(a=1),a}return 0},e.$getTextElement=function(t,i,r){var n=e.$getHit(t,i,r),a=t.$getLinesArr();return n&&a[n.lineIndex]&&a[n.lineIndex].elements[n.textElementIndex]?a[n.lineIndex].elements[n.textElementIndex]:null},e.$getHit=function(t,i,r){var n=t.$getLinesArr();if(0==t.$TextField[3])return null;var a=0,o=e.$getTextHeight(t),s=0,h=t.$TextField[4];if(!isNaN(h)&&h>o){var l=e.$getValign(t);s=l*(h-o),0!=s&&(r-=s)}for(var u=e.$getStartLine(t),c=0,p=u;p<n.length;p++){var d=n[p];if(c+d.height>=r){r>c&&(a=p+1);break}if(c+=d.height,c+t.$TextField[1]>r)return null;c+=t.$TextField[1]}if(0==a)return null;var f=n[a-1],g=t.$TextField[3];isNaN(g)&&(g=t.textWidth);var y=e.$getHalign(t);i-=y*(g-f.width);for(var $=0,p=0;p<f.elements.length;p++){var v=f.elements[p];if($+v.width<=i)$+=v.width;else if(i>$)return{lineIndex:a-1,textElementIndex:p}}return null},e.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,r=t.size,n=t.lineSpacing;e=Math.floor(i/(r+n));var a=i-(r+n)*e;a>r/2&&e++}return e},e}();t.TextFieldUtils=e,__reflect(e.prototype,"egret.TextFieldUtils")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.TOP="top",e.BOTTOM="bottom",e.MIDDLE="middle",e.JUSTIFY="justify",e.CONTENT_JUSTIFY="contentJustify",t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",t.Endian=e,__reflect(e.prototype,"egret.Endian");var i=function(){function i(t){this.BUFFER_EXT_SIZE=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=e.BIG_ENDIAN}return i.prototype._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},i.prototype.setArrayBuffer=function(t){},Object.defineProperty(i.prototype,"buffer",{get:function(){return this.data.buffer},set:function(t){this.data=new DataView(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataView",{get:function(){return this.data},set:function(t){this.data=t,this.write_position=t.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t;var e=new Uint8Array(new ArrayBuffer(t)),i=this.data.buffer.byteLength;i>t&&(this._position=t);var r=Math.min(i,t);e.set(new Uint8Array(this.data.buffer,0,r)),this.buffer=e.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),i.prototype.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},i.prototype.readBoolean=function(){return this.validate(i.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},i.prototype.readByte=function(){return this.validate(i.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},i.prototype.readBytes=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),0==r)r=this.bytesAvailable;else if(!this.validate(r))return null;t?t.validateBuffer(e+r):t=new i(new ArrayBuffer(e+r));for(var n=0;r>n;n++)t.data.setUint8(n+e,this.data.getUint8(this.position++))},i.prototype.readDouble=function(){if(!this.validate(i.SIZE_OF_FLOAT64))return null;var t=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT64,t},i.prototype.readFloat=function(){if(!this.validate(i.SIZE_OF_FLOAT32))return null;var t=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT32,t},i.prototype.readInt=function(){if(!this.validate(i.SIZE_OF_INT32))return null;var t=this.data.getInt32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT32,t},i.prototype.readShort=function(){if(!this.validate(i.SIZE_OF_INT16))return null;var t=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT16,t},i.prototype.readUnsignedByte=function(){return this.validate(i.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},i.prototype.readUnsignedInt=function(){if(!this.validate(i.SIZE_OF_UINT32))return null;var t=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT32,t},i.prototype.readUnsignedShort=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t},i.prototype.readUTF=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t>0?this.readUTFBytes(t):""},i.prototype.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},i.prototype.writeBoolean=function(t){this.validateBuffer(i.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},i.prototype.writeByte=function(t){this.validateBuffer(i.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},i.prototype.writeBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r;if(!(0>e)&&!(0>i)&&(r=0==i?t.length-e:Math.min(t.length-e,i),r>0)){this.validateBuffer(r);for(var n=new DataView(t.buffer),a=r,o=4;a>o;a-=o)this.data.setUint32(this._position,n.getUint32(e)),this.position+=o,e+=o;for(;a>0;a--)this.data.setUint8(this.position++,n.getUint8(e++))}},i.prototype.writeDouble=function(t){this.validateBuffer(i.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT64},i.prototype.writeFloat=function(t){this.validateBuffer(i.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT32},i.prototype.writeInt=function(t){this.validateBuffer(i.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT32},i.prototype.writeShort=function(t){this.validateBuffer(i.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT16},i.prototype.writeUnsignedInt=function(t){this.validateBuffer(i.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT32},i.prototype.writeUnsignedShort=function(t){this.validateBuffer(i.SIZE_OF_UINT16),this.data.setUint16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16},i.prototype.writeUTF=function(t){var r=this.encodeUTF8(t),n=r.length;this.validateBuffer(i.SIZE_OF_UINT16+n),this.data.setUint16(this.position,n,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16,this._writeUint8Array(r,!1)},i.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},i.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},i.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},i.prototype.validate=function(e){return this.data.byteLength>0&&this._position+e<=this.data.byteLength?!0:void t.$error(1025)},i.prototype.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),r=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,r)),this.buffer=i.buffer}},i.prototype.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),r=[];i.length>e;){var n=i[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))r.push(n);else{var a=void 0,o=void 0;for(this.inRange(n,128,2047)?(a=1,o=192):this.inRange(n,2048,65535)?(a=2,o=224):this.inRange(n,65536,1114111)&&(a=3,o=240),r.push(this.div(n,Math.pow(64,a))+o);a>0;){var s=this.div(n,Math.pow(64,a-1));r.push(128+s%64),a-=1}}}return new Uint8Array(r)},i.prototype.decodeUTF8=function(t){for(var e,i=!1,r=0,n="",a=0,o=0,s=0,h=0;t.length>r;){var l=t[r++];if(l==this.EOF_byte)e=0!=o?this.decoderError(i):this.EOF_code_point;else if(0==o)this.inRange(l,0,127)?e=l:(this.inRange(l,194,223)?(o=1,h=128,a=l-192):this.inRange(l,224,239)?(o=2,h=2048,a=l-224):this.inRange(l,240,244)?(o=3,h=65536,a=l-240):this.decoderError(i),a*=Math.pow(64,o),e=null);else if(this.inRange(l,128,191))if(s+=1,a+=(l-128)*Math.pow(64,o-s),s!==o)e=null;else{var u=a,c=h;a=0,o=0,s=0,h=0,e=this.inRange(u,c,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(i,l)}else a=0,o=0,s=0,h=0,r--,e=this.decoderError(i,l);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},i.prototype.encoderError=function(e){t.$error(1026,e)},i.prototype.decoderError=function(e,i){return e&&t.$error(1027),i||65533},i.prototype.inRange=function(t,e,i){return t>=e&&i>=t},i.prototype.div=function(t,e){return Math.floor(t/e)},i.prototype.stringToCodePoints=function(t){for(var e=[],i=0,r=t.length;i<t.length;){var n=t.charCodeAt(i);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))e.push(65533);else if(i==r-1)e.push(65533);else{var a=t.charCodeAt(i+1);if(this.inRange(a,56320,57343)){var o=1023&n,s=1023&a;i+=1,e.push(65536+(o<<10)+s)}else e.push(65533)}else e.push(n);i+=1}return e},i}();i.SIZE_OF_BOOLEAN=1,i.SIZE_OF_INT8=1,i.SIZE_OF_INT16=2,i.SIZE_OF_INT32=4,i.SIZE_OF_UINT8=1,i.SIZE_OF_UINT16=2,i.SIZE_OF_UINT32=4,i.SIZE_OF_FLOAT32=4,i.SIZE_OF_FLOAT64=8,t.ByteArray=i,__reflect(i.prototype,"egret.ByteArray")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.NORMAL="normal",e.ADD="add",e.ERASE="erase",t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret||(egret={})),function(t){var e;!function(t){function e(t){var e=n[t];return void 0===e?0:e}function i(t){var e=r[t];return void 0===e?"normal":e}for(var r=["normal","add","erase"],n={},a=r.length,o=0;a>o;o++){var s=r[o];n[s]=o}t.blendModeToNumber=e,t.numberToBlendMode=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(e,i){t.useFontMapping=!0,t.fontMapping[e]=i}t.fontMapping={},t.useFontMapping=!1,t.registerFontMapping=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.sys.$ticker.$frameRate},set:function(e){t.sys.$ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dirtyRegionPolicy",{get:function(){return this.$dirtyRegionPolicy},set:function(t){this.$dirtyRegionPolicy!=t&&(this.$dirtyRegionPolicy=t,this.$displayList.setDirtyRegionPolicy(t))},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.DisplayObjectContainer);t.Stage=e,__reflect(e.prototype,"egret.Stage"),t.$markCannotUse(e,"alpha",1),t.$markCannotUse(e,"visible",!0),t.$markCannotUse(e,"x",0),t.$markCannotUse(e,"y",0),t.$markCannotUse(e,"scaleX",1),t.$markCannotUse(e,"scaleY",1),t.$markCannotUse(e,"rotation",0),t.$markCannotUse(e,"cacheAsBitmap",!1),t.$markCannotUse(e,"scrollRect",null),t.$markCannotUse(e,"filters",null),t.$markCannotUse(e,"blendMode",null),t.$markCannotUse(e,"touchEnabled",!0),t.$markCannotUse(e,"matrix",null),t.$markReadOnly(e,"stageWidth"),t.$markReadOnly(e,"stageHeight")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),t}();e.ALL="all",e["true"]="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.OFF="off",t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),r=i+1,n=t.sinInt(i);if(i==e)return n;var a=t.sinInt(r);return(e-i)*a+(r-e)*n},t.sinInt=function(t){return t%=360,0>t&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),r=i+1,n=t.cosInt(i);if(i==e)return n;var a=t.cosInt(r);return(e-i)*a+(r-e)*n},t.cosInt=function(t){return t%=360,0>t&&(t+=360),egret_cos_map[t]},t}();t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;360>NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n});var egret;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=0);var r=e.call(this)||this;return r._delay=0,r._currentCount=0,r._running=!1,r.updateInterval=1e3,r.lastCount=1e3,r.lastTimeStamp=0,r.delay=t,r.repeatCount=0|+i,r}return __extends(i,e),Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},set:function(t){1>t&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.stop(),this._currentCount=0},i.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=t.getTimer(),t.sys.$ticker.$startTick(this.$update,this),this._running=!0)},i.prototype.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},i.prototype.$update=function(e){var i=e-this.lastTimeStamp;if(i>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=e,this._currentCount++;var r=this.repeatCount>0&&this._currentCount>=this.repeatCount;return t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),r&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,__reflect(e.prototype,"egret.Timer"),t.$markReadOnly(e,"currentCount"),t.$markReadOnly(e,"running")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(r)}function i(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(r)}t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=e,t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=i}(egret||(egret={}));var egret;!function(t){function e(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var a,o=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}}),a=t.__sets__;var s=a[i];if(s)return s.apply(e,r);var h=Object.getPrototypeOf(o);if(null!=h){for(;!h.hasOwnProperty(i);)if(h=Object.getPrototypeOf(h),null==h)return;s=Object.getOwnPropertyDescriptor(h,i).set,a[i]=s,s.apply(e,r)}}function i(t,e,i){var r,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}}),r=t.__gets__;var a=r[i];if(a)return a.call(e);var o=Object.getPrototypeOf(n);if(null!=o){for(;!o.hasOwnProperty(i);)if(o=Object.getPrototypeOf(o),null==o)return;return a=Object.getOwnPropertyDescriptor(o,i).get,r[i]=a,a.call(e)}}t.superSetter=e,t.superGetter=i}(egret||(egret={}));var egret;!function(t){function e(t){if(!t)return null;var e=i[t];if(e)return e;var r=t.split("."),n=r.length;e=__global;for(var a=0;n>a;a++){var o=r[a];if(e=e[o],!e)return null}return i[t]=e,e}var i={};t.getDefinitionByName=e,t.cleanCache=function(){i={}}}(egret||(egret={}));var __global=this.__global||this,egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var r=i.constructor.toString().trim(),n=r.indexOf("("),a=r.substring(9,n);return Object.defineProperty(i,"__class__",{value:a,enumerable:!1,writable:!0}),a}t.getQualifiedClassName=e}(egret||(egret={}));var egret;!function(t){function e(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),r=Object.getPrototypeOf(i);if(!r)return null;var n=t.getQualifiedClassName(r.constructor);return n?n:null}t.getQualifiedSuperclassName=e}(egret||(egret={}));var egret;!function(t){function e(){return Date.now()-t.sys.$START_TIME}t.getTimer=e}(egret||(egret={}));var egret;!function(t){function e(e){var i=t.getDefinitionByName(e);return i?!0:!1}t.hasDefinition=e}(egret||(egret={}));var egret;!function(t){function e(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),r=i?i.__types__:null;return r?-1!==r.indexOf(e):!1}t.is=e}(egret||(egret={}));var egret;!function(t){function e(e,i){e||t.$error(1003,"callBack"),t.sys.$ticker.$startTick(e,i)}t.startTick=e}(egret||(egret={}));var egret;!function(t){function e(e,i){e||t.$error(1003,"callBack"),t.sys.$ticker.$stopTick(e,i)}t.stopTick=e}(egret||(egret={}));var egret;!function(t){function e(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e}t.toColorString=e}(egret||(egret={}));
var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},egret;!function(e){var t;!function(t){var r=function(){function t(e){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",this.fragmentSrc="",this.gl=null,this.program=null,this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0}},this.gl=e}return t.prototype.init=function(){var t=this.gl,r=e.WebGLUtils.compileProgram(t,this.defaultVertexSrc,this.fragmentSrc);t.useProgram(r),this.aVertexPosition=t.getAttribLocation(r,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(r,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(r,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var i in this.uniforms)this.uniforms[i].uniformLocation=t.getUniformLocation(r,i);this.initUniforms(),this.program=r},t.prototype.initUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var r in this.uniforms){e=this.uniforms[r],e.dirty=!0;var i=e.type;"mat2"===i||"mat3"===i||"mat4"===i?(e.glMatrix=!0,e.glValueLength=1,"mat2"===i?e.glFunc=t.uniformMatrix2fv:"mat3"===i?e.glFunc=t.uniformMatrix3fv:"mat4"===i&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+i],"2f"===i||"2i"===i?e.glValueLength=2:"3f"===i||"3i"===i?e.glValueLength=3:"4f"===i||"4i"===i?e.glValueLength=4:e.glValueLength=1)}}},t.prototype.syncUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var r in this.uniforms)e=this.uniforms[r],e.dirty&&(1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength&&e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w),e.dirty=!1)}},t.prototype.setProjection=function(e,t){var r=this.uniforms.projectionVector;(r.value.x!=e||r.value.y!=t)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t.prototype.setAttribPointer=function(e){var t=this.gl;t.vertexAttribPointer(this.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.colorAttribute,1,t.FLOAT,!1,e,16)},t}();t.EgretShader=r,__reflect(r.prototype,"egret.web.EgretShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\n}",t}return __extends(t,e),t}(e.EgretShader);e.TextureShader=t,__reflect(t.prototype,"egret.web.TextureShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r;!function(r){function i(e){return window.localStorage.getItem(e)}function n(t,r){try{return window.localStorage.setItem(t,r),!0}catch(i){return e.$warn(1047,t,r),!1}}function o(e){window.localStorage.removeItem(e)}function a(){window.localStorage.clear()}t.getItem=i,t.setItem=n,t.removeItem=o,t.clear=a}(r=t.web||(t.web={}))}(t=e.localStorage||(e.localStorage={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var e=r.call(this)||this;return e.loaded=!1,e}return __extends(i,r),Object.defineProperty(i.prototype,"length",{get:function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),i.prototype.load=function(t){function r(){o(),l.indexOf("firefox")>=0&&(s.pause(),s.muted=!1),a.loaded=!0,a.dispatchEventWith(e.Event.COMPLETE)}function n(){o(),a.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}function o(){s.removeEventListener("canplaythrough",r),s.removeEventListener("error",n)}var a=this;this.url=t,t||e.$error(3002);var s=new Audio(t);s.addEventListener("canplaythrough",r),s.addEventListener("error",n);var l=navigator.userAgent.toLowerCase();l.indexOf("firefox")>=0&&(s.autoplay=!0,s.muted=!0),s.load(),this.originAudio=s,i.$recycle(this.url,s)},i.prototype.play=function(r,n){r=+r||0,n=+n||0,0==this.loaded&&e.$error(1049);var o=i.$pop(this.url);null==o&&(o=this.originAudio.cloneNode()),o.autoplay=!0;var a=new t.HtmlSoundChannel(o);return a.$url=this.url,a.$loops=n,a.$startTime=r,a.$play(),e.sys.$pushSoundChannel(a),a},i.prototype.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),i.$clear(this.url)},i.$clear=function(e){var t=i.audios[e];t&&(t.length=0)},i.$pop=function(e){var t=i.audios[e];return t&&t.length>0?t.pop():null},i.$recycle=function(e,t){var r=i.audios[e];null==i.audios[e]&&(r=i.audios[e]=[]),r.push(t)},i}(e.EventDispatcher);r.MUSIC="music",r.EFFECT="effect",r.audios={},t.HtmlSound=r,__reflect(r.prototype,"egret.web.HtmlSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(t){var i=r.call(this)||this;return i.$startTime=0,i.audio=null,i.isStopped=!1,i.canPlay=function(){i.audio.removeEventListener("canplay",i.canPlay);try{i.audio.currentTime=i.$startTime}catch(e){}finally{i.audio.play()}},i.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},i._volume=1,t.addEventListener("ended",i.onPlayEnd),i.audio=t,i}return __extends(i,r),i.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);try{this.audio.volume=this._volume,this.audio.currentTime=this.$startTime}catch(t){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()},i.prototype.stop=function(){if(this.audio){this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0;var r=this.audio;r.removeEventListener("ended",this.onPlayEnd),r.volume=0,this._volume=0,this.audio=null;var i=this.$url;window.setTimeout(function(){r.pause(),t.HtmlSound.$recycle(i,r)},200)}},Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){return this.isStopped?void e.$error(1036):(this._volume=t,void(this.audio&&(this.audio.volume=t)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.audio?this.audio.currentTime:0},enumerable:!0,configurable:!0}),i}(e.EventDispatcher);t.HtmlSoundChannel=r,__reflect(r.prototype,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var e=r.call(this)||this;return e.loaded=!1,e}return __extends(i,r),i.prototype.load=function(r){var i=this;this.url=r,r||e.$error(3002),QZAppExternal.preloadSound(function(t){0==t.code?(i.loaded=!0,i.dispatchEventWith(e.Event.COMPLETE)):i.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},{bid:-1,url:t.Html5Capatibility._QQRootPath+r,refresh:1})},Object.defineProperty(i.prototype,"length",{get:function(){throw new Error("qq sound not supported!")},enumerable:!0,configurable:!0}),i.prototype.play=function(r,i){r=+r||0,i=+i||0,0==this.loaded&&e.$error(1049);var n=new t.QQSoundChannel;return n.$url=this.url,n.$loops=i,n.$type=this.type,n.$startTime=r,n.$play(),e.sys.$pushSoundChannel(n),n},i.prototype.close=function(){},i}(e.EventDispatcher);r.MUSIC="music",r.EFFECT="effect",t.QQSound=r,__reflect(r.prototype,"egret.web.QQSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=t.call(this)||this;return r.$startTime=0,r.isStopped=!1,r.onPlayEnd=function(){return 1==r.$loops?(r.stop(),void r.dispatchEventWith(e.Event.SOUND_COMPLETE)):(r.$loops>0&&r.$loops--,void r.$play())},r._startTime=0,r}return __extends(r,t),r.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);var t=this;this._startTime=Date.now();var r=0;r=t.$loops>0?t.$loops-1:-1,this.$type==e.Sound.EFFECT?QZAppExternal.playLocalSound(function(e){},{bid:-1,url:t.$url,loop:r}):QZAppExternal.playLocalBackSound(function(e){},{bid:-1,url:t.$url,loop:r})},r.prototype.stop=function(){this.$type==e.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound(),this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0},Object.defineProperty(r.prototype,"volume",{get:function(){return 1},set:function(t){return this.isStopped?void e.$error(1036):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return(Date.now()-this._startTime)/1e3},enumerable:!0,configurable:!0}),r}(e.EventDispatcher);t.QQSoundChannel=r,__reflect(r.prototype,"egret.web.QQSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function e(){}return e.decodeAudios=function(){if(!(e.decodeArr.length<=0||e.isDecoding)){e.isDecoding=!0;var t=e.decodeArr.shift();e.ctx.decodeAudioData(t.buffer,function(r){t.self.audioBuffer=r,t.success&&t.success(),e.isDecoding=!1,e.decodeAudios()},function(){alert("sound decode error: "+t.url+"\nsee http://edn.egret.com/cn/docs/page/156"),t.fail&&t.fail(),e.isDecoding=!1,e.decodeAudios()})}},e}();r.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,r.ctx=r.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,r.decodeArr=[],r.isDecoding=!1,t.WebAudioDecode=r,__reflect(r.prototype,"egret.web.WebAudioDecode");var i=function(i){function n(){var e=i.call(this)||this;return e.loaded=!1,e}return __extends(n,i),Object.defineProperty(n.prototype,"length",{get:function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),n.prototype.load=function(t){function i(){o.loaded=!0,o.dispatchEventWith(e.Event.COMPLETE)}function n(){o.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}var o=this;this.url=t,t||e.$error(3002);var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){r.decodeArr.push({buffer:a.response,success:i,fail:n,self:o,url:o.url}),r.decodeAudios()},a.send()},n.prototype.play=function(r,i){r=+r||0,i=+i||0,0==this.loaded&&e.$error(1049);var n=new t.WebAudioSoundChannel;return n.$url=this.url,n.$loops=i,n.$audioBuffer=this.audioBuffer,n.$startTime=r,n.$play(),e.sys.$pushSoundChannel(n),n},n.prototype.close=function(){},n}(e.EventDispatcher);i.MUSIC="music",i.EFFECT="effect",t.WebAudioSound=i,__reflect(i.prototype,"egret.web.WebAudioSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var i=r.call(this)||this;return i.$startTime=0,i.bufferSource=null,i.context=t.WebAudioDecode.ctx,i.isStopped=!1,i._currentTime=0,i._volume=1,i.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},i._startTime=0,i.context.createGain?i.gain=i.context.createGain():i.gain=i.context.createGainNode(),i}return __extends(i,r),i.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var t=this.context,r=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.$audioBuffer,i.connect(r),r.connect(t.destination),i.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,i.start(0,this.$startTime),this._currentTime=0},i.prototype.stop=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null,this.$audioBuffer=null}this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0},Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){return this.isStopped?void e.$error(1036):(this._volume=t,void(this.gain.gain.value=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0},enumerable:!0,configurable:!0}),i}(e.EventDispatcher);t.WebAudioSoundChannel=r,__reflect(r.prototype,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i){void 0===i&&(i=!0);var n=t.call(this)||this;return n.loaded=!1,n.closed=!1,n.heightSet=0/0,n.widthSet=0/0,n.isPlayed=!1,n.screenChanged=function(t){var r=!!n.video.webkitDisplayingFullscreen;r||(n.checkFullScreen(!1),e.Capabilities.isMobile||(n._fullscreen=r))},n._fullscreen=!0,n.onVideoLoaded=function(){n.video.removeEventListener("canplay",n.onVideoLoaded);var t=n.video;n.loaded=!0,n.posterData&&(n.posterData.width=n.getPlayWidth(),n.posterData.height=n.getPlayHeight()),t.width=t.videoWidth,t.height=t.videoHeight,n.$invalidateContentBounds(),window.setTimeout(function(){n.dispatchEventWith(e.Event.COMPLETE)},200)},n.$renderNode=new e.sys.BitmapNode,n.src=r,n.once(e.Event.ADDED_TO_STAGE,n.loadPoster,n),r&&n.load(),n}return __extends(r,t),r.prototype.load=function(t,r){var i=this;if(void 0===r&&(r=!0),t=t||this.src,this.src=t,t||e.$error(3002),!this.video||this.video.src!=t){var n;!this.video||e.Capabilities.isMobile?(n=document.createElement("video"),this.video=n,n.controls=null):n=this.video,n.src=t,n.setAttribute("autoplay","autoplay"),n.setAttribute("webkit-playsinline","true"),n.addEventListener("canplay",this.onVideoLoaded),n.addEventListener("error",function(){return i.onVideoError()}),n.addEventListener("ended",function(){return i.onVideoEnded()}),n.load(),n.play(),n.style.position="absolute",n.style.top="0px",n.style.zIndex="-88888",n.style.left="0px",n.height=1,n.width=1,window.setTimeout(function(){return n.pause()},170)}},r.prototype.play=function(t,r){var i=this;if(void 0===r&&(r=!1),0==this.loaded)return this.load(this.src),void this.once(e.Event.COMPLETE,function(e){return i.play(t,r)},this);this.isPlayed=!0;var n=this.video;void 0!=t&&(n.currentTime=+t||0),n.loop=!!r,e.Capabilities.isMobile?n.style.zIndex="-88888":n.style.zIndex="9999",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.height=n.videoHeight,n.width=n.videoWidth,"Windows PC"!=e.Capabilities.os&&"Mac OS"!=e.Capabilities.os&&window.setTimeout(function(){n.width=0},1e3),this.checkFullScreen(this._fullscreen)},r.prototype.checkFullScreen=function(t){var r=this.video;if(t)null==r.parentElement&&(r.removeAttribute("webkit-playsinline"),document.body.appendChild(r)),e.stopTick(this.markDirty,this),this.goFullscreen();else if(null!=r.parentElement&&r.parentElement.removeChild(r),r.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),e.startTick(this.markDirty,this),e.Capabilities.isMobile)return this.video.currentTime=0,void this.onVideoEnded();r.play()},r.prototype.goFullscreen=function(){var t,r=this.video;return t=e.web.getPrefixStyleName("requestFullscreen",r),r[t]||(t=e.web.getPrefixStyleName("requestFullScreen",r),r[t])?(r.removeAttribute("webkit-playsinline"),r[t](),this.setFullScreenMonitor(!0),!0):!0},r.prototype.setFullScreenMonitor=function(e){var t=this.video;e?(t.addEventListener("mozfullscreenchange",this.screenChanged),t.addEventListener("webkitfullscreenchange",this.screenChanged),t.addEventListener("mozfullscreenerror",this.screenError),t.addEventListener("webkitfullscreenerror",this.screenError)):(t.removeEventListener("mozfullscreenchange",this.screenChanged),t.removeEventListener("webkitfullscreenchange",this.screenChanged),t.removeEventListener("mozfullscreenerror",this.screenError),t.removeEventListener("webkitfullscreenerror",this.screenError))},r.prototype.screenError=function(){e.$error(3014)},r.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},r.prototype.onVideoEnded=function(){this.pause(),this.isPlayed=!1,this.$invalidateContentBounds(),this.dispatchEventWith(e.Event.ENDED)},r.prototype.onVideoError=function(){this.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},r.prototype.close=function(){var e=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",function(){return e.onVideoError()}),this.video.removeEventListener("ended",function(){return e.onVideoEnded()}),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},r.prototype.pause=function(){this.video&&this.video.pause(),e.stopTick(this.markDirty,this),this.$invalidate()},Object.defineProperty(r.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(e){this.video&&(this.video.volume=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.video?this.video.currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(t){e.Capabilities.isMobile||(this._fullscreen=!!t,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bitmapData",{get:function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=new e.BitmapData(this.video),this._bitmapData.$deleteSource=!1),this._bitmapData):null},enumerable:!0,configurable:!0}),r.prototype.loadPoster=function(){var t=this,r=this.poster;if(r){var i=new e.ImageLoader;i.once(e.Event.COMPLETE,function(e){i.data;t.posterData=i.data,t.posterData.width=t.getPlayWidth(),t.posterData.height=t.getPlayHeight(),t.$invalidateContentBounds()},this),i.load(r)}},r.prototype.$measureContentBounds=function(e){var t=this.bitmapData,r=this.posterData;t?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):r?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):e.setEmpty()},r.prototype.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:0/0:this.widthSet},r.prototype.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:0/0:this.heightSet},r.prototype.$render=function(){var t=this.$renderNode,r=this.bitmapData,i=this.posterData,n=this.getPlayWidth(),o=this.getPlayHeight();this.isPlayed&&!e.Capabilities.isMobile||!i?this.isPlayed&&r&&(t.image=r,t.imageWidth=r.width,t.imageHeight=r.height,e.WebGLUtils.deleteWebGLTexture(r.webGLTexture),r.webGLTexture=null,t.drawImage(0,0,r.width,r.height,0,0,n,o)):(t.image=i,t.imageWidth=n,t.imageHeight=o,t.drawImage(0,0,i.width,i.height,0,0,n,o))},r.prototype.markDirty=function(){return this.$invalidate(),!0},r.prototype.$setHeight=function(e){return this.heightSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),t.prototype.$setHeight.call(this,e)},r.prototype.$setWidth=function(e){return this.widthSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),t.prototype.$setWidth.call(this,e)},Object.defineProperty(r.prototype,"paused",{get:function(){return this.video?this.video.paused:!0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")},enumerable:!0,configurable:!0}),r}(e.DisplayObject);t.WebVideo=r,__reflect(r.prototype,"egret.web.WebVideo",["egret.Video"]),e.Video=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var e=t.call(this)||this;return e._url="",e._method="",e}return __extends(r,t),Object.defineProperty(r.prototype,"response",{get:function(){if(!this._xhr)return null;if(void 0!=this._xhr.response)return this._xhr.response;if("text"==this._responseType)return this._xhr.responseText;if("arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)){var e=window;return e.convertResponseBodyToText(this._xhr.responseBody)}return"document"==this._responseType?this._xhr.responseXML:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"responseType",{get:function(){return this._responseType},set:function(e){this._responseType=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(e){this._withCredentials=e},enumerable:!0,configurable:!0}),r.prototype.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},r.prototype.open=function(e,t){void 0===t&&(t="GET"),this._url=e,this._method=t,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},r.prototype.send=function(e){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var t in this.headerObj)this._xhr.setRequestHeader(t,this.headerObj[t]);this._xhr.send(e)},r.prototype.abort=function(){this._xhr&&this._xhr.abort()},r.prototype.getAllResponseHeaders=function(){if(!this._xhr)return null;var e=this._xhr.getAllResponseHeaders();return e?e:""},r.prototype.setRequestHeader=function(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t},r.prototype.getResponseHeader=function(e){if(!this._xhr)return null;var t=this._xhr.getResponseHeader(e);return t?t:""},r.prototype.onReadyStateChange=function(){var t=this._xhr;if(4==t.readyState){var r=t.status>=400||0==t.status,i=this._url,n=this;window.setTimeout(function(){r?(n.hasEventListener(e.IOErrorEvent.IO_ERROR)||e.$error(1011,i),n.dispatchEventWith(e.IOErrorEvent.IO_ERROR)):n.dispatchEventWith(e.Event.COMPLETE)},0)}},r.prototype.updateProgress=function(t){t.lengthComputable&&e.ProgressEvent.dispatchProgressEvent(this,e.ProgressEvent.PROGRESS,t.loaded,t.total)},r}(e.EventDispatcher);t.WebHttpRequest=r,__reflect(r.prototype,"egret.web.WebHttpRequest",["egret.HttpRequest"]),e.HttpRequest=r,e.$markReadOnly(r,"response")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=window.URL||window.webkitURL,i=function(i){function n(){var e=i.apply(this,arguments)||this;return e.data=null,e._crossOrigin=null,e._hasCrossOriginSet=!1,e.currentImage=null,e.request=null,e}return __extends(n,i),Object.defineProperty(n.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(e){this._hasCrossOriginSet=!0,this._crossOrigin=e},enumerable:!0,configurable:!0}),n.prototype.load=function(r){if(t.Html5Capatibility._canUseBlob&&0!=r.indexOf("wxLocalResource:")&&0!=r.indexOf("data:")&&0!=r.indexOf("http:")&&0!=r.indexOf("https:")){var i=this.request;i||(i=this.request=new e.web.WebHttpRequest,i.addEventListener(e.Event.COMPLETE,this.onBlobLoaded,this),i.addEventListener(e.IOErrorEvent.IO_ERROR,this.onBlobError,this),i.responseType="blob"),this.currentURL=r,i.open(r),i.send()}else this.loadImage(r)},n.prototype.onBlobLoaded=function(e){var t=this.request.response;this.loadImage(r.createObjectURL(t))},n.prototype.onBlobError=function(e){this.dispatchIOError(this.currentURL)},n.prototype.loadImage=function(e){var t=new Image;this.data=null,this.currentImage=t,this._hasCrossOriginSet?this._crossOrigin&&(t.crossOrigin=this._crossOrigin):n.crossOrigin&&(t.crossOrigin=n.crossOrigin),t.onload=this.onImageComplete.bind(this),t.onerror=this.onLoadError.bind(this),t.src=e},n.prototype.onImageComplete=function(t){var r=this.getImage(t);if(r){this.data=new e.BitmapData(r);var i=this;window.setTimeout(function(){i.dispatchEventWith(e.Event.COMPLETE)},0)}},n.prototype.onLoadError=function(e){var t=this.getImage(e);t&&this.dispatchIOError(t.src)},n.prototype.dispatchIOError=function(t){var r=this;window.setTimeout(function(){r.hasEventListener(e.IOErrorEvent.IO_ERROR)||e.$error(1011,t),r.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},0)},n.prototype.getImage=function(t){var i=t.target,n=i.src;if(0==n.indexOf("blob:"))try{r.revokeObjectURL(i.src)}catch(o){e.$warn(1037)}return i.onerror=null,i.onload=null,this.currentImage!==i?null:(this.currentImage=null,i)},n}(e.EventDispatcher);i.crossOrigin=null,t.WebImageLoader=i,__reflect(i.prototype,"egret.web.WebImageLoader",["egret.ImageLoader"]),e.ImageLoader=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var e=r.call(this)||this;return e._isNeedShow=!1,e.inputElement=null,e.inputDiv=null,e._gscaleX=0,e._gscaleY=0,e._isNeesHide=!1,e.textValue="",e.colorValue=16777215,e._styleInfoes={},e}return __extends(i,r),i.prototype.$setTextField=function(e){return this.$textfield=e,!0},i.prototype.$addToStage=function(){this.htmlInput=e.web.$getTextAdapter(this.$textfield)},i.prototype._initElement=function(){var t=this.$textfield.localToGlobal(0,0),r=t.x,i=t.y,n=this.htmlInput.$scaleX,o=this.htmlInput.$scaleY;this.inputDiv.style.left=r*n+"px",this.inputDiv.style.top=i*o+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=i*o+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*o+"px"):(this.inputDiv.style.top=i*o+"px",this.inputElement.style.top="0px");for(var a=this.$textfield,s=1,l=1,h=0;a.parent;)s*=a.scaleX,l*=a.scaleY,h+=a.rotation,a=a.parent;var u=e.web.getPrefixStyleName("transform");this.inputDiv.style[u]="rotate("+h+"deg)",this._gscaleX=n*s,this._gscaleY=o*l},i.prototype.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.$textfield.multiline?this.inputElement.type="text":this.inputElement.type=this.$textfield.inputType,this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},i.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},i.prototype.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},i.prototype.$hide=function(){this._isNeesHide=!0,this.htmlInput&&e.web.Html5Capatibility._System_OS==e.web.SystemOSType.IOS&&this.htmlInput.disconnectStageText(this)},i.prototype.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},i.prototype.$setText=function(e){return this.textValue=e,this.resetText(),!0},i.prototype.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},i.prototype.$setColor=function(e){return this.colorValue=e,this.resetColor(),!0},i.prototype.resetColor=function(){this.inputElement&&this.setElementStyle("color",e.toColorString(this.colorValue))},i.prototype.$onBlur=function(){t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE&&e.Event.dispatchEvent(this,"updateText",!1)},i.prototype._onInput=function(){var r=this;if(t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE){var i=this.$textfield.$TextField;null==i[35]&&null==i[36]?(r.textValue=r.inputElement.value,e.Event.dispatchEvent(r,"updateText",!1)):window.setTimeout(function(){r.inputElement&&r.inputElement.selectionStart&&r.inputElement.selectionEnd&&r.inputElement.selectionStart==r.inputElement.selectionEnd&&(r.textValue=r.inputElement.value,e.Event.dispatchEvent(r,"updateText",!1))},0)}else window.setTimeout(function(){r.inputElement&&r.inputElement.selectionStart==r.inputElement.selectionEnd&&(r.textValue=r.inputElement.value,e.Event.dispatchEvent(r,"updateText",!1))},0)},i.prototype.setAreaHeight=function(){var t=this.$textfield;if(t.multiline){var r=e.TextFieldUtils.$getTextHeight(t);if(t.height<=t.size)this.setElementStyle("height",t.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.size*this._gscaleY+"px");else if(t.height<r)this.setElementStyle("height",t.height*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px");else{this.setElementStyle("height",(r+t.lineSpacing)*this._gscaleY+"px");var i=(t.height-r)*this._gscaleY,n=e.TextFieldUtils.$getValign(t),o=i*n,a=i-o;this.setElementStyle("padding",o+"px 0px "+a+"px 0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px")}}},i.prototype._onClickHandler=function(t){this._isNeedShow&&(t.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new e.Event("focus")))},i.prototype._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new e.Event("blur"))},i.prototype.setElementStyle=function(e,t){this.inputElement&&this._styleInfoes[e]!=t&&(this.inputElement.style[e]=t)},i.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},i.prototype.$resetStageText=function(){if(this.inputElement){var t=this.$textfield;this.setElementStyle("fontFamily",t.fontFamily),this.setElementStyle("fontStyle",t.italic?"italic":"normal"),this.setElementStyle("fontWeight",t.bold?"bold":"normal"),this.setElementStyle("textAlign",t.textAlign),this.setElementStyle("fontSize",t.size*this._gscaleY+"px"),this.setElementStyle("color",e.toColorString(t.textColor));var r=void 0;if(t.stage?(r=t.localToGlobal(0,0).x,r=Math.min(t.width,t.stage.stageWidth-r)):r=t.width,this.setElementStyle("width",r*this._gscaleX+"px"),this.setElementStyle("verticalAlign",t.verticalAlign),t.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",t.size*this._gscaleY+"px"),t.height<t.size){this.setElementStyle("height",t.size*this._gscaleY+"px");var i=t.size/2*this._gscaleY;this.setElementStyle("padding","0px 0px "+i+"px 0px")}else{this.setElementStyle("height",t.size*this._gscaleY+"px");var n=(t.height-t.size)*this._gscaleY,o=e.TextFieldUtils.$getValign(t),a=n*o,i=n-a;i<t.size/2*this._gscaleY&&(i=t.size/2*this._gscaleY),this.setElementStyle("padding",a+"px 0px "+i+"px 0px")}this.inputDiv.style.clip="rect(0px "+t.width*this._gscaleX+"px "+t.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=t.height*this._gscaleY+"px",this.inputDiv.style.width=r*this._gscaleX+"px"}},i}(e.EventDispatcher);t.HTML5StageText=r,__reflect(r.prototype,"egret.web.HTML5StageText",["egret.StageText"]),e.StageText=r}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(t){var r=function(){function t(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1
}return t.prototype.isInputOn=function(){return null!=this._stageText},t.prototype.isCurrentStageText=function(e){return this._stageText==e},t.prototype.initValue=function(e){e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.border="none",e.style.padding="0"},t.prototype.$updateSize=function(){if(this.canvas){var t=this.canvas.width,r=this.canvas.height,i=this.canvas.style.width.split("px")[0],n=this.canvas.style.height.split("px")[0];this.$scaleX=i/t,this.$scaleY=n/r,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var o=e.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[o]=this.canvas.style[o],this.StageDelegateDiv.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"}},t.prototype._initStageDelegateDiv=function(t,r){this.canvas=r;var i,n=this;i||(i=document.createElement("div"),this.StageDelegateDiv=i,i.id="StageDelegateDiv",t.appendChild(i),n.initValue(i),n._inputDIV=document.createElement("div"),n.initValue(n._inputDIV),n._inputDIV.style.width="0px",n._inputDIV.style.height="0px",n._inputDIV.style.left="0px",n._inputDIV.style.top="-100px",n._inputDIV.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",i.appendChild(n._inputDIV),this.canvas.addEventListener("click",function(e){n._needShow?(n._needShow=!1,n._stageText._onClickHandler(e),n.show()):n._inputElement&&(n.clearInputElement(),n._inputElement.blur(),n._inputElement=null)}),n.initInputElement(!0),n.initInputElement(!1))},t.prototype.initInputElement=function(e){var t,r=this;e?(t=document.createElement("textarea"),t.style.resize="none",r._multiElement=t,t.id="egretTextarea"):(t=document.createElement("input"),r._simpleElement=t,t.id="egretInput"),t.type="text",r._inputDIV.appendChild(t),t.setAttribute("tabindex","-1"),t.style.width="1px",t.style.height="12px",r.initValue(t),t.style.outline="thin",t.style.background="none",t.style.overflow="hidden",t.style.wordBreak="break-all",t.style.opacity=0,t.oninput=function(){r._stageText&&r._stageText._onInput()}},t.prototype.show=function(){var t=this,r=t._inputElement;e.$callAsync(function(){r.style.opacity=1},t)},t.prototype.disconnectStageText=function(e){(null==this._stageText||this._stageText==e)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},t.prototype.clearInputElement=function(){var e=this;if(e._inputElement){e._inputElement.value="",e._inputElement.onblur=null,e._inputElement.style.width="1px",e._inputElement.style.height="12px",e._inputElement.style.left="0px",e._inputElement.style.top="0px",e._inputElement.style.opacity=0;var t=void 0;t=e._simpleElement==e._inputElement?e._multiElement:e._simpleElement,t.style.display="block",e._inputDIV.style.left="0px",e._inputDIV.style.top="-100px",e._inputDIV.style.height="0px",e._inputDIV.style.width="0px"}e._stageText&&(e._stageText._onDisconnect(),e._stageText=null,this.canvas.userTyping=!1)},t.prototype.getInputElement=function(e){var t=this;t.clearInputElement(),t._stageText=e,this.canvas.userTyping=!0,t._stageText.$textfield.multiline?t._inputElement=t._multiElement:t._inputElement=t._simpleElement;var r;return r=t._simpleElement==t._inputElement?t._multiElement:t._simpleElement,r.style.display="none",t._inputElement},t}();t.HTMLInput=r,__reflect(r.prototype,"egret.web.HTMLInput")}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(e){function t(e){var t=e.stage?e.stage.$hashCode:0,r=i[t],a=n[t],s=o[t];return a&&s&&(delete n[t],delete o[t]),r}function r(e,t,r,a){e._initStageDelegateDiv(r,a),i[t.$hashCode]=e,n[t.$hashCode]=a,o[t.$hashCode]=r}var i={},n={},o={};e.$getTextAdapter=t,e.$cacheTextAdapter=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t,r,o,a){n||i();var s="";return a&&(s+="italic "),o&&(s+="bold "),s+=(r||12)+"px ",s+=t||"Arial",n.font=s,n.measureText(e).width}function i(){n=e.sys.canvasHitTestBuffer.context,n.textAlign="left",n.textBaseline="middle"}var n=null;e.sys.measureText=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){function t(e,t){var r=document.createElement("canvas");isNaN(e)||isNaN(t)||(r.width=e,r.height=t);var i=r.getContext("2d");if(void 0===i.imageSmoothingEnabled){for(var n,o=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=o.length-1;a>=0&&(n=o[a],void 0===i[n]);a--);try{Object.defineProperty(i,"imageSmoothingEnabled",{get:function(){return this[n]},set:function(e){this[n]=e}})}catch(s){i.imageSmoothingEnabled=i[n]}}return r}var r,i=function(){function e(e,r,i){this.surface=t(e,r),this.context=this.surface.getContext("2d")}return Object.defineProperty(e.prototype,"width",{get:function(){return this.surface.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.surface.height},enumerable:!0,configurable:!0}),e.prototype.resize=function(e,t,r){var i=this.surface;if(r){var n=!1;i.width<e&&(i.width=e,n=!0),i.height<t&&(i.height=t,n=!0),n||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)}else i.width!=e&&(i.width=e),i.height!=t&&(i.height=t);this.clear()},e.prototype.resizeTo=function(e,i,n,o){r||(r=t());var a=(this.context,this.surface),s=r,l=s.getContext("2d");r=a,this.context=l,this.surface=s,s.width=Math.max(e,257),s.height=Math.max(i,257),l.setTransform(1,0,0,1,0,0),l.drawImage(a,n,o),a.height=1,a.width=1},e.prototype.setDirtyRegionPolicy=function(e){},e.prototype.beginClip=function(e,t,r){t=+t||0,r=+r||0;var i=this.context;i.save(),i.beginPath(),i.setTransform(1,0,0,1,t,r);for(var n=e.length,o=0;n>o;o++){var a=e[o];i.clearRect(a.minX,a.minY,a.width,a.height),i.rect(a.minX,a.minY,a.width,a.height)}i.clip()},e.prototype.endClip=function(){this.context.restore()},e.prototype.getPixels=function(e,t,r,i){return void 0===r&&(r=1),void 0===i&&(i=1),this.context.getImageData(e,t,r,i).data},e.prototype.toDataURL=function(e,t){return this.surface.toDataURL(e,t)},e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},e.prototype.destroy=function(){this.surface.width=this.surface.height=0},e}();e.CanvasRenderBuffer=i,__reflect(i.prototype,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i){var n=t.call(this)||this;return n.onTouchBegin=function(e){var t=n.getLocation(e);n.touch.onTouchBegin(t.x,t.y,e.identifier)},n.onTouchMove=function(e){var t=n.getLocation(e);n.touch.onTouchMove(t.x,t.y,e.identifier)},n.onTouchEnd=function(e){var t=n.getLocation(e);n.touch.onTouchEnd(t.x,t.y,e.identifier)},n.scaleX=1,n.scaleY=1,n.rotation=0,n.canvas=i,n.touch=new e.sys.TouchHandler(r),n.addListeners(),n}return __extends(r,t),r.prototype.addListeners=function(){var t=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(e){e.identifier=e.pointerId,t.onTouchBegin(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerMove",function(e){e.identifier=e.pointerId,t.onTouchMove(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerUp",function(e){e.identifier=e.pointerId,t.onTouchEnd(e),t.prevent(e)},!1)):(e.Capabilities.$isMobile||this.addMouseListener(),this.addTouchListener())},r.prototype.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onTouchMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},r.prototype.addTouchListener=function(){var e=this;this.canvas.addEventListener("touchstart",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchBegin(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchmove",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchMove(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchend",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchEnd(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchcancel",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchEnd(t.changedTouches[i]);e.prevent(t)},!1)},r.prototype.prevent=function(e){e.stopPropagation(),1==e.isScroll||this.canvas.userTyping||e.preventDefault()},r.prototype.getLocation=function(t){t.identifier=+t.identifier||0;var r=document.documentElement,i=this.canvas.getBoundingClientRect(),n=i.left+window.pageXOffset-r.clientLeft,o=i.top+window.pageYOffset-r.clientTop,a=t.pageX-n,s=a,l=t.pageY-o,h=l;return 90==this.rotation?(s=l,h=i.width-a):-90==this.rotation&&(s=i.height-l,h=a),s/=this.scaleX,h/=this.scaleY,e.$TempPoint.setTo(Math.round(s),Math.round(h))},r.prototype.updateScaleMode=function(e,t,r){this.scaleX=e,this.scaleY=t,this.rotation=r},r.prototype.$updateMaxTouches=function(){this.touch.$initMaxTouches()},r}(e.HashObject);t.WebTouchHandler=r,__reflect(r.prototype,"egret.web.WebTouchHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(e){var r=t.call(this)||this;return r.isActivate=!0,r.stage=e,r.registerListener(),r}return __extends(r,t),r.prototype.registerListener=function(){var t=this,r=function(){t.isActivate&&(t.isActivate=!1,t.stage.dispatchEvent(new e.Event(e.Event.DEACTIVATE)))},i=function(){t.isActivate||(t.isActivate=!0,t.stage.dispatchEvent(new e.Event(e.Event.ACTIVATE)))},n=function(){document[o]?r():i()};window.addEventListener("focus",i,!1),window.addEventListener("blur",r,!1);var o,a;"undefined"!=typeof document.hidden?(o="hidden",a="visibilitychange"):"undefined"!=typeof document.mozHidden?(o="mozHidden",a="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(o="msHidden",a="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(o="webkitHidden",a="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(o="oHidden",a="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",i,!1),window.addEventListener("pagehide",r,!1)),o&&a&&document.addEventListener(a,n,!1);var s=navigator.userAgent,l=/micromessenger/gi.test(s),h=/mqq/gi.test(s),u=/mobile.*qq/gi.test(s);if((u||l)&&(h=!1),h){var c=window.browser||{};c.execWebFn=c.execWebFn||{},c.execWebFn.postX5GamePlayerMessage=function(e){var t=e.type;"app_enter_background"==t?r():"app_enter_foreground"==t&&i()},window.browser=c}},r}(e.HashObject);t.WebHideHandler=r,__reflect(r.prototype,"egret.web.WebHideHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t){var r="";if(null!=t)r=i(e,t);else{if(null==s){var n=document.createElement("div").style;s=i("transform",n)}r=s}return""==r?e:r+e.charAt(0).toUpperCase()+e.substring(1,e.length)}function i(e,t){if(e in t)return"";e=e.charAt(0).toUpperCase()+e.substring(1,e.length);for(var r=["webkit","ms","Moz","O"],i=0;i<r.length;i++){var n=r[i]+e;if(n in t)return r[i]}return""}var n=function(){function e(){}return e}();n.QQ_AUDIO=1,n.WEB_AUDIO=2,n.HTML5_AUDIO=3,t.AudioType=n,__reflect(n.prototype,"egret.web.AudioType");var o=function(){function e(){}return e}();o.WPHONE=1,o.IOS=2,o.ADNROID=3,t.SystemOSType=o,__reflect(o.prototype,"egret.web.SystemOSType");var a=function(t){function r(){return t.call(this)||this}return __extends(r,t),r.$init=function(){var t=navigator.userAgent.toLowerCase();r.ua=t,e.Capabilities.$isMobile=-1!=t.indexOf("mobile")||-1!=t.indexOf("android"),r._canUseBlob=!1;var i,a=r._audioType,s=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;if(1==a||2==a||3==a?(i=!1,r.setAudioType(a)):(i=!0,r.setAudioType(n.HTML5_AUDIO)),t.indexOf("windows phone")>=0)r._System_OS=o.WPHONE,e.Capabilities.$os="Windows Phone";else if(t.indexOf("android")>=0){if(e.Capabilities.$os="Android",r._System_OS=o.ADNROID,i&&(s?r.setAudioType(n.WEB_AUDIO):r.setAudioType(n.HTML5_AUDIO)),window.hasOwnProperty("QZAppExternal")&&t.indexOf("qzone")>=0){i&&r.setAudioType(n.QQ_AUDIO);var l=document.getElementsByTagName("base");if(l&&l.length>0)r._QQRootPath=l[0].baseURI;else{var h=window.location.href.indexOf("?");-1==h&&(h=window.location.href.length);var u=window.location.href.substring(0,h);u=u.substring(0,u.lastIndexOf("/")),r._QQRootPath=u+"/"}}}else t.indexOf("iphone")>=0||t.indexOf("ipad")>=0||t.indexOf("ipod")>=0?(e.Capabilities.$os="iOS",r._System_OS=o.IOS,r.getIOSVersion()>=7&&(r._canUseBlob=!0,i&&r.setAudioType(n.WEB_AUDIO))):-1!=t.indexOf("windows nt")?e.Capabilities.$os="Windows PC":-1!=t.indexOf("mac os")&&(e.Capabilities.$os="Mac OS");var c=window.URL||window.webkitURL;c||(r._canUseBlob=!1),e.Sound=r._AudioClass},r.setAudioType=function(t){switch(r._audioType=t,t){case n.QQ_AUDIO:r._AudioClass=e.web.QQSound;break;case n.WEB_AUDIO:r._AudioClass=e.web.WebAudioSound;break;case n.HTML5_AUDIO:r._AudioClass=e.web.HtmlSound}},r.getIOSVersion=function(){var e=r.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(e.match(/\d+(_\d)*/)[0])||0},r.checkHtml5Support=function(){var t=(navigator.language||navigator.browserLanguage).toLowerCase(),r=t.split("-");r.length>1&&(r[1]=r[1].toUpperCase()),e.Capabilities.$language=r.join("-")},r}(e.HashObject);a._canUseBlob=!1,a._audioType=0,a._QQRootPath="",a._System_OS=0,a.ua="",t.Html5Capatibility=a,__reflect(a.prototype,"egret.web.Html5Capatibility");var s=null;t.getPrefixStyleName=r,t.getPrefix=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(){if(s)for(var e=document.querySelectorAll(".egret-player"),t=e.length,r=0;t>r;r++){var i=e[r],n=i["egret-player"];n.updateScreenSize()}}function i(r){if(!s){if(s=!0,r||(r={}),t.Html5Capatibility._audioType=r.audioType,t.Html5Capatibility.$init(),"webgl"==r.renderMode){var i=r.antialias;t.WebGLRenderContext.antialias=!!i}e.sys.CanvasRenderBuffer=t.CanvasRenderBuffer,n(r.renderMode);var a=e.sys.$ticker;o(a),r.screenAdapter?e.sys.screenAdapter=r.screenAdapter:e.sys.screenAdapter||(e.sys.screenAdapter=new e.sys.DefaultScreenAdapter);for(var l=document.querySelectorAll(".egret-player"),h=l.length,u=0;h>u;u++){var c=l[u],d=new t.WebPlayer(c,r);c["egret-player"]=d,"webgl"==e.Capabilities.$renderMode&&(d.stage.dirtyRegionPolicy=e.DirtyRegionPolicy.OFF)}"webgl"==e.Capabilities.$renderMode&&(e.sys.DisplayList.prototype.setDirtyRegionPolicy=function(){})}}function n(r){"webgl"==r&&e.WebGLUtils.checkCanUseWebGL()?(e.sys.RenderBuffer=t.WebGLRenderBuffer,e.sys.systemRenderer=new t.WebGLRenderer,e.sys.canvasRenderer=new e.CanvasRenderer,e.sys.customHitTestBuffer=new t.WebGLRenderBuffer(3,3),e.sys.canvasHitTestBuffer=new t.CanvasRenderBuffer(3,3),e.Capabilities.$renderMode="webgl"):(e.sys.RenderBuffer=t.CanvasRenderBuffer,e.sys.systemRenderer=new e.CanvasRenderer,e.sys.canvasRenderer=e.sys.systemRenderer,e.sys.customHitTestBuffer=new t.CanvasRenderBuffer(3,3),e.sys.canvasHitTestBuffer=e.sys.customHitTestBuffer,e.Capabilities.$renderMode="canvas")}function o(e){function t(){e.update(),r.call(window,t)}var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;r||(r=function(e){return window.setTimeout(e,1e3/60)}),r.call(window,t)}function a(){l=0/0,e.updateAllScreens()}var s=!1;window.isNaN=function(e){return e=+e,e!==e},e.runEgret=i,e.updateAllScreens=r;var l=0/0;window.addEventListener("resize",function(){isNaN(l)&&(l=window.setTimeout(a,300))})}(t=e.web||(e.web={}))}(egret||(egret={}));var language=navigator.language||navigator.browserLanguage||"en_US";language=language.replace("-","_"),language in egret.$locale_strings&&(egret.$language=language);var egret;!function(e){var t;!function(t){var r=function(){function t(){}return t.detect=function(){var r=e.Capabilities,i=navigator.userAgent.toLowerCase();r.$isMobile=-1!=i.indexOf("mobile")||-1!=i.indexOf("android"),r.$isMobile?i.indexOf("windows")<0&&(-1!=i.indexOf("iphone")||-1!=i.indexOf("ipad")||-1!=i.indexOf("ipod"))?r.$os="iOS":-1!=i.indexOf("android")&&-1!=i.indexOf("linux")?r.$os="Android":-1!=i.indexOf("windows")&&(r.$os="Windows Phone"):-1!=i.indexOf("windows nt")?r.$os="Windows PC":-1!=i.indexOf("mac os")&&(r.$os="Mac OS");var n=(navigator.language||navigator.browserLanguage).toLowerCase(),o=n.split("-");o.length>1&&(o[1]=o[1].toUpperCase()),r.$language=o.join("-"),t.injectUIntFixOnIE9()},t.injectUIntFixOnIE9=function(){if(/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var e="<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n</script>\r\n<!-- convertResponseBodyToText -->\r\n<script>\r\nlet convertResponseBodyToText = function (binary) {\r\n   let byteMapping = {};\r\n   for ( let i = 0; i < 256; i++ ) {\r\n       for ( let j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   let rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   let lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n</script>\r\n";document.write(e)}},t}();t.WebCapability=r,__reflect(r.prototype,"egret.web.WebCapability"),r.detect()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=["source-over","lighter","destination-out"],i="source-over",n=[],o=function(){function o(){this.nestLevel=0}return o.prototype.render=function(e,t,r,i,o){this.nestLevel++;var a=t,s=a.context,l=o?e:null;s.pushBuffer(a),this.drawDisplayObject(e,a,i,r,null,null,l),s.$drawWebGL();var h=a.$drawCalls;if(a.onRenderFinish(),s.popBuffer(),this.nestLevel--,0===this.nestLevel){n.length>6&&(n.length=6);for(var u=n.length,c=0;u>c;c++)n[c].resize(0,0)}return h},o.prototype.drawDisplayObject=function(t,r,i,n,o,a,s){var l,h=0;if(o&&!s?(o.isDirty&&(h+=o.drawToSurface()),l=o.$renderNode):l=t.$getRenderNode(),l){if(i){var u=l.renderRegion;if(a&&!a.intersects(u))l.needRedraw=!1;else if(!l.needRedraw)for(var c=i.length,d=0;c>d;d++)if(u.intersects(i[d])){l.needRedraw=!0;break}}else l.needRedraw=!0;if(l.needRedraw){h++;var p=void 0,f=void 0;s?(p=t.$getConcatenatedAlphaAt(s,t.$getConcatenatedAlpha()),f=e.Matrix.create().copyFrom(t.$getConcatenatedMatrix()),t.$getConcatenatedMatrixAt(s,f),n.$preMultiplyInto(f,f),r.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),e.Matrix.release(f)):(p=l.renderAlpha,f=l.renderMatrix,r.setTransform(f.a,f.b,f.c,f.d,f.tx+n.tx,f.ty+n.ty)),r.globalAlpha=p,this.renderNode(l,r),l.needRedraw=!1}}if(o&&!s)return h;var g=t.$children;if(g)for(var v=g.length,y=0;v>y;y++){var m=g[y];if(!(!m.$visible||m.$alpha<=0||m.$maskedObject)){var x=m.$getFilters();x&&x.length>0?h+=this.drawWithFilter(m,r,i,n,a,s):0!==m.$blendMode||m.$mask&&(m.$mask.$parentDisplayList||s)?h+=this.drawWithClip(m,r,i,n,a,s):m.$scrollRect||m.$maskRect?h+=this.drawWithScrollRect(m,r,i,n,a,s):m.isFPS?(r.context.$drawWebGL(),r.$computeDrawCall=!1,this.drawDisplayObject(m,r,i,n,m.$displayList,a,s),r.context.$drawWebGL(),r.$computeDrawCall=!0):h+=this.drawDisplayObject(m,r,i,n,m.$displayList,a,s)}}return h},o.prototype.drawWithFilter=function(t,o,a,s,l,h){var u,c=0,d=t.$getFilters(),p=0!==t.$blendMode;if(p&&(u=r[t.$blendMode],u||(u=i)),1==d.length&&"colorTransform"==d[0].type&&!t.$children)return p&&o.context.setGlobalCompositeOperation(u),o.context.$filter=d[0],c+=t.$mask&&(t.$mask.$parentDisplayList||h)?this.drawWithClip(t,o,a,s,l,h):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,o,a,s,l,h):this.drawDisplayObject(t,o,a,s,t.$displayList,l,h),o.context.$filter=null,p&&o.context.setGlobalCompositeOperation(i),c;var f=e.Matrix.create();f.copyFrom(t.$getConcatenatedMatrix()),h&&t.$getConcatenatedMatrixAt(h,f);var g;g=e.sys.Region.create();var v=t.$getOriginalBounds();g.updateRegion(v,f);var y=this.createRenderBuffer(g.width,g.height);y.context.pushBuffer(y),y.setTransform(1,0,0,1,-g.minX,-g.minY);var m=e.Matrix.create().setTo(1,0,0,1,-g.minX,-g.minY);return c+=t.$mask&&(t.$mask.$parentDisplayList||h)?this.drawWithClip(t,y,a,m,g,h):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,y,a,m,g,h):this.drawDisplayObject(t,y,a,m,t.$displayList,g,h),e.Matrix.release(m),y.context.popBuffer(),c>0&&(p&&o.context.setGlobalCompositeOperation(u),c++,o.globalAlpha=1,o.setTransform(1,0,0,1,g.minX+s.tx,g.minY+s.ty),o.context.drawTargetWidthFilters(d,y),p&&o.context.setGlobalCompositeOperation(i)),n.push(y),e.sys.Region.release(g),e.Matrix.release(f),c},o.prototype.drawWithClip=function(t,o,a,s,l,h){var u,c=0,d=0!==t.$blendMode;d&&(u=r[t.$blendMode],u||(u=i));var p=t.$scrollRect?t.$scrollRect:t.$maskRect,f=t.$mask;if(f){var g=f.$getRenderNode();if(g){var v=g.renderMatrix;if(0==v.a&&0==v.b||0==v.c&&0==v.d)return c}}var y,m=e.Matrix.create();if(m.copyFrom(t.$getConcatenatedMatrix()),t.$parentDisplayList){var x=t.$parentDisplayList.root;x!==t.$stage&&t.$getConcatenatedMatrixAt(x,m)}var b;if(f){b=f.$getOriginalBounds(),y=e.sys.Region.create();var w=e.Matrix.create();w.copyFrom(f.$getConcatenatedMatrix()),y.updateRegion(b,w),e.Matrix.release(w)}var E;if(p&&(E=e.sys.Region.create(),E.updateRegion(p,m)),E&&y?(E.intersect(y),e.sys.Region.release(y)):!E&&y&&(E=y),E){if(E.isEmpty()||l&&!l.intersects(E))return e.sys.Region.release(E),e.Matrix.release(m),c}else E=e.sys.Region.create(),b=t.$getOriginalBounds(),E.updateRegion(b,m);var T=!1;if(a){for(var S=a.length,_=0;S>_;_++)if(E.intersects(a[_])){T=!0;break}}else T=!0;if(!T)return e.sys.Region.release(E),e.Matrix.release(m),c;if(f||t.$children&&0!=t.$children.length){var C=this.createRenderBuffer(E.width,E.height);C.context.pushBuffer(C),C.setTransform(1,0,0,1,-E.minX,-E.minY);var R=e.Matrix.create().setTo(1,0,0,1,-E.minX,-E.minY);if(c+=this.drawDisplayObject(t,C,a,R,t.$displayList,E,h),f){var L=this.createRenderBuffer(E.width,E.height);L.context.pushBuffer(L),L.setTransform(1,0,0,1,-E.minX,-E.minY),R=e.Matrix.create().setTo(1,0,0,1,-E.minX,-E.minY),c+=this.drawDisplayObject(f,L,a,R,f.$displayList,E,h),L.context.popBuffer(),C.context.setGlobalCompositeOperation("destination-in"),C.setTransform(1,0,0,-1,0,L.height),C.globalAlpha=1;var D=L.rootRenderTarget.width,A=L.rootRenderTarget.height;C.context.drawTexture(L.rootRenderTarget.texture,0,0,D,A,0,0,D,A,D,A),C.context.setGlobalCompositeOperation("source-over"),n.push(L)}if(e.Matrix.release(R),C.context.setGlobalCompositeOperation(i),C.context.popBuffer(),c>0){if(c++,d&&o.context.setGlobalCompositeOperation(u),p){var w=m;C.setTransform(w.a,w.b,w.c,w.d,w.tx-E.minX,w.ty-E.minY),C.context.pushMask(p)}o.globalAlpha=1,o.setTransform(1,0,0,-1,E.minX+s.tx,E.minY+s.ty+C.height);var $=C.rootRenderTarget.width,M=C.rootRenderTarget.height;o.context.drawTexture(C.rootRenderTarget.texture,0,0,$,M,0,0,$,M,$,M),p&&C.context.popMask(),d&&o.context.setGlobalCompositeOperation(i)}return n.push(C),e.sys.Region.release(E),e.Matrix.release(m),c}if(p){var w=m;o.setTransform(w.a,w.b,w.c,w.d,w.tx-E.minX,w.ty-E.minY),o.context.pushMask(p)}return d&&o.context.setGlobalCompositeOperation(u),c+=this.drawDisplayObject(t,o,a,s,t.$displayList,l,h),d&&o.context.setGlobalCompositeOperation(i),p&&o.context.popMask(),e.sys.Region.release(E),e.Matrix.release(m),c},o.prototype.drawWithScrollRect=function(t,r,i,n,o,a){var s=0,l=t.$scrollRect?t.$scrollRect:t.$maskRect;if(l.isEmpty())return s;var h=e.Matrix.create();if(h.copyFrom(t.$getConcatenatedMatrix()),a)t.$getConcatenatedMatrixAt(a,h);else if(t.$parentDisplayList){var u=t.$parentDisplayList.root;u!==t.$stage&&t.$getConcatenatedMatrixAt(u,h)}var c=e.sys.Region.create();if(c.updateRegion(l,h),c.isEmpty()||o&&!o.intersects(c))return e.sys.Region.release(c),e.Matrix.release(h),s;var d=!1;if(i){for(var p=i.length,f=0;p>f;f++)if(c.intersects(i[f])){d=!0;break}}else d=!0;if(!d)return e.sys.Region.release(c),e.Matrix.release(h),s;r.setTransform(h.a,h.b,h.c,h.d,h.tx+n.tx,h.ty+n.ty);var g=r.context,v=!1;if(r.$hasScissor||0!=h.b||0!=h.c)g.pushMask(l);else{var y=l.x,m=l.y,x=l.width,b=l.height;y=y*h.a+h.tx+n.tx,m=m*h.d+h.ty+n.ty,x*=h.a,b*=h.d,g.enableScissor(y,-m-b+r.height,x,b),v=!0}return s+=this.drawDisplayObject(t,r,i,n,t.$displayList,c,a),r.setTransform(h.a,h.b,h.c,h.d,h.tx+n.tx,h.ty+n.ty),v?g.disableScissor():g.popMask(),e.sys.Region.release(c),e.Matrix.release(h),s},o.prototype.drawNodeToBuffer=function(e,t,r,i){var n=t;n.context.pushBuffer(n),n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.renderNode(e,t,i),n.context.$drawWebGL(),n.onRenderFinish(),n.context.popBuffer()},o.prototype.renderNode=function(e,t,r){switch(e.type){case 1:this.renderBitmap(e,t);break;case 2:this.renderText(e,t);break;case 3:this.renderGraphics(e,t,r);break;case 4:this.renderGroup(e,t);break;case 6:t.globalAlpha=e.drawData[0];break;case 7:this.renderMesh(e,t)}},o.prototype.renderBitmap=function(e,t){var n=e.image;if(n){var o=e.drawData,a=o.length,s=0,l=e.matrix,h=e.blendMode,u=e.alpha;l&&(t.saveTransform(),t.transform(l.a,l.b,l.c,l.d,l.tx,l.ty)),h&&t.context.setGlobalCompositeOperation(r[h]);var c;if(u==u&&(c=t.globalAlpha,t.globalAlpha*=u),e.filter){for(t.context.$filter=e.filter;a>s;)t.context.drawImage(n,o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],e.imageWidth,e.imageHeight);t.context.$filter=null}else for(;a>s;)t.context.drawImage(n,o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],e.imageWidth,e.imageHeight);h&&t.context.setGlobalCompositeOperation(i),u==u&&(t.globalAlpha=c),l&&t.restoreTransform()}},o.prototype.renderMesh=function(e,t){var r=e.image,i=e.drawData,n=i.length,o=0,a=e.matrix;for(a&&(t.saveTransform(),t.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));n>o;)t.context.drawMesh(r,i[o++],i[o++],i[o++],i[o++],i[o++],i[o++],i[o++],i[o++],e.imageWidth,e.imageHeight,e.uvs,e.vertices,e.indices,e.bounds);a&&t.restoreTransform()},o.prototype.renderText=function(r,i){var n=r.width-r.x,o=r.height-r.y;if(0!=r.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?r.dirtyRender&&this.canvasRenderBuffer.resize(n,o):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(n,o)),this.canvasRenderBuffer.context)){if((r.x||r.y)&&(r.dirtyRender&&this.canvasRenderBuffer.context.translate(-r.x,-r.y),i.transform(1,0,0,1,r.x,r.y)),r.dirtyRender){var a=this.canvasRenderBuffer.surface;this.canvasRenderer.renderText(r,this.canvasRenderBuffer.context);var s=r.$texture;s?i.context.updateTexture(s,a):(s=i.context.createTexture(a),r.$texture=s),r.$textureWidth=a.width,r.$textureHeight=a.height}var l=r.$textureWidth,h=r.$textureHeight;i.context.drawTexture(r.$texture,0,0,l,h,0,0,l,h,l,h),(r.x||r.y)&&(r.dirtyRender&&this.canvasRenderBuffer.context.translate(r.x,r.y),i.transform(1,0,0,1,-r.x,-r.y)),r.dirtyRender=!1}},o.prototype.renderGraphics=function(r,i,n){var o=r.width,a=r.height;if(!(0>=o||0>=a)&&o&&a&&0!=r.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?(r.dirtyRender||n)&&this.canvasRenderBuffer.resize(o,a):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(o,a)),this.canvasRenderBuffer.context)){(r.x||r.y)&&((r.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(-r.x,-r.y),i.transform(1,0,0,1,r.x,r.y));var s=this.canvasRenderBuffer.surface;if(n){this.canvasRenderer.renderGraphics(r,this.canvasRenderBuffer.context,!0),e.WebGLUtils.deleteWebGLTexture(s);var l=i.context.getWebGLTexture(s);i.context.drawTexture(l,0,0,o,a,0,0,o,a,s.width,s.height)}else{if(r.dirtyRender){this.canvasRenderer.renderGraphics(r,this.canvasRenderBuffer.context);var l=r.$texture;l?i.context.updateTexture(l,s):(l=i.context.createTexture(s),r.$texture=l),r.$textureWidth=s.width,r.$textureHeight=s.height}var h=r.$textureWidth,u=r.$textureHeight;i.context.drawTexture(r.$texture,0,0,h,u,0,0,h,u,h,u)}(r.x||r.y)&&((r.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(r.x,r.y),i.transform(1,0,0,1,-r.x,-r.y)),n||(r.dirtyRender=!1)}},o.prototype.renderGroup=function(e,t){for(var r=e.drawData,i=r.length,n=0;i>n;n++){var o=r[n];this.renderNode(o,t)}},o.prototype.createRenderBuffer=function(e,r){var i=n.pop();return i?i.resize(e,r):(i=new t.WebGLRenderBuffer(e,r),i.$computeDrawCall=!1),i},o}();t.WebGLRenderer=o,__reflect(o.prototype,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e){if(window.location){var t=location.search;if(""==t)return"";t=t.slice(1);for(var r=t.split("&"),i=r.length,n=0;i>n;n++){var o=r[n],a=o.split("=");if(a[0]==e)return a[1]}}return""}t.getOption=r,e.getOption=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(e,t){var i=r.call(this)||this;return i.init(e,t),i.initOrientation(),i}return __extends(i,r),i.prototype.init=function(r,i){var n=this.readOption(r,i),o=new e.Stage;o.$screen=this,o.$scaleMode=n.scaleMode,o.$orientation=n.orientation,o.$maxTouches=n.maxTouches,o.frameRate=n.frameRate,o.textureScaleFactor=n.textureScaleFactor;var a=new e.sys.RenderBuffer(void 0,void 0,!0),s=a.surface;this.attachCanvas(r,s);var l=new t.WebTouchHandler(o,s),h=new e.sys.Player(a,o,n.entryClassName),u=new e.web.WebHideHandler(o),c=new t.HTMLInput;h.showPaintRect(n.showPaintRect),(n.showFPS||n.showLog)&&h.displayFPS(n.showFPS,n.showLog,n.logFilter,n.fpsStyles),this.playerOption=n,this.container=r,this.canvas=s,this.stage=o,this.player=h,this.webTouchHandler=l,this.webInput=c,this.webHide=u,e.web.$cacheTextAdapter(c,o,r,s),this.updateScreenSize(),this.updateMaxTouches(),h.start()},i.prototype.initOrientation=function(){var t=this;window.addEventListener("orientationchange",function(){window.setTimeout(function(){e.StageOrientationEvent.dispatchStageOrientationEvent(t.stage,e.StageOrientationEvent.ORIENTATION_CHANGE)},350)})},i.prototype.readOption=function(t,r){var i={};i.entryClassName=t.getAttribute("data-entry-class"),i.scaleMode=t.getAttribute("data-scale-mode")||e.StageScaleMode.NO_SCALE,i.frameRate=+t.getAttribute("data-frame-rate")||30,i.contentWidth=+t.getAttribute("data-content-width")||480,i.contentHeight=+t.getAttribute("data-content-height")||800,i.orientation=t.getAttribute("data-orientation")||e.OrientationMode.AUTO,i.maxTouches=+t.getAttribute("data-multi-fingered")||2,i.textureScaleFactor=+t.getAttribute("texture-scale-factor")||1,"webgl"==r.renderMode?i.showPaintRect=!1:i.showPaintRect="true"==t.getAttribute("data-show-paint-rect"),i.showFPS="true"==t.getAttribute("data-show-fps");for(var n=t.getAttribute("data-show-fps-style")||"",o=n.split(","),a={},s=0;s<o.length;s++){var l=o[s].split(":");a[l[0]]=l[1]}return i.fpsStyles=a,i.showLog="true"==t.getAttribute("data-show-log"),i.logFilter=t.getAttribute("data-log-filter"),i},i.prototype.attachCanvas=function(e,t){var r=t.style;r.cursor="inherit",r.position="absolute",r.top="0",r.bottom="0",r.left="0",r.right="0",e.appendChild(t),r=e.style,r.overflow="hidden",r.position="relative",r.webkitTransform="translateZ(0)"},i.prototype.updateScreenSize=function(){var t=this.canvas;if(!t.userTyping){var r=this.playerOption,i=this.container.getBoundingClientRect(),n=!1,o=this.stage.$orientation;o!=e.OrientationMode.AUTO&&(n=o!=e.OrientationMode.PORTRAIT&&i.height>i.width||o==e.OrientationMode.PORTRAIT&&i.width>i.height);var a=n?i.height:i.width,s=n?i.width:i.height;e.Capabilities.$boundingClientWidth=a,e.Capabilities.$boundingClientHeight=s;var l=e.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,a,s,r.contentWidth,r.contentHeight),h=l.stageWidth,u=l.stageHeight,c=l.displayWidth,d=l.displayHeight;
t.width!==h&&(t.width=h),t.height!==u&&(t.height=u),t.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",t.style.width=c+"px",t.style.height=d+"px";var p=0;n?o==e.OrientationMode.LANDSCAPE?(p=90,t.style.top=(i.height-c)/2+"px",t.style.left=(i.width+d)/2+"px"):(p=-90,t.style.top=(i.height+c)/2+"px",t.style.left=(i.width-d)/2+"px"):(t.style.top=(i.height-d)/2+"px",t.style.left=(i.width-c)/2+"px");var f="rotate("+p+"deg)";t.style[e.web.getPrefixStyleName("transform")]=f;var g=c/h,v=d/u;this.webTouchHandler.updateScaleMode(g,v,p),this.webInput.$updateSize(),this.player.updateStageSize(h,u)}},i.prototype.setContentSize=function(e,t){var r=this.playerOption;r.contentWidth=e,r.contentHeight=t,this.updateScreenSize()},i.prototype.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},i}(e.HashObject);t.WebPlayer=r,__reflect(r.prototype,"egret.web.WebPlayer",["egret.sys.Screen"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(t,r){s||(s=document.createElement("canvas"),l=s.getContext("2d"));var i=t.$getTextureWidth(),n=t.$getTextureHeight();null==r&&(r=e.$TempRectangle,r.x=0,r.y=0,r.width=i,r.height=n),r.x=Math.min(r.x,i-1),r.y=Math.min(r.y,n-1),r.width=Math.min(r.width,i-r.x),r.height=Math.min(r.height,n-r.y);var o=r.width,a=r.height,h=s;if(h.style.width=o+"px",h.style.height=a+"px",s.width=o,s.height=a,"webgl"==e.Capabilities.$renderMode){var u=void 0;t.$renderBuffer?u=t:(u=new e.RenderTexture,u.drawToTexture(new e.Bitmap(t)));for(var c=u.$renderBuffer.getPixels(r.x,r.y,o,a),d=new ImageData(o,a),p=0;p<c.length;p++)d.data[p]=c[p];return l.putImageData(d,0,0),t.$renderBuffer||u.dispose(),h}var f=t,g=Math.round(f._offsetX),v=Math.round(f._offsetY),y=f._bitmapWidth,m=f._bitmapHeight;return l.drawImage(f._bitmapData.source,f._bitmapX+r.x/e.$TextureScaleFactor,f._bitmapY+r.y/e.$TextureScaleFactor,y*r.width/i,m*r.height/n,g,v,r.width,r.height),h}function i(t,i){try{var n=r(this,i),o=n.toDataURL(t);return o}catch(a){e.$error(1033)}return null}function n(e,t,r){var n=i.call(this,e,r);if(null!=n){var o=n.replace(/^data:image[^;]*/,"data:image/octet-stream"),a=document.createElement("a");a.download=t,a.href=o;var s=document.createEvent("HTMLEvents");s.initEvent("click",!1,!1),a.dispatchEvent(s)}}function o(t,r){return e.$warn(1041,"getPixel32","getPixels"),this.getPixels(t,r)}function a(t,i,n,o){void 0===n&&(n=1),void 0===o&&(o=1);try{var a=(r(this),l.getImageData(t,i,n,o).data);return a}catch(s){e.$error(1039)}}var s,l;e.Texture.prototype.toDataURL=i,e.Texture.prototype.saveToFile=n,e.Texture.prototype.getPixel32=o,e.Texture.prototype.getPixels=a}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e){for(var t=s.parseFromString(e,"text/xml"),r=t.childNodes.length,n=0;r>n;n++){var o=t.childNodes[n];if(1==o.nodeType)return i(o,null)}return null}function i(e,t){if("parsererror"==e.localName)throw new Error(e.textContent);for(var r=new o(e.localName,t,e.prefix,e.namespaceURI,e.nodeName),n=e.attributes,s=r.attributes,l=n.length,h=0;l>h;h++){var u=n[h],c=u.name;0!=c.indexOf("xmlns:")&&(s[c]=u.value,r["$"+c]=u.value)}var d=e.childNodes;l=d.length;for(var p=r.children,h=0;l>h;h++){var f=d[h],g=f.nodeType,v=null;if(1==g)v=i(f,r);else if(3==g){var y=f.textContent.trim();y&&(v=new a(y,r))}v&&p.push(v)}return r}var n=function(){function e(e,t){this.nodeType=e,this.parent=t}return e}();t.XMLNode=n,__reflect(n.prototype,"egret.web.XMLNode");var o=function(e){function t(t,r,i,n,o){var a=e.call(this,1,r)||this;return a.attributes={},a.children=[],a.localName=t,a.prefix=i,a.namespace=n,a.name=o,a}return __extends(t,e),t}(n);t.XML=o,__reflect(o.prototype,"egret.web.XML");var a=function(e){function t(t,r){var i=e.call(this,3,r)||this;return i.text=t,i}return __extends(t,e),t}(n);t.XMLText=a,__reflect(a.prototype,"egret.web.XMLText");var s=new DOMParser;e.XML={parse:r}}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=t.apply(this,arguments)||this;return r.onChange=function(t){var i=new e.OrientationEvent(e.Event.CHANGE);i.beta=t.beta,i.gamma=t.gamma,i.alpha=t.alpha,r.dispatchEvent(i)},r}return __extends(r,t),r.prototype.start=function(){window.addEventListener("deviceorientation",this.onChange)},r.prototype.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},r}(e.EventDispatcher);t.WebDeviceOrientation=r,__reflect(r.prototype,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(t=e.web||(e.web={}))}(egret||(egret={})),egret.DeviceOrientation=egret.web.WebDeviceOrientation;var egret;!function(e){var t;!function(t){var r=function(t){function r(r){var i=t.call(this)||this;return i.onUpdate=function(t){var r=new e.GeolocationEvent(e.Event.CHANGE),n=t.coords;r.altitude=n.altitude,r.heading=n.heading,r.accuracy=n.accuracy,r.latitude=n.latitude,r.longitude=n.longitude,r.speed=n.speed,r.altitudeAccuracy=n.altitudeAccuracy,i.dispatchEvent(r)},i.onError=function(t){var r=e.GeolocationEvent.UNAVAILABLE;t.code==t.PERMISSION_DENIED&&(r=e.GeolocationEvent.PERMISSION_DENIED);var n=new e.GeolocationEvent(e.IOErrorEvent.IO_ERROR);n.errorType=r,n.errorMessage=t.message,i.dispatchEvent(n)},i.geolocation=navigator.geolocation,i}return __extends(r,t),r.prototype.start=function(){var t=this.geolocation;t?this.watchId=t.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:e.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},r.prototype.stop=function(){var e=this.geolocation;e.clearWatch(this.watchId)},r}(e.EventDispatcher);t.WebGeolocation=r,__reflect(r.prototype,"egret.web.WebGeolocation",["egret.Geolocation"]),e.Geolocation=e.web.WebGeolocation}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=t.apply(this,arguments)||this;return r.onChange=function(t){var i=new e.MotionEvent(e.Event.CHANGE),n={x:t.acceleration.x,y:t.acceleration.y,z:t.acceleration.z},o={x:t.accelerationIncludingGravity.x,y:t.accelerationIncludingGravity.y,z:t.accelerationIncludingGravity.z},a={alpha:t.rotationRate.alpha,beta:t.rotationRate.beta,gamma:t.rotationRate.gamma};i.acceleration=n,i.accelerationIncludingGravity=o,i.rotationRate=a,r.dispatchEvent(i)},r}return __extends(r,t),r.prototype.start=function(){window.addEventListener("devicemotion",this.onChange)},r.prototype.stop=function(){window.removeEventListener("devicemotion",this.onChange)},r}(e.EventDispatcher);t.WebMotion=r,__reflect(r.prototype,"egret.web.WebMotion",["egret.Motion"]),e.Motion=e.web.WebMotion}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(t){switch(null==i&&(i={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log}),t){case e.Logger.OFF:console.error=function(){};case e.Logger.ERROR:console.warn=function(){};case e.Logger.WARN:console.info=function(){},console.log=function(){};case e.Logger.INFO:console.debug=function(){}}switch(t){case e.Logger.ALL:case e.Logger["true"]:console.debug=i.debug;case e.Logger.INFO:console.log=i.log,console.info=i.info;case e.Logger.WARN:console.warn=i.warn;case e.Logger.ERROR:console.error=i.error}}var i;Object.defineProperty(e.Logger,"logLevel",{set:r,enumerable:!0,configurable:!0})}(t=e.web||(e.web={}))}(egret||(egret={})),void 0==window.HTMLVideoElement&&(window.HTMLVideoElement=HTMLDivElement);var egret;!function(e){var t;!function(t){var r="egret.BitmapData";e.registerClass(HTMLImageElement,r),e.registerClass(HTMLCanvasElement,r),e.registerClass(HTMLVideoElement,r)}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){function t(t){return t.hashCode=t.$hashCode=e.$hashCount++,t}e.$toBitmapData=t}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function e(){}return e.call=function(e,t){},e.addCallback=function(e,t){},e}();t.WebExternalInterface=r,__reflect(r.prototype,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),e.ExternalInterface=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void) {\ngl_FragColor = vColor;\n}",t}return __extends(t,e),t}(e.EgretShader);e.PrimitiveShader=t,__reflect(t.prototype,"egret.web.PrimitiveShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;uniform vec2 uTextureSize;void main(){const int sampleRadius = 5;const int samples = sampleRadius * 2 + 1;vec2 blurUv = blur / uTextureSize;vec4 color = vec4(0, 0, 0, 0);vec2 uv = vec2(0.0, 0.0);blurUv /= float(sampleRadius);for (int i = -sampleRadius; i <= sampleRadius; i++) {uv.x = vTextureCoord.x + float(i) * blurUv.x;uv.y = vTextureCoord.y + float(i) * blurUv.y;color += texture2D(uSampler, uv);}color /= float(samples);gl_FragColor = color;}",t.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},blur:{type:"2f",value:{x:2,y:2},dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}},t}return __extends(t,e),t.prototype.setBlur=function(e,t){var r=this.uniforms.blur;(r.value.x!=e||r.value.y!=t)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t.prototype.setTextureSize=function(e,t){var r=this.uniforms.uTextureSize;(e!=r.value.x||t!=r.value.y)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t}(e.TextureShader);e.BlurShader=t,__reflect(t.prototype,"egret.web.BlurShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nif(texColor.a > 0.) {texColor = vec4(texColor.rgb / texColor.a, texColor.a);\n}vec4 locColor = clamp(texColor * matrix + colorAdd, 0., 1.);\ngl_FragColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\n}",t.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dirty:!0},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0},dirty:!0}},t}return __extends(t,e),t.prototype.setMatrix=function(e){var t=this.uniforms.matrix;(t.value[0]!=e[0]||t.value[0]!=e[0]||t.value[1]!=e[1]||t.value[2]!=e[2]||t.value[3]!=e[3]||t.value[4]!=e[5]||t.value[5]!=e[6]||t.value[6]!=e[7]||t.value[7]!=e[8]||t.value[8]!=e[10]||t.value[9]!=e[11]||t.value[10]!=e[12]||t.value[11]!=e[13]||t.value[12]!=e[15]||t.value[13]!=e[16]||t.value[14]!=e[17]||t.value[15]!=e[18])&&(t.value[0]=e[0],t.value[1]=e[1],t.value[2]=e[2],t.value[3]=e[3],t.value[4]=e[5],t.value[5]=e[6],t.value[6]=e[7],t.value[7]=e[8],t.value[8]=e[10],t.value[9]=e[11],t.value[10]=e[12],t.value[11]=e[13],t.value[12]=e[15],t.value[13]=e[16],t.value[14]=e[17],t.value[15]=e[18],t.dirty=!0);var r=this.uniforms.colorAdd;(r.value.x!=e[4]/255||r.value.y!=e[9]/255||r.value.z!=e[14]/255||r.value.w!=e[19]/255)&&(r.value.x=e[4]/255,r.value.y=e[9]/255,r.value.z=e[14]/255,r.value.w=e[19]/255,r.dirty=!0)},t}(e.TextureShader);e.ColorTransformShader=t,__reflect(t.prototype,"egret.web.ColorTransformShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform float distance;","uniform float angle;","uniform vec4 color;","uniform float alpha;","uniform float blurX;","uniform float blurY;","uniform float strength;","uniform float inner;","uniform float knockout;","uniform float hideObject;","uniform vec2 uTextureSize;vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);","float random(vec3 scale, float seed)","{","return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);","}","void main(void) {","const float linearSamplingTimes = 7.0;","const float circleSamplingTimes = 12.0;","vec4 ownColor = texture2D(uSampler, vTextureCoord);","vec4 curColor;","float totalAlpha = 0.0;","float maxTotalAlpha = 0.0;","float curDistanceX = 0.0;","float curDistanceY = 0.0;","float offsetX = distance * cos(angle) * px.x;","float offsetY = distance * sin(angle) * px.y;","const float PI = 3.14159265358979323846264;","float cosAngle;","float sinAngle;","float offset = PI * 2.0 / circleSamplingTimes * random(vec3(12.9898, 78.233, 151.7182), 0.0);","float stepX = blurX * px.x / linearSamplingTimes;","float stepY = blurY * px.y / linearSamplingTimes;","for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {","cosAngle = cos(a + offset);","sinAngle = sin(a + offset);","for (float i = 1.0; i <= linearSamplingTimes; i++) {","curDistanceX = i * stepX * cosAngle;","curDistanceY = i * stepY * sinAngle;","curColor = texture2D(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));","totalAlpha += (linearSamplingTimes - i) * curColor.a;","maxTotalAlpha += (linearSamplingTimes - i);","}","}","ownColor.a = max(ownColor.a, 0.0001);","ownColor.rgb = ownColor.rgb / ownColor.a;","float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);","float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;","ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);","vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));","vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));","float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);","gl_FragColor = vec4(mix2 * resultAlpha, resultAlpha);","}"].join("\n"),t.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},distance:{type:"1f",value:15,dirty:!0},angle:{type:"1f",value:1,dirty:!0},color:{type:"4f",value:{x:1,y:0,z:0,w:0},dirty:!0},alpha:{type:"1f",value:1,dirty:!0},blurX:{type:"1f",value:1,dirty:!0},blurY:{type:"1f",value:1,dirty:!0},strength:{type:"1f",value:1,dirty:!0},inner:{type:"1f",value:1,dirty:!0},knockout:{type:"1f",value:1,dirty:!0},hideObject:{type:"1f",value:0,dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}},t}return __extends(t,e),t.prototype.setDistance=function(e){var t=this.uniforms.distance;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setAngle=function(e){var t=this.uniforms.angle;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setColor=function(e,t,r){var i=this.uniforms.color;(i.value.x!=e||i.value.y!=t||i.value.z!=r)&&(i.value.x=e,i.value.y=t,i.value.z=r,i.dirty=!0)},t.prototype.setAlpha=function(e){var t=this.uniforms.alpha;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setBlurX=function(e){var t=this.uniforms.blurX;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setBlurY=function(e){var t=this.uniforms.blurY;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setStrength=function(e){var t=this.uniforms.strength;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setInner=function(e){var t=this.uniforms.inner;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setKnockout=function(e){var t=this.uniforms.knockout;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setHideObject=function(e){var t=this.uniforms.hideObject;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setTextureSize=function(e,t){var r=this.uniforms.uTextureSize;(e!=r.value.x||t!=r.value.y)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t}(e.TextureShader);e.GlowShader=t,__reflect(t.prototype,"egret.web.GlowShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function t(e){this.gl=null,this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.currentShader=null,this.defaultShader=null,this.primitiveShader=null,this.colorTransformShader=null,this.blurShader=null,this.glowShader=null;for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.setContext(e)}return t.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new e.PrimitiveShader(t),this.defaultShader=new e.TextureShader(t),this.colorTransformShader=new e.ColorTransformShader(t),this.glowShader=new e.GlowShader(t),this.blurShader=new e.BlurShader(t),this.primitiveShader.init(),this.defaultShader.init(),this.colorTransformShader.init(),this.blurShader.init(),this.glowShader.init()},t.prototype.activateShader=function(e,t){this.currentShader!=e&&(this.gl.useProgram(e.program),this.setAttribs(e.attributes),e.setAttribPointer(t),this.currentShader=e)},t.prototype.setAttribs=function(e){var t,r;for(r=this.tempAttribState.length,t=0;r>t;t++)this.tempAttribState[t]=!1;for(r=e.length,t=0;r>t;t++){var i=e[t];this.tempAttribState[i]=!0}var n=this.gl;for(r=this.attribState.length,t=0;r>t;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},t}();e.WebGLShaderManager=t,__reflect(t.prototype,"egret.web.WebGLShaderManager")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(){this.drawData=[],this.drawDataLen=0}return e.prototype.pushDrawRect=function(){if(0==this.drawDataLen||1!=this.drawData[this.drawDataLen-1].type){var e=this.drawData[this.drawDataLen]||{};e.type=1,e.count=0,this.drawData[this.drawDataLen]=e,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=2},e.prototype.pushDrawTexture=function(e,t,r,i,n){if(void 0===t&&(t=2),r){var o=this.drawData[this.drawDataLen]||{};o.type=0,o.texture=e,o.filter=r,o.count=t,o.textureWidth=i,o.textureHeight=n,this.drawData[this.drawDataLen]=o,this.drawDataLen++}else{if(0==this.drawDataLen||0!=this.drawData[this.drawDataLen-1].type||e!=this.drawData[this.drawDataLen-1].texture||this.drawData[this.drawDataLen-1].filter){var o=this.drawData[this.drawDataLen]||{};o.type=0,o.texture=e,o.count=0,this.drawData[this.drawDataLen]=o,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=t}},e.prototype.pushPushMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=2,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},e.prototype.pushPopMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=3,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},e.prototype.pushSetBlend=function(e){for(var t=this.drawDataLen,r=!1,i=t-1;i>=0;i--){var n=this.drawData[i];if(n){if((0==n.type||1==n.type)&&(r=!0),!r&&4==n.type){this.drawData.splice(i,1),this.drawDataLen--;continue}if(4==n.type){if(n.value==e)return;break}}}var o=this.drawData[this.drawDataLen]||{};o.type=4,o.value=e,this.drawData[this.drawDataLen]=o,this.drawDataLen++},e.prototype.pushResize=function(e,t,r){var i=this.drawData[this.drawDataLen]||{};i.type=5,i.buffer=e,i.width=t,i.height=r,this.drawData[this.drawDataLen]=i,this.drawDataLen++},e.prototype.pushClearColor=function(){var e=this.drawData[this.drawDataLen]||{};e.type=6,this.drawData[this.drawDataLen]=e,this.drawDataLen++},e.prototype.pushActivateBuffer=function(e){for(var t=this.drawDataLen,r=!1,i=t-1;i>=0;i--){var n=this.drawData[i];!n||(4!=n.type&&7!=n.type&&(r=!0),r||7!=n.type)||(this.drawData.splice(i,1),this.drawDataLen--)}var o=this.drawData[this.drawDataLen]||{};o.type=7,o.buffer=e,o.width=e.rootRenderTarget.width,o.height=e.rootRenderTarget.height,this.drawData[this.drawDataLen]=o,this.drawDataLen++},e.prototype.pushEnableScissor=function(e,t,r,i){var n=this.drawData[this.drawDataLen]||{};n.type=8,n.x=e,n.y=t,n.width=r,n.height=i,this.drawData[this.drawDataLen]=n,this.drawDataLen++},e.prototype.pushDisableScissor=function(){var e=this.drawData[this.drawDataLen]||{};e.type=9,this.drawData[this.drawDataLen]=e,this.drawDataLen++},e.prototype.clear=function(){for(var e=0;e<this.drawDataLen;e++){var t=this.drawData[e];t.type=0,t.count=0,t.texture=null,t.filter=null,t.uv=null,t.value="",t.buffer=null,t.width=0,t.height=0}this.drawDataLen=0},e}();e.WebGLDrawCmdManager=t,__reflect(t.prototype,"egret.web.WebGLDrawCmdManager")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(){this.size=2e3,this.vertexMaxSize=4*this.size,this.indicesMaxSize=6*this.size,this.vertSize=5,this.vertices=null,this.indices=null,this.indicesForMesh=null,this.vertexIndex=0,this.indexIndex=0,this.hasMesh=!1;var e=this.vertexMaxSize*this.vertSize,t=this.indicesMaxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(t),this.indicesForMesh=new Uint16Array(t);for(var r=0,i=0;t>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3}return e.prototype.reachMaxSize=function(e,t){return void 0===e&&(e=4),void 0===t&&(t=6),this.vertexIndex>this.vertexMaxSize-e||this.indexIndex>this.indicesMaxSize-t},e.prototype.getVertices=function(){var e=this.vertices.subarray(0,this.vertexIndex*this.vertSize);return e},e.prototype.getIndices=function(){return this.indices},e.prototype.getMeshIndices=function(){return this.indicesForMesh},e.prototype.changeToMeshIndices=function(){if(!this.hasMesh){for(var e=0,t=this.indexIndex;t>e;++e)this.indicesForMesh[e]=this.indices[e];this.hasMesh=!0}},e.prototype.isMesh=function(){return this.hasMesh},e.prototype.cacheArrays=function(e,t,r,i,n,o,a,s,l,h,u,c,d,p,f){var g=e,v=g.a,y=g.b,m=g.c,x=g.d,b=g.tx,w=g.ty;(0!=a||0!=s)&&g.append(1,0,0,1,a,s),(n/l!=1||o/h!=1)&&g.append(l/n,0,0,h/o,0,0);var E=g.a,T=g.b,S=g.c,_=g.d,C=g.tx,R=g.ty;if(g.a=v,g.b=y,g.c=m,g.d=x,g.tx=b,g.ty=w,p){var L=this.vertices,D=this.vertexIndex*this.vertSize,A=0,$=0,M=0,I=0,O=0,B=0,P=0;for(A=0,M=d.length;M>A;A+=2)$=5*A/2,B=p[A],P=p[A+1],I=d[A],O=d[A+1],L[D+$+0]=E*B+S*P+C,L[D+$+1]=T*B+_*P+R,L[D+$+2]=(r+I*n)/u,L[D+$+3]=(i+O*o)/c,L[D+$+4]=t;if(this.hasMesh)for(var F=0,W=f.length;W>F;++F)this.indicesForMesh[this.indexIndex+F]=f[F]+this.vertexIndex;this.vertexIndex+=d.length/2,this.indexIndex+=f.length}else{var H=u,G=c,k=n,N=o;r/=H,i/=G,n/=H,o/=G;var L=this.vertices,D=this.vertexIndex*this.vertSize;if(L[D++]=C,L[D++]=R,L[D++]=r,L[D++]=i,L[D++]=t,L[D++]=E*k+C,L[D++]=T*k+R,L[D++]=n+r,L[D++]=i,L[D++]=t,L[D++]=E*k+S*N+C,L[D++]=_*N+T*k+R,L[D++]=n+r,L[D++]=o+i,L[D++]=t,L[D++]=S*N+C,L[D++]=_*N+R,L[D++]=r,L[D++]=o+i,L[D++]=t,this.hasMesh){var U=this.indicesForMesh;U[this.indexIndex+0]=0+this.vertexIndex,U[this.indexIndex+1]=1+this.vertexIndex,U[this.indexIndex+2]=2+this.vertexIndex,U[this.indexIndex+3]=0+this.vertexIndex,U[this.indexIndex+4]=2+this.vertexIndex,U[this.indexIndex+5]=3+this.vertexIndex}this.vertexIndex+=4,this.indexIndex+=6}},e.prototype.clear=function(){this.hasMesh=!1,this.vertexIndex=0,this.indexIndex=0},e}();e.WebGLVertexArrayObject=t,__reflect(t.prototype,"egret.web.WebGLVertexArrayObject")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(e){function t(t,r,i){var n=e.call(this)||this;return n.clearColor=[0,0,0,0],n.useFrameBuffer=!0,n.gl=t,n.width=r||1,n.height=i||1,n.texture=n.createTexture(),n.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,n.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n.texture,0),n.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,n.stencilBuffer),n}return __extends(t,e),t.prototype.resize=function(e,t){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffer),r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t),this.width=e,this.height=t},t.prototype.activate=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer())},t.prototype.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},t.prototype.createTexture=function(){var e=this.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},t.prototype.clear=function(e){var t=this.gl;e&&this.activate(),t.colorMask(!0,!0,!0,!0),t.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),t.clear(t.COLOR_BUFFER_BIT)},t}(e.HashObject);t.WebGLRenderTarget=r,__reflect(r.prototype,"egret.web.WebGLRenderTarget")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t){var r=document.createElement("canvas");return isNaN(e)||isNaN(t)||(r.width=e,r.height=t),r}var i=function(){function i(e,i){this.glID=null,this.projectionX=0/0,this.projectionY=0/0,this.shaderManager=null,this.contextLost=!1,this.$scissorState=!1,this.vertSize=5,this.blurFilter=null,this.surface=r(e,i),this.initWebGL(),this.$bufferStack=[];var n=this.context;this.vertexBuffer=n.createBuffer(),this.indexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.drawCmdManager=new t.WebGLDrawCmdManager,this.vao=new t.WebGLVertexArrayObject,this.setGlobalCompositeOperation("source-over")}return i.getInstance=function(e,t){return this.instance?this.instance:(this.instance=new i(e,t),this.instance)},i.prototype.pushBuffer=function(e){this.$bufferStack.push(e),e!=this.currentBuffer&&(this.currentBuffer,this.drawCmdManager.pushActivateBuffer(e)),this.currentBuffer=e},i.prototype.popBuffer=function(){if(!(this.$bufferStack.length<=1)){var e=this.$bufferStack.pop(),t=this.$bufferStack[this.$bufferStack.length-1];e!=t&&this.drawCmdManager.pushActivateBuffer(t),this.currentBuffer=t}},i.prototype.activateBuffer=function(e){e.rootRenderTarget.activate(),this.bindIndices||(this.uploadIndicesArray(this.vao.getIndices()),this.bindIndices=!0),e.restoreStencil(),e.restoreScissor(),this.onResize(e.width,e.height)},i.prototype.uploadVerticesArray=function(e){var t=this.context;t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW)},i.prototype.uploadIndicesArray=function(e){var t=this.context;t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)},i.prototype.destroy=function(){this.surface.width=this.surface.height=0},i.prototype.onResize=function(e,t){e=e||this.surface.width,t=t||this.surface.height,this.projectionX=e/2,this.projectionY=-t/2,this.context&&this.context.viewport(0,0,e,t)},i.prototype.resize=function(e,t,r){var i=this.surface;r?(i.width<e&&(i.width=e),i.height<t&&(i.height=t)):(i.width!=e&&(i.width=e),i.height!=t&&(i.height=t)),this.onResize()},i.prototype.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext(),this.shaderManager=new t.WebGLShaderManager(this.context)},i.prototype.handleContextLost=function(){this.contextLost=!0},i.prototype.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},i.prototype.getWebGLContext=function(){for(var t,r={antialias:i.antialias,stencil:!0},n=["webgl","experimental-webgl"],o=0;o<n.length;o++){try{t=this.surface.getContext(n[o],r)}catch(a){}if(t)break}t||e.$error(1021),this.setContext(t)},i.prototype.setContext=function(e){this.context=e,e.id=i.glContextId++,this.glID=e.id,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.colorMask(!0,!0,!0,!0),e.activeTexture(e.TEXTURE0)},i.prototype.enableStencilTest=function(){var e=this.context;e.enable(e.STENCIL_TEST)},i.prototype.disableStencilTest=function(){var e=this.context;e.disable(e.STENCIL_TEST)},i.prototype.enableScissorTest=function(e){var t=this.context;t.enable(t.SCISSOR_TEST),t.scissor(e.x,e.y,e.width,e.height)},i.prototype.disableScissorTest=function(){var e=this.context;e.disable(e.SCISSOR_TEST)},i.prototype.getPixels=function(e,t,r,i,n){var o=this.context;o.readPixels(e,t,r,i,o.RGBA,o.UNSIGNED_BYTE,n)},i.prototype.createTexture=function(e){var t=this.context,r=t.createTexture();return r?(r.glContext=t,t.bindTexture(t.TEXTURE_2D,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r):void(this.contextLost=!0)},i.prototype.createTextureFromCompressedData=function(e,t,r,i,n){return null},i.prototype.updateTexture=function(e,t){var r=this.context;r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)},i.prototype.getWebGLTexture=function(e){return e.webGLTexture||("image"==e.format?e.webGLTexture=this.createTexture(e.source):"pvr"==e.format&&(e.webGLTexture=this.createTextureFromCompressedData(e.source.pvrtcData,e.width,e.height,e.source.mipmapsCount,e.source.format)),e.$deleteSource&&e.webGLTexture&&(e.source=null)),e.webGLTexture},i.prototype.clearRect=function(e,t,r,i){if(0!=e||0!=t||r!=this.surface.width||i!=this.surface.height){var n=this.currentBuffer;if(n.$hasScissor)this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,r,i),this.setGlobalCompositeOperation("source-over");else{var o=n.globalMatrix;0==o.b&&0==o.c?(e=e*o.a+o.tx,t=t*o.d+o.ty,r*=o.a,i*=o.d,this.enableScissor(e,-t-i+n.height,r,i),this.clear(),this.disableScissor()):(this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,r,i),this.setGlobalCompositeOperation("source-over"))}}else this.clear()},i.prototype.setGlobalCompositeOperation=function(e){this.drawCmdManager.pushSetBlend(e)},i.prototype.drawImage=function(e,t,r,i,n,o,a,s,l,h,u){var c=this.currentBuffer;if(!this.contextLost&&e&&c){var d;if(e.texture||e.source&&e.source.texture)d=e.texture||e.source.texture,c.saveTransform(),c.transform(1,0,0,-1,0,l+2*a);else{if(!e.source&&!e.webGLTexture)return;d=this.getWebGLTexture(e)}d&&(this.drawTexture(d,t,r,i,n,o,a,s,l,h,u),e.source&&e.source.texture&&c.restoreTransform())}},i.prototype.drawMesh=function(e,t,r,i,n,o,a,s,l,h,u,c,d,p,f){var g=this.currentBuffer;if(!this.contextLost&&e&&g){var v;if(e.texture||e.source&&e.source.texture)v=e.texture||e.source.texture,g.saveTransform(),g.transform(1,0,0,-1,0,l+2*a);else{if(!e.source&&!e.webGLTexture)return;v=this.getWebGLTexture(e)}v&&this.drawTexture(v,t,r,i,n,o,a,s,l,h,u,c,d,p,f)}},i.prototype.drawTexture=function(e,t,r,i,n,o,a,s,l,h,u,c,d,p,f){var g=this.currentBuffer;if(!this.contextLost&&e&&g){d&&p?this.vao.reachMaxSize(d.length/2,p.length)&&this.$drawWebGL():this.vao.reachMaxSize()&&this.$drawWebGL(),c&&this.vao.changeToMeshIndices();var v=g.globalMatrix,y=g.globalAlpha,m=p?p.length/3:2;this.drawCmdManager.pushDrawTexture(e,m,this.$filter),this.vao.cacheArrays(v,y,t,r,i,n,o,a,s,l,h,u,c,d,p)}},i.prototype.drawRect=function(e,t,r,i){var n=this.currentBuffer;!this.contextLost&&n&&(this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushDrawRect(),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,r,i,e,t,r,i,r,i))},i.prototype.pushMask=function(e){var t=this.currentBuffer;if(!this.contextLost&&t){t.$stencilList.push(e),this.vao.reachMaxSize()&&this.$drawWebGL();
var r=e.length;if(r){this.drawCmdManager.pushPushMask(r);for(var i=0;r>i;i++){var n=e[i];this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPushMask(),this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,e.width,e.height,e.x,e.y,e.width,e.height,e.width,e.height)}},i.prototype.popMask=function(){var e=this.currentBuffer;if(!this.contextLost&&e){var t=e.$stencilList.pop();this.vao.reachMaxSize()&&this.$drawWebGL();var r=t.length;if(r){this.drawCmdManager.pushPopMask(r);for(var i=0;r>i;i++){var n=t[i];this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPopMask(),this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,t.width,t.height,t.x,t.y,t.width,t.height,t.width,t.height)}},i.prototype.clear=function(){this.drawCmdManager.pushClearColor()},i.prototype.enableScissor=function(e,t,r,i){var n=this.currentBuffer;this.drawCmdManager.pushEnableScissor(e,t,r,i),n.$hasScissor=!0},i.prototype.disableScissor=function(){var e=this.currentBuffer;this.drawCmdManager.pushDisableScissor(),e.$hasScissor=!1},i.prototype.$drawWebGL=function(){if(0!=this.drawCmdManager.drawDataLen&&!this.contextLost){this.uploadVerticesArray(this.vao.getVertices()),this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getMeshIndices());for(var e=this.drawCmdManager.drawDataLen,t=0,r=0;e>r;r++){var i=this.drawCmdManager.drawData[r];t=this.drawData(i,t),7==i.type&&(this.activatedBuffer=i.buffer),(0==i.type||1==i.type||2==i.type||3==i.type)&&this.activatedBuffer&&this.activatedBuffer.$computeDrawCall&&this.activatedBuffer.$drawCalls++}this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getIndices()),this.drawCmdManager.clear(),this.vao.clear()}},i.prototype.drawData=function(e,t){if(e){var r;switch(e.type){case 0:var i=e.filter;i?"colorTransform"==i.type?(r=this.shaderManager.colorTransformShader,r.setMatrix(i.$matrix)):"blur"==i.type?(r=this.shaderManager.blurShader,r.setBlur(i.$blurX,i.$blurY),r.setTextureSize(e.textureWidth,e.textureHeight)):"glow"==i.type&&(r=this.shaderManager.glowShader,r.setDistance(i.$distance||0),r.setAngle(i.$angle?i.$angle/180*Math.PI:0),r.setColor(i.$red/255,i.$green/255,i.$blue/255),r.setAlpha(i.$alpha),r.setBlurX(i.$blurX),r.setBlurY(i.$blurY),r.setStrength(i.$strength),r.setInner(i.$inner?1:0),r.setKnockout(i.$knockout?0:1),r.setHideObject(i.$hideObject?1:0),r.setTextureSize(e.textureWidth,e.textureHeight)):r=this.shaderManager.defaultShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawTextureElements(e,t);break;case 1:r=this.shaderManager.primitiveShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawRectElements(e,t);break;case 2:r=this.shaderManager.primitiveShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawPushMaskElements(e,t);break;case 3:r=this.shaderManager.primitiveShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawPopMaskElements(e,t);break;case 4:this.setBlendMode(e.value);break;case 5:e.buffer.rootRenderTarget.resize(e.width,e.height),this.onResize(e.width,e.height);break;case 6:if(this.activatedBuffer){var n=this.activatedBuffer.rootRenderTarget;(0!=n.width||0!=n.height)&&n.clear()}break;case 7:this.activateBuffer(e.buffer);break;case 8:var o=this.activatedBuffer;o&&o.enableScissor(e.x,e.y,e.width,e.height);break;case 9:o=this.activatedBuffer,o&&o.disableScissor()}return t}},i.prototype.drawTextureElements=function(e,t){var r=this.context;r.bindTexture(r.TEXTURE_2D,e.texture);var i=3*e.count;return r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),i},i.prototype.drawRectElements=function(e,t){var r=this.context,i=3*e.count;return r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),i},i.prototype.drawPushMaskElements=function(e,t){var r=this.context,i=3*e.count,n=this.activatedBuffer;if(n){0==n.stencilHandleCount&&(n.enableStencil(),r.clear(r.STENCIL_BUFFER_BIT));var o=n.stencilHandleCount;n.stencilHandleCount++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,o,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR),r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),r.stencilFunc(r.EQUAL,o+1,255),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}return i},i.prototype.drawPopMaskElements=function(e,t){var r=this.context,i=3*e.count,n=this.activatedBuffer;if(n)if(n.stencilHandleCount--,0==n.stencilHandleCount)n.disableStencil();else{var o=n.stencilHandleCount;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,o+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR),r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),r.stencilFunc(r.EQUAL,o,255),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}return i},i.prototype.setBlendMode=function(e){var t=this.context,r=i.blendModesForGL[e];r&&t.blendFunc(r[0],r[1])},i.prototype.drawTargetWidthFilters=function(e,r){var i,n=r,o=e.length;if(o>1)for(var a=0;o-1>a;a++){var s=e[a],l=r.rootRenderTarget.width,h=r.rootRenderTarget.height;i=t.WebGLRenderBuffer.create(l,h),i.setTransform(1,0,0,1,0,0),i.globalAlpha=1,this.drawToRenderTarget(s,r,i),r!=n&&t.WebGLRenderBuffer.release(r),r=i}var u=e[o-1];this.drawToRenderTarget(u,r,this.currentBuffer),r!=n&&t.WebGLRenderBuffer.release(r)},i.prototype.drawToRenderTarget=function(r,i,n){if(!this.contextLost){this.vao.reachMaxSize()&&this.$drawWebGL(),this.pushBuffer(n);var o,a=i,s=i.rootRenderTarget.width,l=i.rootRenderTarget.height;"blur"==r.type&&(this.blurFilter||(this.blurFilter=new e.BlurFilter(2,2)),0!=r.blurX&&0!=r.blurY?(this.blurFilter.blurX=r.blurX,this.blurFilter.blurY=0,o=t.WebGLRenderBuffer.create(s,l),o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this.drawToRenderTarget(this.blurFilter,i,o),i!=a&&t.WebGLRenderBuffer.release(i),i=o,this.blurFilter.blurX=0,this.blurFilter.blurY=r.blurY):(this.blurFilter.blurX=r.blurX,this.blurFilter.blurY=r.blurY),r=this.blurFilter),n.saveTransform(),n.transform(1,0,0,-1,0,l),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,s,l,0,0,s,l,s,l),n.restoreTransform();var h;h="blur"==r.type?{type:"blur",$blurX:r.$blurX,$blurY:r.$blurY}:r,this.drawCmdManager.pushDrawTexture(i.rootRenderTarget.texture,2,h,s,l),i!=a&&t.WebGLRenderBuffer.release(i),this.popBuffer()}},i.initBlendMode=function(){i.blendModesForGL={},i.blendModesForGL["source-over"]=[1,771],i.blendModesForGL.lighter=[1,1],i.blendModesForGL["lighter-in"]=[770,771],i.blendModesForGL["destination-out"]=[0,771],i.blendModesForGL["destination-in"]=[0,770]},i}();i.glContextId=0,i.blendModesForGL=null,t.WebGLRenderContext=i,__reflect(i.prototype,"egret.web.WebGLRenderContext"),i.initBlendMode()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function n(i,n,o){var a=r.call(this)||this;if(a.globalAlpha=1,a.stencilState=!1,a.$stencilList=[],a.stencilHandleCount=0,a.$scissorState=!1,a.scissorRect=new e.Rectangle,a.$hasScissor=!1,a.dirtyRegionPolicy=!0,a._dirtyRegionPolicy=!0,a.$drawCalls=0,a.$computeDrawCall=!1,a.globalMatrix=new e.Matrix,a.savedGlobalMatrix=new e.Matrix,a.context=t.WebGLRenderContext.getInstance(i,n),a.rootRenderTarget=new t.WebGLRenderTarget(a.context.context,3,3),i&&n&&a.resize(i,n),a.root=o,a.root)a.context.pushBuffer(a),a.surface=a.context.surface;else{var s=a.context.activatedBuffer;s&&s.rootRenderTarget.activate(),a.surface=a.rootRenderTarget}return a}return __extends(n,r),n.prototype.enableStencil=function(){this.stencilState||(this.context.enableStencilTest(),this.stencilState=!0)},n.prototype.disableStencil=function(){this.stencilState&&(this.context.disableStencilTest(),this.stencilState=!1)},n.prototype.restoreStencil=function(){this.stencilState?this.context.enableStencilTest():this.context.disableStencilTest()},n.prototype.enableScissor=function(e,t,r,i){this.$scissorState||(this.$scissorState=!0,this.scissorRect.setTo(e,t,r,i),this.context.enableScissorTest(this.scissorRect))},n.prototype.disableScissor=function(){this.$scissorState&&(this.$scissorState=!1,this.scissorRect.setEmpty(),this.context.disableScissorTest())},n.prototype.restoreScissor=function(){this.$scissorState?this.context.enableScissorTest(this.scissorRect):this.context.disableScissorTest()},Object.defineProperty(n.prototype,"width",{get:function(){return this.rootRenderTarget.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.rootRenderTarget.height},enumerable:!0,configurable:!0}),n.prototype.resize=function(e,t,r){this.context.pushBuffer(this),e=e||1,t=t||1,(e!=this.rootRenderTarget.width||t!=this.rootRenderTarget.height)&&(this.context.drawCmdManager.pushResize(this,e,t),this.rootRenderTarget.width=e,this.rootRenderTarget.height=t),this.root&&this.context.resize(e,t,r),this.context.clear(),this.context.popBuffer()},n.prototype.resizeTo=function(e,t,r,i){this.context.pushBuffer(this);var o=this.rootRenderTarget.width,a=this.rootRenderTarget.height,s=n.create(o,a);this.context.pushBuffer(s),this.context.drawImage(this.rootRenderTarget,0,0,o,a,0,0,o,a,o,a),this.context.popBuffer(),this.resize(e,t),this.setTransform(1,0,0,1,0,0),this.context.drawImage(s.rootRenderTarget,0,0,o,a,r,i,o,a,o,a),n.release(s),this.context.popBuffer()},n.prototype.setDirtyRegionPolicy=function(e){this.dirtyRegionPolicy="on"==e},n.prototype.beginClip=function(e,t,r){this.context.pushBuffer(this),this.root&&(this._dirtyRegionPolicy?(this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate()):(this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.clear())),t=+t||0,r=+r||0,this.setTransform(1,0,0,1,t,r);var i=e.length;if(1==i&&0==e[0].minX&&0==e[0].minY&&e[0].width==this.rootRenderTarget.width&&e[0].height==this.rootRenderTarget.height)return this.maskPushed=!1,this.rootRenderTarget.useFrameBuffer&&this.context.clear(),void this.context.popBuffer();for(var n=0;i>n;n++){var o=e[n];this.context.clearRect(o.minX,o.minY,o.width,o.height)}if(i>0){if(this.$hasScissor||1!=i)this.scissorEnabled=!1;else{var o=e[0];e=e.slice(1);var a=o.minX+t,s=o.minY+r,l=o.width,h=o.height;this.context.enableScissor(a,-s-h+this.height,l,h),this.scissorEnabled=!0}e.length>0?(this.context.pushMask(e),this.maskPushed=!0):this.maskPushed=!1,this.offsetX=t,this.offsetY=r}else this.maskPushed=!1;this.context.popBuffer()},n.prototype.endClip=function(){(this.maskPushed||this.scissorEnabled)&&(this.context.pushBuffer(this),this.maskPushed&&(this.setTransform(1,0,0,1,this.offsetX,this.offsetY),this.context.popMask()),this.scissorEnabled&&this.context.disableScissor(),this.context.popBuffer())},n.prototype.getPixels=function(e,t,r,i){void 0===r&&(r=1),void 0===i&&(i=1);var n=new Uint8Array(4*r*i),o=this.rootRenderTarget.useFrameBuffer;this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.getPixels(e,t,r,i,n),this.rootRenderTarget.useFrameBuffer=o,this.rootRenderTarget.activate();for(var a=new Uint8Array(4*r*i),s=0;i>s;s++)for(var l=0;r>l;l++)a[4*(r*(i-s-1)+l)]=n[4*(r*s+l)],a[4*(r*(i-s-1)+l)+1]=n[4*(r*s+l)+1],a[4*(r*(i-s-1)+l)+2]=n[4*(r*s+l)+2],a[4*(r*(i-s-1)+l)+3]=n[4*(r*s+l)+3];return a},n.prototype.toDataURL=function(e,t){return this.context.surface.toDataURL(e,t)},n.prototype.destroy=function(){this.context.destroy()},n.prototype.onRenderFinish=function(){this.$drawCalls=0,this.root&&(!this._dirtyRegionPolicy&&this.dirtyRegionPolicy&&this.drawSurfaceToFrameBuffer(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,!0),this._dirtyRegionPolicy&&this.drawFrameBufferToSurface(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height),this._dirtyRegionPolicy=this.dirtyRegionPolicy)},n.prototype.drawFrameBufferToSurface=function(e,t,r,i,n,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.rootRenderTarget,e,t,r,i,n,o,a,s,r,i),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.drawSurfaceToFrameBuffer=function(e,t,r,i,n,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.context.surface,e,t,r,i,n,o,a,s,r,i),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.clear=function(){this.context.clear()},n.prototype.setTransform=function(e,t,r,i,n,o){var a=this.globalMatrix;a.a=e,a.b=t,a.c=r,a.d=i,a.tx=n,a.ty=o},n.prototype.transform=function(e,t,r,i,n,o){var a=this.globalMatrix,s=a.a,l=a.b,h=a.c,u=a.d;(1!=e||0!=t||0!=r||1!=i)&&(a.a=e*s+t*h,a.b=e*l+t*u,a.c=r*s+i*h,a.d=r*l+i*u),a.tx=n*s+o*h+a.tx,a.ty=n*l+o*u+a.ty},n.prototype.translate=function(e,t){var r=this.globalMatrix;r.tx+=e,r.ty+=t},n.prototype.saveTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},n.prototype.restoreTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},n.create=function(e,t){var r=i.pop();if(r){r.resize(e,t);var o=r.globalMatrix;o.a=1,o.b=0,o.c=0,o.d=1,o.tx=0,o.ty=0}else r=new n(e,t),r.$computeDrawCall=!1;return r},n.release=function(e){i.push(e)},n}(e.HashObject);t.WebGLRenderBuffer=r,__reflect(r.prototype,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]);var i=[]}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i,n,o,a){var s=t.call(this)||this;if(s.showPanle=!0,s.fpsHeight=0,s.WIDTH=101,s.HEIGHT=20,s.bgCanvasColor="#18304b",s.fpsFrontColor="#18fefe",s.WIDTH_COST=33,s.cost1Color="#18fefe",s.cost2Color="#ffff00",s.cost3Color="#ff0000",s.arrFps=[],s.arrCost=[],s.arrLog=[],i||n){"canvas"==e.Capabilities.renderMode?s.renderMode="Canvas":s.renderMode="WebGL",s.panelX=void 0===a.x?0:parseInt(a.x),s.panelY=void 0===a.y?0:parseInt(a.y),s.fontColor=void 0===a.textColor?"#ffffff":a.textColor.replace("0x","#"),s.fontSize=void 0===a.size?12:parseInt(a.size),e.Capabilities.isMobile&&(s.fontSize-=2);var l=document.createElement("div");l.style.position="absolute",l.style.background="rgba(0,0,0,"+a.bgAlpha+")",l.style.left=s.panelX+"px",l.style.top=s.panelY+"px",l.style.pointerEvents="none",document.body.appendChild(l);var h=document.createElement("div");h.style.color=s.fontColor,h.style.fontSize=s.fontSize+"px",h.style.lineHeight=s.fontSize+"px",h.style.margin="4px 4px 4px 4px",s.container=h,l.appendChild(h),i&&s.addFps(),n&&s.addLog()}return s}return __extends(r,t),r.prototype.addFps=function(){var e=document.createElement("div");e.style.display="inline-block",this.containerFps=e,this.container.appendChild(e);var t=document.createElement("div");t.style.paddingBottom="2px",this.fps=t,this.containerFps.appendChild(t),t.innerHTML="0 FPS "+this.renderMode+"<br/>min0 max0 avg0";var r=document.createElement("canvas");this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT,this.canvasFps=r;var i=r.getContext("2d");this.contextFps=i,i.fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT);var n=document.createElement("div");this.divDatas=n,this.containerFps.appendChild(n);var o=document.createElement("div");o.style["float"]="left",o.innerHTML="Draw<br/>Dirty<br/>Cost",n.appendChild(o);var a=document.createElement("div");a.style.paddingLeft=o.offsetWidth+20+"px",n.appendChild(a);var s=document.createElement("div");this.divDraw=s,s.innerHTML="0<br/>0<br/>",a.appendChild(s);var l=document.createElement("div");this.divCost=l,l.innerHTML='<font  style="color:'+this.cost1Color+'">0<font/> <font  style="color:'+this.cost2Color+'">0<font/> <font  style="color:'+this.cost3Color+'">0<font/>',a.appendChild(l),r=document.createElement("canvas"),this.canvasCost=r,this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT,i=r.getContext("2d"),this.contextCost=i,i.fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT),i.fillStyle="#000000",i.fillRect(this.WIDTH_COST,0,1,this.HEIGHT),i.fillRect(2*this.WIDTH_COST+1,0,1,this.HEIGHT),this.fpsHeight=this.container.offsetHeight},r.prototype.addLog=function(){var e=document.createElement("div");e.style.maxWidth=document.body.clientWidth-8-this.panelX+"px",e.style.wordWrap="break-word",this.log=e,this.container.appendChild(e)},r.prototype.update=function(e,t){void 0===t&&(t=!1);var r,i,n,o;t?(r=this.arrFps[this.arrFps.length-1],i=this.arrCost[this.arrCost.length-1][0],n=this.arrCost[this.arrCost.length-1][1],o=this.arrCost[this.arrCost.length-1][2]):(r=e.fps,i=e.costTicker,n=e.costDirty,o=e.costRender,this.lastNumDraw=e.draw,this.lastNumDirty=e.dirty,this.arrFps.push(r),this.arrCost.push([i,n,o]));var a=0,s=this.arrFps.length;s>101&&(s=101,this.arrFps.shift());for(var l=this.arrFps[0],h=this.arrFps[0],u=0;s>u;u++){var c=this.arrFps[u];a+=c,l>c?l=c:c>h&&(h=c)}var d=this.WIDTH,p=this.HEIGHT,f=this.contextFps;f.drawImage(this.canvasFps,1,0,d-1,p,0,0,d-1,p),f.fillStyle=this.bgCanvasColor,f.fillRect(d-1,0,1,p);var g=Math.floor(r/60*20);1>g&&(g=1),f.fillStyle=this.fpsFrontColor,f.fillRect(d-1,20-g,1,g);var v=this.WIDTH_COST;f=this.contextCost,f.drawImage(this.canvasCost,1,0,v-1,p,0,0,v-1,p),f.drawImage(this.canvasCost,v+2,0,v-1,p,v+1,0,v-1,p),f.drawImage(this.canvasCost,2*v+3,0,v-1,p,2*v+2,0,v-1,p);var y=Math.floor(i/2);1>y?y=1:y>20&&(y=20);var m=Math.floor(n/2);1>m?m=1:m>20&&(m=20);var x=Math.floor(o/2);1>x?x=1:x>20&&(x=20),f.fillStyle=this.bgCanvasColor,f.fillRect(v-1,0,1,p),f.fillRect(2*v,0,1,p),f.fillRect(3*v+1,0,1,p),f.fillStyle=this.cost1Color,f.fillRect(v-1,20-y,1,y),f.fillStyle=this.cost2Color,f.fillRect(2*v,20-m,1,m),f.fillStyle=this.cost3Color,f.fillRect(3*v+1,20-x,1,x);var b=Math.floor(a/s),w=r+" FPS "+this.renderMode;this.showPanle&&(w+="<br/>min"+l+" max"+h+" avg"+b,this.divDraw.innerHTML=this.lastNumDraw+"<br/>"+this.lastNumDirty+"%<br/>",this.divCost.innerHTML='<font  style="color:#18fefe">'+i+'<font/> <font  style="color:#ffff00">'+n+'<font/> <font  style="color:#ff0000">'+o+"<font/>"),this.fps.innerHTML=w},r.prototype.updateInfo=function(e){for(this.arrLog.push(e),this.log.innerHTML=this.arrLog.join("<br/>");document.body.clientHeight<this.log.offsetHeight+this.fpsHeight+this.panelY+2*this.fontSize;)this.arrLog.shift(),this.log.innerHTML=this.arrLog.join("<br/>")},r}(e.DisplayObject);t.WebFps=r,__reflect(r.prototype,"egret.web.WebFps",["egret.FPSDisplay"]),e.FPSDisplay=r}(t=e.web||(e.web={}))}(egret||(egret={}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVncmV0Lm1pbi5qcyIsImVncmV0LndlYi5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTEE7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX19leHRlbmRzKHQsZSl7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9dH1mb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKTtpLnByb3RvdHlwZT1lLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgaX12YXIgX19yZWZsZWN0PXRoaXMmJnRoaXMuX19yZWZsZWN0fHxmdW5jdGlvbih0LGUsaSl7dC5fX2NsYXNzX189ZSxpP2kucHVzaChlKTppPVtlXSx0Ll9fdHlwZXNfXz10Ll9fdHlwZXNfXz9pLmNvbmNhdCh0Ll9fdHlwZXNfXyk6aX0sX19leHRlbmRzPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7dC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooaS5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IGkpfSxlZ3JldDshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVyblwiXCJ9ZnVuY3Rpb24gaSh0KXt0aHJvdyBuZXcgRXJyb3IoXCIjXCIrdCl9ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIGEoKXt9dC5nZXRTdHJpbmc9ZSx0LiRlcnJvcj1pLHQuJHdhcm49cix0LiRtYXJrUmVhZE9ubHk9bix0LiRtYXJrQ2Fubm90VXNlPWF9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLHIpe2V8fHQuJGVycm9yKDEwMDMsXCJjbGFzc0RlZmluaXRpb25cIiksZS5wcm90b3R5cGV8fHQuJGVycm9yKDEwMTIsXCJjbGFzc0RlZmluaXRpb25cIiksdm9pZCAwPT09aSYmdC4kZXJyb3IoMTAwMyxcImNsYXNzTmFtZVwiKTt2YXIgbj1lLnByb3RvdHlwZTtuLl9fY2xhc3NfXz1pO3ZhciBhPVtpXTtyJiYoYT1hLmNvbmNhdChyKSk7dmFyIG89bi5fX3R5cGVzX187aWYobi5fX3R5cGVzX18pZm9yKHZhciBzPW8ubGVuZ3RoLGg9MDtzPmg7aCsrKXt2YXIgbD1vW2hdOy0xPT1hLmluZGV4T2YobCkmJmEucHVzaChsKX1uLl9fdHlwZXNfXz1hfXQucmVnaXN0ZXJDbGFzcz1lfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIF9fZGVmaW5lPXRoaXMuX19kZWZpbmV8fGZ1bmN0aW9uKHQsZSxpLHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDppLHNldDpyfSl9LGVncmV0OyFmdW5jdGlvbih0KXt0LiRoYXNoQ291bnQ9MTt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLiRoYXNoQ29kZT10LiRoYXNoQ291bnQrK31yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGFzaENvZGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGhhc2hDb2RlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGV9KCk7dC5IYXNoT2JqZWN0PWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuSGFzaE9iamVjdFwiLFtcImVncmV0LklIYXNoT2JqZWN0XCJdKSx0LiRtYXJrUmVhZE9ubHkoZSxcImhhc2hDb2RlXCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1bXSxpPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIodCxlLHIsbil7dm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09biYmKG49MCk7dmFyIGE9aS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLng9dCxhLnk9ZSxhLndpZHRoPXIsYS5oZWlnaHQ9bixhfXJldHVybiBfX2V4dGVuZHMocixpKSxyLnJlbGVhc2U9ZnVuY3Rpb24odCl7dCYmZS5wdXNoKHQpfSxyLmNyZWF0ZT1mdW5jdGlvbigpe3ZhciB0PWUucG9wKCk7cmV0dXJuIHR8fCh0PW5ldyByKSx0fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJyaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54K3RoaXMud2lkdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLndpZHRoPXQtdGhpcy54fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImJvdHRvbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy55K3RoaXMuaGVpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5oZWlnaHQ9dC10aGlzLnl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwibGVmdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy53aWR0aCs9dGhpcy54LXQsdGhpcy54PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwidG9wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnl9LHNldDpmdW5jdGlvbih0KXt0aGlzLmhlaWdodCs9dGhpcy55LXQsdGhpcy55PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwidG9wTGVmdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQuUG9pbnQodGhpcy5sZWZ0LHRoaXMudG9wKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudG9wPXQueSx0aGlzLmxlZnQ9dC54fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImJvdHRvbVJpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiBuZXcgdC5Qb2ludCh0aGlzLnJpZ2h0LHRoaXMuYm90dG9tKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuYm90dG9tPXQueSx0aGlzLnJpZ2h0PXQueH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS5jb3B5RnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXMud2lkdGg9dC53aWR0aCx0aGlzLmhlaWdodD10LmhlaWdodCx0aGlzfSxyLnByb3RvdHlwZS5zZXRUbz1mdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4gdGhpcy54PXQsdGhpcy55PWUsdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PXIsdGhpc30sci5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54PD10JiZ0aGlzLngrdGhpcy53aWR0aD49dCYmdGhpcy55PD1lJiZ0aGlzLnkrdGhpcy5oZWlnaHQ+PWV9LHIucHJvdG90eXBlLmludGVyc2VjdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLiRpbnRlcnNlY3RJblBsYWNlKHQpfSxyLnByb3RvdHlwZS5pbmZsYXRlPWZ1bmN0aW9uKHQsZSl7dGhpcy54LT10LHRoaXMud2lkdGgrPTIqdCx0aGlzLnktPWUsdGhpcy5oZWlnaHQrPTIqZX0sci5wcm90b3R5cGUuJGludGVyc2VjdEluUGxhY2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LGk9dGhpcy55LHI9dC54LG49dC55LGE9TWF0aC5tYXgoZSxyKSxvPU1hdGgubWluKGUrdGhpcy53aWR0aCxyK3Qud2lkdGgpO2lmKG8+PWEpe3ZhciBzPU1hdGgubWF4KGksbiksaD1NYXRoLm1pbihpK3RoaXMuaGVpZ2h0LG4rdC5oZWlnaHQpO2lmKGg+PXMpcmV0dXJuIHRoaXMuc2V0VG8oYSxzLG8tYSxoLXMpLHRoaXN9cmV0dXJuIHRoaXMuc2V0RW1wdHkoKSx0aGlzfSxyLnByb3RvdHlwZS5pbnRlcnNlY3RzPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLm1heCh0aGlzLngsdC54KTw9TWF0aC5taW4odGhpcy5yaWdodCx0LnJpZ2h0KSYmTWF0aC5tYXgodGhpcy55LHQueSk8PU1hdGgubWluKHRoaXMuYm90dG9tLHQuYm90dG9tKX0sci5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLndpZHRoPD0wfHx0aGlzLmhlaWdodDw9MH0sci5wcm90b3R5cGUuc2V0RW1wdHk9ZnVuY3Rpb24oKXt0aGlzLng9MCx0aGlzLnk9MCx0aGlzLndpZHRoPTAsdGhpcy5oZWlnaHQ9MH0sci5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcy54LHRoaXMueSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KX0sci5wcm90b3R5cGUuY29udGFpbnNQb2ludD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PHQueCYmdGhpcy54K3RoaXMud2lkdGg+dC54JiZ0aGlzLnk8dC55JiZ0aGlzLnkrdGhpcy5oZWlnaHQ+dC55PyEwOiExfSxyLnByb3RvdHlwZS5jb250YWluc1JlY3Q9ZnVuY3Rpb24odCl7dmFyIGU9dC54K3Qud2lkdGgsaT10LnkrdC5oZWlnaHQscj10aGlzLngrdGhpcy53aWR0aCxuPXRoaXMueSt0aGlzLmhlaWdodDtyZXR1cm4gdC54Pj10aGlzLngmJnQueDxyJiZ0Lnk+PXRoaXMueSYmdC55PG4mJmU+dGhpcy54JiZyPj1lJiZpPnRoaXMueSYmbj49aX0sci5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT09dD8hMDp0aGlzLng9PT10LngmJnRoaXMueT09PXQueSYmdGhpcy53aWR0aD09PXQud2lkdGgmJnRoaXMuaGVpZ2h0PT09dC5oZWlnaHR9LHIucHJvdG90eXBlLmluZmxhdGVQb2ludD1mdW5jdGlvbih0KXt0aGlzLmluZmxhdGUodC54LHQueSl9LHIucHJvdG90eXBlLm9mZnNldD1mdW5jdGlvbih0LGUpe3RoaXMueCs9dCx0aGlzLnkrPWV9LHIucHJvdG90eXBlLm9mZnNldFBvaW50PWZ1bmN0aW9uKHQpe3RoaXMub2Zmc2V0KHQueCx0LnkpfSxyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiKHg9XCIrdGhpcy54K1wiLCB5PVwiK3RoaXMueStcIiwgd2lkdGg9XCIrdGhpcy53aWR0aCtcIiwgaGVpZ2h0PVwiK3RoaXMuaGVpZ2h0K1wiKVwifSxyLnByb3RvdHlwZS51bmlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNsb25lKCk7aWYodC5pc0VtcHR5KCkpcmV0dXJuIGU7aWYoZS5pc0VtcHR5KCkpcmV0dXJuIGUuY29weUZyb20odCksZTt2YXIgaT1NYXRoLm1pbihlLngsdC54KSxyPU1hdGgubWluKGUueSx0LnkpO3JldHVybiBlLnNldFRvKGkscixNYXRoLm1heChlLnJpZ2h0LHQucmlnaHQpLWksTWF0aC5tYXgoZS5ib3R0b20sdC5ib3R0b20pLXIpLGV9LHIucHJvdG90eXBlLiRnZXRCYXNlV2lkdGg9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5hYnMoTWF0aC5jb3ModCkpLGk9TWF0aC5hYnMoTWF0aC5zaW4odCkpO3JldHVybiBlKnRoaXMud2lkdGgraSp0aGlzLmhlaWdodH0sci5wcm90b3R5cGUuJGdldEJhc2VIZWlnaHQ9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5hYnMoTWF0aC5jb3ModCkpLGk9TWF0aC5hYnMoTWF0aC5zaW4odCkpO3JldHVybiBpKnRoaXMud2lkdGgrZSp0aGlzLmhlaWdodH0scn0odC5IYXNoT2JqZWN0KTt0LlJlY3RhbmdsZT1pLF9fcmVmbGVjdChpLnByb3RvdHlwZSxcImVncmV0LlJlY3RhbmdsZVwiKSx0LiRUZW1wUmVjdGFuZ2xlPW5ldyBpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1bXSxpPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIodCl7dm9pZCAwPT09dCYmKHQ9bnVsbCk7dmFyIGU9aS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLiRFdmVudERpc3BhdGNoZXI9ezA6dD90OmUsMTp7fSwyOnt9LDM6MH0sZX1yZXR1cm4gX19leHRlbmRzKHIsaSksci5wcm90b3R5cGUuJGdldEV2ZW50TWFwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuJEV2ZW50RGlzcGF0Y2hlcixpPXQ/ZVsyXTplWzFdO3JldHVybiBpfSxyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSxpLHIsbil7dGhpcy4kYWRkTGlzdGVuZXIodCxlLGkscixuKX0sci5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUsaSxyLG4pe3RoaXMuJGFkZExpc3RlbmVyKHQsZSxpLHIsbiwhMCl9LHIucHJvdG90eXBlLiRhZGRMaXN0ZW5lcj1mdW5jdGlvbihlLGkscixuLGEsbyl7aXx8dC4kZXJyb3IoMTAwMyxcImxpc3RlbmVyXCIpO3ZhciBzPXRoaXMuJEV2ZW50RGlzcGF0Y2hlcixoPW4/c1syXTpzWzFdLGw9aFtlXTtsPzAhPT1zWzNdJiYoaFtlXT1sPWwuY29uY2F0KCkpOmw9aFtlXT1bXSx0aGlzLiRpbnNlcnRFdmVudEJpbihsLGUsaSxyLG4sYSxvKX0sci5wcm90b3R5cGUuJGluc2VydEV2ZW50QmluPWZ1bmN0aW9uKHQsZSxpLHIsbixhLG8pe2E9MHwrYTtmb3IodmFyIHM9LTEsaD10Lmxlbmd0aCxsPTA7aD5sO2wrKyl7dmFyIHU9dFtsXTtpZih1Lmxpc3RlbmVyPT1pJiZ1LnRoaXNPYmplY3Q9PXImJnUudGFyZ2V0PT10aGlzKXJldHVybiExOy0xPT1zJiZ1LnByaW9yaXR5PGEmJihzPWwpfXZhciBjPXt0eXBlOmUsbGlzdGVuZXI6aSx0aGlzT2JqZWN0OnIscHJpb3JpdHk6YSx0YXJnZXQ6dGhpcyx1c2VDYXB0dXJlOm4sZGlzcGF0Y2hPbmNlOiEhb307cmV0dXJuLTEhPT1zP3Quc3BsaWNlKHMsMCxjKTp0LnB1c2goYyksITB9LHIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlLGkscil7dmFyIG49dGhpcy4kRXZlbnREaXNwYXRjaGVyLGE9cj9uWzJdOm5bMV0sbz1hW3RdO28mJigwIT09blszXSYmKGFbdF09bz1vLmNvbmNhdCgpKSx0aGlzLiRyZW1vdmVFdmVudEJpbihvLGUsaSksMD09by5sZW5ndGgmJihhW3RdPW51bGwpKX0sci5wcm90b3R5cGUuJHJlbW92ZUV2ZW50QmluPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHI9dC5sZW5ndGgsbj0wO3I+bjtuKyspe3ZhciBhPXRbbl07aWYoYS5saXN0ZW5lcj09ZSYmYS50aGlzT2JqZWN0PT1pJiZhLnRhcmdldD09dGhpcylyZXR1cm4gdC5zcGxpY2UobiwxKSwhMH1yZXR1cm4hMX0sci5wcm90b3R5cGUuaGFzRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRFdmVudERpc3BhdGNoZXI7cmV0dXJuISghZVsxXVt0XSYmIWVbMl1bdF0pfSxyLnByb3RvdHlwZS53aWxsVHJpZ2dlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNFdmVudExpc3RlbmVyKHQpfSxyLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0LiRjdXJyZW50VGFyZ2V0PXRoaXMuJEV2ZW50RGlzcGF0Y2hlclswXSx0LiRzZXRUYXJnZXQodC4kY3VycmVudFRhcmdldCksdGhpcy4kbm90aWZ5TGlzdGVuZXIodCwhMSl9LHIucHJvdG90eXBlLiRub3RpZnlMaXN0ZW5lcj1mdW5jdGlvbih0LGkpe3ZhciByPXRoaXMuJEV2ZW50RGlzcGF0Y2hlcixuPWk/clsyXTpyWzFdLGE9blt0LiR0eXBlXTtpZighYSlyZXR1cm4hMDt2YXIgbz1hLmxlbmd0aDtpZigwPT1vKXJldHVybiEwO3ZhciBzPWU7clszXSsrO2Zvcih2YXIgaD0wO28+aDtoKyspe3ZhciBsPWFbaF07aWYobC5saXN0ZW5lci5jYWxsKGwudGhpc09iamVjdCx0KSxsLmRpc3BhdGNoT25jZSYmcy5wdXNoKGwpLHQuJGlzUHJvcGFnYXRpb25JbW1lZGlhdGVTdG9wcGVkKWJyZWFrfWZvcihyWzNdLS07cy5sZW5ndGg7KXt2YXIgbD1zLnBvcCgpO2wudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIobC50eXBlLGwubGlzdGVuZXIsbC50aGlzT2JqZWN0LGwudXNlQ2FwdHVyZSl9cmV0dXJuIXQuJGlzRGVmYXVsdFByZXZlbnRlZH0sci5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudFdpdGg9ZnVuY3Rpb24oZSxpLHIsbil7aWYoaXx8dGhpcy5oYXNFdmVudExpc3RlbmVyKGUpKXt2YXIgYT10LkV2ZW50LmNyZWF0ZSh0LkV2ZW50LGUsaSxuKTthLmRhdGE9cjt2YXIgbz10aGlzLmRpc3BhdGNoRXZlbnQoYSk7cmV0dXJuIHQuRXZlbnQucmVsZWFzZShhKSxvfXJldHVybiEwfSxyfSh0Lkhhc2hPYmplY3QpO3QuRXZlbnREaXNwYXRjaGVyPWksX19yZWZsZWN0KGkucHJvdG90eXBlLFwiZWdyZXQuRXZlbnREaXNwYXRjaGVyXCIsW1wiZWdyZXQuSUV2ZW50RGlzcGF0Y2hlclwiXSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHQlPTM2MCx0PjE4MD90LT0zNjA6LTE4MD50JiYodCs9MzYwKSx0fXZhciBpPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIoKXt2YXIgZT1pLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuJGNoaWxkcmVuPW51bGwsZS4kcGFyZW50PW51bGwsZS4kc3RhZ2U9bnVsbCxlLiRuZXN0TGV2ZWw9MCxlLiR2aXNpYmxlPSEwLGUuJGRpc3BsYXlMaXN0PW51bGwsZS4kYWxwaGE9MSxlLiR0b3VjaEVuYWJsZWQ9ci5kZWZhdWx0VG91Y2hFbmFibGVkLGUuJHNjcm9sbFJlY3Q9bnVsbCxlLiRibGVuZE1vZGU9MCxlLiRtYXNrZWRPYmplY3Q9bnVsbCxlLiRtYXNrPW51bGwsZS4kbWFza1JlY3Q9bnVsbCxlLiRwYXJlbnREaXNwbGF5TGlzdD1udWxsLGUuJHJlbmRlck5vZGU9bnVsbCxlLiRkaXNwbGF5RmxhZ3M9MjAzMixlLiREaXNwbGF5T2JqZWN0PXswOjEsMToxLDI6MCwzOjAsNDowLDU6XCJcIiw2Om5ldyB0Lk1hdHJpeCw3Om5ldyB0Lk1hdHJpeCw4Om5ldyB0Lk1hdHJpeCw5Om5ldyB0LlJlY3RhbmdsZSwxMDpuZXcgdC5SZWN0YW5nbGUsMTE6ITEsMTI6MCwxMzowLDE0OjAvMCwxNTowLzAsMTY6MCwxNzowLDE4OjAsMTk6bnVsbCwyMDpudWxsfSxlfXJldHVybiBfX2V4dGVuZHMocixpKSxyLnByb3RvdHlwZS4kc2V0RmxhZ3M9ZnVuY3Rpb24odCl7dGhpcy4kZGlzcGxheUZsYWdzfD10fSxyLnByb3RvdHlwZS4kcmVtb3ZlRmxhZ3M9ZnVuY3Rpb24odCl7dGhpcy4kZGlzcGxheUZsYWdzJj1+dH0sci5wcm90b3R5cGUuJHJlbW92ZUZsYWdzVXA9ZnVuY3Rpb24odCl7aWYodGhpcy4kaGFzQW55RmxhZ3ModCkpe3RoaXMuJHJlbW92ZUZsYWdzKHQpO3ZhciBlPXRoaXMuJHBhcmVudDtlJiZlLiRyZW1vdmVGbGFnc1VwKHQpfX0sci5wcm90b3R5cGUuJGhhc0ZsYWdzPWZ1bmN0aW9uKHQpe3JldHVybih0aGlzLiRkaXNwbGF5RmxhZ3MmdCk9PXR9LHIucHJvdG90eXBlLiRwcm9wYWdhdGVGbGFnc1VwPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLiRoYXNGbGFncyh0KSl7dGhpcy4kc2V0RmxhZ3ModCk7dmFyIGU9dGhpcy4kcGFyZW50O2UmJmUuJHByb3BhZ2F0ZUZsYWdzVXAodCl9fSxyLnByb3RvdHlwZS4kcHJvcGFnYXRlRmxhZ3NEb3duPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMuJHNldEZsYWdzKHQpfSxyLnByb3RvdHlwZS4kaGFzQW55RmxhZ3M9ZnVuY3Rpb24odCl7cmV0dXJuISEodGhpcy4kZGlzcGxheUZsYWdzJnQpfSxyLnByb3RvdHlwZS4kaW52YWxpZGF0ZU1hdHJpeD1mdW5jdGlvbigpe3RoaXMuJHNldEZsYWdzKDgpLHRoaXMuJGludmFsaWRhdGVQb3NpdGlvbigpfSxyLnByb3RvdHlwZS4kaW52YWxpZGF0ZVBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LiRpbnZhbGlkYXRlVHJhbnNmb3JtKCksdC4kcHJvcGFnYXRlRmxhZ3NEb3duKDQ4KSx0LiRwYXJlbnQmJnQuJHBhcmVudC4kcHJvcGFnYXRlRmxhZ3NVcCg0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwibmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kRGlzcGxheU9iamVjdFs1XX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJERpc3BsYXlPYmplY3RbNV09dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJwYXJlbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBhcmVudH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kc2V0UGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLiRwYXJlbnQ9PXQ/ITE6KHRoaXMuJHBhcmVudD10LCEwKX0sci5wcm90b3R5cGUuJG9uQWRkVG9TdGFnZT1mdW5jdGlvbihlLGkpe3RoaXMuJHN0YWdlPWUsdGhpcy4kbmVzdExldmVsPWksdGhpcy4kaGFzQWRkVG9TdGFnZT0hMCx0LlNwcml0ZS4kRVZFTlRfQUREX1RPX1NUQUdFX0xJU1QucHVzaCh0aGlzKX0sci5wcm90b3R5cGUuJG9uUmVtb3ZlRnJvbVN0YWdlPWZ1bmN0aW9uKCl7dGhpcy4kbmVzdExldmVsPTAsdC5TcHJpdGUuJEVWRU5UX1JFTU9WRV9GUk9NX1NUQUdFX0xJU1QucHVzaCh0aGlzKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwic3RhZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHN0YWdlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIm1hdHJpeFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZ2V0TWF0cml4KCkuY2xvbmUoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldE1hdHJpeCh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kZ2V0TWF0cml4PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kRGlzcGxheU9iamVjdDtyZXR1cm4gdGhpcy4kaGFzRmxhZ3MoOCkmJih0WzZdLiR1cGRhdGVTY2FsZUFuZFJvdGF0aW9uKHRbMF0sdFsxXSx0WzJdLHRbM10pLHRoaXMuJHJlbW92ZUZsYWdzKDgpKSx0WzZdfSxyLnByb3RvdHlwZS4kc2V0TWF0cml4PWZ1bmN0aW9uKHQsaSl7dm9pZCAwPT09aSYmKGk9ITApO3ZhciByPXRoaXMsbj1yLiREaXNwbGF5T2JqZWN0LGE9bls2XTtyZXR1cm4gYS5lcXVhbHModCk/ITE6KGEuY29weUZyb20odCksaSYmKG5bMF09YS4kZ2V0U2NhbGVYKCksblsxXT1hLiRnZXRTY2FsZVkoKSxuWzJdPXQuJGdldFNrZXdYKCksblszXT10LiRnZXRTa2V3WSgpLG5bMTZdPWUoMTgwKm5bMl0vTWF0aC5QSSksblsxN109ZSgxODAqblszXS9NYXRoLlBJKSxuWzRdPWUoMTgwKm5bM10vTWF0aC5QSSkpLHIuJHJlbW92ZUZsYWdzKDgpLHIuJGludmFsaWRhdGVQb3NpdGlvbigpLCEwKX0sci5wcm90b3R5cGUuJGdldENvbmNhdGVuYXRlZE1hdHJpeD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuJERpc3BsYXlPYmplY3RbN107aWYodGhpcy4kaGFzRmxhZ3MoMTYpKXt0aGlzLiRwYXJlbnQ/dGhpcy4kcGFyZW50LiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKS4kcHJlTXVsdGlwbHlJbnRvKHRoaXMuJGdldE1hdHJpeCgpLGUpOmUuY29weUZyb20odGhpcy4kZ2V0TWF0cml4KCkpO3ZhciBpPXRoaXMuJERpc3BsYXlPYmplY3Qscj1pWzEyXSxuPWlbMTNdLGE9dGhpcy4kc2Nyb2xsUmVjdDthP2UuJHByZU11bHRpcGx5SW50byh0LiRUZW1wTWF0cml4LnNldFRvKDEsMCwwLDEsLWEueC1yLC1hLnktbiksZSk6KDAhPXJ8fDAhPW4pJiZlLiRwcmVNdWx0aXBseUludG8odC4kVGVtcE1hdHJpeC5zZXRUbygxLDAsMCwxLC1yLC1uKSxlKSx0aGlzLiRkaXNwbGF5TGlzdCYmKHRoaXMuJGRpc3BsYXlMaXN0LiRyZW5kZXJOb2RlLm1vdmVkPSEwKSx0aGlzLiRyZW5kZXJOb2RlJiYodGhpcy4kcmVuZGVyTm9kZS5tb3ZlZD0hMCksdGhpcy4kcmVtb3ZlRmxhZ3MoMTYpfXJldHVybiBlfSxyLnByb3RvdHlwZS4kZ2V0SW52ZXJ0ZWRDb25jYXRlbmF0ZWRNYXRyaXg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiREaXNwbGF5T2JqZWN0O3JldHVybiB0aGlzLiRoYXNGbGFncygzMikmJih0aGlzLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKS4kaW52ZXJ0SW50byh0WzhdKSx0aGlzLiRyZW1vdmVGbGFncygzMikpLHRbOF19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGdldFgoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFgodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuJGdldFg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kRGlzcGxheU9iamVjdFs2XS50eH0sci5wcm90b3R5cGUuJHNldFg9ZnVuY3Rpb24odCl7dD0rdHx8MDt2YXIgZT10aGlzLiREaXNwbGF5T2JqZWN0WzZdO3JldHVybiB0PT1lLnR4PyExOihlLnR4PXQsdGhpcy4kaW52YWxpZGF0ZVBvc2l0aW9uKCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJ5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRZKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRZKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLiRnZXRZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbNl0udHl9LHIucHJvdG90eXBlLiRzZXRZPWZ1bmN0aW9uKHQpe3Q9K3R8fDA7dmFyIGU9dGhpcy4kRGlzcGxheU9iamVjdFs2XTtyZXR1cm4gdD09ZS50eT8hMTooZS50eT10LHRoaXMuJGludmFsaWRhdGVQb3NpdGlvbigpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwic2NhbGVYXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRTY2FsZVgoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFNjYWxlWCh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kZ2V0U2NhbGVYPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbMF19LHIucHJvdG90eXBlLiRzZXRTY2FsZVg9ZnVuY3Rpb24odCl7dD0rdHx8MDt2YXIgZT10aGlzLiREaXNwbGF5T2JqZWN0O3JldHVybiB0PT1lWzBdPyExOihlWzBdPXQsdGhpcy4kaW52YWxpZGF0ZU1hdHJpeCgpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwic2NhbGVZXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRTY2FsZVkoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFNjYWxlWSh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kZ2V0U2NhbGVZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbMV19LHIucHJvdG90eXBlLiRzZXRTY2FsZVk9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9K3R8fDAsdD09dGhpcy4kRGlzcGxheU9iamVjdFsxXT8hMToodGhpcy4kRGlzcGxheU9iamVjdFsxXT10LHRoaXMuJGludmFsaWRhdGVNYXRyaXgoKSwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInJvdGF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRSb3RhdGlvbigpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0Um90YXRpb24odCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuJGdldFJvdGF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbNF19LHIucHJvdG90eXBlLiRzZXRSb3RhdGlvbj1mdW5jdGlvbih0KXt0PSt0fHwwLHQ9ZSh0KTt2YXIgaT10aGlzLiREaXNwbGF5T2JqZWN0O2lmKHQ9PWlbNF0pcmV0dXJuITE7dmFyIHI9dC1pWzRdLG49ci8xODAqTWF0aC5QSTtyZXR1cm4gaVsyXSs9bixpWzNdKz1uLGlbNF09dCx0aGlzLiRpbnZhbGlkYXRlTWF0cml4KCksITB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInNrZXdYXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiREaXNwbGF5T2JqZWN0WzE2XX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFNrZXdYKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLiRzZXRTa2V3WD1mdW5jdGlvbih0KXt0PSt0fHwwO3ZhciBpPXRoaXMuJERpc3BsYXlPYmplY3Q7cmV0dXJuIHQ9PWlbMTZdPyExOihpWzE2XT10LHQ9ZSh0KSx0PXQvMTgwKk1hdGguUEksaVsyXT10LHRoaXMuJGludmFsaWRhdGVNYXRyaXgoKSwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInNrZXdZXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiREaXNwbGF5T2JqZWN0WzE3XX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFNrZXdZKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLiRzZXRTa2V3WT1mdW5jdGlvbih0KXt0PSt0fHwwO3ZhciBpPXRoaXMuJERpc3BsYXlPYmplY3Q7cmV0dXJuIHQ9PWlbMTddPyExOihpWzE3XT10LHQ9ZSh0KSx0PXQvMTgwKk1hdGguUEksaVszXT10LHRoaXMuJGludmFsaWRhdGVNYXRyaXgoKSwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIndpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRXaWR0aCgpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0V2lkdGgodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuJGdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIGlzTmFOKHRoaXMuJGdldEV4cGxpY2l0V2lkdGgoKSk/dGhpcy4kZ2V0T3JpZ2luYWxCb3VuZHMoKS53aWR0aDp0aGlzLiRnZXRFeHBsaWNpdFdpZHRoKCl9LHIucHJvdG90eXBlLiRnZXRFeHBsaWNpdFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbMTRdfSxyLnByb3RvdHlwZS4kc2V0V2lkdGg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbMTRdPWlzTmFOKHQpPzAvMDp0LHQ9K3QsMD50PyExOih0aGlzLiRpbnZhbGlkYXRlTWF0cml4KCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJoZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGdldEhlaWdodCgpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0SGVpZ2h0KHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLiRnZXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gaXNOYU4odGhpcy4kZ2V0RXhwbGljaXRIZWlnaHQoKSk/dGhpcy4kZ2V0T3JpZ2luYWxCb3VuZHMoKS5oZWlnaHQ6dGhpcy4kZ2V0RXhwbGljaXRIZWlnaHQoKX0sci5wcm90b3R5cGUuJGdldEV4cGxpY2l0SGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbMTVdfSxyLnByb3RvdHlwZS4kc2V0SGVpZ2h0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLiREaXNwbGF5T2JqZWN0WzE1XT1pc05hTih0KT8wLzA6dCx0PSt0LDA+dD8hMToodGhpcy4kaW52YWxpZGF0ZU1hdHJpeCgpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwibWVhc3VyZWRXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZ2V0T3JpZ2luYWxCb3VuZHMoKS53aWR0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJtZWFzdXJlZEhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZ2V0T3JpZ2luYWxCb3VuZHMoKS5oZWlnaHR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiYW5jaG9yT2Zmc2V0WFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kRGlzcGxheU9iamVjdFsxMl19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRBbmNob3JPZmZzZXRYKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLiRnZXRBbmNob3JPZmZzZXRYPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbMTJdfSxyLnByb3RvdHlwZS4kc2V0QW5jaG9yT2Zmc2V0WD1mdW5jdGlvbih0KXtyZXR1cm4gdD0rdHx8MCx0PT10aGlzLiREaXNwbGF5T2JqZWN0WzEyXT8hMToodGhpcy4kRGlzcGxheU9iamVjdFsxMl09dCx0aGlzLiRpbnZhbGlkYXRlUG9zaXRpb24oKSwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImFuY2hvck9mZnNldFlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJERpc3BsYXlPYmplY3RbMTNdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0QW5jaG9yT2Zmc2V0WSh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kZ2V0QW5jaG9yT2Zmc2V0WT1mdW5jdGlvbigpe3JldHVybiB0aGlzLiREaXNwbGF5T2JqZWN0WzEzXX0sci5wcm90b3R5cGUuJHNldEFuY2hvck9mZnNldFk9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9K3R8fDAsdD09dGhpcy4kRGlzcGxheU9iamVjdFsxM10/ITE6KHRoaXMuJERpc3BsYXlPYmplY3RbMTNdPXQsdGhpcy4kaW52YWxpZGF0ZVBvc2l0aW9uKCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJ2aXNpYmxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiR2aXNpYmxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0VmlzaWJsZSh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kc2V0VmlzaWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gdD0hIXQsdD09dGhpcy4kdmlzaWJsZT8hMToodGhpcy4kdmlzaWJsZT10LHRoaXMuJHByb3BhZ2F0ZUZsYWdzRG93bigxMDI0KSx0aGlzLiRpbnZhbGlkYXRlVHJhbnNmb3JtKCksITApfSxyLnByb3RvdHlwZS4kZ2V0Q29uY2F0ZW5hdGVkVmlzaWJsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJERpc3BsYXlPYmplY3Q7aWYodGhpcy4kaGFzRmxhZ3MoMTAyNCkpe2lmKHRoaXMuJHBhcmVudCl7dmFyIGU9dGhpcy4kcGFyZW50LiRnZXRDb25jYXRlbmF0ZWRWaXNpYmxlKCk7dFsxOV09ZSYmdGhpcy4kdmlzaWJsZX1lbHNlIHRbMTldPXRoaXMuJHZpc2libGU7dGhpcy4kcmVtb3ZlRmxhZ3MoMTAyNCl9cmV0dXJuIHRbMTldfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJjYWNoZUFzQml0bWFwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiREaXNwbGF5T2JqZWN0WzExXX0sc2V0OmZ1bmN0aW9uKHQpe3Q9ISF0LHRoaXMuJERpc3BsYXlPYmplY3RbMTFdPXQsdGhpcy4kc2V0SGFzRGlzcGxheUxpc3QodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuJHNldEhhc0Rpc3BsYXlMaXN0PWZ1bmN0aW9uKGUpe3ZhciBpPSEhdGhpcy4kZGlzcGxheUxpc3Q7aWYoaSE9ZSlpZihlKXt2YXIgcj10LnN5cy5EaXNwbGF5TGlzdC5jcmVhdGUodGhpcyk7ciYmKHRoaXMuJGRpc3BsYXlMaXN0PXIsdGhpcy4kcGFyZW50RGlzcGxheUxpc3QmJnRoaXMuJHBhcmVudERpc3BsYXlMaXN0Lm1hcmtEaXJ0eShyKSx0aGlzLiRjYWNoZUFzQml0bWFwQ2hhbmdlZCgpKX1lbHNlIHRoaXMuJGRpc3BsYXlMaXN0PW51bGwsdGhpcy4kY2FjaGVBc0JpdG1hcENoYW5nZWQoKX0sci5wcm90b3R5cGUuJGNhY2hlQXNCaXRtYXBDaGFuZ2VkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kZGlzcGxheUxpc3R8fHRoaXMuJHBhcmVudERpc3BsYXlMaXN0O3RoaXMuJHJlbmRlck5vZGUmJnQmJnQubWFya0RpcnR5KHRoaXMpLHRoaXMuJHByb3BhZ2F0ZUZsYWdzRG93big0OCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImFscGhhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRhbHBoYX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldEFscGhhKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLiRzZXRBbHBoYT1mdW5jdGlvbih0KXtyZXR1cm4gdD0rdHx8MCx0PT10aGlzLiRhbHBoYT8hMToodGhpcy4kYWxwaGE9dCx0aGlzLiRwcm9wYWdhdGVGbGFnc0Rvd24oNjQpLHRoaXMuJGludmFsaWRhdGUoKSwhMCl9LHIucHJvdG90eXBlLiRnZXRDb25jYXRlbmF0ZWRBbHBoYT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJERpc3BsYXlPYmplY3Q7aWYodGhpcy4kaGFzRmxhZ3MoNjQpKXtpZih0aGlzLiRwYXJlbnQpe3ZhciBlPXRoaXMuJHBhcmVudC4kZ2V0Q29uY2F0ZW5hdGVkQWxwaGEoKTt0WzE4XT1lKnRoaXMuJGFscGhhfWVsc2UgdFsxOF09dGhpcy4kYWxwaGE7dGhpcy4kcmVtb3ZlRmxhZ3MoNjQpfXJldHVybiB0WzE4XX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwidG91Y2hFbmFibGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRUb3VjaEVuYWJsZWQoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFRvdWNoRW5hYmxlZCh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kZ2V0VG91Y2hFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvdWNoRW5hYmxlZH0sci5wcm90b3R5cGUuJHNldFRvdWNoRW5hYmxlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy4kdG91Y2hFbmFibGVkPT10PyExOih0aGlzLiR0b3VjaEVuYWJsZWQ9dCwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInNjcm9sbFJlY3RcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNjcm9sbFJlY3R9LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRTY3JvbGxSZWN0KHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLiRzZXRTY3JvbGxSZWN0PWZ1bmN0aW9uKGUpe3JldHVybiBlfHx0aGlzLiRzY3JvbGxSZWN0PyhlPyh0aGlzLiRzY3JvbGxSZWN0fHwodGhpcy4kc2Nyb2xsUmVjdD1uZXcgdC5SZWN0YW5nbGUpLHRoaXMuJHNjcm9sbFJlY3QuY29weUZyb20oZSkpOnRoaXMuJHNjcm9sbFJlY3Q9bnVsbCx0aGlzLiRpbnZhbGlkYXRlUG9zaXRpb24oKSwhMCk6ITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImJsZW5kTW9kZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zeXMubnVtYmVyVG9CbGVuZE1vZGUodGhpcy4kYmxlbmRNb2RlKX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciBpPXQuc3lzLmJsZW5kTW9kZVRvTnVtYmVyKGUpO2khPXRoaXMuJGJsZW5kTW9kZSYmKHRoaXMuJGJsZW5kTW9kZT1pLHRoaXMuJGludmFsaWRhdGVUcmFuc2Zvcm0oKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwibWFza1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbWFzaz90aGlzLiRtYXNrOnRoaXMuJG1hc2tSZWN0fSxzZXQ6ZnVuY3Rpb24odCl7aWYodCE9PXRoaXMpe2lmKHQpaWYodCBpbnN0YW5jZW9mIHIpe2lmKHQ9PXRoaXMuJG1hc2spcmV0dXJuO3QuJG1hc2tlZE9iamVjdCYmKHQuJG1hc2tlZE9iamVjdC5tYXNrPW51bGwpLHQuJG1hc2tlZE9iamVjdD10aGlzLHQuJGludmFsaWRhdGVUcmFuc2Zvcm0oKSx0aGlzLiRtYXNrPXQsdGhpcy4kbWFza1JlY3Q9bnVsbH1lbHNlIHRoaXMuJHNldE1hc2tSZWN0KHQpLHRoaXMuJG1hc2smJih0aGlzLiRtYXNrLiRtYXNrZWRPYmplY3Q9bnVsbCx0aGlzLiRtYXNrLiRpbnZhbGlkYXRlVHJhbnNmb3JtKCkpLHRoaXMuJG1hc2s9bnVsbDtlbHNlIHRoaXMuJG1hc2smJih0aGlzLiRtYXNrLiRtYXNrZWRPYmplY3Q9bnVsbCx0aGlzLiRtYXNrLiRpbnZhbGlkYXRlVHJhbnNmb3JtKCkpLHRoaXMuJG1hc2s9bnVsbCx0aGlzLiRtYXNrUmVjdD1udWxsO3RoaXMuJGludmFsaWRhdGVUcmFuc2Zvcm0oKX19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuJHNldE1hc2tSZWN0PWZ1bmN0aW9uKGUpe3JldHVybiBlfHx0aGlzLiRtYXNrUmVjdD8oZT8odGhpcy4kbWFza1JlY3R8fCh0aGlzLiRtYXNrUmVjdD1uZXcgdC5SZWN0YW5nbGUpLHRoaXMuJG1hc2tSZWN0LmNvcHlGcm9tKGUpKTp0aGlzLiRtYXNrUmVjdD1udWxsLHRoaXMuJGludmFsaWRhdGVQb3NpdGlvbigpLCEwKTohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiZmlsdGVyc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kRGlzcGxheU9iamVjdFsyMF19LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLiREaXNwbGF5T2JqZWN0WzIwXTtpZighZSYmIXQpcmV0dXJuIHZvaWQodGhpcy4kRGlzcGxheU9iamVjdFsyMF09dCk7aWYodGhpcy4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKSx0aGlzLiRpbnZhbGlkYXRlKCEwKSxlJiZlLmxlbmd0aClmb3IodmFyIGk9ZS5sZW5ndGgscj0wO2k+cjtyKyspZVtyXS4kcmVtb3ZlVGFyZ2V0KHRoaXMpO2lmKHRoaXMuJERpc3BsYXlPYmplY3RbMjBdPXQsdCYmdC5sZW5ndGgpZm9yKHZhciBuPXQubGVuZ3RoLHI9MDtuPnI7cisrKXRbcl0uJGFkZFRhcmdldCh0aGlzKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS4kZ2V0RmlsdGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiREaXNwbGF5T2JqZWN0WzIwXX0sci5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtZWRCb3VuZHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10fHx0aGlzLHRoaXMuJGdldFRyYW5zZm9ybWVkQm91bmRzKHQsZSl9LHIucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPSEwKSx0PXRoaXMuJGdldFRyYW5zZm9ybWVkQm91bmRzKHRoaXMsdCksZSl7dmFyIGk9dGhpcy4kRGlzcGxheU9iamVjdDsoMCE9aVsxMl18fDAhPWlbMTNdKSYmKHQueC09aVsxMl0sdC55LT1pWzEzXSl9cmV0dXJuIHR9LHIucHJvdG90eXBlLiRnZXRUcmFuc2Zvcm1lZEJvdW5kcz1mdW5jdGlvbihlLGkpe3ZhciByPXRoaXMuJGdldE9yaWdpbmFsQm91bmRzKCk7aWYoaXx8KGk9bmV3IHQuUmVjdGFuZ2xlKSxpLmNvcHlGcm9tKHIpLGU9PXRoaXMpcmV0dXJuIGk7dmFyIG47aWYoZSl7bj10LiRUZW1wTWF0cml4O3ZhciBhPWUuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCk7YS4kcHJlTXVsdGlwbHlJbnRvKHRoaXMuJGdldENvbmNhdGVuYXRlZE1hdHJpeCgpLG4pfWVsc2Ugbj10aGlzLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKTtyZXR1cm4gbi4kdHJhbnNmb3JtQm91bmRzKGkpLGl9LHIucHJvdG90eXBlLmdsb2JhbFRvTG9jYWw9ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPTApO3ZhciByPXRoaXMuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCk7cmV0dXJuIHIudHJhbnNmb3JtUG9pbnQodCxlLGkpfSxyLnByb3RvdHlwZS5sb2NhbFRvR2xvYmFsPWZ1bmN0aW9uKHQsZSxpKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT0wKTt2YXIgcj10aGlzLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKTtyZXR1cm4gci50cmFuc2Zvcm1Qb2ludCh0LGUsaSl9LHIucHJvdG90eXBlLiRpbnZhbGlkYXRlQ29udGVudEJvdW5kcz1mdW5jdGlvbigpe3RoaXMuJGludmFsaWRhdGUoKSx0aGlzLiRzZXRGbGFncygyKSx0aGlzLiRwcm9wYWdhdGVGbGFnc1VwKDQpfSxyLnByb3RvdHlwZS4kZ2V0T3JpZ2luYWxCb3VuZHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiREaXNwbGF5T2JqZWN0WzldO2lmKHRoaXMuJGhhc0ZsYWdzKDQpKXt0LmNvcHlGcm9tKHRoaXMuJGdldENvbnRlbnRCb3VuZHMoKSksdGhpcy4kbWVhc3VyZUNoaWxkQm91bmRzKHQpLHRoaXMuJHJlbW92ZUZsYWdzKDQpLHRoaXMuJGRpc3BsYXlMaXN0JiYodGhpcy4kZGlzcGxheUxpc3QuJHJlbmRlck5vZGUubW92ZWQ9ITApO3ZhciBlPXRoaXMuJG1lYXN1cmVGaWx0ZXJzT2Zmc2V0KCk7ZSYmKHQueCs9ZS5taW5YLHQueSs9ZS5taW5ZLHQud2lkdGgrPWUubWF4WCx0LmhlaWdodCs9ZS5tYXhZKX1yZXR1cm4gdH0sci5wcm90b3R5cGUuJG1lYXN1cmVDaGlsZEJvdW5kcz1mdW5jdGlvbih0KXt9LHIucHJvdG90eXBlLiRnZXRDb250ZW50Qm91bmRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kRGlzcGxheU9iamVjdFsxMF07cmV0dXJuIHRoaXMuJGhhc0ZsYWdzKDIpJiYodGhpcy4kbWVhc3VyZUNvbnRlbnRCb3VuZHModCksdGhpcy4kcmVuZGVyTm9kZSYmKHRoaXMuJHJlbmRlck5vZGUubW92ZWQ9ITApLHRoaXMuJHJlbW92ZUZsYWdzKDIpKSx0fSxyLnByb3RvdHlwZS4kbWVhc3VyZUNvbnRlbnRCb3VuZHM9ZnVuY3Rpb24odCl7fSxyLnByb3RvdHlwZS4kaW52YWxpZGF0ZT1mdW5jdGlvbih0KXtpZih0aGlzLiRyZW5kZXJOb2RlJiYhdGhpcy4kaGFzRmxhZ3MoMzg0KSl7dGhpcy4kc2V0RmxhZ3MoMzg0KTt2YXIgZT10aGlzLiRkaXNwbGF5TGlzdD90aGlzLiRkaXNwbGF5TGlzdDp0aGlzLiRwYXJlbnREaXNwbGF5TGlzdDtlJiZlLm1hcmtEaXJ0eSh0aGlzKX19LHIucHJvdG90eXBlLiRpbnZhbGlkYXRlVHJhbnNmb3JtPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighdC4kaGFzRmxhZ3MoNTEyKSl7dC4kc2V0RmxhZ3MoNTEyKTt2YXIgZT10LiRkaXNwbGF5TGlzdDsoZXx8dC4kcmVuZGVyTm9kZSkmJnQuJHBhcmVudERpc3BsYXlMaXN0JiZ0LiRwYXJlbnREaXNwbGF5TGlzdC5tYXJrRGlydHkoZXx8dCl9fSxyLnByb3RvdHlwZS4kZ2V0UmVuZGVyTm9kZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJHJlbmRlck5vZGU7cmV0dXJuIHQ/KDEyOCZ0aGlzLiRkaXNwbGF5RmxhZ3MmJih0LmNsZWFuQmVmb3JlUmVuZGVyKCksdGhpcy4kcmVuZGVyKCksdGhpcy4kcmVtb3ZlRmxhZ3MoMTI4KSx0PXRoaXMuJHJlbmRlck5vZGUpLHQpOm51bGx9LHIucHJvdG90eXBlLiR1cGRhdGU9ZnVuY3Rpb24oZSxpKXt2YXIgcj10aGlzO3IuJHJlbW92ZUZsYWdzVXAoNzY4KTt2YXIgbj1yLiRyZW5kZXJOb2RlO24ucmVuZGVyQWxwaGE9ci4kZ2V0Q29uY2F0ZW5hdGVkQWxwaGEoKTt2YXIgYT1yLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKTtpZihlPT10LkRpcnR5UmVnaW9uUG9saWN5Lk9GRil7dmFyIG89ci4kZGlzcGxheUxpc3R8fHIuJHBhcmVudERpc3BsYXlMaXN0O2lmKCFvKXJldHVybiExO3ZhciBzPW4ucmVuZGVyTWF0cml4O3MuY29weUZyb20oYSk7dmFyIGg9by5yb290O2ghPT1yLiRzdGFnZSYmci4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4QXQoaCxzKX1lbHNle3ZhciBsPWl8fHIuJGdldENvbnRlbnRCb3VuZHMoKTtuLnJlbmRlclZpc2libGU9ci4kZ2V0Q29uY2F0ZW5hdGVkVmlzaWJsZSgpO3ZhciBvPXIuJGRpc3BsYXlMaXN0fHxyLiRwYXJlbnREaXNwbGF5TGlzdCx1PW4ucmVuZGVyUmVnaW9uO2lmKCFvKXJldHVybiB1LnNldFRvKDAsMCwwLDApLG4ubW92ZWQ9ITEsITE7aWYoIW4ubW92ZWQpcmV0dXJuITE7bi5tb3ZlZD0hMTt2YXIgcz1uLnJlbmRlck1hdHJpeDtzLmNvcHlGcm9tKGEpO3ZhciBoPW8ucm9vdDtoIT09ci4kc3RhZ2UmJnIuJGdldENvbmNhdGVuYXRlZE1hdHJpeEF0KGgscyksdS51cGRhdGVSZWdpb24obCxzKTt2YXIgYz1yLiRtZWFzdXJlRmlsdGVyc09mZnNldCgpO2MmJih1Lm1pblgrPWMubWluWCx1Lm1pblkrPWMubWluWSx1Lm1heFgrPWMubWF4WCx1Lm1heFkrPWMubWF4WSx1LnVwZGF0ZUFyZWEoKSl9cmV0dXJuITB9LHIucHJvdG90eXBlLiRtZWFzdXJlRmlsdGVyc09mZnNldD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuJERpc3BsYXlPYmplY3RbMjBdO2lmKGUmJmUubGVuZ3RoKXtmb3IodmFyIGk9ZS5sZW5ndGgscj0wLG49MCxhPTAsbz0wLHM9MDtpPnM7cysrKXt2YXIgaD1lW3NdO2lmKFwiYmx1clwiPT1oLnR5cGUpe3ZhciBsPWguYmx1clgsdT1oLmJsdXJZO3ItPWwsbi09dSxhKz0yKmwsbys9Mip1fWVsc2UgaWYoXCJnbG93XCI9PWgudHlwZSl7dmFyIGw9aC5ibHVyWCx1PWguYmx1clk7ci09bCxuLT11LGErPTIqbCxvKz0yKnU7dmFyIGM9aC5kaXN0YW5jZXx8MCxwPWguYW5nbGV8fDAsZD0wLGY9MDswIT1jJiYoZD1NYXRoLmNlaWwoYyp0Lk51bWJlclV0aWxzLmNvcyhwKSksZj1NYXRoLmNlaWwoYyp0Lk51bWJlclV0aWxzLnNpbihwKSksZD4wP2ErPWQ6MD5kJiYocis9ZCxhLT1kKSxmPjA/bys9ZjowPmYmJihuKz1mLG8tPWYpKX19cmV0dXJue21pblg6cixtaW5ZOm4sbWF4WDphLG1heFk6b319cmV0dXJuIG51bGx9LHIucHJvdG90eXBlLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXhBdD1mdW5jdGlvbihlLGkpe3ZhciByPWUuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCk7aWYoMD09PXIuYXx8MD09PXIuZCl7dmFyIG49dGhpcyxhPWUuJG5lc3RMZXZlbDtmb3IoaS5pZGVudGl0eSgpO24uJG5lc3RMZXZlbD5hOyl7dmFyIG89bi4kc2Nyb2xsUmVjdDtvJiZpLmNvbmNhdCh0LiRUZW1wTWF0cml4LnNldFRvKDEsMCwwLDEsLW8ueCwtby55KSksaS5jb25jYXQobi4kZ2V0TWF0cml4KCkpLG49bi4kcGFyZW50fX1lbHNlIHIuJHByZU11bHRpcGx5SW50byhpLGkpfSxyLnByb3RvdHlwZS4kZ2V0Q29uY2F0ZW5hdGVkQWxwaGFBdD1mdW5jdGlvbih0LGUpe3ZhciBpPXQuJGdldENvbmNhdGVuYXRlZEFscGhhKCk7aWYoMD09PWkpe2U9MTtmb3IodmFyIHI9dGhpcyxuPXQuJG5lc3RMZXZlbDtyLiRuZXN0TGV2ZWw+bjspZSo9ci4kYWxwaGEscj1yLiRwYXJlbnR9ZWxzZSBlLz1pO3JldHVybiBlfSxyLnByb3RvdHlwZS4kcmVuZGVyPWZ1bmN0aW9uKCl7fSxyLnByb3RvdHlwZS4kaGl0VGVzdD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuJERpc3BsYXlPYmplY3Q7aWYoIXRoaXMuJHJlbmRlck5vZGV8fCF0aGlzLiR2aXNpYmxlfHwwPT1pWzBdfHwwPT1pWzFdKXJldHVybiBudWxsO3ZhciByPXRoaXMuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCk7aWYoMD09ci5hJiYwPT1yLmImJjA9PXIuYyYmMD09ci5kKXJldHVybiBudWxsO3ZhciBuPXRoaXMuJGdldENvbnRlbnRCb3VuZHMoKSxhPXIuYSp0K3IuYyplK3IudHgsbz1yLmIqdCtyLmQqZStyLnR5O2lmKG4uY29udGFpbnMoYSxvKSl7aWYoIXRoaXMuJGNoaWxkcmVuKXt2YXIgcz10aGlzLiRzY3JvbGxSZWN0P3RoaXMuJHNjcm9sbFJlY3Q6dGhpcy4kbWFza1JlY3Q7aWYocyYmIXMuY29udGFpbnMoYSxvKSlyZXR1cm4gbnVsbDtpZih0aGlzLiRtYXNrJiYhdGhpcy4kbWFzay4kaGl0VGVzdCh0LGUpKXJldHVybiBudWxsfXJldHVybiB0aGlzfXJldHVybiBudWxsfSxyLnByb3RvdHlwZS5oaXRUZXN0UG9pbnQ9ZnVuY3Rpb24oZSxpLHIpe2lmKHIpe3ZhciBuPXRoaXMuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCksYT1uLmEqZStuLmMqaStuLnR4LG89bi5iKmUrbi5kKmkrbi50eSxzPXZvaWQgMCxoPXRoaXMuJGRpc3BsYXlMaXN0O2lmKGgpe3ZhciBsPWgucmVuZGVyQnVmZmVyO3RyeXtzPWwuZ2V0UGl4ZWxzKGEtaC5vZmZzZXRYLG8taC5vZmZzZXRZKX1jYXRjaCh1KXt0aHJvdyBuZXcgRXJyb3IodC5zeXMudHIoMTAzOSkpfX1lbHNle3ZhciBsPXQuc3lzLmN1c3RvbUhpdFRlc3RCdWZmZXI7bC5yZXNpemUoMywzKTt2YXIgYz10Lk1hdHJpeC5jcmVhdGUoKTtjLmlkZW50aXR5KCksYy50cmFuc2xhdGUoMS1hLDEtbyksdC5zeXMuc3lzdGVtUmVuZGVyZXIucmVuZGVyKHRoaXMsbCxjLG51bGwsITApLHQuTWF0cml4LnJlbGVhc2UoYyk7dHJ5e3M9bC5nZXRQaXhlbHMoMSwxKX1jYXRjaCh1KXt0aHJvdyBuZXcgRXJyb3IodC5zeXMudHIoMTAzOSkpfX1yZXR1cm4gMD09PXNbM10/ITE6ITB9dmFyIHA9dGhpcy4kRGlzcGxheU9iamVjdDtpZigwPT1wWzBdfHwwPT1wWzFdKXJldHVybiExO3ZhciBuPXRoaXMuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCksZD10aGlzLmdldEJvdW5kcyhudWxsLCExKSxhPW4uYSplK24uYyppK24udHgsbz1uLmIqZStuLmQqaStuLnR5O2lmKGQuY29udGFpbnMoYSxvKSl7dmFyIGY9dGhpcy4kc2Nyb2xsUmVjdD90aGlzLiRzY3JvbGxSZWN0OnRoaXMuJG1hc2tSZWN0O3JldHVybiBmJiYhZi5jb250YWlucyhhLG8pPyExOiEwfXJldHVybiExfSxyLnByb3RvdHlwZS4kYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZSxuLGEsbyxzLGgpe2kucHJvdG90eXBlLiRhZGRMaXN0ZW5lci5jYWxsKHRoaXMsZSxuLGEsbyxzLGgpO3ZhciBsPWU9PXQuRXZlbnQuRU5URVJfRlJBTUU7aWYobHx8ZT09dC5FdmVudC5SRU5ERVIpe3ZhciB1PWw/ci4kZW50ZXJGcmFtZUNhbGxCYWNrTGlzdDpyLiRyZW5kZXJDYWxsQmFja0xpc3Q7LTE9PXUuaW5kZXhPZih0aGlzKSYmdS5wdXNoKHRoaXMpfX0sci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLG4sYSxvKXtpLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcyxlLG4sYSxvKTt2YXIgcz1lPT10LkV2ZW50LkVOVEVSX0ZSQU1FO2lmKChzfHxlPT10LkV2ZW50LlJFTkRFUikmJiF0aGlzLmhhc0V2ZW50TGlzdGVuZXIoZSkpe3ZhciBoPXM/ci4kZW50ZXJGcmFtZUNhbGxCYWNrTGlzdDpyLiRyZW5kZXJDYWxsQmFja0xpc3QsbD1oLmluZGV4T2YodGhpcyk7LTEhPT1sJiZoLnNwbGljZShsLDEpfX0sci5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbih0KXtpZighdC4kYnViYmxlcylyZXR1cm4gaS5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudC5jYWxsKHRoaXMsdCk7dmFyIGU9dGhpcy4kZ2V0UHJvcGFnYXRpb25MaXN0KHRoaXMpLHI9LjUqZS5sZW5ndGg7cmV0dXJuIHQuJHNldFRhcmdldCh0aGlzKSx0aGlzLiRkaXNwYXRjaFByb3BhZ2F0aW9uRXZlbnQodCxlLHIpLCF0LiRpc0RlZmF1bHRQcmV2ZW50ZWR9LHIucHJvdG90eXBlLiRnZXRQcm9wYWdhdGlvbkxpc3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdO3Q7KWUucHVzaCh0KSx0PXQuJHBhcmVudDt2YXIgaT1lLmNvbmNhdCgpO3JldHVybiBpLnJldmVyc2UoKSxlPWkuY29uY2F0KGUpfSxyLnByb3RvdHlwZS4kZGlzcGF0Y2hQcm9wYWdhdGlvbkV2ZW50PWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHI9ZS5sZW5ndGgsbj1pLTEsYT0wO3I+YTthKyspe3ZhciBvPWVbYV07aWYodC4kY3VycmVudFRhcmdldD1vLG4+YT90LiRldmVudFBoYXNlPTE6YT09aXx8YT09bj90LiRldmVudFBoYXNlPTI6dC4kZXZlbnRQaGFzZT0zLG8uJG5vdGlmeUxpc3RlbmVyKHQsaT5hKSx0LiRpc1Byb3BhZ2F0aW9uU3RvcHBlZHx8dC4kaXNQcm9wYWdhdGlvbkltbWVkaWF0ZVN0b3BwZWQpcmV0dXJufX0sci5wcm90b3R5cGUud2lsbFRyaWdnZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7ZTspe2lmKGUuaGFzRXZlbnRMaXN0ZW5lcih0KSlyZXR1cm4hMDtlPWUuJHBhcmVudH1yZXR1cm4hMX0scn0odC5FdmVudERpc3BhdGNoZXIpO2kuZGVmYXVsdFRvdWNoRW5hYmxlZD0hMSxpLmJvdW5kc0ZvclVwZGF0ZT1uZXcgdC5SZWN0YW5nbGUsaS4kZW50ZXJGcmFtZUNhbGxCYWNrTGlzdD1bXSxpLiRyZW5kZXJDYWxsQmFja0xpc3Q9W10sdC5EaXNwbGF5T2JqZWN0PWksX19yZWZsZWN0KGkucHJvdG90eXBlLFwiZWdyZXQuRGlzcGxheU9iamVjdFwiLFtcImVncmV0LnN5cy5SZW5kZXJhYmxlXCJdKSx0LiRtYXJrUmVhZE9ubHkoaSxcInBhcmVudFwiKSx0LiRtYXJrUmVhZE9ubHkoaSxcInN0YWdlXCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7dmFyIHQ9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LiR0b3VjaENoaWxkcmVuPSEwLHQuJGNoaWxkcmVuPVtdLHR9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLGkucHJvdG90eXBlLiRwcm9wYWdhdGVGbGFnc0Rvd249ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0hMSksIXRoaXMuJGhhc0ZsYWdzKHQpJiYodGhpcy4kc2V0RmxhZ3ModCksIWV8fCF0aGlzLiRkaXNwbGF5TGlzdCkpZm9yKHZhciBpPXRoaXMuJGNoaWxkcmVuLHI9aS5sZW5ndGgsbj0wO3I+bjtuKyspaVtuXS4kcHJvcGFnYXRlRmxhZ3NEb3duKHQsZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcIm51bUNoaWxkcmVuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRjaGlsZHJlbi5sZW5ndGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuYWRkQ2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kY2hpbGRyZW4ubGVuZ3RoO3JldHVybiB0LiRwYXJlbnQ9PXRoaXMmJmUtLSx0aGlzLiRkb0FkZENoaWxkKHQsZSl9LGkucHJvdG90eXBlLmFkZENoaWxkQXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT0wfCtlLCgwPmV8fGU+PXRoaXMuJGNoaWxkcmVuLmxlbmd0aCkmJihlPXRoaXMuJGNoaWxkcmVuLmxlbmd0aCx0LiRwYXJlbnQ9PXRoaXMmJmUtLSksdGhpcy4kZG9BZGRDaGlsZCh0LGUpfSxpLnByb3RvdHlwZS4kZG9BZGRDaGlsZD1mdW5jdGlvbihlLHIsbil7dm9pZCAwPT09biYmKG49ITApLGU9PXRoaXM/dC4kZXJyb3IoMTAwNSk6ZSBpbnN0YW5jZW9mIHQuRGlzcGxheU9iamVjdENvbnRhaW5lciYmZS5jb250YWlucyh0aGlzKSYmdC4kZXJyb3IoMTAwNCk7dmFyIGE9ZS4kcGFyZW50O2lmKGE9PXRoaXMpcmV0dXJuIHRoaXMuZG9TZXRDaGlsZEluZGV4KGUsciksZTthJiZhLnJlbW92ZUNoaWxkKGUpLHRoaXMuJGNoaWxkcmVuLnNwbGljZShyLDAsZSksZS4kc2V0UGFyZW50KHRoaXMpO3ZhciBvPXRoaXMuJHN0YWdlO2lmKG8mJmUuJG9uQWRkVG9TdGFnZShvLHRoaXMuJG5lc3RMZXZlbCsxKSxuJiZlLmRpc3BhdGNoRXZlbnRXaXRoKHQuRXZlbnQuQURERUQsITApLG8pZm9yKHZhciBzPWkuJEVWRU5UX0FERF9UT19TVEFHRV9MSVNUO3MubGVuZ3RoOyl7dmFyIGg9cy5zaGlmdCgpO2guJHN0YWdlJiZuJiZoLmRpc3BhdGNoRXZlbnRXaXRoKHQuRXZlbnQuQURERURfVE9fU1RBR0UpfXZhciBsPXRoaXMuJGRpc3BsYXlMaXN0fHx0aGlzLiRwYXJlbnREaXNwbGF5TGlzdDtyZXR1cm4gdGhpcy5hc3NpZ25QYXJlbnREaXNwbGF5TGlzdChlLGwsbCksZS4kcHJvcGFnYXRlRmxhZ3NEb3duKDE2NDgsITApLHRoaXMuJHByb3BhZ2F0ZUZsYWdzVXAoNCksdGhpcy4kY2hpbGRBZGRlZChlLHIpLGV9LGkucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQpe2Zvcig7dDspe2lmKHQ9PXRoaXMpcmV0dXJuITA7dD10LiRwYXJlbnR9cmV0dXJuITF9LGkucHJvdG90eXBlLmdldENoaWxkQXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9MHwrZSxlPj0wJiZlPHRoaXMuJGNoaWxkcmVuLmxlbmd0aD90aGlzLiRjaGlsZHJlbltlXToodC4kZXJyb3IoMTAwNyksbnVsbCl9LGkucHJvdG90eXBlLmdldENoaWxkSW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuJGNoaWxkcmVuLmluZGV4T2YodCl9LGkucHJvdG90eXBlLmdldENoaWxkQnlOYW1lPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpPXRoaXMuJGNoaWxkcmVuLHI9aS5sZW5ndGgsbj0wO3I+bjtuKyspaWYoZT1pW25dLGUubmFtZT09dClyZXR1cm4gZTtyZXR1cm4gbnVsbH0saS5wcm90b3R5cGUucmVtb3ZlQ2hpbGQ9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy4kY2hpbGRyZW4uaW5kZXhPZihlKTtyZXR1cm4gaT49MD90aGlzLiRkb1JlbW92ZUNoaWxkKGkpOih0LiRlcnJvcigxMDA2KSxudWxsKX0saS5wcm90b3R5cGUucmVtb3ZlQ2hpbGRBdD1mdW5jdGlvbihlKXtyZXR1cm4gZT0wfCtlLGU+PTAmJmU8dGhpcy4kY2hpbGRyZW4ubGVuZ3RoP3RoaXMuJGRvUmVtb3ZlQ2hpbGQoZSk6KHQuJGVycm9yKDEwMDcpLG51bGwpfSxpLnByb3RvdHlwZS4kZG9SZW1vdmVDaGlsZD1mdW5jdGlvbihlLHIpe3ZvaWQgMD09PXImJihyPSEwKSxlPTB8K2U7dmFyIG49dGhpcy4kY2hpbGRyZW4sYT1uW2VdO2lmKHRoaXMuJGNoaWxkUmVtb3ZlZChhLGUpLHImJmEuZGlzcGF0Y2hFdmVudFdpdGgodC5FdmVudC5SRU1PVkVELCEwKSx0aGlzLiRzdGFnZSl7YS4kb25SZW1vdmVGcm9tU3RhZ2UoKTtmb3IodmFyIG89aS4kRVZFTlRfUkVNT1ZFX0ZST01fU1RBR0VfTElTVDtvLmxlbmd0aD4wOyl7dmFyIHM9by5zaGlmdCgpO3ImJnMuJGhhc0FkZFRvU3RhZ2UmJihzLiRoYXNBZGRUb1N0YWdlPSExLHMuZGlzcGF0Y2hFdmVudFdpdGgodC5FdmVudC5SRU1PVkVEX0ZST01fU1RBR0UpKSxzLiRoYXNBZGRUb1N0YWdlPSExLHMuJHN0YWdlPW51bGx9fXZhciBoPXRoaXMuJGRpc3BsYXlMaXN0fHx0aGlzLiRwYXJlbnREaXNwbGF5TGlzdDt0aGlzLmFzc2lnblBhcmVudERpc3BsYXlMaXN0KGEsaCxudWxsKSxhLiRwcm9wYWdhdGVGbGFnc0Rvd24oMTY0OCwhMCksYS4kc2V0UGFyZW50KG51bGwpO3ZhciBsPW4uaW5kZXhPZihhKTtyZXR1cm4tMSE9bCYmbi5zcGxpY2UobCwxKSx0aGlzLiRwcm9wYWdhdGVGbGFnc1VwKDQpLGF9LGkucHJvdG90eXBlLnNldENoaWxkSW5kZXg9ZnVuY3Rpb24odCxlKXtlPTB8K2UsKDA+ZXx8ZT49dGhpcy4kY2hpbGRyZW4ubGVuZ3RoKSYmKGU9dGhpcy4kY2hpbGRyZW4ubGVuZ3RoLTEpLHRoaXMuZG9TZXRDaGlsZEluZGV4KHQsZSl9LGkucHJvdG90eXBlLmRvU2V0Q2hpbGRJbmRleD1mdW5jdGlvbihlLGkpe3ZhciByPXRoaXMuJGNoaWxkcmVuLmluZGV4T2YoZSk7MD5yJiZ0LiRlcnJvcigxMDA2KSxyIT1pJiYodGhpcy4kY2hpbGRSZW1vdmVkKGUsciksdGhpcy4kY2hpbGRyZW4uc3BsaWNlKHIsMSksdGhpcy4kY2hpbGRyZW4uc3BsaWNlKGksMCxlKSx0aGlzLiRjaGlsZEFkZGVkKGUsaSksZS4kaW52YWxpZGF0ZVRyYW5zZm9ybSgpLHRoaXMuJHByb3BhZ2F0ZUZsYWdzVXAoNCkpfSxpLnByb3RvdHlwZS5zd2FwQ2hpbGRyZW5BdD1mdW5jdGlvbihlLGkpe2U9MHwrZSxpPTB8K2ksZT49MCYmZTx0aGlzLiRjaGlsZHJlbi5sZW5ndGgmJmk+PTAmJmk8dGhpcy4kY2hpbGRyZW4ubGVuZ3RoP3RoaXMuZG9Td2FwQ2hpbGRyZW5BdChlLGkpOnQuJGVycm9yKDEwMDcpfSxpLnByb3RvdHlwZS5zd2FwQ2hpbGRyZW49ZnVuY3Rpb24oZSxpKXt2YXIgcj10aGlzLiRjaGlsZHJlbi5pbmRleE9mKGUpLG49dGhpcy4kY2hpbGRyZW4uaW5kZXhPZihpKTstMT09cnx8LTE9PW4/dC4kZXJyb3IoMTAwNik6dGhpcy5kb1N3YXBDaGlsZHJlbkF0KHIsbil9LGkucHJvdG90eXBlLmRvU3dhcENoaWxkcmVuQXQ9ZnVuY3Rpb24odCxlKXtpZih0PmUpe3ZhciBpPWU7ZT10LHQ9aX1lbHNlIGlmKHQ9PWUpcmV0dXJuO3ZhciByPXRoaXMuJGNoaWxkcmVuLG49clt0XSxhPXJbZV07dGhpcy4kY2hpbGRSZW1vdmVkKG4sdCksdGhpcy4kY2hpbGRSZW1vdmVkKGEsZSksclt0XT1hLHJbZV09bix0aGlzLiRjaGlsZEFkZGVkKGEsdCksdGhpcy4kY2hpbGRBZGRlZChuLGUpLG4uJGludmFsaWRhdGVUcmFuc2Zvcm0oKSxhLiRpbnZhbGlkYXRlVHJhbnNmb3JtKCksdGhpcy4kcHJvcGFnYXRlRmxhZ3NVcCg0KX0saS5wcm90b3R5cGUucmVtb3ZlQ2hpbGRyZW49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy4kY2hpbGRyZW4sZT10Lmxlbmd0aC0xO2U+PTA7ZS0tKXRoaXMuJGRvUmVtb3ZlQ2hpbGQoZSl9LGkucHJvdG90eXBlLiRjaGlsZEFkZGVkPWZ1bmN0aW9uKHQsZSl7fSxpLnByb3RvdHlwZS4kY2hpbGRSZW1vdmVkPWZ1bmN0aW9uKHQsZSl7fSxpLnByb3RvdHlwZS4kb25BZGRUb1N0YWdlPWZ1bmN0aW9uKHQsaSl7ZS5wcm90b3R5cGUuJG9uQWRkVG9TdGFnZS5jYWxsKHRoaXMsdCxpKTt2YXIgcj10aGlzLiRjaGlsZHJlbixuPXIubGVuZ3RoO2krKztmb3IodmFyIGE9MDtuPmE7YSsrKXt2YXIgbz10aGlzLiRjaGlsZHJlblthXTtvLiRvbkFkZFRvU3RhZ2UodCxpKX19LGkucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZS5jYWxsKHRoaXMpO2Zvcih2YXIgdD10aGlzLiRjaGlsZHJlbixpPXQubGVuZ3RoLHI9MDtpPnI7cisrKXt2YXIgbj10W3JdO24uJG9uUmVtb3ZlRnJvbVN0YWdlKCl9fSxpLnByb3RvdHlwZS4kbWVhc3VyZUNoaWxkQm91bmRzPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuJGNoaWxkcmVuLHI9aS5sZW5ndGg7aWYoMCE9cil7Zm9yKHZhciBuPTAsYT0wLG89MCxzPTAsaD0hMSxsPS0xO3I+bDtsKyspe3ZhciB1PS0xPT1sP2U6aVtsXS4kZ2V0VHJhbnNmb3JtZWRCb3VuZHModGhpcyx0LiRUZW1wUmVjdGFuZ2xlKTt1LmlzRW1wdHkoKXx8KGg/KG49TWF0aC5taW4obix1LngpLGE9TWF0aC5tYXgoYSx1LngrdS53aWR0aCksbz1NYXRoLm1pbihvLHUueSkscz1NYXRoLm1heChzLHUueSt1LmhlaWdodCkpOihoPSEwLG49dS54LGE9bit1LndpZHRoLG89dS55LHM9byt1LmhlaWdodCkpfWUuc2V0VG8obixvLGEtbixzLW8pfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwidG91Y2hDaGlsZHJlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZ2V0VG91Y2hDaGlsZHJlbigpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0VG91Y2hDaGlsZHJlbighIXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLiRnZXRUb3VjaENoaWxkcmVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvdWNoQ2hpbGRyZW59LGkucHJvdG90eXBlLiRzZXRUb3VjaENoaWxkcmVuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLiR0b3VjaENoaWxkcmVuPT10PyExOih0aGlzLiR0b3VjaENoaWxkcmVuPXQsITApfSxpLnByb3RvdHlwZS4kaW52YWxpZGF0ZT1mdW5jdGlvbih0KXtpZihlLnByb3RvdHlwZS4kaW52YWxpZGF0ZS5jYWxsKHRoaXMsdCksdCl7dmFyIGk9dGhpcy4kZGlzcGxheUxpc3R8fHRoaXMuJHBhcmVudERpc3BsYXlMaXN0LHI9dGhpcy4kY2hpbGRyZW47aWYocilmb3IodmFyIG49ci5sZW5ndGgtMTtuPj0wO24tLSl0aGlzLm1hcmtDaGlsZERpcnR5KHJbbl0saSl9fSxpLnByb3RvdHlwZS4kaW52YWxpZGF0ZVRyYW5zZm9ybT1mdW5jdGlvbigpe3RoaXMubWFya0NoaWxkRGlydHkodGhpcyx0aGlzLiRwYXJlbnREaXNwbGF5TGlzdCl9LGkucHJvdG90eXBlLm1hcmtDaGlsZERpcnR5PWZ1bmN0aW9uKHQsZSl7aWYoIXQuJGhhc0ZsYWdzKDUxMikpe3QuJHNldEZsYWdzKDUxMik7dmFyIGk9dC4kZGlzcGxheUxpc3Q7aWYoKGl8fHQuJHJlbmRlck5vZGUpJiZlJiZlLm1hcmtEaXJ0eShpfHx0KSwhaSl7dmFyIHI9dC4kY2hpbGRyZW47XG5pZihyKWZvcih2YXIgbj1yLmxlbmd0aC0xO24+PTA7bi0tKXRoaXMubWFya0NoaWxkRGlydHkocltuXSxlKX19fSxpLnByb3RvdHlwZS4kY2FjaGVBc0JpdG1hcENoYW5nZWQ9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS4kY2FjaGVBc0JpdG1hcENoYW5nZWQuY2FsbCh0aGlzKTtmb3IodmFyIHQ9dGhpcy4kZGlzcGxheUxpc3R8fHRoaXMuJHBhcmVudERpc3BsYXlMaXN0LGk9dGhpcy4kY2hpbGRyZW4scj1pLmxlbmd0aC0xO3I+PTA7ci0tKXRoaXMuYXNzaWduUGFyZW50RGlzcGxheUxpc3QoaVtyXSx0LHQpfSxpLnByb3RvdHlwZS5hc3NpZ25QYXJlbnREaXNwbGF5TGlzdD1mdW5jdGlvbih0LGUsaSl7dC4kcGFyZW50RGlzcGxheUxpc3Q9aSx0LiRzZXRGbGFncyg1MTIpO3ZhciByPXQuJGRpc3BsYXlMaXN0O2lmKCh0LiRyZW5kZXJOb2RlfHxyKSYmZSYmZS5tYXJrRGlydHkocnx8dCksIXIpe3ZhciBuPXQuJGNoaWxkcmVuO2lmKG4pZm9yKHZhciBhPW4ubGVuZ3RoLTE7YT49MDthLS0pdGhpcy5hc3NpZ25QYXJlbnREaXNwbGF5TGlzdChuW2FdLGUsaSl9fSxpLnByb3RvdHlwZS4kaGl0VGVzdD1mdW5jdGlvbih0LGkpe2lmKCF0aGlzLiR2aXNpYmxlKXJldHVybiBudWxsO3ZhciByPXRoaXMuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCksbj1yLmEqdCtyLmMqaStyLnR4LGE9ci5iKnQrci5kKmkrci50eSxvPXRoaXMuJHNjcm9sbFJlY3Q/dGhpcy4kc2Nyb2xsUmVjdDp0aGlzLiRtYXNrUmVjdDtpZihvJiYhby5jb250YWlucyhuLGEpKXJldHVybiBudWxsO2lmKHRoaXMuJG1hc2smJiF0aGlzLiRtYXNrLiRoaXRUZXN0KHQsaSkpcmV0dXJuIG51bGw7Zm9yKHZhciBzPXRoaXMuJGNoaWxkcmVuLGg9ITEsbD1udWxsLHU9cy5sZW5ndGgtMTt1Pj0wO3UtLSl7dmFyIGM9c1t1XTtpZighYy4kbWFza2VkT2JqZWN0JiYobD1jLiRoaXRUZXN0KHQsaSkpKXtpZihoPSEwLGwuJHRvdWNoRW5hYmxlZClicmVhaztsPW51bGx9fXJldHVybiBsP3RoaXMuJHRvdWNoQ2hpbGRyZW4/bDp0aGlzOmg/dGhpczplLnByb3RvdHlwZS4kaGl0VGVzdC5jYWxsKHRoaXMsdCxpKX0saS5wcm90b3R5cGUuJHNldEFscGhhPWZ1bmN0aW9uKHQpe3JldHVybiB0PSt0fHwwLHQ9PXRoaXMuJGFscGhhPyExOih0aGlzLiRhbHBoYT10LHRoaXMuJHByb3BhZ2F0ZUZsYWdzRG93big2NCksdGhpcy4kaW52YWxpZGF0ZSgpLHRoaXMuJGludmFsaWRhdGVBbGxDaGlsZHJlbigpLCEwKX0saS5wcm90b3R5cGUuJGludmFsaWRhdGVBbGxDaGlsZHJlbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJGNoaWxkcmVuO2lmKHQpZm9yKHZhciBlPXQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBpPXRbZV07aS4kaW52YWxpZGF0ZSgpLGkuJGNoaWxkcmVuJiZpLiRpbnZhbGlkYXRlQWxsQ2hpbGRyZW4oKX19LGl9KHQuRGlzcGxheU9iamVjdCk7ZS4kRVZFTlRfQUREX1RPX1NUQUdFX0xJU1Q9W10sZS4kRVZFTlRfUkVNT1ZFX0ZST01fU1RBR0VfTElTVD1bXSx0LkRpc3BsYXlPYmplY3RDb250YWluZXI9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5EaXNwbGF5T2JqZWN0Q29udGFpbmVyXCIpLHQuJG1hcmtSZWFkT25seShlLFwibnVtQ2hpbGRyZW5cIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS50eXBlPW51bGwsZS4kdGFyZ2V0cz1bXSxlfXJldHVybiBfX2V4dGVuZHMoZSx0KSxlLnByb3RvdHlwZS4kYWRkVGFyZ2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLiR0YXJnZXRzLmxlbmd0aCxpPTA7ZT5pO2krKylpZih0aGlzLiR0YXJnZXRzW2ldLiRoYXNoQ29kZT09dC4kaGFzaENvZGUpcmV0dXJuO3RoaXMuJHRhcmdldHMucHVzaCh0KX0sZS5wcm90b3R5cGUuJHJlbW92ZVRhcmdldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy4kdGFyZ2V0cy5sZW5ndGgsaT0wO2U+aTtpKyspaWYodGhpcy4kdGFyZ2V0c1tpXS4kaGFzaENvZGU9PXQuJGhhc2hDb2RlKXJldHVybiB2b2lkIHRoaXMuJHRhcmdldHMuc3BsaWNlKGksMSl9LGUucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy4kdGFyZ2V0cy5sZW5ndGgsZT0wO3Q+ZTtlKyspdGhpcy4kdGFyZ2V0c1tlXS4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKX0sZS5wcm90b3R5cGUuJHRvSnNvbj1mdW5jdGlvbigpe3JldHVyblwiXCJ9LGV9KHQuSGFzaE9iamVjdCk7dC5GaWx0ZXI9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5GaWx0ZXJcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoaSl7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLl9iaXRtYXBYPTAsci5fYml0bWFwWT0wLHIuX3RleHR1cmVNYXA9dC5jcmVhdGVNYXAoKSxyLiR0ZXh0dXJlPWksci5fYml0bWFwWD1pLl9iaXRtYXBYLWkuX29mZnNldFgsci5fYml0bWFwWT1pLl9iaXRtYXBZLWkuX29mZnNldFkscn1yZXR1cm4gX19leHRlbmRzKGksZSksaS5wcm90b3R5cGUuZ2V0VGV4dHVyZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGV4dHVyZU1hcFt0XX0saS5wcm90b3R5cGUuY3JlYXRlVGV4dHVyZT1mdW5jdGlvbihlLGkscixuLGEsbyxzLGgsbCl7dm9pZCAwPT09byYmKG89MCksdm9pZCAwPT09cyYmKHM9MCksdm9pZCAwPT09aCYmKGg9bytuKSx2b2lkIDA9PT1sJiYobD1zK2EpO3ZhciB1PW5ldyB0LlRleHR1cmU7cmV0dXJuIHUuX2JpdG1hcERhdGE9dGhpcy4kdGV4dHVyZS5fYml0bWFwRGF0YSx1LiRpbml0RGF0YSh0aGlzLl9iaXRtYXBYK2ksdGhpcy5fYml0bWFwWStyLG4sYSxvLHMsaCxsLHRoaXMuJHRleHR1cmUuX3NvdXJjZVdpZHRoLHRoaXMuJHRleHR1cmUuX3NvdXJjZUhlaWdodCksdGhpcy5fdGV4dHVyZU1hcFtlXT11LHV9LGkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLiR0ZXh0dXJlJiZ0aGlzLiR0ZXh0dXJlLmRpc3Bvc2UoKX0saX0odC5IYXNoT2JqZWN0KTt0LlNwcml0ZVNoZWV0PWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuU3ByaXRlU2hlZXRcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLHIsbil7dmFyIGE9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLiRldmVudFBoYXNlPTIsYS4kY3VycmVudFRhcmdldD1udWxsLGEuJHRhcmdldD1udWxsLGEuJGlzRGVmYXVsdFByZXZlbnRlZD0hMSxhLiRpc1Byb3BhZ2F0aW9uU3RvcHBlZD0hMSxhLiRpc1Byb3BhZ2F0aW9uSW1tZWRpYXRlU3RvcHBlZD0hMSxhLiR0eXBlPWUsYS4kYnViYmxlcz0hIWksYS4kY2FuY2VsYWJsZT0hIXIsYS5kYXRhPW4sYX1yZXR1cm4gX19leHRlbmRzKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdHlwZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJidWJibGVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRidWJibGVzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNhbmNlbGFibGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNhbmNlbGFibGV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZXZlbnRQaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZXZlbnRQaGFzZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50VGFyZ2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRjdXJyZW50VGFyZ2V0fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRhcmdldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdGFyZ2V0fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLiRzZXRUYXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuJHRhcmdldD10LCEwfSxlLnByb3RvdHlwZS5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaXNEZWZhdWx0UHJldmVudGVkfSxlLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3RoaXMuJGNhbmNlbGFibGUmJih0aGlzLiRpc0RlZmF1bHRQcmV2ZW50ZWQ9ITApfSxlLnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLiRidWJibGVzJiYodGhpcy4kaXNQcm9wYWdhdGlvblN0b3BwZWQ9ITApfSxlLnByb3RvdHlwZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLiRidWJibGVzJiYodGhpcy4kaXNQcm9wYWdhdGlvbkltbWVkaWF0ZVN0b3BwZWQ9ITApfSxlLnByb3RvdHlwZS5jbGVhbj1mdW5jdGlvbigpe3RoaXMuZGF0YT10aGlzLiRjdXJyZW50VGFyZ2V0PW51bGwsdGhpcy4kc2V0VGFyZ2V0KG51bGwpfSxlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCxpLHIsbil7dm9pZCAwPT09ciYmKHI9ITEpO3ZhciBhPWUuY3JlYXRlKGUsaSxyKSxvPWUuX2dldFByb3BlcnR5RGF0YShlKTt2b2lkIDAhPW4mJihvLmRhdGE9bik7dmFyIHM9dC5kaXNwYXRjaEV2ZW50KGEpO3JldHVybiBlLnJlbGVhc2UoYSksc30sZS5fZ2V0UHJvcGVydHlEYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXQuX3Byb3BzO3JldHVybiBlfHwoZT10Ll9wcm9wcz17fSksZX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlLGkscil7dmFyIG49dC5ldmVudFBvb2w7aWYobnx8KG49dC5ldmVudFBvb2w9W10pLG4ubGVuZ3RoKXt2YXIgYT1uLnBvcCgpO3JldHVybiBhLiR0eXBlPWUsYS4kYnViYmxlcz0hIWksYS4kY2FuY2VsYWJsZT0hIXIsYS4kaXNEZWZhdWx0UHJldmVudGVkPSExLGEuJGlzUHJvcGFnYXRpb25TdG9wcGVkPSExLGEuJGlzUHJvcGFnYXRpb25JbW1lZGlhdGVTdG9wcGVkPSExLGEuJGV2ZW50UGhhc2U9MixhfXJldHVybiBuZXcgdChlLGkscil9LGUucmVsZWFzZT1mdW5jdGlvbih0KXt0LmNsZWFuKCk7dmFyIGU9T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yO2UuZXZlbnRQb29sLnB1c2godCl9LGV9KHQuSGFzaE9iamVjdCk7ZS5BRERFRF9UT19TVEFHRT1cImFkZGVkVG9TdGFnZVwiLGUuUkVNT1ZFRF9GUk9NX1NUQUdFPVwicmVtb3ZlZEZyb21TdGFnZVwiLGUuQURERUQ9XCJhZGRlZFwiLGUuUkVNT1ZFRD1cInJlbW92ZWRcIixlLkVOVEVSX0ZSQU1FPVwiZW50ZXJGcmFtZVwiLGUuUkVOREVSPVwicmVuZGVyXCIsZS5SRVNJWkU9XCJyZXNpemVcIixlLkNIQU5HRT1cImNoYW5nZVwiLGUuQ0hBTkdJTkc9XCJjaGFuZ2luZ1wiLGUuQ09NUExFVEU9XCJjb21wbGV0ZVwiLGUuTE9PUF9DT01QTEVURT1cImxvb3BDb21wbGV0ZVwiLGUuRk9DVVNfSU49XCJmb2N1c0luXCIsZS5GT0NVU19PVVQ9XCJmb2N1c091dFwiLGUuRU5ERUQ9XCJlbmRlZFwiLGUuQUNUSVZBVEU9XCJhY3RpdmF0ZVwiLGUuREVBQ1RJVkFURT1cImRlYWN0aXZhdGVcIixlLkNMT1NFPVwiY2xvc2VcIixlLkNPTk5FQ1Q9XCJjb25uZWN0XCIsZS5MRUFWRV9TVEFHRT1cImxlYXZlU3RhZ2VcIixlLlNPVU5EX0NPTVBMRVRFPVwic291bmRDb21wbGV0ZVwiLHQuRXZlbnQ9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5FdmVudFwiKSx0LiRtYXJrUmVhZE9ubHkoZSxcInR5cGVcIiksdC4kbWFya1JlYWRPbmx5KGUsXCJidWJibGVzXCIpLHQuJG1hcmtSZWFkT25seShlLFwiY2FuY2VsYWJsZVwiKSx0LiRtYXJrUmVhZE9ubHkoZSxcImV2ZW50UGhhc2VcIiksdC4kbWFya1JlYWRPbmx5KGUsXCJjdXJyZW50VGFyZ2V0XCIpLHQuJG1hcmtSZWFkT25seShlLFwidGFyZ2V0XCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKHIpe3ZhciBuPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi4kc2NhbGU5R3JpZD1udWxsLG4uJGZpbGxNb2RlPVwic2NhbGVcIixuLl9waXhlbEhpdFRlc3Q9ITEsbi4kcmVuZGVyTm9kZT1uZXcgdC5zeXMuQml0bWFwTm9kZSxuLiRCaXRtYXA9ezA6bnVsbCwxOm51bGwsMjowLDM6MCw0OjAsNTowLDY6MCw3OjAsODowLDk6MCwxMDppLmRlZmF1bHRTbW9vdGhpbmcsMTE6MC8wLDEyOjAvMH0sbi4kc2V0Qml0bWFwRGF0YShyKSxufXJldHVybiBfX2V4dGVuZHMoaSxlKSxpLnByb3RvdHlwZS4kb25BZGRUb1N0YWdlPWZ1bmN0aW9uKGkscil7ZS5wcm90b3R5cGUuJG9uQWRkVG9TdGFnZS5jYWxsKHRoaXMsaSxyKTt2YXIgbj10aGlzLiRCaXRtYXBbMF07biYmdC5CaXRtYXBEYXRhLiRhZGREaXNwbGF5T2JqZWN0KHRoaXMsbil9LGkucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZS5jYWxsKHRoaXMpO3ZhciBpPXRoaXMuJEJpdG1hcFswXTtpJiZ0LkJpdG1hcERhdGEuJHJlbW92ZURpc3BsYXlPYmplY3QodGhpcyxpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiYml0bWFwRGF0YVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLiRCaXRtYXBbMF07cmV0dXJuIGUgaW5zdGFuY2VvZiB0LlRleHR1cmU/bnVsbDplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0Qml0bWFwRGF0YSh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJ0ZXh0dXJlXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuJEJpdG1hcFswXTtyZXR1cm4gZSBpbnN0YW5jZW9mIHQuVGV4dHVyZT9lOm51bGx9LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRCaXRtYXBEYXRhKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLiRzZXRCaXRtYXBEYXRhPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuJEJpdG1hcCxyPWlbMF07aWYoZT09cilyZXR1cm4hMTtpZihpWzBdPWUsIWUpcmV0dXJuIHImJnQuQml0bWFwRGF0YS4kcmVtb3ZlRGlzcGxheU9iamVjdCh0aGlzLHIpLHRoaXMuc2V0SW1hZ2VEYXRhKG51bGwsMCwwLDAsMCwwLDAsMCwwLDAsMCksdGhpcy4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKSwhMDtpZih0aGlzLiRyZWZyZXNoSW1hZ2VEYXRhKCksdGhpcy4kc3RhZ2Upe2lmKHIpe3ZhciBuPXZvaWQgMDtuPXIuX2JpdG1hcERhdGEmJnIuX2JpdG1hcERhdGEuaGFzaENvZGU/ci5fYml0bWFwRGF0YS5oYXNoQ29kZTpyLmhhc2hDb2RlO3ZhciBhPXZvaWQgMDtpZihhPWUuX2JpdG1hcERhdGEmJmUuX2JpdG1hcERhdGEuaGFzaENvZGU/ZS5fYml0bWFwRGF0YS5oYXNoQ29kZTplLmhhc2hDb2RlLG49PWEpcmV0dXJuIHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksITA7dC5CaXRtYXBEYXRhLiRyZW1vdmVEaXNwbGF5T2JqZWN0KHRoaXMscil9dC5CaXRtYXBEYXRhLiRhZGREaXNwbGF5T2JqZWN0KHRoaXMsZSl9cmV0dXJuIHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksITB9LGkucHJvdG90eXBlLiRyZWZyZXNoSW1hZ2VEYXRhPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kQml0bWFwLGk9ZVswXTtpZihpKWlmKGkgaW5zdGFuY2VvZiB0LlRleHR1cmUpe3ZhciByPWk7dGhpcy5zZXRJbWFnZURhdGEoci5fYml0bWFwRGF0YSxyLl9iaXRtYXBYLHIuX2JpdG1hcFksci5fYml0bWFwV2lkdGgsci5fYml0bWFwSGVpZ2h0LHIuX29mZnNldFgsci5fb2Zmc2V0WSxyLiRnZXRUZXh0dXJlV2lkdGgoKSxyLiRnZXRUZXh0dXJlSGVpZ2h0KCksci5fc291cmNlV2lkdGgsci5fc291cmNlSGVpZ2h0KX1lbHNle3ZhciBuPWkud2lkdGgsYT1pLmhlaWdodDt0aGlzLnNldEltYWdlRGF0YShpLDAsMCxuLGEsMCwwLG4sYSxuLGEpfX0saS5wcm90b3R5cGUuc2V0SW1hZ2VEYXRhPWZ1bmN0aW9uKHQsZSxpLHIsbixhLG8scyxoLGwsdSl7dmFyIGM9dGhpcy4kQml0bWFwO2NbMV09dCxjWzJdPWUsY1szXT1pLGNbNF09cixjWzVdPW4sY1s2XT1hLGNbN109byxjWzhdPXMsY1s5XT1oLGNbMTNdPWwsY1sxNF09dX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwic2NhbGU5R3JpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2NhbGU5R3JpZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNjYWxlOUdyaWQ9dCx0aGlzLiRpbnZhbGlkYXRlQ29udGVudEJvdW5kcygpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImZpbGxNb2RlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRmaWxsTW9kZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldEZpbGxNb2RlKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLiRzZXRGaWxsTW9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy4kZmlsbE1vZGU/ITE6KHRoaXMuJGZpbGxNb2RlPXQsITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJzbW9vdGhpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kQml0bWFwO3JldHVybiB0WzEwXX0sc2V0OmZ1bmN0aW9uKHQpe3Q9ISF0O3ZhciBlPXRoaXMuJEJpdG1hcDt0IT1lWzEwXSYmKGVbMTBdPXQsdGhpcy4kaW52YWxpZGF0ZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS4kc2V0V2lkdGg9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kQml0bWFwO3JldHVybiAwPnR8fHQ9PWVbMTFdPyExOihlWzExXT10LHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksITApfSxpLnByb3RvdHlwZS4kc2V0SGVpZ2h0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuJEJpdG1hcDtyZXR1cm4gMD50fHx0PT1lWzEyXT8hMTooZVsxMl09dCx0aGlzLiRpbnZhbGlkYXRlQ29udGVudEJvdW5kcygpLCEwKX0saS5wcm90b3R5cGUuJGdldFdpZHRoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kQml0bWFwO3JldHVybiBpc05hTih0WzExXSk/dGhpcy4kZ2V0Q29udGVudEJvdW5kcygpLndpZHRoOnRbMTFdfSxpLnByb3RvdHlwZS4kZ2V0SGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kQml0bWFwO3JldHVybiBpc05hTih0WzEyXSk/dGhpcy4kZ2V0Q29udGVudEJvdW5kcygpLmhlaWdodDp0WzEyXX0saS5wcm90b3R5cGUuJG1lYXN1cmVDb250ZW50Qm91bmRzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuJEJpdG1hcDtpZihlWzFdKXt2YXIgaT10aGlzLiRCaXRtYXAscj1pc05hTihpWzExXSk/aVs4XTppWzExXSxuPWlzTmFOKGlbMTJdKT9pWzldOmlbMTJdO3Quc2V0VG8oMCwwLHIsbil9ZWxzZXt2YXIgcj1pc05hTihlWzExXSk/MDplWzExXSxuPWlzTmFOKGVbMTJdKT8wOmVbMTJdO3Quc2V0VG8oMCwwLHIsbil9fSxpLnByb3RvdHlwZS4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kQml0bWFwO2lmKGVbMV0pe3ZhciBpPWlzTmFOKGVbMTFdKT9lWzhdOmVbMTFdLHI9aXNOYU4oZVsxMl0pP2VbOV06ZVsxMl07dC5zeXMuQml0bWFwTm9kZS4kdXBkYXRlVGV4dHVyZURhdGEodGhpcy4kcmVuZGVyTm9kZSxlWzFdLGVbMl0sZVszXSxlWzRdLGVbNV0sZVs2XSxlWzddLGVbOF0sZVs5XSxpLHIsZVsxM10sZVsxNF0sdGhpcy5zY2FsZTlHcmlkfHxlWzBdLnNjYWxlOUdyaWQsdGhpcy5maWxsTW9kZSxlWzEwXSl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJwaXhlbEhpdFRlc3RcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpeGVsSGl0VGVzdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BpeGVsSGl0VGVzdD0hIXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuJGhpdFRlc3Q9ZnVuY3Rpb24odCxpKXt2YXIgcj1lLnByb3RvdHlwZS4kaGl0VGVzdC5jYWxsKHRoaXMsdCxpKTtyZXR1cm4gciYmdGhpcy5fcGl4ZWxIaXRUZXN0JiYocj10aGlzLmhpdFRlc3RQaXhlbCh0LGkpKSxyfSxpLnByb3RvdHlwZS5oaXRUZXN0UGl4ZWw9ZnVuY3Rpb24oZSxpKXt2YXIgcixuPXRoaXMuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCksYT1uLmEqZStuLmMqaStuLnR4LG89bi5iKmUrbi5kKmkrbi50eSxzPXRoaXMuJGRpc3BsYXlMaXN0O2lmKHMpe3ZhciBoPXMucmVuZGVyQnVmZmVyO3RyeXtyPWguZ2V0UGl4ZWxzKGEtcy5vZmZzZXRYLG8tcy5vZmZzZXRZKX1jYXRjaChsKXt0aHJvdyBjb25zb2xlLmxvZyh0aGlzLiRCaXRtYXBbMF0pLG5ldyBFcnJvcih0LnN5cy50cigxMDM5KSl9fWVsc2V7dmFyIGg9dC5zeXMuY3VzdG9tSGl0VGVzdEJ1ZmZlcjtoLnJlc2l6ZSgzLDMpO3ZhciB1PXRoaXMuJGdldFJlbmRlck5vZGUoKSxjPXQuTWF0cml4LmNyZWF0ZSgpO2MuaWRlbnRpdHkoKSxjLnRyYW5zbGF0ZSgxLWEsMS1vKSx0LnN5cy5zeXN0ZW1SZW5kZXJlci5kcmF3Tm9kZVRvQnVmZmVyKHUsaCxjLCEwKSx0Lk1hdHJpeC5yZWxlYXNlKGMpO3RyeXtyPWguZ2V0UGl4ZWxzKDEsMSl9Y2F0Y2gobCl7dGhyb3cgY29uc29sZS5sb2codGhpcy4kQml0bWFwWzBdKSxuZXcgRXJyb3IodC5zeXMudHIoMTAzOSkpfX1yZXR1cm4gMD09PXJbM10/bnVsbDp0aGlzfSxpLiRkcmF3SW1hZ2U9ZnVuY3Rpb24oZSxpLHIsbixhLG8scyxoLGwsdSxjLHAsZCxmLGcseSwkKXtjb25zb2xlLndhcm4oXCJkZXByZWNhdGVkIG1ldGhvZCA6IEJpdG1hcC4kZHJhd0ltYWdlLHVzZSBlZ3JldC5zeXMuQml0bWFwTm9kZS4kZHJhd0ltYWdlIGluc3RlYWQgb2YgaXRcIiksdC5zeXMuQml0bWFwTm9kZS4kdXBkYXRlVGV4dHVyZURhdGEoZSxpLHIsbixhLG8scyxoLGwsdSxjLHAsZCxmLGcseSwkKX0saX0odC5EaXNwbGF5T2JqZWN0KTtlLmRlZmF1bHRTbW9vdGhpbmc9ITAsdC5CaXRtYXA9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5CaXRtYXBcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuJGdyYXBoaWNzPW5ldyB0LkdyYXBoaWNzLGkuJGdyYXBoaWNzLiRzZXRUYXJnZXQoaSksaX1yZXR1cm4gX19leHRlbmRzKGksZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZ3JhcGhpY3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGdyYXBoaWNzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLiRoaXRUZXN0PWZ1bmN0aW9uKGUsaSl7aWYoIXRoaXMuJHZpc2libGUpcmV0dXJuIG51bGw7dmFyIHI9dGhpcy4kZ2V0SW52ZXJ0ZWRDb25jYXRlbmF0ZWRNYXRyaXgoKSxuPXIuYSplK3IuYyppK3IudHgsYT1yLmIqZStyLmQqaStyLnR5LG89dGhpcy4kc2Nyb2xsUmVjdD90aGlzLiRzY3JvbGxSZWN0OnRoaXMuJG1hc2tSZWN0O2lmKG8mJiFvLmNvbnRhaW5zKG4sYSkpcmV0dXJuIG51bGw7aWYodGhpcy4kbWFzayYmIXRoaXMuJG1hc2suJGhpdFRlc3QoZSxpKSlyZXR1cm4gbnVsbDtmb3IodmFyIHM9dGhpcy4kY2hpbGRyZW4saD0hMSxsPW51bGwsdT1zLmxlbmd0aC0xO3U+PTA7dS0tKXt2YXIgYz1zW3VdO2lmKCFjLiRtYXNrZWRPYmplY3QmJihsPWMuJGhpdFRlc3QoZSxpKSkpe2lmKGg9ITAsbC4kdG91Y2hFbmFibGVkKWJyZWFrO2w9bnVsbH19cmV0dXJuIGw/dGhpcy4kdG91Y2hDaGlsZHJlbj9sOnRoaXM6aD90aGlzOihsPXQuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuJGhpdFRlc3QuY2FsbCh0aGlzLGUsaSksbCYmKGw9dGhpcy4kZ3JhcGhpY3MuJGhpdFRlc3QoZSxpKSksbCl9LGkucHJvdG90eXBlLiRtZWFzdXJlQ29udGVudEJvdW5kcz1mdW5jdGlvbih0KXt0aGlzLiRncmFwaGljcy4kbWVhc3VyZUNvbnRlbnRCb3VuZHModCl9LGkucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZS5jYWxsKHRoaXMpLHRoaXMuJGdyYXBoaWNzJiZ0aGlzLiRncmFwaGljcy4kb25SZW1vdmVGcm9tU3RhZ2UoKX0saX0odC5EaXNwbGF5T2JqZWN0Q29udGFpbmVyKTt0LlNwcml0ZT1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LlNwcml0ZVwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC4kVGV4dHVyZVNjYWxlRmFjdG9yPTE7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSgpe3ZhciB0PWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC5fYml0bWFwWD0wLHQuX2JpdG1hcFk9MCx0Ll9iaXRtYXBXaWR0aD0wLHQuX2JpdG1hcEhlaWdodD0wLHQuX29mZnNldFg9MCx0Ll9vZmZzZXRZPTAsdC5fdGV4dHVyZVdpZHRoPTAsdC5fdGV4dHVyZUhlaWdodD0wLHQuX3NvdXJjZVdpZHRoPTAsdC5fc291cmNlSGVpZ2h0PTAsdC5fYml0bWFwRGF0YT1udWxsLHR9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInRleHR1cmVXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZ2V0VGV4dHVyZVdpZHRoKCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuJGdldFRleHR1cmVXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0dXJlV2lkdGh9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInRleHR1cmVIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGdldFRleHR1cmVIZWlnaHQoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS4kZ2V0VGV4dHVyZUhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0dXJlSGVpZ2h0fSxpLnByb3RvdHlwZS4kZ2V0U2NhbGVCaXRtYXBXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaXRtYXBXaWR0aCp0LiRUZXh0dXJlU2NhbGVGYWN0b3J9LGkucHJvdG90eXBlLiRnZXRTY2FsZUJpdG1hcEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaXRtYXBIZWlnaHQqdC4kVGV4dHVyZVNjYWxlRmFjdG9yfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJiaXRtYXBEYXRhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaXRtYXBEYXRhfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2V0Qml0bWFwRGF0YSh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS5fc2V0Qml0bWFwRGF0YT1mdW5jdGlvbihlKXt0aGlzLl9iaXRtYXBEYXRhPWU7dmFyIGk9dC4kVGV4dHVyZVNjYWxlRmFjdG9yLHI9ZS53aWR0aCppLG49ZS5oZWlnaHQqaTt0aGlzLiRpbml0RGF0YSgwLDAscixuLDAsMCxyLG4sZS53aWR0aCxlLmhlaWdodCl9LGkucHJvdG90eXBlLiRpbml0RGF0YT1mdW5jdGlvbihlLGkscixuLGEsbyxzLGgsbCx1KXt2YXIgYz10LiRUZXh0dXJlU2NhbGVGYWN0b3I7dGhpcy5fYml0bWFwWD1lL2MsdGhpcy5fYml0bWFwWT1pL2MsdGhpcy5fYml0bWFwV2lkdGg9ci9jLHRoaXMuX2JpdG1hcEhlaWdodD1uL2MsdGhpcy5fb2Zmc2V0WD1hLHRoaXMuX29mZnNldFk9byx0aGlzLl90ZXh0dXJlV2lkdGg9cyx0aGlzLl90ZXh0dXJlSGVpZ2h0PWgsdGhpcy5fc291cmNlV2lkdGg9bCx0aGlzLl9zb3VyY2VIZWlnaHQ9dSx0LkJpdG1hcERhdGEuJGludmFsaWRhdGUodGhpcyl9LGkucHJvdG90eXBlLmdldFBpeGVsMzI9ZnVuY3Rpb24odCxlKXt0aHJvdyBuZXcgRXJyb3J9LGkucHJvdG90eXBlLmdldFBpeGVscz1mdW5jdGlvbih0LGUsaSxyKXt0aHJvdyB2b2lkIDA9PT1pJiYoaT0xKSx2b2lkIDA9PT1yJiYocj0xKSxuZXcgRXJyb3J9LGkucHJvdG90eXBlLnRvRGF0YVVSTD1mdW5jdGlvbih0LGUpe3Rocm93IG5ldyBFcnJvcn0saS5wcm90b3R5cGUuc2F2ZVRvRmlsZT1mdW5jdGlvbih0LGUsaSl7dGhyb3cgbmV3IEVycm9yfSxpLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fYml0bWFwRGF0YSYmKHRoaXMuX2JpdG1hcERhdGEuJGRpc3Bvc2UoKSx0aGlzLl9iaXRtYXBEYXRhPW51bGwpfSxpfSh0Lkhhc2hPYmplY3QpO3QuVGV4dHVyZT1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LlRleHR1cmVcIiksdC4kbWFya1JlYWRPbmx5KGUsXCJ0ZXh0dXJlV2lkdGhcIiksdC4kbWFya1JlYWRPbmx5KGUsXCJ0ZXh0dXJlSGVpZ2h0XCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt0LiRsb2NhbGVfc3RyaW5ncz10LiRsb2NhbGVfc3RyaW5nc3x8e30sdC4kbGFuZ3VhZ2U9XCJlbl9VU1wifShlZ3JldHx8KGVncmV0PXt9KSksZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoZSl7Zm9yKHZhciBpPVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKWlbci0xXT1hcmd1bWVudHNbcl07dmFyIG49dC4kbG9jYWxlX3N0cmluZ3NbdC4kbGFuZ3VhZ2VdW2VdO2lmKCFuKXJldHVyblwie1wiK2UrXCJ9XCI7Zm9yKHZhciBhPWkubGVuZ3RoLG89MDthPm87bysrKW49bi5yZXBsYWNlKFwie1wiK28rXCJ9XCIsaVtvXSk7cmV0dXJuIG59ZS50cj1pfShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9W10saT1NYXRoLlBJLzE4MCxyPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG4odCxlKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT0wKTt2YXIgaT1yLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkueD10LGkueT1lLGl9cmV0dXJuIF9fZXh0ZW5kcyhuLHIpLG4ucmVsZWFzZT1mdW5jdGlvbih0KXt0JiZlLnB1c2godCl9LG4uY3JlYXRlPWZ1bmN0aW9uKHQsaSl7dmFyIHI9ZS5wb3AoKTtyZXR1cm4gcnx8KHI9bmV3IG4pLHIuc2V0VG8odCxpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwibGVuZ3RoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS5zZXRUbz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9dCx0aGlzLnk9ZSx0aGlzfSxuLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLngsdGhpcy55KX0sbi5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9PXQueCYmdGhpcy55PT10Lnl9LG4uZGlzdGFuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5zcXJ0KCh0LngtZS54KSoodC54LWUueCkrKHQueS1lLnkpKih0LnktZS55KSl9LG4ucHJvdG90eXBlLmNvcHlGcm9tPWZ1bmN0aW9uKHQpe3RoaXMueD10LngsdGhpcy55PXQueX0sbi5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbih0aGlzLngrdC54LHRoaXMueSt0LnkpfSxuLmludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj0xLWk7cmV0dXJuIG5ldyBuKHQueCppK2UueCpyLHQueSppK2UueSpyKX0sbi5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKHQpe2lmKDAhPXRoaXMueHx8MCE9dGhpcy55KXt2YXIgZT10L3RoaXMubGVuZ3RoO3RoaXMueCo9ZSx0aGlzLnkqPWV9fSxuLnByb3RvdHlwZS5vZmZzZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLngrPXQsdGhpcy55Kz1lfSxuLnBvbGFyPWZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyBuKGUqdC5OdW1iZXJVdGlscy5jb3Moci9pKSxlKnQuTnVtYmVyVXRpbHMuc2luKHIvaSkpfSxuLnByb3RvdHlwZS5zdWJ0cmFjdD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG4odGhpcy54LXQueCx0aGlzLnktdC55KX0sbi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIih4PVwiK3RoaXMueCtcIiwgeT1cIit0aGlzLnkrXCIpXCJ9LG59KHQuSGFzaE9iamVjdCk7dC5Qb2ludD1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LlBvaW50XCIpLHQuJG1hcmtSZWFkT25seShyLFwibGVuZ3RoXCIpLHQuJFRlbXBQb2ludD1uZXcgcn0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKGUpe3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSgpe3RoaXMudHlwZT0wLHRoaXMubmVlZFJlZHJhdz0hMSx0aGlzLnJlbmRlckFscGhhPTEsdGhpcy5yZW5kZXJWaXNpYmxlPSEwLHRoaXMucmVuZGVyTWF0cml4PW5ldyB0Lk1hdHJpeCx0aGlzLnJlbmRlclJlZ2lvbj1uZXcgZS5SZWdpb24sdGhpcy5tb3ZlZD0hMSx0aGlzLmRyYXdEYXRhPVtdLHRoaXMucmVuZGVyQ291bnQ9MH1yZXR1cm4gaS5wcm90b3R5cGUuY2xlYW5CZWZvcmVSZW5kZXI9ZnVuY3Rpb24oKXt0aGlzLmRyYXdEYXRhLmxlbmd0aD0wLHRoaXMucmVuZGVyQ291bnQ9MH0saS5wcm90b3R5cGUuJGdldFJlbmRlckNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyQ291bnR9LGl9KCk7ZS5SZW5kZXJOb2RlPWksX19yZWZsZWN0KGkucHJvdG90eXBlLFwiZWdyZXQuc3lzLlJlbmRlck5vZGVcIil9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy50eXBlPTAsdGhpcy4kY29tbWFuZHM9W10sdGhpcy4kZGF0YT1bXSx0aGlzLmNvbW1hbmRQb3NpdGlvbj0wLHRoaXMuZGF0YVBvc2l0aW9uPTAsdGhpcy4kbGFzdFg9MCx0aGlzLiRsYXN0WT0wfXJldHVybiB0LnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24odCxlKXt0aGlzLiRjb21tYW5kc1t0aGlzLmNvbW1hbmRQb3NpdGlvbisrXT0xO3ZhciBpPXRoaXMuZGF0YVBvc2l0aW9uO3RoaXMuJGRhdGFbaSsrXT10LHRoaXMuJGRhdGFbaSsrXT1lLHRoaXMuZGF0YVBvc2l0aW9uPWl9LHQucHJvdG90eXBlLmxpbmVUbz1mdW5jdGlvbih0LGUpe3RoaXMuJGNvbW1hbmRzW3RoaXMuY29tbWFuZFBvc2l0aW9uKytdPTI7dmFyIGk9dGhpcy5kYXRhUG9zaXRpb247dGhpcy4kZGF0YVtpKytdPXQsdGhpcy4kZGF0YVtpKytdPWUsdGhpcy5kYXRhUG9zaXRpb249aX0sdC5wcm90b3R5cGUuY3VydmVUbz1mdW5jdGlvbih0LGUsaSxyKXt0aGlzLiRjb21tYW5kc1t0aGlzLmNvbW1hbmRQb3NpdGlvbisrXT0zO3ZhciBuPXRoaXMuZGF0YVBvc2l0aW9uO3RoaXMuJGRhdGFbbisrXT10LHRoaXMuJGRhdGFbbisrXT1lLHRoaXMuJGRhdGFbbisrXT1pLHRoaXMuJGRhdGFbbisrXT1yLHRoaXMuZGF0YVBvc2l0aW9uPW59LHQucHJvdG90eXBlLmN1YmljQ3VydmVUbz1mdW5jdGlvbih0LGUsaSxyLG4sYSl7dGhpcy4kY29tbWFuZHNbdGhpcy5jb21tYW5kUG9zaXRpb24rK109NDt2YXIgbz10aGlzLmRhdGFQb3NpdGlvbjt0aGlzLiRkYXRhW28rK109dCx0aGlzLiRkYXRhW28rK109ZSx0aGlzLiRkYXRhW28rK109aSx0aGlzLiRkYXRhW28rK109cix0aGlzLiRkYXRhW28rK109bix0aGlzLiRkYXRhW28rK109YSx0aGlzLmRhdGFQb3NpdGlvbj1vfSx0LnByb3RvdHlwZS5kcmF3UmVjdD1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbj10K2ksYT1lK3I7dGhpcy5tb3ZlVG8odCxlKSx0aGlzLmxpbmVUbyhuLGUpLHRoaXMubGluZVRvKG4sYSksdGhpcy5saW5lVG8odCxhKSx0aGlzLmxpbmVUbyh0LGUpfSx0LnByb3RvdHlwZS5kcmF3Um91bmRSZWN0PWZ1bmN0aW9uKHQsZSxpLHIsbixhKXt2YXIgbz0uNSpufDAscz1hPy41KmF8MDpvO2lmKCFvfHwhcylyZXR1cm4gdm9pZCB0aGlzLmRyYXdSZWN0KHQsZSxpLHIpO3ZhciBoPS41KmksbD0uNSpyO2lmKG8+aCYmKG89aCkscz5sJiYocz1sKSxoPT09byYmbD09PXMpcmV0dXJuIHZvaWQobz09PXM/dGhpcy5kcmF3Q2lyY2xlKHQrbyxlK3Msbyk6dGhpcy5kcmF3RWxsaXBzZSh0LGUsMipvLDIqcykpO3ZhciB1PXQraSxjPWUrcixwPXQrbyxkPXUtbyxmPWUrcyxnPWMtczt0aGlzLm1vdmVUbyh1LGcpLHRoaXMuY3VydmVUbyh1LGMsZCxjKSx0aGlzLmxpbmVUbyhwLGMpLHRoaXMuY3VydmVUbyh0LGMsdCxnKSx0aGlzLmxpbmVUbyh0LGYpLHRoaXMuY3VydmVUbyh0LGUscCxlKSx0aGlzLmxpbmVUbyhkLGUpLHRoaXMuY3VydmVUbyh1LGUsdSxmKSx0aGlzLmxpbmVUbyh1LGcpfSx0LnByb3RvdHlwZS5kcmF3Q2lyY2xlPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLmFyY1RvQmV6aWVyKHQsZSxpLGksMCwyKk1hdGguUEkpfSx0LnByb3RvdHlwZS5kcmF3RWxsaXBzZT1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbj0uNSppLGE9LjUqcjt0Kz1uLGUrPWEsdGhpcy5hcmNUb0Jlemllcih0LGUsbixhLDAsMipNYXRoLlBJKX0sdC5wcm90b3R5cGUuZHJhd0FyYz1mdW5jdGlvbih0LGUsaSxyLG4sYSl7YT9uPj1yJiYobi09MipNYXRoLlBJKTpyPj1uJiYobis9MipNYXRoLlBJKSx0aGlzLmFyY1RvQmV6aWVyKHQsZSxpLGkscixuLGEpfSx0LnByb3RvdHlwZS5hcmNUb0Jlemllcj1mdW5jdGlvbih0LGUsaSxyLG4sYSxvKXt2YXIgcz0uNSpNYXRoLlBJLGg9bixsPWg7bz8obCs9LXMtaCVzLGE+bCYmKGw9YSkpOihsKz1zLWglcyxsPmEmJihsPWEpKTt2YXIgdT10K01hdGguY29zKGgpKmksYz1lK01hdGguc2luKGgpKnI7KHRoaXMuJGxhc3RYIT11fHx0aGlzLiRsYXN0WSE9YykmJnRoaXMubW92ZVRvKHUsYyk7Zm9yKHZhciBwPU1hdGguY29zKGgpLGQ9TWF0aC5zaW4oaCksZj0wOzQ+ZjtmKyspe3ZhciBnPWwtaCx5PTQqTWF0aC50YW4oZy80KS8zLCQ9dS1kKnkqaSx2PWMrcCp5KnI7cD1NYXRoLmNvcyhsKSxkPU1hdGguc2luKGwpLHU9dCtwKmksYz1lK2Qqcjt2YXIgbT11K2QqeSppLGI9Yy1wKnkqcjtpZih0aGlzLmN1YmljQ3VydmVUbygkLHYsbSxiLHUsYyksbD09PWEpYnJlYWs7aD1sLG8/KGw9aC1zLGE+bCYmKGw9YSkpOihsPWgrcyxsPmEmJihsPWEpKX19LHR9KCk7dC5QYXRoMkQ9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5zeXMuUGF0aDJEXCIpfShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIHQuX192OF9fPXZvaWQgMCxkZWxldGUgdC5fX3Y4X18sdH10LmNyZWF0ZU1hcD1lfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxyLG4sYSxvLHMsaCl7dm9pZCAwPT09ZSYmKGU9MTY3MTE2ODApLHZvaWQgMD09PWkmJihpPTEpLHZvaWQgMD09PXImJihyPTYpLHZvaWQgMD09PW4mJihuPTYpLHZvaWQgMD09PWEmJihhPTIpLHZvaWQgMD09PW8mJihvPTEpLHZvaWQgMD09PXMmJihzPSExKSx2b2lkIDA9PT1oJiYoaD0hMSk7dmFyIGw9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBsLnR5cGU9XCJnbG93XCIsbC4kY29sb3I9ZSxsLiRibHVlPTI1NSZlLGwuJGdyZWVuPSg2NTI4MCZlKT4+OCxsLiRyZWQ9ZT4+MTYsbC4kYWxwaGE9aSxsLiRibHVyWD1yLGwuJGJsdXJZPW4sbC4kc3RyZW5ndGg9YSxsLiRxdWFsaXR5PW8sbC4kaW5uZXI9cyxsLiRrbm9ja291dD1oLGx9cmV0dXJuIF9fZXh0ZW5kcyhlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRjb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJGNvbG9yIT10JiYodGhpcy4kY29sb3I9dCx0aGlzLiRibHVlPTI1NSZ0LHRoaXMuJGdyZWVuPSg2NTI4MCZ0KT4+OCx0aGlzLiRyZWQ9dD4+MTYsdGhpcy5pbnZhbGlkYXRlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFscGhhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRhbHBoYX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJGFscGhhIT10JiYodGhpcy4kYWxwaGE9dCx0aGlzLmludmFsaWRhdGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmx1clhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGJsdXJYfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kYmx1clghPXQmJih0aGlzLiRibHVyWD10LHRoaXMuaW52YWxpZGF0ZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJibHVyWVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYmx1cll9LHNldDpmdW5jdGlvbih0KXt0aGlzLiRibHVyWSE9dCYmKHRoaXMuJGJsdXJZPXQsdGhpcy5pbnZhbGlkYXRlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN0cmVuZ3RoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRzdHJlbmd0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHN0cmVuZ3RoIT10JiYodGhpcy4kc3RyZW5ndGg9dCx0aGlzLmludmFsaWRhdGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicXVhbGl0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcXVhbGl0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHF1YWxpdHkhPXQmJih0aGlzLiRxdWFsaXR5PXQsdGhpcy5pbnZhbGlkYXRlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlubmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRpbm5lcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJGlubmVyIT10JiYodGhpcy4kaW5uZXI9dCx0aGlzLmludmFsaWRhdGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwia25vY2tvdXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGtub2Nrb3V0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4ka25vY2tvdXQhPXQmJih0aGlzLiRrbm9ja291dD10LHRoaXMuaW52YWxpZGF0ZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS4kdG9Kc29uPWZ1bmN0aW9uKCl7cmV0dXJuJ3tcImNvbG9yXCI6ICcrdGhpcy4kY29sb3IrJywgXCJyZWRcIjogJyt0aGlzLiRyZWQrJywgXCJncmVlblwiOiAnK3RoaXMuJGdyZWVuKycsIFwiYmx1ZVwiOiAnK3RoaXMuJGJsdWUrJywgXCJhbHBoYVwiOiAnK3RoaXMuJGFscGhhKycsIFwiYmx1clhcIjogJyt0aGlzLiRibHVyWCsnLCBcImJsdXJZXCI6ICcrdGhpcy5ibHVyWSsnLCBcInN0cmVuZ3RoXCI6ICcrdGhpcy4kc3RyZW5ndGgrJywgXCJxdWFsaXR5XCI6ICcrdGhpcy4kcXVhbGl0eSsnLCBcImlubmVyXCI6ICcrdGhpcy4kaW5uZXIrJywgXCJrbm9ja291dFwiOiAnK3RoaXMuJGtub2Nrb3V0K1wifVwifSxlfSh0LkZpbHRlcik7dC5HbG93RmlsdGVyPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuR2xvd0ZpbHRlclwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC5DYXBzU3R5bGU9e05PTkU6XCJub25lXCIsUk9VTkQ6XCJyb3VuZFwiLFNRVUFSRTpcInNxdWFyZVwifX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC5EaXJ0eVJlZ2lvblBvbGljeT17T0ZGOlwib2ZmXCIsT046XCJvblwifX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmNvbXBpbGVQcm9ncmFtPWZ1bmN0aW9uKGkscixuKXt2YXIgYT1lLmNvbXBpbGVGcmFnbWVudFNoYWRlcihpLG4pLG89ZS5jb21waWxlVmVydGV4U2hhZGVyKGkscikscz1pLmNyZWF0ZVByb2dyYW0oKTtyZXR1cm4gaS5hdHRhY2hTaGFkZXIocyxvKSxpLmF0dGFjaFNoYWRlcihzLGEpLGkubGlua1Byb2dyYW0ocyksaS5nZXRQcm9ncmFtUGFyYW1ldGVyKHMsaS5MSU5LX1NUQVRVUyl8fHQuJHdhcm4oMTAyMCksc30sZS5jb21waWxlRnJhZ21lbnRTaGFkZXI9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5fY29tcGlsZVNoYWRlcih0LGksdC5GUkFHTUVOVF9TSEFERVIpfSxlLmNvbXBpbGVWZXJ0ZXhTaGFkZXI9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5fY29tcGlsZVNoYWRlcih0LGksdC5WRVJURVhfU0hBREVSKX0sZS5fY29tcGlsZVNoYWRlcj1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dC5jcmVhdGVTaGFkZXIoaSk7cmV0dXJuIHQuc2hhZGVyU291cmNlKHIsZSksdC5jb21waWxlU2hhZGVyKHIpLHQuZ2V0U2hhZGVyUGFyYW1ldGVyKHIsdC5DT01QSUxFX1NUQVRVUyk/cjpudWxsfSxlLmNoZWNrQ2FuVXNlV2ViR0w9ZnVuY3Rpb24oKXtpZih2b2lkIDA9PWUuY2FuVXNlV2ViR0wpdHJ5e3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7ZS5jYW5Vc2VXZWJHTD0hKCF3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0fHwhdC5nZXRDb250ZXh0KFwid2ViZ2xcIikmJiF0LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIikpfWNhdGNoKGkpe2UuY2FuVXNlV2ViR0w9ITF9cmV0dXJuIGUuY2FuVXNlV2ViR0x9LGUuZGVsZXRlV2ViR0xUZXh0dXJlPWZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBlPXQuZ2xDb250ZXh0O2UmJmUuZGVsZXRlVGV4dHVyZSh0KX19LGV9KCk7dC5XZWJHTFV0aWxzPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuV2ViR0xVdGlsc1wiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkscil7cmV0dXJuIHZvaWQgMD09PWkmJihpPSExKSx2b2lkIDA9PT1yJiYocj0hMSksdC5jYWxsKHRoaXMsZSxpLHIpfHx0aGlzfXJldHVybiBfX2V4dGVuZHMoZSx0KSxlfSh0LkV2ZW50KTtlLkZPQ1VTX0lOPVwiZm9jdXNJblwiLGUuRk9DVVNfT1VUPVwiZm9jdXNPdXRcIix0LkZvY3VzRXZlbnQ9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5Gb2N1c0V2ZW50XCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBfX2V4dGVuZHMoZSx0KSxlfSh0LkV2ZW50KTtlLlBFUk1JU1NJT05fREVOSUVEPVwicGVybWlzc2lvbkRlbmllZFwiLGUuVU5BVkFJTEFCTEU9XCJ1bmF2YWlsYWJsZVwiLHQuR2VvbG9jYXRpb25FdmVudD1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0Lkdlb2xvY2F0aW9uRXZlbnRcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCxpLHIpe3ZvaWQgMD09PWkmJihpPSExKSx2b2lkIDA9PT1yJiYocj0hMSk7dmFyIG49ZS5jYWxsKHRoaXMsdCxpLHIpfHx0aGlzO3JldHVybiBuLl9zdGF0dXM9MCxufXJldHVybiBfX2V4dGVuZHMoaSxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJzdGF0dXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLmRpc3BhdGNoSFRUUFN0YXR1c0V2ZW50PWZ1bmN0aW9uKGUscil7dmFyIG49dC5FdmVudC5jcmVhdGUoaSxpLkhUVFBfU1RBVFVTKTtuLl9zdGF0dXM9cjt2YXIgYT1lLmRpc3BhdGNoRXZlbnQobik7cmV0dXJuIHQuRXZlbnQucmVsZWFzZShuKSxhfSxpfSh0LkV2ZW50KTtlLkhUVFBfU1RBVFVTPVwiaHR0cFN0YXR1c1wiLHQuSFRUUFN0YXR1c0V2ZW50PWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuSFRUUFN0YXR1c0V2ZW50XCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQsaSxyKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9ITEpLHZvaWQgMD09PXImJihyPSExKSxlLmNhbGwodGhpcyx0LGkscil8fHRoaXN9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLGkuZGlzcGF0Y2hJT0Vycm9yRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHI9dC5FdmVudC5jcmVhdGUoaSxpLklPX0VSUk9SKSxuPWUuZGlzcGF0Y2hFdmVudChyKTtyZXR1cm4gdC5FdmVudC5yZWxlYXNlKHIpLG59LGl9KHQuRXZlbnQpO2UuSU9fRVJST1I9XCJpb0Vycm9yXCIsdC5JT0Vycm9yRXZlbnQ9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5JT0Vycm9yRXZlbnRcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIF9fZXh0ZW5kcyhlLHQpLGV9KHQuRXZlbnQpO3QuTW90aW9uRXZlbnQ9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5Nb3Rpb25FdmVudFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gX19leHRlbmRzKGUsdCksZX0odC5FdmVudCk7dC5PcmllbnRhdGlvbkV2ZW50PWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuT3JpZW50YXRpb25FdmVudFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGkscixuLGEpe3ZvaWQgMD09PWkmJihpPSExKSx2b2lkIDA9PT1yJiYocj0hMSksdm9pZCAwPT09biYmKG49MCksdm9pZCAwPT09YSYmKGE9MCk7dmFyIG89ZS5jYWxsKHRoaXMsdCxpLHIpfHx0aGlzO3JldHVybiBvLmJ5dGVzTG9hZGVkPTAsby5ieXRlc1RvdGFsPTAsby5ieXRlc0xvYWRlZD1uLG8uYnl0ZXNUb3RhbD1hLG99cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLGkuZGlzcGF0Y2hQcm9ncmVzc0V2ZW50PWZ1bmN0aW9uKGUscixuLGEpe3ZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PWEmJihhPTApO3ZhciBvPXQuRXZlbnQuY3JlYXRlKGkscik7by5ieXRlc0xvYWRlZD1uLG8uYnl0ZXNUb3RhbD1hO3ZhciBzPWUuZGlzcGF0Y2hFdmVudChvKTtyZXR1cm4gdC5FdmVudC5yZWxlYXNlKG8pLHN9LGl9KHQuRXZlbnQpO2UuUFJPR1JFU1M9XCJwcm9ncmVzc1wiLGUuU09DS0VUX0RBVEE9XCJzb2NrZXREYXRhXCIsdC5Qcm9ncmVzc0V2ZW50PWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuUHJvZ3Jlc3NFdmVudFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGkscil7cmV0dXJuIHZvaWQgMD09PWkmJihpPSExKSx2b2lkIDA9PT1yJiYocj0hMSksZS5jYWxsKHRoaXMsdCxpLHIpfHx0aGlzfXJldHVybiBfX2V4dGVuZHMoaSxlKSxpLmRpc3BhdGNoU3RhZ2VPcmllbnRhdGlvbkV2ZW50PWZ1bmN0aW9uKGUscil7dmFyIG49dC5FdmVudC5jcmVhdGUoaSxyKSxhPWUuZGlzcGF0Y2hFdmVudChuKTtyZXR1cm4gdC5FdmVudC5yZWxlYXNlKG4pLGF9LGl9KHQuRXZlbnQpO2UuT1JJRU5UQVRJT05fQ0hBTkdFPVwib3JpZW50YXRpb25DaGFuZ2VcIix0LlN0YWdlT3JpZW50YXRpb25FdmVudD1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LlN0YWdlT3JpZW50YXRpb25FdmVudFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGkscixuKXt2b2lkIDA9PT1pJiYoaT0hMSksdm9pZCAwPT09ciYmKHI9ITEpLHZvaWQgMD09PW4mJihuPVwiXCIpO3ZhciBhPWUuY2FsbCh0aGlzLHQsaSxyKXx8dGhpcztyZXR1cm4gYS50ZXh0PW4sYX1yZXR1cm4gX19leHRlbmRzKGksZSksaS5kaXNwYXRjaFRleHRFdmVudD1mdW5jdGlvbihlLHIsbil7dmFyIGE9dC5FdmVudC5jcmVhdGUoaSxyKTthLnRleHQ9bjt2YXIgbz1lLmRpc3BhdGNoRXZlbnQoYSk7cmV0dXJuIHQuRXZlbnQucmVsZWFzZShhKSxvfSxpfSh0LkV2ZW50KTtlLkxJTks9XCJsaW5rXCIsdC5UZXh0RXZlbnQ9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5UZXh0RXZlbnRcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCxpLHIpe3JldHVybiBlLmNhbGwodGhpcyx0LGkscil8fHRoaXN9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLGkucHJvdG90eXBlLnVwZGF0ZUFmdGVyRXZlbnQ9ZnVuY3Rpb24oKXt0LnN5cy4kcmVxdWVzdFJlbmRlcmluZ0ZsYWc9ITB9LGkuZGlzcGF0Y2hUaW1lckV2ZW50PWZ1bmN0aW9uKGUscixuLGEpe3ZhciBvPXQuRXZlbnQuY3JlYXRlKGkscixuLGEpLHM9ZS5kaXNwYXRjaEV2ZW50KG8pO3JldHVybiB0LkV2ZW50LnJlbGVhc2Uobyksc30saX0odC5FdmVudCk7ZS5USU1FUj1cInRpbWVyXCIsZS5USU1FUl9DT01QTEVURT1cInRpbWVyQ29tcGxldGVcIix0LlRpbWVyRXZlbnQ9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5UaW1lckV2ZW50XCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5mb3JtYXQ9XCJpbWFnZVwiLGkuJGRlbGV0ZVNvdXJjZT0hMCxpLnNvdXJjZT10LGkud2lkdGg9dC53aWR0aCxpLmhlaWdodD10LmhlaWdodCxpfXJldHVybiBfX2V4dGVuZHMoaSxlKSxpLnByb3RvdHlwZS4kZGlzcG9zZT1mdW5jdGlvbigpe3QuQ2FwYWJpbGl0aWVzLnJ1bnRpbWVUeXBlPT10LlJ1bnRpbWVUeXBlLldFQiYmXCJ3ZWJnbFwiPT10LkNhcGFiaWxpdGllcy5yZW5kZXJNb2RlJiZ0aGlzLndlYkdMVGV4dHVyZSYmKHQuV2ViR0xVdGlscy5kZWxldGVXZWJHTFRleHR1cmUodGhpcy53ZWJHTFRleHR1cmUpLHRoaXMud2ViR0xUZXh0dXJlPW51bGwpLHRoaXMuc291cmNlJiZ0aGlzLnNvdXJjZS5kaXNwb3NlJiZ0aGlzLnNvdXJjZS5kaXNwb3NlKCksdGhpcy5zb3VyY2U9bnVsbCxpLiRkaXNwb3NlKHRoaXMpfSxpLiRhZGREaXNwbGF5T2JqZWN0PWZ1bmN0aW9uKHQsZSl7dmFyIHI7aWYocj1lLl9iaXRtYXBEYXRhJiZlLl9iaXRtYXBEYXRhLmhhc2hDb2RlP2UuX2JpdG1hcERhdGEuaGFzaENvZGU6ZS5oYXNoQ29kZSl7aWYoIWkuX2Rpc3BsYXlMaXN0W3JdKXJldHVybiB2b2lkKGkuX2Rpc3BsYXlMaXN0W3JdPVt0XSk7dmFyIG49aS5fZGlzcGxheUxpc3Rbcl07bi5pbmRleE9mKHQpPDAmJm4ucHVzaCh0KX19LGkuJHJlbW92ZURpc3BsYXlPYmplY3Q9ZnVuY3Rpb24odCxlKXt2YXIgcjtpZihyPWUuX2JpdG1hcERhdGEmJmUuX2JpdG1hcERhdGEuaGFzaENvZGU/ZS5fYml0bWFwRGF0YS5oYXNoQ29kZTplLmhhc2hDb2RlLHImJmkuX2Rpc3BsYXlMaXN0W3JdKXt2YXIgbj1pLl9kaXNwbGF5TGlzdFtyXSxhPW4uaW5kZXhPZih0KTthPj0wJiZuLnNwbGljZShhKX19LGkuJGludmFsaWRhdGU9ZnVuY3Rpb24oZSl7dmFyIHI7aWYocj1lLl9iaXRtYXBEYXRhJiZlLl9iaXRtYXBEYXRhLmhhc2hDb2RlP2UuX2JpdG1hcERhdGEuaGFzaENvZGU6ZS5oYXNoQ29kZSxyJiZpLl9kaXNwbGF5TGlzdFtyXSlmb3IodmFyIG49aS5fZGlzcGxheUxpc3Rbcl0sYT0wO2E8bi5sZW5ndGg7YSsrKW5bYV1pbnN0YW5jZW9mIHQuQml0bWFwJiZuW2FdLiRyZWZyZXNoSW1hZ2VEYXRhKCksblthXS4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKX0saS4kZGlzcG9zZT1mdW5jdGlvbihlKXt2YXIgcjtpZihyPWUuX2JpdG1hcERhdGEmJmUuX2JpdG1hcERhdGEuaGFzaENvZGU/ZS5fYml0bWFwRGF0YS5oYXNoQ29kZTplLmhhc2hDb2RlLHImJmkuX2Rpc3BsYXlMaXN0W3JdKXtmb3IodmFyIG49aS5fZGlzcGxheUxpc3Rbcl0sYT0wO2E8bi5sZW5ndGg7YSsrKW5bYV1pbnN0YW5jZW9mIHQuQml0bWFwJiYoblthXS4kQml0bWFwWzFdPW51bGwpLG5bYV0uJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCk7ZGVsZXRlIGkuX2Rpc3BsYXlMaXN0W3JdfX0saX0odC5IYXNoT2JqZWN0KTtlLl9kaXNwbGF5TGlzdD10LmNyZWF0ZU1hcCgpLHQuQml0bWFwRGF0YT1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LkJpdG1hcERhdGFcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB0LlBvaW50LGk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gcih0LGUscixuLGEsbyl7dmFyIHM9aS5jYWxsKHRoaXMsdCxlLHIpfHx0aGlzO3JldHVybiBzLnRhcmdldENoYW5nZWQ9ITAscy50b3VjaERvd249ITEscy4kaW5pdFRvKG4sYSxvKSxzfXJldHVybiBfX2V4dGVuZHMocixpKSxyLnByb3RvdHlwZS4kaW5pdFRvPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLnRvdWNoUG9pbnRJRD0raXx8MCx0aGlzLiRzdGFnZVg9K3R8fDAsdGhpcy4kc3RhZ2VZPStlfHwwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJzdGFnZVhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHN0YWdlWH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJzdGFnZVlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHN0YWdlWX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJsb2NhbFhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFyZ2V0Q2hhbmdlZCYmdGhpcy5nZXRMb2NhbFhZKCksdGhpcy5fbG9jYWxYfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImxvY2FsWVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YXJnZXRDaGFuZ2VkJiZ0aGlzLmdldExvY2FsWFkoKSx0aGlzLl9sb2NhbFl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuZ2V0TG9jYWxYWT1mdW5jdGlvbigpe3RoaXMudGFyZ2V0Q2hhbmdlZD0hMTt2YXIgdD10aGlzLiR0YXJnZXQuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCk7dC50cmFuc2Zvcm1Qb2ludCh0aGlzLiRzdGFnZVgsdGhpcy4kc3RhZ2VZLGUpLHRoaXMuX2xvY2FsWD1lLngsdGhpcy5fbG9jYWxZPWUueX0sci5wcm90b3R5cGUuJHNldFRhcmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy4kdGFyZ2V0PXQsdGhpcy50YXJnZXRDaGFuZ2VkPSEhdCwhMH0sci5wcm90b3R5cGUudXBkYXRlQWZ0ZXJFdmVudD1mdW5jdGlvbigpe3Quc3lzLiRyZXF1ZXN0UmVuZGVyaW5nRmxhZz0hMH0sci5kaXNwYXRjaFRvdWNoRXZlbnQ9ZnVuY3Rpb24oZSxpLG4sYSxvLHMsaCxsKXtpZih2b2lkIDA9PT1sJiYobD0hMSksIW4mJiFlLmhhc0V2ZW50TGlzdGVuZXIoaSkpcmV0dXJuITA7dmFyIHU9dC5FdmVudC5jcmVhdGUocixpLG4sYSk7dS4kaW5pdFRvKG8scyxoKSx1LnRvdWNoRG93bj1sO3ZhciBjPWUuZGlzcGF0Y2hFdmVudCh1KTtyZXR1cm4gdC5FdmVudC5yZWxlYXNlKHUpLGN9LHJ9KHQuRXZlbnQpO2kuVE9VQ0hfTU9WRT1cInRvdWNoTW92ZVwiLGkuVE9VQ0hfQkVHSU49XCJ0b3VjaEJlZ2luXCIsaS5UT1VDSF9FTkQ9XCJ0b3VjaEVuZFwiLGkuVE9VQ0hfQ0FOQ0VMPVwidG91Y2hjYW5jZWxcIixpLlRPVUNIX1RBUD1cInRvdWNoVGFwXCIsaS5UT1VDSF9SRUxFQVNFX09VVFNJREU9XCJ0b3VjaFJlbGVhc2VPdXRzaWRlXCIsaS5UT1VDSF9ST0xMX09VVD1cInRvdWNoUm9sbE91dFwiLGkuVE9VQ0hfUk9MTF9PVkVSPVwidG91Y2hSb2xsT3ZlclwiLHQuVG91Y2hFdmVudD1pLF9fcmVmbGVjdChpLnByb3RvdHlwZSxcImVncmV0LlRvdWNoRXZlbnRcIiksdC4kbWFya1JlYWRPbmx5KGksXCJzdGFnZVhcIiksdC4kbWFya1JlYWRPbmx5KGksXCJzdGFnZVlcIiksdC4kbWFya1JlYWRPbmx5KGksXCJsb2NhbFhcIiksdC4kbWFya1JlYWRPbmx5KGksXCJsb2NhbFlcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe30oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkscil7dm9pZCAwPT09ZSYmKGU9NCksdm9pZCAwPT09aSYmKGk9NCksdm9pZCAwPT09ciYmKHI9MSk7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnR5cGU9XCJibHVyXCIsbi4kYmx1clg9ZSxuLiRibHVyWT1pLG4uJHF1YWxpdHk9cixufXJldHVybiBfX2V4dGVuZHMoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJibHVyWFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYmx1clh9LHNldDpmdW5jdGlvbih0KXt0aGlzLiRibHVyWCE9dCYmKHRoaXMuJGJsdXJYPXQsdGhpcy5pbnZhbGlkYXRlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJsdXJZXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRibHVyWX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJGJsdXJZIT10JiYodGhpcy4kYmx1clk9dCx0aGlzLmludmFsaWRhdGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuJHRvSnNvbj1mdW5jdGlvbigpe3JldHVybid7XCJibHVyWFwiOiAnK3RoaXMuJGJsdXJYKycsIFwiYmx1cllcIjogJyt0aGlzLiRibHVyWSsnLCBcInF1YWxpdHlcIjogMX0nfSxlfSh0LkZpbHRlcik7dC5CbHVyRmlsdGVyPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuQmx1ckZpbHRlclwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2b2lkIDA9PT1lJiYoZT1udWxsKTt2YXIgaT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuJG1hdHJpeD1bXSxpLm1hdHJpeDI9W10saS50eXBlPVwiY29sb3JUcmFuc2Zvcm1cIixpLnNldE1hdHJpeChlKSxpfXJldHVybiBfX2V4dGVuZHMoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYXRyaXhcIix7Z2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7MjA+dDt0KyspdGhpcy5tYXRyaXgyW3RdPXRoaXMuJG1hdHJpeFt0XTtyZXR1cm4gdGhpcy5tYXRyaXgyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5zZXRNYXRyaXgodCksdGhpcy5pbnZhbGlkYXRlKCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuc2V0TWF0cml4PWZ1bmN0aW9uKHQpe2lmKHQpZm9yKHZhciBlPTA7MjA+ZTtlKyspdGhpcy4kbWF0cml4W2VdPXRbZV07ZWxzZSBmb3IodmFyIGU9MDsyMD5lO2UrKyl0aGlzLiRtYXRyaXhbZV09MD09ZXx8Nj09ZXx8MTI9PWV8fDE4PT1lPzE6MH0sZS5wcm90b3R5cGUuJHRvSnNvbj1mdW5jdGlvbigpe3JldHVybid7XCJtYXRyaXhcIjogWycrdGhpcy4kbWF0cml4LnRvU3RyaW5nKCkrXCJdfVwifSxlfSh0LkZpbHRlcik7dC5Db2xvck1hdHJpeEZpbHRlcj1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LkNvbG9yTWF0cml4RmlsdGVyXCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxyLG4sYSxvLHMsaCxsLHUsYyl7dm9pZCAwPT09ZSYmKGU9NCksdm9pZCAwPT09aSYmKGk9NDUpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW4mJihuPTEpLHZvaWQgMD09PWEmJihhPTQpLHZvaWQgMD09PW8mJihvPTQpLHZvaWQgMD09PXMmJihzPTEpLHZvaWQgMD09PWgmJihoPTEpLHZvaWQgMD09PWwmJihsPSExKSx2b2lkIDA9PT11JiYodT0hMSksdm9pZCAwPT09YyYmKGM9ITEpO3ZhciBwPXQuY2FsbCh0aGlzLHIsbixhLG8scyxoLGwsdSl8fHRoaXM7cmV0dXJuIHAuJGRpc3RhbmNlPWUscC4kYW5nbGU9aSxwLiRoaWRlT2JqZWN0PWMscH1yZXR1cm4gX19leHRlbmRzKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGlzdGFuY2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGRpc3RhbmNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kZGlzdGFuY2UhPXQmJih0aGlzLiRkaXN0YW5jZT10LHRoaXMuaW52YWxpZGF0ZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhbmdsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYW5nbGVcbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJGFuZ2xlIT10JiYodGhpcy4kYW5nbGU9dCx0aGlzLmludmFsaWRhdGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGlkZU9iamVjdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGlkZU9iamVjdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJGhpZGVPYmplY3QhPXQmJih0aGlzLiRoaWRlT2JqZWN0PXQsdGhpcy5pbnZhbGlkYXRlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLiR0b0pzb249ZnVuY3Rpb24oKXtyZXR1cm4ne1wiZGlzdGFuY2VcIjogJyt0aGlzLiRkaXN0YW5jZSsnLCBcImFuZ2xlXCI6ICcrdGhpcy4kYW5nbGUrJywgXCJjb2xvclwiOiAnK3RoaXMuJGNvbG9yKycsIFwicmVkXCI6ICcrdGhpcy4kcmVkKycsIFwiZ3JlZW5cIjogJyt0aGlzLiRncmVlbisnLCBcImJsdWVcIjogJyt0aGlzLiRibHVlKycsIFwiYWxwaGFcIjogJyt0aGlzLiRhbHBoYSsnLCBcImJsdXJYXCI6ICcrdGhpcy4kYmx1clgrJywgXCJibHVyWVwiOiAnK3RoaXMuYmx1clkrJywgXCJzdHJlbmd0aFwiOiAnK3RoaXMuJHN0cmVuZ3RoKycsIFwicXVhbGl0eVwiOiAnK3RoaXMuJHF1YWxpdHkrJywgXCJpbm5lclwiOiAnK3RoaXMuJGlubmVyKycsIFwia25vY2tvdXRcIjogJyt0aGlzLiRrbm9ja291dCsnLCBcImhpZGVPYmplY3RcIjogJyt0aGlzLiRoaWRlT2JqZWN0K1wifVwifSxlfSh0Lkdsb3dGaWx0ZXIpO3QuRHJvcFNoYWRvd0ZpbHRlcj1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LkRyb3BTaGFkb3dGaWx0ZXJcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtlLkxJTkVBUj1cImxpbmVhclwiLGUuUkFESUFMPVwicmFkaWFsXCIsdC5HcmFkaWVudFR5cGU9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5HcmFkaWVudFR5cGVcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHQlPTIqTWF0aC5QSSwwPnQmJih0Kz0yKk1hdGguUEkpLHR9dmFyIGk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gcigpe3ZhciBlPWkuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5sYXN0WD0wLGUubGFzdFk9MCxlLmZpbGxQYXRoPW51bGwsZS5zdHJva2VQYXRoPW51bGwsZS50b3BMZWZ0U3Ryb2tlV2lkdGg9MCxlLmJvdHRvbVJpZ2h0U3Ryb2tlV2lkdGg9MCxlLm1pblg9MS8wLGUubWluWT0xLzAsZS5tYXhYPS0oMS8wKSxlLm1heFk9LSgxLzApLGUuaW5jbHVkZUxhc3RQb3NpdGlvbj0hMCxlLiRyZW5kZXJOb2RlPW5ldyB0LnN5cy5HcmFwaGljc05vZGUsZX1yZXR1cm4gX19leHRlbmRzKHIsaSksci5wcm90b3R5cGUuJHNldFRhcmdldD1mdW5jdGlvbih0KXt0aGlzLnRhcmdldERpc3BsYXkmJih0aGlzLnRhcmdldERpc3BsYXkuJHJlbmRlck5vZGU9bnVsbCksdC4kcmVuZGVyTm9kZT10aGlzLiRyZW5kZXJOb2RlLHRoaXMudGFyZ2V0RGlzcGxheT10fSxyLnByb3RvdHlwZS5zZXRTdHJva2VXaWR0aD1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSAxOnRoaXMudG9wTGVmdFN0cm9rZVdpZHRoPTAsdGhpcy5ib3R0b21SaWdodFN0cm9rZVdpZHRoPTE7YnJlYWs7Y2FzZSAzOnRoaXMudG9wTGVmdFN0cm9rZVdpZHRoPTEsdGhpcy5ib3R0b21SaWdodFN0cm9rZVdpZHRoPTI7YnJlYWs7ZGVmYXVsdDp2YXIgZT0wfE1hdGguY2VpbCguNSp0KTt0aGlzLnRvcExlZnRTdHJva2VXaWR0aD1lLHRoaXMuYm90dG9tUmlnaHRTdHJva2VXaWR0aD1lfX0sci5wcm90b3R5cGUuYmVnaW5GaWxsPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSksdD0rdHx8MCxlPStlfHwwLHRoaXMuZmlsbFBhdGg9dGhpcy4kcmVuZGVyTm9kZS5iZWdpbkZpbGwodCxlLHRoaXMuc3Ryb2tlUGF0aCksdGhpcy4kcmVuZGVyTm9kZS5kcmF3RGF0YS5sZW5ndGg+MSYmdGhpcy5maWxsUGF0aC5tb3ZlVG8odGhpcy5sYXN0WCx0aGlzLmxhc3RZKX0sci5wcm90b3R5cGUuYmVnaW5HcmFkaWVudEZpbGw9ZnVuY3Rpb24odCxlLGkscixuKXt2b2lkIDA9PT1uJiYobj1udWxsKSx0aGlzLmZpbGxQYXRoPXRoaXMuJHJlbmRlck5vZGUuYmVnaW5HcmFkaWVudEZpbGwodCxlLGkscixuLHRoaXMuc3Ryb2tlUGF0aCksdGhpcy4kcmVuZGVyTm9kZS5kcmF3RGF0YS5sZW5ndGg+MSYmdGhpcy5maWxsUGF0aC5tb3ZlVG8odGhpcy5sYXN0WCx0aGlzLmxhc3RZKX0sci5wcm90b3R5cGUuZW5kRmlsbD1mdW5jdGlvbigpe3RoaXMuZmlsbFBhdGg9bnVsbH0sci5wcm90b3R5cGUubGluZVN0eWxlPWZ1bmN0aW9uKHQsZSxpLHIsbixhLG8scyl7dm9pZCAwPT09dCYmKHQ9MC8wKSx2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1pJiYoaT0xKSx2b2lkIDA9PT1yJiYocj0hMSksdm9pZCAwPT09biYmKG49XCJub3JtYWxcIiksdm9pZCAwPT09YSYmKGE9bnVsbCksdm9pZCAwPT09byYmKG89bnVsbCksdm9pZCAwPT09cyYmKHM9MyksdD0rdHx8MCwwPj10Pyh0aGlzLnN0cm9rZVBhdGg9bnVsbCx0aGlzLnNldFN0cm9rZVdpZHRoKDApKTooZT0rZXx8MCxpPStpfHwwLHM9K3N8fDAsdGhpcy5zZXRTdHJva2VXaWR0aCh0KSx0aGlzLnN0cm9rZVBhdGg9dGhpcy4kcmVuZGVyTm9kZS5saW5lU3R5bGUodCxlLGksYSxvLHMpLHRoaXMuJHJlbmRlck5vZGUuZHJhd0RhdGEubGVuZ3RoPjEmJnRoaXMuc3Ryb2tlUGF0aC5tb3ZlVG8odGhpcy5sYXN0WCx0aGlzLmxhc3RZKSl9LHIucHJvdG90eXBlLmRyYXdSZWN0PWZ1bmN0aW9uKHQsZSxpLHIpe3Q9K3R8fDAsZT0rZXx8MCxpPStpfHwwLHI9K3J8fDA7dmFyIG49dGhpcy5maWxsUGF0aCxhPXRoaXMuc3Ryb2tlUGF0aDtuJiZuLmRyYXdSZWN0KHQsZSxpLHIpLGEmJmEuZHJhd1JlY3QodCxlLGksciksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KHQraSxlK3IpLHRoaXMudXBkYXRlUG9zaXRpb24odCxlKSx0aGlzLiRyZW5kZXJOb2RlLmRpcnR5UmVuZGVyPSEwfSxyLnByb3RvdHlwZS5kcmF3Um91bmRSZWN0PWZ1bmN0aW9uKHQsZSxpLHIsbixhKXt0PSt0fHwwLGU9K2V8fDAsaT0raXx8MCxyPStyfHwwLG49K258fDAsYT0rYXx8MDt2YXIgbz10aGlzLmZpbGxQYXRoLHM9dGhpcy5zdHJva2VQYXRoO28mJm8uZHJhd1JvdW5kUmVjdCh0LGUsaSxyLG4sYSkscyYmcy5kcmF3Um91bmRSZWN0KHQsZSxpLHIsbixhKTt2YXIgaD0uNSpufDAsbD1hPy41KmF8MDpoLHU9dCtpLGM9ZStyLHA9Yy1sO3RoaXMuZXh0ZW5kQm91bmRzQnlQb2ludCh0LGUpLHRoaXMuZXh0ZW5kQm91bmRzQnlQb2ludCh1LGMpLHRoaXMudXBkYXRlUG9zaXRpb24odSxwKSx0aGlzLiRyZW5kZXJOb2RlLmRpcnR5UmVuZGVyPSEwfSxyLnByb3RvdHlwZS5kcmF3Q2lyY2xlPWZ1bmN0aW9uKHQsZSxpKXt0PSt0fHwwLGU9K2V8fDAsaT0raXx8MDt2YXIgcj10aGlzLmZpbGxQYXRoLG49dGhpcy5zdHJva2VQYXRoO3ImJnIuZHJhd0NpcmNsZSh0LGUsaSksbiYmbi5kcmF3Q2lyY2xlKHQsZSxpKSx0aGlzLmV4dGVuZEJvdW5kc0J5UG9pbnQodC1pLGUtaSksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KHQraSxlK2kpLHRoaXMudXBkYXRlUG9zaXRpb24odCtpLGUpLHRoaXMuJHJlbmRlck5vZGUuZGlydHlSZW5kZXI9ITB9LHIucHJvdG90eXBlLmRyYXdFbGxpcHNlPWZ1bmN0aW9uKHQsZSxpLHIpe3Q9K3R8fDAsZT0rZXx8MCxpPStpfHwwLHI9K3J8fDA7dmFyIG49dGhpcy5maWxsUGF0aCxhPXRoaXMuc3Ryb2tlUGF0aDtuJiZuLmRyYXdFbGxpcHNlKHQsZSxpLHIpLGEmJmEuZHJhd0VsbGlwc2UodCxlLGksciksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KHQsZSksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KHQraSxlK3IpLHRoaXMudXBkYXRlUG9zaXRpb24odCtpLGUrLjUqciksdGhpcy4kcmVuZGVyTm9kZS5kaXJ0eVJlbmRlcj0hMH0sci5wcm90b3R5cGUubW92ZVRvPWZ1bmN0aW9uKHQsZSl7dD0rdHx8MCxlPStlfHwwO3ZhciBpPXRoaXMuZmlsbFBhdGgscj10aGlzLnN0cm9rZVBhdGg7aSYmaS5tb3ZlVG8odCxlKSxyJiZyLm1vdmVUbyh0LGUpLHRoaXMuaW5jbHVkZUxhc3RQb3NpdGlvbj0hMSx0aGlzLmxhc3RYPXQsdGhpcy5sYXN0WT1lLHRoaXMuJHJlbmRlck5vZGUuZGlydHlSZW5kZXI9ITB9LHIucHJvdG90eXBlLmxpbmVUbz1mdW5jdGlvbih0LGUpe3Q9K3R8fDAsZT0rZXx8MDt2YXIgaT10aGlzLmZpbGxQYXRoLHI9dGhpcy5zdHJva2VQYXRoO2kmJmkubGluZVRvKHQsZSksciYmci5saW5lVG8odCxlKSx0aGlzLnVwZGF0ZVBvc2l0aW9uKHQsZSksdGhpcy4kcmVuZGVyTm9kZS5kaXJ0eVJlbmRlcj0hMH0sci5wcm90b3R5cGUuY3VydmVUbz1mdW5jdGlvbih0LGUsaSxyKXt0PSt0fHwwLGU9K2V8fDAsaT0raXx8MCxyPStyfHwwO3ZhciBuPXRoaXMuZmlsbFBhdGgsYT10aGlzLnN0cm9rZVBhdGg7biYmbi5jdXJ2ZVRvKHQsZSxpLHIpLGEmJmEuY3VydmVUbyh0LGUsaSxyKSx0aGlzLmV4dGVuZEJvdW5kc0J5UG9pbnQodCxlKSx0aGlzLmV4dGVuZEJvdW5kc0J5UG9pbnQoaSxyKSx0aGlzLnVwZGF0ZVBvc2l0aW9uKGksciksdGhpcy4kcmVuZGVyTm9kZS5kaXJ0eVJlbmRlcj0hMH0sci5wcm90b3R5cGUuY3ViaWNDdXJ2ZVRvPWZ1bmN0aW9uKHQsZSxpLHIsbixhKXt0PSt0fHwwLGU9K2V8fDAsaT0raXx8MCxyPStyfHwwLG49K258fDAsYT0rYXx8MDt2YXIgbz10aGlzLmZpbGxQYXRoLHM9dGhpcy5zdHJva2VQYXRoO28mJm8uY3ViaWNDdXJ2ZVRvKHQsZSxpLHIsbixhKSxzJiZzLmN1YmljQ3VydmVUbyh0LGUsaSxyLG4sYSksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KHQsZSksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KGksciksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KG4sYSksdGhpcy51cGRhdGVQb3NpdGlvbihuLGEpLHRoaXMuJHJlbmRlck5vZGUuZGlydHlSZW5kZXI9ITB9LHIucHJvdG90eXBlLmRyYXdBcmM9ZnVuY3Rpb24odCxpLHIsbixhLG8pe2lmKCEoMD5yfHxuPT09YSkpe3Q9K3R8fDAsaT0raXx8MCxyPStyfHwwLG49K258fDAsYT0rYXx8MCxvPSEhbyxuPWUobiksYT1lKGEpO3ZhciBzPXRoaXMuZmlsbFBhdGgsaD10aGlzLnN0cm9rZVBhdGg7cyYmKHMuJGxhc3RYPXRoaXMubGFzdFgscy4kbGFzdFk9dGhpcy5sYXN0WSxzLmRyYXdBcmModCxpLHIsbixhLG8pKSxoJiYoaC4kbGFzdFg9dGhpcy5sYXN0WCxoLiRsYXN0WT10aGlzLmxhc3RZLGguZHJhd0FyYyh0LGkscixuLGEsbykpLG8/dGhpcy5hcmNCb3VuZHModCxpLHIsYSxuKTp0aGlzLmFyY0JvdW5kcyh0LGkscixuLGEpO3ZhciBsPXQrTWF0aC5jb3MoYSkqcix1PWkrTWF0aC5zaW4oYSkqcjt0aGlzLnVwZGF0ZVBvc2l0aW9uKGwsdSksdGhpcy4kcmVuZGVyTm9kZS5kaXJ0eVJlbmRlcj0hMH19LHIucHJvdG90eXBlLmFyY0JvdW5kcz1mdW5jdGlvbih0LGUsaSxyLG4pe3ZhciBhPU1hdGguUEk7aWYoTWF0aC5hYnMoci1uKTwuMDEpcmV0dXJuIHRoaXMuZXh0ZW5kQm91bmRzQnlQb2ludCh0LWksZS1pKSx2b2lkIHRoaXMuZXh0ZW5kQm91bmRzQnlQb2ludCh0K2ksZStpKTtyPm4mJihuKz0yKmEpO2Zvcih2YXIgbz1NYXRoLmNvcyhyKSppLHM9TWF0aC5jb3MobikqaSxoPU1hdGgubWluKG8scyksbD1NYXRoLm1heChvLHMpLHU9TWF0aC5zaW4ocikqaSxjPU1hdGguc2luKG4pKmkscD1NYXRoLm1pbih1LGMpLGQ9TWF0aC5tYXgodSxjKSxmPXIvKC41KmEpLGc9bi8oLjUqYSkseT1NYXRoLmNlaWwoZik7Zz49eTt5Kyspc3dpdGNoKHklNCl7Y2FzZSAwOmw9aTticmVhaztjYXNlIDE6ZD1pO2JyZWFrO2Nhc2UgMjpoPS1pO2JyZWFrO2Nhc2UgMzpwPS1pfWg9TWF0aC5mbG9vcihoKSxwPU1hdGguZmxvb3IocCksbD1NYXRoLmNlaWwobCksZD1NYXRoLmNlaWwoZCksdGhpcy5leHRlbmRCb3VuZHNCeVBvaW50KGgrdCxwK2UpLHRoaXMuZXh0ZW5kQm91bmRzQnlQb2ludChsK3QsZCtlKX0sci5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLiRyZW5kZXJOb2RlLmNsZWFyKCksdGhpcy51cGRhdGVQb3NpdGlvbigwLDApLHRoaXMubWluWD0xLzAsdGhpcy5taW5ZPTEvMCx0aGlzLm1heFg9LSgxLzApLHRoaXMubWF4WT0tKDEvMCl9LHIucHJvdG90eXBlLmV4dGVuZEJvdW5kc0J5UG9pbnQ9ZnVuY3Rpb24odCxlKXt0aGlzLmV4dGVuZEJvdW5kc0J5WCh0KSx0aGlzLmV4dGVuZEJvdW5kc0J5WShlKX0sci5wcm90b3R5cGUuZXh0ZW5kQm91bmRzQnlYPWZ1bmN0aW9uKHQpe3RoaXMubWluWD1NYXRoLm1pbih0aGlzLm1pblgsdC10aGlzLnRvcExlZnRTdHJva2VXaWR0aCksdGhpcy5tYXhYPU1hdGgubWF4KHRoaXMubWF4WCx0K3RoaXMuYm90dG9tUmlnaHRTdHJva2VXaWR0aCksdGhpcy51cGRhdGVOb2RlQm91bmRzKCl9LHIucHJvdG90eXBlLmV4dGVuZEJvdW5kc0J5WT1mdW5jdGlvbih0KXt0aGlzLm1pblk9TWF0aC5taW4odGhpcy5taW5ZLHQtdGhpcy50b3BMZWZ0U3Ryb2tlV2lkdGgpLHRoaXMubWF4WT1NYXRoLm1heCh0aGlzLm1heFksdCt0aGlzLmJvdHRvbVJpZ2h0U3Ryb2tlV2lkdGgpLHRoaXMudXBkYXRlTm9kZUJvdW5kcygpfSxyLnByb3RvdHlwZS51cGRhdGVOb2RlQm91bmRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kcmVuZGVyTm9kZTt0Lng9dGhpcy5taW5YLHQueT10aGlzLm1pblksdC53aWR0aD1NYXRoLmNlaWwodGhpcy5tYXhYLXRoaXMubWluWCksdC5oZWlnaHQ9TWF0aC5jZWlsKHRoaXMubWF4WS10aGlzLm1pblkpfSxyLnByb3RvdHlwZS51cGRhdGVQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3RoaXMuaW5jbHVkZUxhc3RQb3NpdGlvbnx8KHRoaXMuZXh0ZW5kQm91bmRzQnlQb2ludCh0aGlzLmxhc3RYLHRoaXMubGFzdFkpLHRoaXMuaW5jbHVkZUxhc3RQb3NpdGlvbj0hMCksdGhpcy5sYXN0WD10LHRoaXMubGFzdFk9ZSx0aGlzLmV4dGVuZEJvdW5kc0J5UG9pbnQodCxlKSx0aGlzLnRhcmdldERpc3BsYXkuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCl9LHIucHJvdG90eXBlLiRtZWFzdXJlQ29udGVudEJvdW5kcz1mdW5jdGlvbih0KXt0aGlzLm1pblg9PT0xLzA/dC5zZXRFbXB0eSgpOnQuc2V0VG8odGhpcy5taW5YLHRoaXMubWluWSx0aGlzLm1heFgtdGhpcy5taW5YLHRoaXMubWF4WS10aGlzLm1pblkpfSxyLnByb3RvdHlwZS4kaGl0VGVzdD1mdW5jdGlvbihlLGkpe3ZhciByPXRoaXMudGFyZ2V0RGlzcGxheSxuPXIuJGdldEludmVydGVkQ29uY2F0ZW5hdGVkTWF0cml4KCksYT1uLmEqZStuLmMqaStuLnR4LG89bi5iKmUrbi5kKmkrbi50eSxzPXQuc3lzLmNhbnZhc0hpdFRlc3RCdWZmZXI7cy5yZXNpemUoMywzKTt2YXIgaD10aGlzLiRyZW5kZXJOb2RlLGw9dC5NYXRyaXguY3JlYXRlKCk7bC5pZGVudGl0eSgpLGwudHJhbnNsYXRlKDEtYSwxLW8pLHQuc3lzLmNhbnZhc1JlbmRlcmVyLmRyYXdOb2RlVG9CdWZmZXIoaCxzLGwsITApLHQuTWF0cml4LnJlbGVhc2UobCk7dHJ5e3ZhciB1PXMuZ2V0UGl4ZWxzKDEsMSk7aWYoMD09PXVbM10pcmV0dXJuIG51bGx9Y2F0Y2goYyl7dGhyb3cgbmV3IEVycm9yKHQuc3lzLnRyKDEwMzkpKX1yZXR1cm4gcn0sci5wcm90b3R5cGUuJG9uUmVtb3ZlRnJvbVN0YWdlPWZ1bmN0aW9uKCl7dGhpcy4kcmVuZGVyTm9kZSYmdGhpcy4kcmVuZGVyTm9kZS5jbGVhbigpfSxyfSh0Lkhhc2hPYmplY3QpO3QuR3JhcGhpY3M9aSxfX3JlZmxlY3QoaS5wcm90b3R5cGUsXCJlZ3JldC5HcmFwaGljc1wiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5QSSxpPTIqZSxyPWUvMTgwLG49W10sYT1mdW5jdGlvbihhKXtmdW5jdGlvbiBvKHQsZSxpLHIsbixvKXt2b2lkIDA9PT10JiYodD0xKSx2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1pJiYoaT0wKSx2b2lkIDA9PT1yJiYocj0xKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1vJiYobz0wKTt2YXIgcz1hLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHMuYT10LHMuYj1lLHMuYz1pLHMuZD1yLHMudHg9bixzLnR5PW8sc31yZXR1cm4gX19leHRlbmRzKG8sYSksby5yZWxlYXNlPWZ1bmN0aW9uKHQpe3QmJm4ucHVzaCh0KX0sby5jcmVhdGU9ZnVuY3Rpb24oKXt2YXIgdD1uLnBvcCgpO3JldHVybiB0fHwodD1uZXcgbyksdH0sby5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8odGhpcy5hLHRoaXMuYix0aGlzLmMsdGhpcy5kLHRoaXMudHgsdGhpcy50eSl9LG8ucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmEqdC5hLGk9MCxyPTAsbj10aGlzLmQqdC5kLGE9dGhpcy50eCp0LmErdC50eCxvPXRoaXMudHkqdC5kK3QudHk7KDAhPT10aGlzLmJ8fDAhPT10aGlzLmN8fDAhPT10LmJ8fDAhPT10LmMpJiYoZSs9dGhpcy5iKnQuYyxuKz10aGlzLmMqdC5iLGkrPXRoaXMuYSp0LmIrdGhpcy5iKnQuZCxyKz10aGlzLmMqdC5hK3RoaXMuZCp0LmMsYSs9dGhpcy50eSp0LmMsbys9dGhpcy50eCp0LmIpLHRoaXMuYT1lLHRoaXMuYj1pLHRoaXMuYz1yLHRoaXMuZD1uLHRoaXMudHg9YSx0aGlzLnR5PW99LG8ucHJvdG90eXBlLmNvcHlGcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmE9dC5hLHRoaXMuYj10LmIsdGhpcy5jPXQuYyx0aGlzLmQ9dC5kLHRoaXMudHg9dC50eCx0aGlzLnR5PXQudHksdGhpc30sby5wcm90b3R5cGUuaWRlbnRpdHk9ZnVuY3Rpb24oKXt0aGlzLmE9dGhpcy5kPTEsdGhpcy5iPXRoaXMuYz10aGlzLnR4PXRoaXMudHk9MH0sby5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7dGhpcy4kaW52ZXJ0SW50byh0aGlzKX0sby5wcm90b3R5cGUuJGludmVydEludG89ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hLGk9dGhpcy5iLHI9dGhpcy5jLG49dGhpcy5kLGE9dGhpcy50eCxvPXRoaXMudHk7aWYoMD09aSYmMD09cilyZXR1cm4gdC5iPXQuYz0wLHZvaWQoMD09ZXx8MD09bj90LmE9dC5kPXQudHg9dC50eT0wOihlPXQuYT0xL2Usbj10LmQ9MS9uLHQudHg9LWUqYSx0LnR5PS1uKm8pKTt2YXIgcz1lKm4taSpyO2lmKDA9PXMpcmV0dXJuIHZvaWQgdC5pZGVudGl0eSgpO3M9MS9zO3ZhciBoPXQuYT1uKnM7aT10LmI9LWkqcyxyPXQuYz0tcipzLG49dC5kPWUqcyx0LnR4PS0oaCphK3IqbyksdC50eT0tKGkqYStuKm8pfSxvLnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24oZSl7aWYoZT0rZSwwIT09ZSl7ZS89cjt2YXIgaT10Lk51bWJlclV0aWxzLmNvcyhlKSxuPXQuTnVtYmVyVXRpbHMuc2luKGUpLGE9dGhpcy5hLG89dGhpcy5iLHM9dGhpcy5jLGg9dGhpcy5kLGw9dGhpcy50eCx1PXRoaXMudHk7dGhpcy5hPWEqaS1vKm4sdGhpcy5iPWEqbitvKmksdGhpcy5jPXMqaS1oKm4sdGhpcy5kPXMqbitoKmksdGhpcy50eD1sKmktdSpuLHRoaXMudHk9bCpuK3UqaX19LG8ucHJvdG90eXBlLnNjYWxlPWZ1bmN0aW9uKHQsZSl7MSE9PXQmJih0aGlzLmEqPXQsdGhpcy5jKj10LHRoaXMudHgqPXQpLDEhPT1lJiYodGhpcy5iKj1lLHRoaXMuZCo9ZSx0aGlzLnR5Kj1lKX0sby5wcm90b3R5cGUuc2V0VG89ZnVuY3Rpb24odCxlLGkscixuLGEpe3JldHVybiB0aGlzLmE9dCx0aGlzLmI9ZSx0aGlzLmM9aSx0aGlzLmQ9cix0aGlzLnR4PW4sdGhpcy50eT1hLHRoaXN9LG8ucHJvdG90eXBlLnRyYW5zZm9ybVBvaW50PWZ1bmN0aW9uKGUsaSxyKXt2YXIgbj10aGlzLmEqZSt0aGlzLmMqaSt0aGlzLnR4LGE9dGhpcy5iKmUrdGhpcy5kKmkrdGhpcy50eTtyZXR1cm4gcj8oci5zZXRUbyhuLGEpLHIpOm5ldyB0LlBvaW50KG4sYSl9LG8ucHJvdG90eXBlLnRyYW5zbGF0ZT1mdW5jdGlvbih0LGUpe3RoaXMudHgrPXQsdGhpcy50eSs9ZX0sby5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmE9PXQuYSYmdGhpcy5iPT10LmImJnRoaXMuYz09dC5jJiZ0aGlzLmQ9PXQuZCYmdGhpcy50eD09dC50eCYmdGhpcy50eT09dC50eX0sby5wcm90b3R5cGUucHJlcGVuZD1mdW5jdGlvbih0LGUsaSxyLG4sYSl7dmFyIG89dGhpcy50eDtpZigxIT10fHwwIT1lfHwwIT1pfHwxIT1yKXt2YXIgcz10aGlzLmEsaD10aGlzLmM7dGhpcy5hPXMqdCt0aGlzLmIqaSx0aGlzLmI9cyplK3RoaXMuYipyLHRoaXMuYz1oKnQrdGhpcy5kKmksdGhpcy5kPWgqZSt0aGlzLmQqcn1yZXR1cm4gdGhpcy50eD1vKnQrdGhpcy50eSppK24sdGhpcy50eT1vKmUrdGhpcy50eSpyK2EsdGhpc30sby5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQsZSxpLHIsbixhKXt2YXIgbz10aGlzLmEscz10aGlzLmIsaD10aGlzLmMsbD10aGlzLmQ7cmV0dXJuKDEhPXR8fDAhPWV8fDAhPWl8fDEhPXIpJiYodGhpcy5hPXQqbytlKmgsdGhpcy5iPXQqcytlKmwsdGhpcy5jPWkqbytyKmgsdGhpcy5kPWkqcytyKmwpLHRoaXMudHg9bipvK2EqaCt0aGlzLnR4LHRoaXMudHk9bipzK2EqbCt0aGlzLnR5LHRoaXN9LG8ucHJvdG90eXBlLmRlbHRhVHJhbnNmb3JtUG9pbnQ9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcyxyPWkuYSplLngraS5jKmUueSxuPWkuYiplLngraS5kKmUueTtyZXR1cm4gbmV3IHQuUG9pbnQocixuKX0sby5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIihhPVwiK3RoaXMuYStcIiwgYj1cIit0aGlzLmIrXCIsIGM9XCIrdGhpcy5jK1wiLCBkPVwiK3RoaXMuZCtcIiwgdHg9XCIrdGhpcy50eCtcIiwgdHk9XCIrdGhpcy50eStcIilcIn0sby5wcm90b3R5cGUuY3JlYXRlQm94PWZ1bmN0aW9uKGUsaSxuLGEsbyl7dm9pZCAwPT09biYmKG49MCksdm9pZCAwPT09YSYmKGE9MCksdm9pZCAwPT09byYmKG89MCk7dmFyIHM9dGhpcztpZigwIT09bil7bi89cjt2YXIgaD10Lk51bWJlclV0aWxzLmNvcyhuKSxsPXQuTnVtYmVyVXRpbHMuc2luKG4pO3MuYT1oKmUscy5iPWwqaSxzLmM9LWwqZSxzLmQ9aCppfWVsc2Ugcy5hPWUscy5iPTAscy5jPTAscy5kPWk7cy50eD1hLHMudHk9b30sby5wcm90b3R5cGUuY3JlYXRlR3JhZGllbnRCb3g9ZnVuY3Rpb24odCxlLGkscixuKXt2b2lkIDA9PT1pJiYoaT0wKSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1uJiYobj0wKSx0aGlzLmNyZWF0ZUJveCh0LzE2MzguNCxlLzE2MzguNCxpLHIrdC8yLG4rZS8yKX0sby5wcm90b3R5cGUuJHRyYW5zZm9ybUJvdW5kcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmEsaT10aGlzLmIscj10aGlzLmMsbj10aGlzLmQsYT10aGlzLnR4LG89dGhpcy50eSxzPXQueCxoPXQueSxsPXMrdC53aWR0aCx1PWgrdC5oZWlnaHQsYz1lKnMrcipoK2EscD1pKnMrbipoK28sZD1lKmwrcipoK2EsZj1pKmwrbipoK28sZz1lKmwrcip1K2EseT1pKmwrbip1K28sJD1lKnMrcip1K2Esdj1pKnMrbip1K28sbT0wO2M+ZCYmKG09YyxjPWQsZD1tKSxnPiQmJihtPWcsZz0kLCQ9bSksdC54PU1hdGguZmxvb3IoZz5jP2M6ZyksdC53aWR0aD1NYXRoLmNlaWwoKGQ+JD9kOiQpLXQueCkscD5mJiYobT1wLHA9ZixmPW0pLHk+diYmKG09eSx5PXYsdj1tKSx0Lnk9TWF0aC5mbG9vcih5PnA/cDp5KSx0LmhlaWdodD1NYXRoLmNlaWwoKGY+dj9mOnYpLXQueSl9LG8ucHJvdG90eXBlLmdldERldGVybWluYW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYSp0aGlzLmQtdGhpcy5iKnRoaXMuY30sby5wcm90b3R5cGUuJGdldFNjYWxlWD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoMT09dC5hJiYwPT10LmIpcmV0dXJuIDE7dmFyIGU9TWF0aC5zcXJ0KHQuYSp0LmErdC5iKnQuYik7cmV0dXJuIHRoaXMuZ2V0RGV0ZXJtaW5hbnQoKTwwPy1lOmV9LG8ucHJvdG90eXBlLiRnZXRTY2FsZVk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKDA9PXQuYyYmMT09dC5kKXJldHVybiAxO3ZhciBlPU1hdGguc3FydCh0LmMqdC5jK3QuZCp0LmQpO3JldHVybiB0aGlzLmdldERldGVybWluYW50KCk8MD8tZTplfSxvLnByb3RvdHlwZS4kZ2V0U2tld1g9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hdGFuMih0aGlzLmQsdGhpcy5jKS1lLzJ9LG8ucHJvdG90eXBlLiRnZXRTa2V3WT1mdW5jdGlvbigpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMuYix0aGlzLmEpfSxvLnByb3RvdHlwZS4kdXBkYXRlU2NhbGVBbmRSb3RhdGlvbj1mdW5jdGlvbihlLG4sYSxvKXtpZighKDAhPWEmJmEhPWl8fDAhPW8mJm8hPWkpKXJldHVybiB0aGlzLmE9ZSx0aGlzLmI9dGhpcy5jPTAsdm9pZCh0aGlzLmQ9bik7YS89cixvLz1yO3ZhciBzPXQuTnVtYmVyVXRpbHMuY29zKGEpLGg9dC5OdW1iZXJVdGlscy5zaW4oYSk7YT09bz8odGhpcy5hPXMqZSx0aGlzLmI9aCplKToodGhpcy5hPXQuTnVtYmVyVXRpbHMuY29zKG8pKmUsdGhpcy5iPXQuTnVtYmVyVXRpbHMuc2luKG8pKmUpLHRoaXMuYz0taCpuLHRoaXMuZD1zKm59LG8ucHJvdG90eXBlLiRwcmVNdWx0aXBseUludG89ZnVuY3Rpb24odCxlKXt2YXIgaT10LmEqdGhpcy5hLHI9MCxuPTAsYT10LmQqdGhpcy5kLG89dC50eCp0aGlzLmErdGhpcy50eCxzPXQudHkqdGhpcy5kK3RoaXMudHk7KDAhPT10LmJ8fDAhPT10LmN8fDAhPT10aGlzLmJ8fDAhPT10aGlzLmMpJiYoaSs9dC5iKnRoaXMuYyxhKz10LmMqdGhpcy5iLHIrPXQuYSp0aGlzLmIrdC5iKnRoaXMuZCxuKz10LmMqdGhpcy5hK3QuZCp0aGlzLmMsbys9dC50eSp0aGlzLmMscys9dC50eCp0aGlzLmIpLGUuYT1pLGUuYj1yLGUuYz1uLGUuZD1hLGUudHg9byxlLnR5PXN9LG99KHQuSGFzaE9iamVjdCk7dC5NYXRyaXg9YSxfX3JlZmxlY3QoYS5wcm90b3R5cGUsXCJlZ3JldC5NYXRyaXhcIiksdC4kVGVtcE1hdHJpeD1uZXcgYX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC5Kb2ludFN0eWxlPXtCRVZFTDpcImJldmVsXCIsTUlURVI6XCJtaXRlclwiLFJPVU5EOlwicm91bmRcIn19KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3QuJGxvY2FsZV9zdHJpbmdzPXQuJGxvY2FsZV9zdHJpbmdzfHx7fSx0LiRsb2NhbGVfc3RyaW5ncy5lbl9VUz10LiRsb2NhbGVfc3RyaW5ncy5lbl9VU3x8e307dmFyIGU9dC4kbG9jYWxlX3N0cmluZ3MuZW5fVVM7ZVsxMDAxXT1cIkNvdWxkIG5vdCBmaW5kIEVncmV0IGVudHJ5IGNsYXNzOiB7MH3jgIJcIixlWzEwMDJdPVwiRWdyZXQgZW50cnkgY2xhc3MgJ3swfScgbXVzdCBpbmhlcml0IGZyb20gZWdyZXQuRGlzcGxheU9iamVjdC5cIixlWzEwMDNdPVwiUGFyYW1ldGVyIHswfSBtdXN0IGJlIG5vbi1udWxsLlwiLGVbMTAwNF09XCJBbiBvYmplY3QgY2Fubm90IGJlIGFkZGVkIGFzIGEgY2hpbGQgdG8gb25lIG9mIGl0J3MgY2hpbGRyZW4gKG9yIGNoaWxkcmVuJ3MgY2hpbGRyZW4sIGV0Yy4pLlwiLGVbMTAwNV09XCJBbiBvYmplY3QgY2Fubm90IGJlIGFkZGVkIGFzIGEgY2hpbGQgb2YgaXRzZWxmLlwiLGVbMTAwNl09XCJUaGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdCBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlci5cIixlWzEwMDddPVwiQW4gaW5kZXggc3BlY2lmaWVkIGZvciBhIHBhcmFtZXRlciB3YXMgb3V0IG9mIHJhbmdlLlwiLGVbMTAwOF09XCJJbnN0YW50aWF0ZSBzaW5nbGV0b24gZXJyb3LvvIxzaW5nbGV0b24gY2xhc3MgezB9IGNhbiBub3QgY3JlYXRlIG11bHRpcGxlIGluc3RhbmNlcy5cIixlWzEwMDldPSd0aGUgQ2xhc3MgezB9IGNhbm5vdCB1c2UgdGhlIHByb3BlcnR5IFwiezF9XCInLGVbMTAxMF09J3RoZSBwcm9wZXJ0eSBcInsxfVwiIG9mIHRoZSBDbGFzcyBcInswfVwiIGlzIHJlYWRvbmx5JyxlWzEwMTFdPVwiU3RyZWFtIEVycm9yLiBVUkw6IHswfVwiLGVbMTAxMl09XCJUaGUgdHlwZSBvZiBwYXJhbWV0ZXIgezB9IG11c3QgYmUgQ2xhc3MuXCIsZVsxMDEzXT1cIlZhcmlhYmxlIGFzc2lnbm1lbnQgaXMgTmFOLCBwbGVhc2Ugc2VlIHRoZSBjb2RlIVwiLGVbMTAxNF09J3RoZSBjb25zdGFudCBcInsxfVwiIG9mIHRoZSBDbGFzcyBcInswfVwiIGlzIHJlYWQtb25seScsZVsxMDE1XT1cInhtbCBub3QgZm91bmQhXCIsZVsxMDE2XT1cInswfWhhcyBiZWVuIG9ic29sZXRlZFwiLGVbMTAxN109XCJUaGUgZm9ybWF0IG9mIEpTT04gZmlsZSBpcyBpbmNvcnJlY3Q6IHswfVxcbmRhdGE6IHsxfVwiLGVbMTAxOF09XCJ0aGUgc2NhbGU5R3JpZCBpcyBub3QgY29ycmVjdFwiLGVbMTAxOV09XCJOZXR3b3JrIGFiOnswfVwiLGVbMTAyMF09XCJDYW5ub3QgaW5pdGlhbGl6ZSBTaGFkZXJcIixlWzEwMjFdPVwiQ3VycmVudCBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgd2ViZ2xcIixlWzEwMjJdPVwiezB9IEFyZ3VtZW50RXJyb3JcIixlWzEwMjNdPVwiVGhpcyBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgU2Nyb2xsVmlldyFcIixlWzEwMjVdPVwiZW5kIG9mIHRoZSBmaWxlXCIsZVsxMDI2XT1cIiEgRW5jb2RpbmdFcnJvciBUaGUgY29kZSBwb2ludCB7MH0gY291bGQgbm90IGJlIGVuY29kZWQuXCIsZVsxMDI3XT1cIkRlY29kaW5nRXJyb3JcIixlWzEwMjhdPVwiLiBjYWxsZWQgaW5qZWN0aW9uIGlzIG5vdCBjb25maWd1cmVkIHJ1bGU6IHswfSwgcGxlYXNlIHNwZWNpZnkgY29uZmlndXJhdGlvbiBkdXJpbmcgaXRzIGluaXRpYWwgeWVhcnMgb2YgaW5qZWN0aW9uIHJ1bGUsIGFuZCB0aGVuIGNhbGwgdGhlIGNvcnJlc3BvbmRpbmcgc2luZ2xlIGNhc2UuXCIsZVsxMDI5XT1cIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlXCIsZVsxMDMzXT1cIlBob3RvcyBjYW4gbm90IGJlIHVzZWQgYWNyb3NzIGRvbWFpbnMgdG9EYXRhVVJMIHRvIGNvbnZlcnQgYmFzZTY0XCIsZVsxMDM0XT0nTXVzaWMgZmlsZSBkZWNvZGluZyBmYWlsZWQ6IFwiezB9XCIsIHBsZWFzZSB1c2UgdGhlIHN0YW5kYXJkIGNvbnZlcnNpb24gdG9vbCByZWNvbnZlcnNpb24gdW5kZXIgbXAzLicsZVsxMDM1XT1cIk5hdGl2ZSBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgZmVhdHVyZSFcIixlWzEwMzZdPVwiU291bmQgaGFzIHN0b3BwZWQsIHBsZWFzZSByZWNhbGwgU291bmQucGxheSAoKSB0byBwbGF5IHRoZSBzb3VuZCFcIixlWzEwMzddPVwiTm9uLWxvYWQgdGhlIGNvcnJlY3QgYmxvYiFcIixlWzEwMzhdPVwiWE1MIGZvcm1hdCBlcnJvciFcIixlWzEwMzldPVwiQ3Jvc3MgZG9tYWlucyBwaWN0dXJlcyBjYW4gbm90IGdldCBwaXhlbCBpbmZvcm1hdGlvbiFcIixlWzEwNDBdPVwiaGl0VGVzdFBvaW50IGNhbiBub3QgZGV0ZWN0IGNyb3NzT3JpZ2luIGltYWdlcyEgUGxlYXNlIGNoZWNrIGlmIHRoZSBkaXNwbGF5IG9iamVjdCBoYXMgY3Jvc3NPcmlnaW4gZWxlbWVudHMuXCIsZVsxMDQxXT1cInswfSBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHsxfSByZXBsYWNlXCIsZVsxMDQyXT1cIlRoZSBwYXJhbWV0ZXJzIHBhc3NlZCBpbiB0aGUgcmVnaW9uIG5lZWRzIGlzIGFuIGludGVnZXIgaW4gZHJhd1RvVGV4dHVyZSBtZXRob2QuIE90aGVyd2lzZSwgc29tZSBicm93c2VycyB3aWxsIGRyYXcgYWJub3JtYWwuXCIsZVsxMDQzXT1cIkNvbXBpbGUgZXJyb3JzIGluIHswfSwgdGhlIGF0dHJpYnV0ZSBuYW1lOiB7MX0sIHRoZSBhdHRyaWJ1dGUgdmFsdWU6IHsyfS5cIixlWzEwNDRdPVwiVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgUnVudGltZSBkb2VzIG5vdCBzdXBwb3J0IHZpZGVvIHBsYXliYWNrLCBwbGVhc2UgdXNlIHRoZSBsYXRlc3QgdmVyc2lvblwiLGVbMTA0NV09XCJUaGUgcmVzb3VyY2UgdXJsIGlzIG5vdCBmb3VuZFwiLGVbMTA0Nl09XCJCaXRtYXBUZXh0IG5vIGNvcnJlc3BvbmRpbmcgY2hhcmFjdGVyczogezB9LCBwbGVhc2UgY2hlY2sgdGhlIGNvbmZpZ3VyYXRpb24gZmlsZVwiLGVbMTA0N109XCJlZ3JldC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSBzYXZlIGZhaWxlZCxrZXk9ezB9JnZhbHVlPXsxfVwiLGVbMTA0OF09XCJWaWRlbyBsb2FkaW5nIGZhaWxlZFwiLGVbMTA0OV09XCJJbiB0aGUgYWJzZW5jZSBvZiBzb3VuZCBpcyBub3QgYWxsb3dlZCB0byBwbGF5IGFmdGVyIGxvYWRpbmdcIixlWzEwNTBdPVwiRXh0ZXJuYWxJbnRlcmZhY2UgY2FsbHMgdGhlIG1ldGhvZCB3aXRob3V0IGpzIHJlZ2lzdHJhdGlvbjogezB9XCIsZVszZTNdPVwiVGhlbWUgY29uZmlndXJhdGlvbiBmaWxlIGZhaWxlZCB0byBsb2FkOiB7MH1cIixlWzMwMDFdPVwiQ2Fubm90IGZpbmQgdGhlIHNraW4gbmFtZSB3aGljaCBpcyBjb25maWd1cmVkIGluIFRoZW1lOiB7MH1cIixlWzMwMDJdPSdJbmRleDpcInswfVwiIGlzIG91dCBvZiB0aGUgY29sbGVjdGlvbiBlbGVtZW50IGluZGV4IHJhbmdlJyxlWzMwMDNdPVwiQ2Fubm90IGJlIGF2YWlsYWJsZSBpbiB0aGlzIGNvbXBvbmVudC4gSWYgdGhpcyBjb21wb25lbnQgaXMgY29udGFpbmVyLCBwbGVhc2UgY29udGludWUgdG8gdXNlXCIsZVszMDA0XT1cImFkZENoaWxkKCl7MH1hZGRFbGVtZW50KCkgcmVwbGFjZVwiLGVbMzAwNV09XCJhZGRDaGlsZEF0KCl7MH1hZGRFbGVtZW50QXQoKSByZXBsYWNlXCIsZVszMDA2XT1cInJlbW92ZUNoaWxkKCl7MH1yZW1vdmVFbGVtZW50KCkgcmVwbGFjZVwiLGVbMzAwN109XCJyZW1vdmVDaGlsZEF0KCl7MH1yZW1vdmVFbGVtZW50QXQoKSByZXBsYWNlXCIsZVszMDA4XT1cInNldENoaWxkSW5kZXgoKXswfXNldEVsZW1lbnRJbmRleCgpIHJlcGxhY2VcIixlWzMwMDldPVwic3dhcENoaWxkcmVuKCl7MH1zd2FwRWxlbWVudHMoKSByZXBsYWNlXCIsZVszMDEwXT1cInN3YXBDaGlsZHJlbkF0KCl7MH1zd2FwRWxlbWVudHNBdCgpIHJlcGxhY2VcIixlWzMwMTFdPSdJbmRleDpcInswfVwiIGlzIG91dCBvZiB0aGUgdmlzdWFsIGVsZW1lbnQgaW5kZXggcmFuZ2UnLGVbMzAxMl09XCJUaGlzIG1ldGhvZCBpcyBub3QgYXZhaWxhYmxlIGluIFNjcm9sbGVyIGNvbXBvbmVudCFcIixlWzMwMTNdPVwiVUlTdGFnZSBpcyBHVUkgcm9vdCBjb250YWluZXIsIGFuZCBvbmx5IG9uZSBzdWNoIGluc3RhbnQgaXMgaW4gdGhlIGRpc3BsYXkgbGlzdO+8gVwiLGVbMzAxNF09XCJzZXQgZnVsbHNjcmVlbiBlcnJvclwiLGVbMzEwMF09XCJDdXJyZW50IGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJTb2NrZXRcIixlWzMxMDFdPVwiUGxlYXNlIGNvbm5lY3QgU29ja2V0IGZpcnN0bHlcIixlWzMxMDJdPVwiUGxlYXNlIHNldCB0aGUgdHlwZSBvZiBiaW5hcnkgdHlwZVwiLGVbNGUzXT1cIkFuIEJvbmUgY2Fubm90IGJlIGFkZGVkIGFzIGEgY2hpbGQgdG8gaXRzZWxmIG9yIG9uZSBvZiBpdHMgY2hpbGRyZW4gKG9yIGNoaWxkcmVuJ3MgY2hpbGRyZW4sIGV0Yy4pXCIsZVs0MDAxXT1cIkFic3RyYWN0IGNsYXNzIGNhbiBub3QgYmUgaW5zdGFudGlhdGVkIVwiLGVbNDAwMl09XCJVbm5hbWVkIGRhdGEhXCIsZVs0MDAzXT1cIk5vbnN1cHBvcnQgdmVyc2lvbiFcIn0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaShpKXt2YXIgcj1lLmNhbGwodGhpcyxpKXx8dGhpcztyZXR1cm4gci5fdmVydGljZXNEaXJ0eT0hMCxyLl9ib3VuZHM9bmV3IHQuUmVjdGFuZ2xlLHIuJHJlbmRlck5vZGU9bmV3IHQuc3lzLk1lc2hOb2RlLHJ9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLGkucHJvdG90eXBlLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLiRCaXRtYXAsaT1lWzFdO2lmKGkpe3ZhciByPSh0LiRUZXh0dXJlU2NhbGVGYWN0b3IsdGhpcy4kcmVuZGVyTm9kZSk7ci5zbW9vdGhpbmc9ZVsxMF0sci5pbWFnZT1pLHIuaW1hZ2VXaWR0aD1lWzEzXSxyLmltYWdlSGVpZ2h0PWVbMTRdO3ZhciBuPWlzTmFOKGVbMTFdKT9lWzhdOmVbMTFdLGE9aXNOYU4oZVsxMl0pP2VbOV06ZVsxMl0sbz1uL2VbOF0scz1hL2VbOV0saD1lWzRdLGw9ZVs1XTtyLmRyYXdNZXNoKGVbMl0sZVszXSxoLGwsZVs2XSpvLGVbN10qcyxvKmgscypsKX19LGkucHJvdG90eXBlLiR1cGRhdGVWZXJ0aWNlcz1mdW5jdGlvbigpe3RoaXMuX3ZlcnRpY2VzRGlydHk9ITAsdGhpcy4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKX0saS5wcm90b3R5cGUuJG1lYXN1cmVDb250ZW50Qm91bmRzPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX3ZlcnRpY2VzRGlydHkpe3RoaXMuX3ZlcnRpY2VzRGlydHk9ITE7dmFyIGU9dGhpcy4kcmVuZGVyTm9kZSxpPWUudmVydGljZXM7aWYoaS5sZW5ndGgpe3RoaXMuX2JvdW5kcy5zZXRUbyhOdW1iZXIuTUFYX1ZBTFVFLE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1JTl9WQUxVRSxOdW1iZXIuTUlOX1ZBTFVFKTtmb3IodmFyIHI9MCxuPWkubGVuZ3RoO24+cjtyKz0yKXt2YXIgYT1pW3JdLG89aVtyKzFdO3RoaXMuX2JvdW5kcy54PmEmJih0aGlzLl9ib3VuZHMueD1hKSx0aGlzLl9ib3VuZHMud2lkdGg8YSYmKHRoaXMuX2JvdW5kcy53aWR0aD1hKSx0aGlzLl9ib3VuZHMueT5vJiYodGhpcy5fYm91bmRzLnk9byksdGhpcy5fYm91bmRzLmhlaWdodDxvJiYodGhpcy5fYm91bmRzLmhlaWdodD1vKX10aGlzLl9ib3VuZHMud2lkdGgtPXRoaXMuX2JvdW5kcy54LHRoaXMuX2JvdW5kcy5oZWlnaHQtPXRoaXMuX2JvdW5kcy55fWVsc2UgdGhpcy5fYm91bmRzLnNldFRvKDAsMCwwLDApO2UuYm91bmRzLmNvcHlGcm9tKHRoaXMuX2JvdW5kcyl9dC5jb3B5RnJvbSh0aGlzLl9ib3VuZHMpfSxpfSh0LkJpdG1hcCk7dC5NZXNoPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuTWVzaFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC4kbG9jYWxlX3N0cmluZ3M9dC4kbG9jYWxlX3N0cmluZ3N8fHt9LHQuJGxvY2FsZV9zdHJpbmdzLnpoX0NOPXQuJGxvY2FsZV9zdHJpbmdzLnpoX0NOfHx7fTt2YXIgZT10LiRsb2NhbGVfc3RyaW5ncy56aF9DTjtlWzEwMDFdPVwi5om+5LiN5YiwRWdyZXTlhaXlj6Pnsbs6IHswfeOAglwiLGVbMTAwMl09XCJFZ3JldOWFpeWPo+exuyB7MH0g5b+F6aG757un5om/6IeqZWdyZXQuRGlzcGxheU9iamVjdOOAglwiLGVbMTAwM109XCLlj4LmlbAgezB9IOS4jeiDveS4uiBudWxs44CCXCIsZVsxMDA0XT1cIuaXoOazleWwhuWvueixoea3u+WKoOS4uuWug+eahOS4gOS4quWtkOWvueixoe+8iOaIluWtkOWvueixoeeahOWtkOWvueixoeetie+8ieeahOWtkOWvueixoeOAglwiLGVbMTAwNV09XCLkuI3og73lsIblr7nosaHmt7vliqDkuLrlhbboh6rouqvnmoTlrZDlr7nosaHjgIJcIixlWzEwMDZdPVwi5o+Q5L6b55qEIERpc3BsYXlPYmplY3Qg5b+F6aG75piv6LCD55So6ICF55qE5a2Q57qn44CCXCIsZVsxMDA3XT1cIuS4uuWPguaVsOaMh+WumueahOe0ouW8leS4jeWcqOiMg+WbtOWGheOAglwiLGVbMTAwOF09XCLlrp7kvovljJbljZXkvovlh7rplJnvvIzkuI3lhYHorrjlrp7kvovljJblpJrkuKogezB9IOWvueixoeOAglwiLGVbMTAwOV09XCLnsbsgezB9IOS4jeWPr+S7peS9v+eUqOWxnuaApyB7MX1cIixlWzEwMTBdPVwi57G7IHswfSDlsZ7mgKcgezF9IOaYr+WPquivu+eahFwiLGVbMTAxMV09XCLmtYHplJnor6/jgIJVUkw6IHswfVwiLGVbMTAxMl09XCLlj4LmlbAgezB9IOeahOexu+Wei+W/hemhu+S4uiBDbGFzc+OAglwiLGVbMTAxM109XCLlj5jph4/otYvlgLzkuLpOYU7vvIzor7fmn6XnnIvku6PnoIHvvIFcIixlWzEwMTRdPVwi57G7IHswfSDluLjph48gezF9IOaYr+WPquivu+eahFwiLGVbMTAxNV09XCJ4bWwgbm90IGZvdW5kIVwiLGVbMTAxNl09XCJ7MH3lt7Lnu4/lup/lvINcIixlWzEwMTddPVwiSlNPTuaWh+S7tuagvOW8j+S4jeato+ehrjogezB9XFxuZGF0YTogezF9XCIsZVsxMDE4XT1cIjnlrqvmoLzorr7nva7plJnor69cIixlWzEwMTldPVwi572R57uc5byC5bi4OnswfVwiLGVbMTAyMF09XCLml6Dms5XliJ3lp4vljJbnnYDoibLlmahcIixlWzEwMjFdPVwi5b2T5YmN5rWP6KeI5Zmo5LiN5pSv5oyBd2ViZ2xcIixlWzEwMjJdPVwiezB9IEFyZ3VtZW50RXJyb3JcIixlWzEwMjNdPVwi5q2k5pa55rOV5ZyoU2Nyb2xsVmlld+WGheS4jeWPr+eUqCFcIixlWzEwMjVdPVwi6YGH5Yiw5paH5Lu25bC+XCIsZVsxMDI2XT1cIkVuY29kaW5nRXJyb3IhIFRoZSBjb2RlIHBvaW50IHswfSBjb3VsZCBub3QgYmUgZW5jb2RlZC5cIixlWzEwMjddPVwiRGVjb2RpbmdFcnJvclwiLGVbMTAyOF09XCLosIPnlKjkuobmnKrphY3nva7nmoTms6jlhaXop4TliJk6ezB944CCIOivt+WFiOWcqOmhueebruWIneWni+WMlumHjOmFjee9ruaMh+WumueahOazqOWFpeinhOWIme+8jOWGjeiwg+eUqOWvueW6lOWNleS+i+OAglwiLGVbMTAyOV09XCJGdW5jdGlvbi5wcm90b3R5cGUuYmluZCAtIHdoYXQgaXMgdHJ5aW5nIHRvIGJlIGJvdW5kIGlzIG5vdCBjYWxsYWJsZVwiLGVbMTAzM109XCLot6jln5/lm77niYfkuI3lj6/ku6Xkvb/nlKh0b0RhdGFVUkzmnaXovazmjaLmiJBiYXNlNjRcIixlWzEwMzRdPSfpn7PkuZDmlofku7bop6PnoIHlpLHotKXvvJpcInswfVwi77yM6K+35L2/55So5qCH5YeG55qE6L2s5o2i5bel5YW36YeN5paw6L2s5o2i5LiLbXAz44CCJyxlWzEwMzVdPVwiTmF0aXZlIOS4i+aaguacquWunueOsOatpOWKn+iDve+8gVwiLGVbMTAzNl09XCLlo7Dpn7Plt7LlgZzmraLvvIzor7fph43mlrDosIPnlKggU291bmQucGxheSgpIOadpeaSreaUvuWjsOmfs++8gVwiLGVbMTAzN109XCLpnZ7mraPnoa7nmoRibG9i5Yqg6L2977yBXCIsZVsxMDM4XT1cIlhNTCDmoLzlvI/plJnor68hXCIsZVsxMDM5XT1cIui3qOWfn+WbvueJh+S4jeiDveiOt+WPluWDj+e0oOS/oeaBryFcIixlWzEwNDBdPVwiaGl0VGVzdFBvaW50IOS4jeiDveWvuei3qOWfn+WbvueJh+i/m+ihjOajgOa1iyEg6K+35qOA5p+l6K+l5pi+56S65a+56LGh5YaF5piv5ZCm5ZCr5pyJ6Leo5Z+f5YWD57SgXCIsZVsxMDQxXT1cInswfSDlt7Llup/lvIMs6K+35L2/55SoIHsxfSDku6Pmm79cIixlWzEwNDJdPVwiZHJhd1RvVGV4dHVyZeaWueazleS8oOWFpeeahOWMuuWfn+WQhOS4quWPguaVsOmcgOimgeS4uuaVtOaVsCzlkKbliJnmn5DkupvmtY/op4jlmajnu5jliLbkvJrlh7rnjrDlvILluLhcIixlWzEwNDNdPVwiezB9IOS4reWtmOWcqOe8luivkemUmeivr++8jOWxnuaAp+WQjSA6IHsxfe+8jOWxnuaAp+WAvCA6IHsyfVwiLGVbMTA0NF09XCLlvZPliY3nmoQgcnVudGltZSDniYjmnKzkuI3mlK/mjIHop4bpopHmkq3mlL4s6K+35L2/55So5pyA5paw55qE54mI5pysXCIsZVsxMDQ1XT1cIuayoeacieiuvue9ruimgeWKoOi9veeahOi1hOa6kOWcsOWdgFwiLGVbMTA0Nl09XCJCaXRtYXBUZXh0IOaJvuS4jeWIsOWvueW6lOWtl+espjp7MH3vvIzor7fmo4Dmn6XphY3nva7mlofku7ZcIixlWzEwNDddPVwiZWdyZXQubG9jYWxTdG9yYWdlLnNldEl0ZW3kv53lrZjlpLHotKUsa2V5PXswfSZ2YWx1ZT17MX1cIixlWzEwNDhdPVwi6KeG6aKR5Yqg6L295aSx6LSlXCIsZVsxMDQ5XT1cIuWjsOmfs+WcqOayoeacieWKoOi9veWujOS5i+WJjeS4jeWFgeiuuOaSreaUvlwiLGVbMTA1MF09XCJFeHRlcm5hbEludGVyZmFjZeiwg+eUqOS6hmpz5rKh5pyJ5rOo5YaM55qE5pa55rOVOiB7MH1cIixlWzNlM109XCLkuLvpopjphY3nva7mlofku7bliqDovb3lpLHotKU6IHswfVwiLGVbMzAwMV09XCLmib7kuI3liLDkuLvpopjkuK3miYDphY3nva7nmoTnmq7ogqTnsbvlkI06IHswfVwiLGVbMzAwMl09J+e0ouW8lTpcInswfVwi6LaF5Ye66ZuG5ZCI5YWD57Sg57Si5byV6IyD5Zu0JyxlWzMwMDNdPVwi5Zyo5q2k57uE5Lu25Lit5LiN5Y+v55So77yM6Iul5q2k57uE5Lu25Li65a655Zmo57G777yM6K+35L2/55SoXCIsZVszMDA0XT1cImFkZENoaWxkKCl7MH1hZGRFbGVtZW50KCnku6Pmm79cIixlWzMwMDVdPVwiYWRkQ2hpbGRBdCgpezB9YWRkRWxlbWVudEF0KCnku6Pmm79cIixlWzMwMDZdPVwicmVtb3ZlQ2hpbGQoKXswfXJlbW92ZUVsZW1lbnQoKeS7o+abv1wiLGVbMzAwN109XCJyZW1vdmVDaGlsZEF0KCl7MH1yZW1vdmVFbGVtZW50QXQoKeS7o+abv1wiLGVbMzAwOF09XCJzZXRDaGlsZEluZGV4KCl7MH1zZXRFbGVtZW50SW5kZXgoKeS7o+abv1wiLGVbMzAwOV09XCJzd2FwQ2hpbGRyZW4oKXswfXN3YXBFbGVtZW50cygp5Luj5pu/XCIsZVszMDEwXT1cInN3YXBDaGlsZHJlbkF0KCl7MH1zd2FwRWxlbWVudHNBdCgp5Luj5pu/XCIsZVszMDExXT0n57Si5byVOlwiezB9XCLotoXlh7rlj6/op4blhYPntKDntKLlvJXojIPlm7QnLGVbMzAxMl09XCLmraTmlrnms5XlnKhTY3JvbGxlcue7hOS7tuWGheS4jeWPr+eUqCFcIixlWzMwMTNdPVwiVUlTdGFnZeaYr0dVSeagueWuueWZqO+8jOWPquiDveacieS4gOS4quatpOWunuS+i+WcqOaYvuekuuWIl+ihqOS4re+8gVwiLGVbMzAxNF09XCLorr7nva7lhajlsY/mqKHlvI/lpLHotKVcIixlWzMxMDBdPVwi5b2T5YmN5rWP6KeI5Zmo5LiN5pSv5oyBV2ViU29ja2V0XCIsZVszMTAxXT1cIuivt+WFiOi/nuaOpVdlYlNvY2tldFwiLGVbMzEwMl09XCLor7flhYjorr7nva50eXBl5Li65LqM6L+b5Yi257G75Z6LXCIsZVs0ZTNdPVwiQW4gQm9uZSBjYW5ub3QgYmUgYWRkZWQgYXMgYSBjaGlsZCB0byBpdHNlbGYgb3Igb25lIG9mIGl0cyBjaGlsZHJlbiAob3IgY2hpbGRyZW4ncyBjaGlsZHJlbiwgZXRjLilcIixlWzQwMDFdPVwiQWJzdHJhY3QgY2xhc3MgY2FuIG5vdCBiZSBpbnN0YW50aWF0ZWQhXCIsZVs0MDAyXT1cIlVubmFtZWQgZGF0YSFcIixlWzQwMDNdPVwiTm9uc3VwcG9ydCB2ZXJzaW9uIVwifShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7fShlPXQubG9jYWxTdG9yYWdlfHwodC5sb2NhbFN0b3JhZ2U9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7ci5pbmRleE9mKHQpPDAmJnIucHVzaCh0KX1mdW5jdGlvbiBpKHQpe3ZhciBlPXIuaW5kZXhPZih0KTtyZXR1cm4gZT49MD8oci5zcGxpY2UoZSwxKSwhMCk6ITF9dmFyIHI9W107dC4kcHVzaFNvdW5kQ2hhbm5lbD1lLHQuJHBvcFNvdW5kQ2hhbm5lbD1pfShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpLGZ1bmN0aW9uKHQpe30oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7fShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLm9uU3VjY2Vzc0Z1bmM9bnVsbCx0aGlzLm9uU3VjY2Vzc1RoaXNPYmplY3Q9bnVsbCx0aGlzLm9uRXJyb3JGdW5jPW51bGwsdGhpcy5vbkVycm9yVGhpc09iamVjdD1udWxsLHRoaXMuZG93bmxvYWRpbmdTaXplRnVuYz1udWxsLHRoaXMuZG93bmxvYWRpbmdTaXplVGhpc09iamVjdD1udWxsLHRoaXMub25SZXNwb25zZUhlYWRlckZ1bmM9bnVsbCx0aGlzLm9uUmVzcG9uc2VIZWFkZXJUaGlzT2JqZWN0PW51bGx9cmV0dXJuIGUuY3JlYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGUucHJvbWlzZU9iamVjdExpc3QubGVuZ3RoP2UucHJvbWlzZU9iamVjdExpc3QucG9wKCk6bmV3IHQuUHJvbWlzZU9iamVjdH0sZS5wcm90b3R5cGUub25TdWNjZXNzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMub25TdWNjZXNzRnVuYyYmdGhpcy5vblN1Y2Nlc3NGdW5jLmFwcGx5KHRoaXMub25TdWNjZXNzVGhpc09iamVjdCx0KSx0aGlzLmRlc3Ryb3koKX0sZS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLm9uRXJyb3JGdW5jJiZ0aGlzLm9uRXJyb3JGdW5jLmFwcGx5KHRoaXMub25FcnJvclRoaXNPYmplY3QsdCksdGhpcy5kZXN0cm95KCl9LGUucHJvdG90eXBlLmRvd25sb2FkaW5nU2l6ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLmRvd25sb2FkaW5nU2l6ZUZ1bmMmJnRoaXMuZG93bmxvYWRpbmdTaXplRnVuYy5hcHBseSh0aGlzLmRvd25sb2FkaW5nU2l6ZVRoaXNPYmplY3QsdCl9LGUucHJvdG90eXBlLm9uUmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5vblJlc3BvbnNlSGVhZGVyRnVuYyYmdGhpcy5vblJlc3BvbnNlSGVhZGVyRnVuYy5hcHBseSh0aGlzLm9uUmVzcG9uc2VIZWFkZXJUaGlzT2JqZWN0LHQpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5vblN1Y2Nlc3NGdW5jPXZvaWQgMCx0aGlzLm9uU3VjY2Vzc1RoaXNPYmplY3Q9dm9pZCAwLHRoaXMub25FcnJvckZ1bmM9dm9pZCAwLHRoaXMub25FcnJvclRoaXNPYmplY3Q9dm9pZCAwLHRoaXMuZG93bmxvYWRpbmdTaXplRnVuYz12b2lkIDAsdGhpcy5kb3dubG9hZGluZ1NpemVUaGlzT2JqZWN0PXZvaWQgMCx0aGlzLm9uUmVzcG9uc2VIZWFkZXJGdW5jPXZvaWQgMCx0aGlzLm9uUmVzcG9uc2VIZWFkZXJUaGlzT2JqZWN0PXZvaWQgMCxlLnByb21pc2VPYmplY3RMaXN0LnB1c2godGhpcyl9LGV9KCk7ZS5wcm9taXNlT2JqZWN0TGlzdD1bXSx0LlByb21pc2VPYmplY3Q9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5Qcm9taXNlT2JqZWN0XCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5HRVQ9XCJHRVRcIixlLlBPU1Q9XCJQT1NUXCIsdC5IdHRwTWV0aG9kPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuSHR0cE1ldGhvZFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7fShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5URVhUPVwidGV4dFwiLGUuQVJSQVlfQlVGRkVSPVwiYXJyYXlidWZmZXJcIix0Lkh0dHBSZXNwb25zZVR5cGU9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5IdHRwUmVzcG9uc2VUeXBlXCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQsZSl7dmFyIGk9dC5taW5YPGUubWluWD90Lm1pblg6ZS5taW5YLHI9dC5taW5ZPGUubWluWT90Lm1pblk6ZS5taW5ZLG49dC5tYXhYPmUubWF4WD90Lm1heFg6ZS5tYXhYLGE9dC5tYXhZPmUubWF4WT90Lm1heFk6ZS5tYXhZO3JldHVybihuLWkpKihhLXIpfXZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlKXt0aGlzLmRpcnR5TGlzdD1bXSx0aGlzLmhhc0NsaXBSZWN0PSExLHRoaXMuY2xpcFdpZHRoPTAsdGhpcy5jbGlwSGVpZ2h0PTAsdGhpcy5jbGlwQXJlYT0wLHRoaXMuY2xpcFJlY3RDaGFuZ2VkPSExLHRoaXMuJGRpcnR5UmVnaW9uUG9saWN5PXQuRGlydHlSZWdpb25Qb2xpY3kuT04sdGhpcy5yb290PWV9cmV0dXJuIHIucHJvdG90eXBlLnNldENsaXBSZWN0PWZ1bmN0aW9uKHQsZSl7dGhpcy5oYXNDbGlwUmVjdD0hMCx0aGlzLmNsaXBSZWN0Q2hhbmdlZD0hMCx0aGlzLmNsaXBXaWR0aD1NYXRoLmNlaWwodCksdGhpcy5jbGlwSGVpZ2h0PU1hdGguY2VpbChlKSx0aGlzLmNsaXBBcmVhPXRoaXMuY2xpcFdpZHRoKnRoaXMuY2xpcEhlaWdodH0sci5wcm90b3R5cGUuYWRkUmVnaW9uPWZ1bmN0aW9uKGkpe3ZhciByPWkubWluWCxuPWkubWluWSxhPWkubWF4WCxvPWkubWF4WTtpZih0aGlzLmhhc0NsaXBSZWN0JiYoMD5yJiYocj0wKSwwPm4mJihuPTApLGE+dGhpcy5jbGlwV2lkdGgmJihhPXRoaXMuY2xpcFdpZHRoKSxvPnRoaXMuY2xpcEhlaWdodCYmKG89dGhpcy5jbGlwSGVpZ2h0KSkscj49YXx8bj49bylyZXR1cm4hMTtpZih0aGlzLmNsaXBSZWN0Q2hhbmdlZClyZXR1cm4hMDt2YXIgcz10aGlzLmRpcnR5TGlzdCxoPWUuUmVnaW9uLmNyZWF0ZSgpO3JldHVybiBzLnB1c2goaC5zZXRUbyhyLG4sYSxvKSksdGhpcy4kZGlydHlSZWdpb25Qb2xpY3khPXQuRGlydHlSZWdpb25Qb2xpY3kuT0ZGJiZ0aGlzLm1lcmdlRGlydHlMaXN0KHMpLCEwfSxyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmRpcnR5TGlzdCxpPXQubGVuZ3RoLHI9MDtpPnI7cisrKWUuUmVnaW9uLnJlbGVhc2UodFtyXSk7dC5sZW5ndGg9MH0sci5wcm90b3R5cGUuZ2V0RGlydHlSZWdpb25zPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5kaXJ0eUxpc3Q7aWYodGhpcy4kZGlydHlSZWdpb25Qb2xpY3k9PXQuRGlydHlSZWdpb25Qb2xpY3kuT0ZGfHx0LkNhcGFiaWxpdGllcy5ydW50aW1lVHlwZT09dC5SdW50aW1lVHlwZS5OQVRJVkUmJiF0W1wibmF0aXZlXCJdLiRzdXBwb3J0Q2FudmFzKXt0aGlzLmNsaXBSZWN0Q2hhbmdlZD0hMCx0aGlzLmNsZWFyKCk7dmFyIHI9ZS5SZWdpb24uY3JlYXRlKCk7aWYodGhpcy5oYXNDbGlwUmVjdClpLnB1c2goci5zZXRUbygwLDAsdGhpcy5jbGlwV2lkdGgsdGhpcy5jbGlwSGVpZ2h0KSk7ZWxzZXt2YXIgbj10aGlzLnJvb3QuJGdldE9yaWdpbmFsQm91bmRzKCk7aS5wdXNoKHIuc2V0VG8obi54LG4ueSxuLndpZHRoLG4uaGVpZ2h0KSl9fWVsc2UgaWYodGhpcy5jbGlwUmVjdENoYW5nZWQpe3RoaXMuY2xpcFJlY3RDaGFuZ2VkPSExLHRoaXMuY2xlYXIoKTt2YXIgcj1lLlJlZ2lvbi5jcmVhdGUoKTtpLnB1c2goci5zZXRUbygwLDAsdGhpcy5jbGlwV2lkdGgsdGhpcy5jbGlwSGVpZ2h0KSl9ZWxzZSBmb3IoO3RoaXMubWVyZ2VEaXJ0eUxpc3QoaSk7KTt2YXIgYT10aGlzLmRpcnR5TGlzdC5sZW5ndGg7aWYoYT4wKWZvcih2YXIgbz0wO2E+bztvKyspdGhpcy5kaXJ0eUxpc3Rbb10uaW50VmFsdWVzKCk7cmV0dXJuIHRoaXMuZGlydHlMaXN0fSxyLnByb3RvdHlwZS5tZXJnZURpcnR5TGlzdD1mdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aDtpZigyPnIpcmV0dXJuITE7Zm9yKHZhciBuPXRoaXMuaGFzQ2xpcFJlY3QsYT1yPjM/TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOjAsbz0wLHM9MCxoPTAsbD0wO3ItMT5sO2wrKyl7dmFyIHU9dFtsXTtuJiYoaCs9dS5hcmVhKTtmb3IodmFyIGM9bCsxO3I+YztjKyspe3ZhciBwPXRbY10sZD1pKHUscCktdS5hcmVhLXAuYXJlYTthPmQmJihvPWwscz1jLGE9ZCl9fWlmKG4mJmgvdGhpcy5jbGlwQXJlYT4uOTUmJih0aGlzLmNsaXBSZWN0Q2hhbmdlZD0hMCksbyE9cyl7dmFyIGY9dFtzXTtyZXR1cm4gdFtvXS51bmlvbihmKSxlLlJlZ2lvbi5yZWxlYXNlKGYpLHQuc3BsaWNlKHMsMSksITB9cmV0dXJuITF9LHIucHJvdG90eXBlLnNldERpcnR5UmVnaW9uUG9saWN5PWZ1bmN0aW9uKHQpe3RoaXMuJGRpcnR5UmVnaW9uUG9saWN5PXR9LHJ9KCk7ZS5EaXJ0eVJlZ2lvbj1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LnN5cy5EaXJ0eVJlZ2lvblwiKX0oZT10LnN5c3x8KHQuc3lzPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbihlKXt2YXIgaT1mdW5jdGlvbihpKXtmdW5jdGlvbiByKHIpe3ZhciBuPWkuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5pc1N0YWdlPSExLG4uJHJlbmRlck5vZGU9bmV3IGUuQml0bWFwTm9kZSxuLnJlbmRlckJ1ZmZlcj1udWxsLG4ub2Zmc2V0WD0wLG4ub2Zmc2V0WT0wLG4ub2Zmc2V0TWF0cml4PW5ldyB0Lk1hdHJpeCxuLmlzRGlydHk9ITEsbi5uZWVkVXBkYXRlUmVnaW9ucz0hMSxuLmRpcnR5Tm9kZUxpc3Q9W10sbi5kaXJ0eUxpc3Q9bnVsbCxuLnNpemVDaGFuZ2VkPSExLG4uJGRpcnR5UmVnaW9uUG9saWN5PXQuRGlydHlSZWdpb25Qb2xpY3kuT04sbi5yb290PXIsbi5kaXJ0eVJlZ2lvbj1uZXcgZS5EaXJ0eVJlZ2lvbihyKSxuLmlzU3RhZ2U9ciBpbnN0YW5jZW9mIHQuU3RhZ2Usbi5kaXJ0eU5vZGVzPXQuY3JlYXRlTWFwKCksbn1yZXR1cm4gX19leHRlbmRzKHIsaSksci5jcmVhdGU9ZnVuY3Rpb24oaSl7dmFyIHI9bmV3IHQuc3lzLkRpc3BsYXlMaXN0KGkpO3RyeXt2YXIgbj1uZXcgZS5SZW5kZXJCdWZmZXI7ci5yZW5kZXJCdWZmZXI9bn1jYXRjaChhKXtyZXR1cm4gbnVsbH1yZXR1cm4gci5yb290PWkscn0sci5wcm90b3R5cGUuJGdldFJlbmRlck5vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcmVuZGVyTm9kZX0sci5wcm90b3R5cGUuJHVwZGF0ZT1mdW5jdGlvbihlKXt2YXIgaT10aGlzLnJvb3Q7aWYobnVsbD09aSlyZXR1cm4hMTtpLiRyZW1vdmVGbGFnc1VwKDc2OCk7dmFyIHI9dGhpcy4kcmVuZGVyTm9kZSxuPWkuJGdldENvbmNhdGVuYXRlZE1hdHJpeCgpO2lmKGU9PXQuRGlydHlSZWdpb25Qb2xpY3kuT0ZGKXt2YXIgYT1pLiRwYXJlbnREaXNwbGF5TGlzdDtpZih0aGlzLm5lZWRVcGRhdGVSZWdpb25zJiZ0aGlzLnVwZGF0ZURpcnR5UmVnaW9ucygpLCFhKXJldHVybiExO3ZhciBvPXIucmVuZGVyTWF0cml4O28uY29weUZyb20obik7dmFyIHM9YS5yb290O3MhPT1pLiRzdGFnZSYmaS4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4QXQocyxvKX1lbHNle3ZhciBoPWkuJGdldE9yaWdpbmFsQm91bmRzKCksYT1pLiRwYXJlbnREaXNwbGF5TGlzdCxsPXIucmVuZGVyUmVnaW9uO2lmKHRoaXMubmVlZFVwZGF0ZVJlZ2lvbnMmJnRoaXMudXBkYXRlRGlydHlSZWdpb25zKCksIWEpcmV0dXJuIGwuc2V0VG8oMCwwLDAsMCksci5tb3ZlZD0hMSwhMTtpZighci5tb3ZlZClyZXR1cm4hMTtyLm1vdmVkPSExO3ZhciBvPXIucmVuZGVyTWF0cml4O28uY29weUZyb20obik7dmFyIHM9YS5yb290O3MhPT1pLiRzdGFnZSYmaS4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4QXQocyxvKSxsLnVwZGF0ZVJlZ2lvbihoLG8pfXJldHVybiEwfSxyLnByb3RvdHlwZS5zZXRDbGlwUmVjdD1mdW5jdGlvbih0LGUpe3RoaXMuZGlydHlSZWdpb24uc2V0Q2xpcFJlY3QodCxlKSx0aGlzLnJlbmRlckJ1ZmZlci5yZXNpemUodCxlKX0sci5wcm90b3R5cGUubWFya0RpcnR5PWZ1bmN0aW9uKHQpe3ZhciBlPXQuJGhhc2hDb2RlO2lmKCF0aGlzLmRpcnR5Tm9kZXNbZV0mJih0aGlzLmRpcnR5Tm9kZXNbZV09ITAsdGhpcy5kaXJ0eU5vZGVMaXN0LnB1c2godCksIXRoaXMubmVlZFVwZGF0ZVJlZ2lvbnMpKXt0aGlzLm5lZWRVcGRhdGVSZWdpb25zPSEwLHRoaXMuaXNEaXJ0eT0hMDt2YXIgaT10aGlzLnJvb3QuJHBhcmVudERpc3BsYXlMaXN0O2kmJmkubWFya0RpcnR5KHRoaXMpfX0sci5wcm90b3R5cGUudXBkYXRlRGlydHlSZWdpb25zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kaXJ0eU5vZGVMaXN0O3RoaXMuZGlydHlOb2RlTGlzdD1bXSx0aGlzLmRpcnR5Tm9kZXM9dC5jcmVhdGVNYXAoKSx0aGlzLm5lZWRVcGRhdGVSZWdpb25zPSExO2Zvcih2YXIgaT10aGlzLmRpcnR5UmVnaW9uLHI9ZS5sZW5ndGgsbj0wO3I+bjtuKyspe3ZhciBhPWVbbl0sbz1hLiRnZXRSZW5kZXJOb2RlKCk7aWYobylpZihvLm5lZWRSZWRyYXc9ITEsdGhpcy5pc1N0YWdlKXtvLnJlbmRlckFscGhhPjAmJm8ucmVuZGVyVmlzaWJsZSYmaS5hZGRSZWdpb24oby5yZW5kZXJSZWdpb24pJiYoby5uZWVkUmVkcmF3PSEwKTt2YXIgcz1hLiR1cGRhdGUodGhpcy4kZGlydHlSZWdpb25Qb2xpY3kpO28ucmVuZGVyQWxwaGE+MCYmby5yZW5kZXJWaXNpYmxlJiYoc3x8IW8ubmVlZFJlZHJhdykmJmkuYWRkUmVnaW9uKG8ucmVuZGVyUmVnaW9uKSYmKG8ubmVlZFJlZHJhdz0hMCl9ZWxzZXtpLmFkZFJlZ2lvbihvLnJlbmRlclJlZ2lvbikmJihvLm5lZWRSZWRyYXc9ITApO3ZhciBzPWEuJHVwZGF0ZSh0aGlzLiRkaXJ0eVJlZ2lvblBvbGljeSk7KHN8fCFvLm5lZWRSZWRyYXcpJiZpLmFkZFJlZ2lvbihvLnJlbmRlclJlZ2lvbikmJihvLm5lZWRSZWRyYXc9ITApfX1yZXR1cm4gdGhpcy5kaXJ0eUxpc3Q9aS5nZXREaXJ0eVJlZ2lvbnMoKSx0aGlzLmRpcnR5TGlzdH0sci5wcm90b3R5cGUuZHJhd1RvU3VyZmFjZT1mdW5jdGlvbigpe3ZhciBpPTAscj10aGlzLmRpcnR5TGlzdDtpZihyJiZyLmxlbmd0aD4wKXt0aGlzLmlzU3RhZ2V8fHRoaXMuY2hhbmdlU3VyZmFjZVNpemUoKTt2YXIgbj10aGlzLnJlbmRlckJ1ZmZlcjtpZihuLmJlZ2luQ2xpcCh0aGlzLmRpcnR5TGlzdCx0aGlzLm9mZnNldFgsdGhpcy5vZmZzZXRZKSxyPXRoaXMuJGRpcnR5UmVnaW9uUG9saWN5PT10LkRpcnR5UmVnaW9uUG9saWN5Lk9GRj9udWxsOnRoaXMuZGlydHlMaXN0LGk9ZS5zeXN0ZW1SZW5kZXJlci5yZW5kZXIodGhpcy5yb290LG4sdGhpcy5vZmZzZXRNYXRyaXgsciksbi5lbmRDbGlwKCksIXRoaXMuaXNTdGFnZSl7dmFyIGE9bi5zdXJmYWNlLG89dGhpcy4kcmVuZGVyTm9kZTtvLmRyYXdEYXRhLmxlbmd0aD0wO3ZhciBzPWEud2lkdGgsaD1hLmhlaWdodDt0aGlzLmJpdG1hcERhdGE/KHRoaXMuYml0bWFwRGF0YS5zb3VyY2U9YSx0aGlzLmJpdG1hcERhdGEud2lkdGg9cyx0aGlzLmJpdG1hcERhdGEuaGVpZ2h0PWgpOnRoaXMuYml0bWFwRGF0YT1uZXcgdC5CaXRtYXBEYXRhKGEpLG8uaW1hZ2U9dGhpcy5iaXRtYXBEYXRhLG8uaW1hZ2VXaWR0aD1zLG8uaW1hZ2VIZWlnaHQ9aCxvLmRyYXdJbWFnZSgwLDAscyxoLC10aGlzLm9mZnNldFgsLXRoaXMub2Zmc2V0WSxzLGgpfX1yZXR1cm4gdGhpcy5kaXJ0eUxpc3Q9bnVsbCx0aGlzLmRpcnR5UmVnaW9uLmNsZWFyKCksdGhpcy5pc0RpcnR5PSExLGl9LHIucHJvdG90eXBlLmNoYW5nZVN1cmZhY2VTaXplPWZ1bmN0aW9uKCl7dmFyIHQ9KHRoaXMucm9vdCx0aGlzLm9mZnNldFgpLGU9dGhpcy5vZmZzZXRZLGk9dGhpcy5yb290LiRnZXRPcmlnaW5hbEJvdW5kcygpO3RoaXMub2Zmc2V0WD0taS54LHRoaXMub2Zmc2V0WT0taS55LHRoaXMub2Zmc2V0TWF0cml4LnNldFRvKDEsMCwwLDEsdGhpcy5vZmZzZXRYLHRoaXMub2Zmc2V0WSk7dmFyIHI9dGhpcy5yZW5kZXJCdWZmZXIsbj1NYXRoLm1heCgyNTcsaS53aWR0aCksYT1NYXRoLm1heCgyNTcsaS5oZWlnaHQpOyh0aGlzLm9mZnNldFghPXR8fHRoaXMub2Zmc2V0WSE9ZXx8ci5zdXJmYWNlLndpZHRoIT1ufHxyLnN1cmZhY2UuaGVpZ2h0IT1hKSYmKHRoaXMuc2l6ZUNoYW5nZWQ/ci5yZXNpemVUbyhuLGEsdGhpcy5vZmZzZXRYLXQsdGhpcy5vZmZzZXRZLWUpOih0aGlzLnNpemVDaGFuZ2VkPSEwLHIucmVzaXplKG4sYSkpKX0sci5wcm90b3R5cGUuc2V0RGlydHlSZWdpb25Qb2xpY3k9ZnVuY3Rpb24odCl7dGhpcy4kZGlydHlSZWdpb25Qb2xpY3k9dCx0aGlzLmRpcnR5UmVnaW9uLnNldERpcnR5UmVnaW9uUG9saWN5KHQpLHRoaXMucmVuZGVyQnVmZmVyLnNldERpcnR5UmVnaW9uUG9saWN5KHQpfSxyfSh0Lkhhc2hPYmplY3QpO2UuRGlzcGxheUxpc3Q9aSxfX3JlZmxlY3QoaS5wcm90b3R5cGUsXCJlZ3JldC5zeXMuRGlzcGxheUxpc3RcIixbXCJlZ3JldC5zeXMuUmVuZGVyYWJsZVwiXSl9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe30oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoaSxyLG4sYSl7aWYociYmKHQubG9nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsaT1cIlwiLHI9MDt0PnI7cisrKWkrPWFyZ3VtZW50c1tyXStcIiBcIjtlLiRsb2dUb0ZQUyhpKSxjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLG8oYXJndW1lbnRzKSl9KSxsPWE/e306YSxyPSEhcix0aGlzLnNob3dGUFM9ISFpLHRoaXMuc2hvd0xvZz1yLCF0aGlzLmZwcyl7dmFyIHM9dm9pZCAwPT09YS54PzA6YS54LGM9dm9pZCAwPT09YS55PzA6YS55O2g9dGhpcy5mcHM9bmV3IEZQUyh0aGlzLnN0YWdlLGkscixuLGEpLGgueD1zLGgueT1jO2Zvcih2YXIgcD11Lmxlbmd0aCxkPTA7cD5kO2QrKyloLnVwZGF0ZUluZm8odVtkXSk7dT1udWxsfX1mdW5jdGlvbiByKHQpe3Q9ISF0LHRoaXMuX3Nob3dQYWludFJlY3QhPXQmJih0aGlzLl9zaG93UGFpbnRSZWN0PXQsdD8odGhpcy5zdGFnZURpc3BsYXlMaXN0fHwodGhpcy5zdGFnZURpc3BsYXlMaXN0PWUuRGlzcGxheUxpc3QuY3JlYXRlKHRoaXMuc3RhZ2UpKSx0aGlzLnN0YWdlLiRkaXNwbGF5TGlzdD10aGlzLnN0YWdlRGlzcGxheUxpc3QpOnRoaXMuc3RhZ2UuJGRpc3BsYXlMaXN0PXRoaXMuc2NyZWVuRGlzcGxheUxpc3QpfWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBlPXQubGVuZ3RoLGk9W10scj0wO2U+cjtyKyspe3ZhciBuPXRbcl07aVtyXT1bbi5taW5YLG4ubWluWSxuLndpZHRoLG4uaGVpZ2h0XSxuLndpZHRoLT0xLG4uaGVpZ2h0LT0xfXZhciBhPXRoaXMucGFpbnRMaXN0O2EucHVzaChpKSxhLmxlbmd0aD4xJiZhLnNoaWZ0KCk7dmFyIG89dGhpcy5zY3JlZW5EaXNwbGF5TGlzdC5yZW5kZXJCdWZmZXIscz1vLmNvbnRleHQ7cy5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApLHMuY2xlYXJSZWN0KDAsMCxvLnN1cmZhY2Uud2lkdGgsby5zdXJmYWNlLmhlaWdodCkscy5kcmF3SW1hZ2UodGhpcy5zdGFnZURpc3BsYXlMaXN0LnJlbmRlckJ1ZmZlci5zdXJmYWNlLDAsMCksZT1hLmxlbmd0aDtmb3IodmFyIHI9MDtlPnI7cisrKXtpPWFbcl07Zm9yKHZhciBoPWkubGVuZ3RoLTE7aD49MDtoLS0pe3ZhciBsPWlbaF07dGhpcy5kcmF3RGlydHlSZWN0KGxbMF0sbFsxXSxsWzJdLGxbM10scyl9fXMuc2F2ZSgpLHMuYmVnaW5QYXRoKCksZT10Lmxlbmd0aDtmb3IodmFyIHI9MDtlPnI7cisrKXt2YXIgbj10W3JdO3MuY2xlYXJSZWN0KG4ubWluWCxuLm1pblksbi53aWR0aCxuLmhlaWdodCkscy5yZWN0KG4ubWluWCxuLm1pblksbi53aWR0aCxuLmhlaWdodCl9cy5jbGlwKCkscy5kcmF3SW1hZ2UodGhpcy5zdGFnZURpc3BsYXlMaXN0LnJlbmRlckJ1ZmZlci5zdXJmYWNlLDAsMCkscy5yZXN0b3JlKCl9ZnVuY3Rpb24gYSh0LGUsaSxyLG4pe24uc3Ryb2tlU3R5bGU9XCJyZ2IoMjU1LDAsMClcIixuLmxpbmVXaWR0aD01LG4uc3Ryb2tlUmVjdCh0LS41LGUtLjUsaSxyKX1mdW5jdGlvbiBvKHQpe2Zvcih2YXIgZT1bXSxpPTA7aTx0Lmxlbmd0aDtpKyspZS5wdXNoKHRbaV0pO3JldHVybiBlfXZhciBzPWZ1bmN0aW9uKG8pe2Z1bmN0aW9uIHMoZSxzLGgpe3ZhciBsPW8uY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbC5pc1BsYXlpbmc9ITEsZXx8dC4kZXJyb3IoMTAwMyxcImJ1ZmZlclwiKSxsLmVudHJ5Q2xhc3NOYW1lPWgsbC5zdGFnZT1zLGwuc2NyZWVuRGlzcGxheUxpc3Q9bC5jcmVhdGVEaXNwbGF5TGlzdChzLGUpLGwuc2hvd0ZQUz0hMSxsLnNob3dMb2c9ITEsbC5fc2hvd1BhaW50UmVjdD0hMSxsLnN0YWdlRGlzcGxheUxpc3Q9bnVsbCxsLnBhaW50TGlzdD1bXSxsLmRpc3BsYXlGUFM9aSxsLnNob3dQYWludFJlY3Q9cixsLmRyYXdQYWludFJlY3Q9bixsLmRyYXdEaXJ0eVJlY3Q9YSxsfXJldHVybiBfX2V4dGVuZHMocyxvKSxzLnByb3RvdHlwZS5jcmVhdGVEaXNwbGF5TGlzdD1mdW5jdGlvbih0LGkpe3ZhciByPW5ldyBlLkRpc3BsYXlMaXN0KHQpO3JldHVybiByLnJlbmRlckJ1ZmZlcj1pLHQuJGRpc3BsYXlMaXN0PXIscn0scy5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXshdGhpcy5pc1BsYXlpbmcmJnRoaXMuc3RhZ2UmJihlLiRUZW1wU3RhZ2U9ZS4kVGVtcFN0YWdlfHx0aGlzLnN0YWdlLHRoaXMuaXNQbGF5aW5nPSEwLHRoaXMucm9vdHx8dGhpcy5pbml0aWFsaXplKCksZS4kdGlja2VyLiRhZGRQbGF5ZXIodGhpcykpfSxzLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIGU7XG5pZih0aGlzLmVudHJ5Q2xhc3NOYW1lJiYoZT10LmdldERlZmluaXRpb25CeU5hbWUodGhpcy5lbnRyeUNsYXNzTmFtZSkpLGUpe3ZhciBpPW5ldyBlO3RoaXMucm9vdD1pLGkgaW5zdGFuY2VvZiB0LkRpc3BsYXlPYmplY3Q/dGhpcy5zdGFnZS5hZGRDaGlsZChpKTp0LiRlcnJvcigxMDAyLHRoaXMuZW50cnlDbGFzc05hbWUpfWVsc2UgdC4kZXJyb3IoMTAwMSx0aGlzLmVudHJ5Q2xhc3NOYW1lKX0scy5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMucGF1c2UoKSx0aGlzLnN0YWdlPW51bGx9LHMucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5pc1BsYXlpbmcmJih0aGlzLmlzUGxheWluZz0hMSxlLiR0aWNrZXIuJHJlbW92ZVBsYXllcih0aGlzKSl9LHMucHJvdG90eXBlLiRyZW5kZXI9ZnVuY3Rpb24oZSxpKXsodGhpcy5zaG93RlBTfHx0aGlzLnNob3dMb2cpJiZ0aGlzLnN0YWdlLmFkZENoaWxkKHRoaXMuZnBzKTt2YXIgcj10aGlzLnN0YWdlLG49dC5nZXRUaW1lcigpLGE9ci4kZGlzcGxheUxpc3QudXBkYXRlRGlydHlSZWdpb25zKCksbz10LmdldFRpbWVyKCk7YT1hLmNvbmNhdCgpO3ZhciBzPXIuJGRpc3BsYXlMaXN0LmRyYXdUb1N1cmZhY2UoKTt0aGlzLl9zaG93UGFpbnRSZWN0JiZ0aGlzLmRyYXdQYWludFJlY3QoYSk7dmFyIGg9dC5nZXRUaW1lcigpO2lmKGUmJnRoaXMuc2hvd0ZQUyl7dmFyIGw9MDtpZihzPjApe2Zvcih2YXIgdT1hLmxlbmd0aCxjPTAscD0wO3U+cDtwKyspYys9YVtwXS5hcmVhO2w9TWF0aC5jZWlsKDFlMypjLyhyLnN0YWdlV2lkdGgqci5zdGFnZUhlaWdodCkpLzEwfXRoaXMuZnBzLnVwZGF0ZShzLGwsby1uLGgtbyxpKX19LHMucHJvdG90eXBlLnVwZGF0ZVN0YWdlU2l6ZT1mdW5jdGlvbihlLGkpe3ZhciByPXRoaXMuc3RhZ2U7ci4kc3RhZ2VXaWR0aD1lLHIuJHN0YWdlSGVpZ2h0PWksdGhpcy5zY3JlZW5EaXNwbGF5TGlzdC5zZXRDbGlwUmVjdChlLGkpLHRoaXMuc3RhZ2VEaXNwbGF5TGlzdCYmdGhpcy5zdGFnZURpc3BsYXlMaXN0LnNldENsaXBSZWN0KGUsaSksci5kaXNwYXRjaEV2ZW50V2l0aCh0LkV2ZW50LlJFU0laRSksci4kaW52YWxpZGF0ZSghMCl9LHN9KHQuSGFzaE9iamVjdCk7ZS5QbGF5ZXI9cyxfX3JlZmxlY3Qocy5wcm90b3R5cGUsXCJlZ3JldC5zeXMuUGxheWVyXCIpO3ZhciBoLGwsdT1bXTtlLiRsb2dUb0ZQUz1mdW5jdGlvbih0KXtyZXR1cm4gaD92b2lkIGgudXBkYXRlSW5mbyh0KTp2b2lkIHUucHVzaCh0KX0sRlBTPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIoZSxyLG4sYSxvKXtpLmNhbGwodGhpcyksdGhpcy5pc0ZQUz0hMCx0aGlzLmluZm9MaW5lcz1bXSx0aGlzLnRvdGFsVGltZT0wLHRoaXMudG90YWxUaWNrPTAsdGhpcy5sYXN0VGltZT0wLHRoaXMuZHJhd0NhbGxzPTAsdGhpcy5kaXJ0eVJhdGlvPTAsdGhpcy5jb3N0RGlydHk9MCx0aGlzLmNvc3RSZW5kZXI9MCx0aGlzLmNvc3RUaWNrZXI9MCx0aGlzLl9zdGFnZT1lLHRoaXMuc2hvd0ZQUz1yLHRoaXMuc2hvd0xvZz1uLHRoaXMubG9nRmlsdGVyPWEsdGhpcy50b3VjaENoaWxkcmVuPSExLHRoaXMudG91Y2hFbmFibGVkPSExLHRoaXMuc3R5bGVzPW8sdGhpcy5mcHNEaXNwbGF5PW5ldyB0LkZQU0Rpc3BsYXkoZSxyLG4sYSxvKSx0aGlzLmFkZENoaWxkKHRoaXMuZnBzRGlzcGxheSk7dmFyIHM7dHJ5e3M9YT9uZXcgUmVnRXhwKGEpOm51bGx9Y2F0Y2goaCl7dC5sb2coaCl9dGhpcy5maWx0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHM/cy50ZXN0KHQpOiFhfHwwPT10LmluZGV4T2YoYSl9fXJldHVybiBfX2V4dGVuZHMocixpKSxyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oaSxyLG4sYSxvKXt2YXIgcz10LmdldFRpbWVyKCk7aWYodGhpcy50b3RhbFRpbWUrPXMtdGhpcy5sYXN0VGltZSx0aGlzLmxhc3RUaW1lPXMsdGhpcy50b3RhbFRpY2srKyx0aGlzLmRyYXdDYWxscys9aSx0aGlzLmRpcnR5UmF0aW8rPXIsdGhpcy5jb3N0RGlydHkrPW4sdGhpcy5jb3N0UmVuZGVyKz1hLHRoaXMuY29zdFRpY2tlcis9byx0aGlzLnRvdGFsVGltZT49MWUzKXt2YXIgaD1NYXRoLm1pbihNYXRoLmNlaWwoMWUzKnRoaXMudG90YWxUaWNrL3RoaXMudG90YWxUaW1lKSxlLiR0aWNrZXIuJGZyYW1lUmF0ZSksbD1NYXRoLnJvdW5kKHRoaXMuZHJhd0NhbGxzL3RoaXMudG90YWxUaWNrKSx1PU1hdGgucm91bmQodGhpcy5kaXJ0eVJhdGlvL3RoaXMudG90YWxUaWNrKSxjPU1hdGgucm91bmQodGhpcy5jb3N0RGlydHkvdGhpcy50b3RhbFRpY2spLHA9TWF0aC5yb3VuZCh0aGlzLmNvc3RSZW5kZXIvdGhpcy50b3RhbFRpY2spLGQ9TWF0aC5yb3VuZCh0aGlzLmNvc3RUaWNrZXIvdGhpcy50b3RhbFRpY2spO3RoaXMuZnBzRGlzcGxheS51cGRhdGUoe2ZwczpoLGRyYXc6bCxkaXJ0eTp1LGNvc3RUaWNrZXI6ZCxjb3N0RGlydHk6Yyxjb3N0UmVuZGVyOnB9KSx0aGlzLnRvdGFsVGljaz0wLHRoaXMudG90YWxUaW1lPXRoaXMudG90YWxUaW1lJTFlMyx0aGlzLmRyYXdDYWxscz0wLHRoaXMuZGlydHlSYXRpbz0wLHRoaXMuY29zdERpcnR5PTAsdGhpcy5jb3N0UmVuZGVyPTAsdGhpcy5jb3N0VGlja2VyPTB9fSxyLnByb3RvdHlwZS51cGRhdGVJbmZvPWZ1bmN0aW9uKHQpe3QmJnRoaXMuc2hvd0xvZyYmdGhpcy5maWx0ZXIodCkmJnRoaXMuZnBzRGlzcGxheS51cGRhdGVJbmZvKHQpfSxyfSh0LlNwcml0ZSksdC53YXJuPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsbyhhcmd1bWVudHMpKX0sdC5lcnJvcj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSxvKGFyZ3VtZW50cykpfSx0LmFzc2VydD1mdW5jdGlvbigpe2NvbnNvbGUuYXNzZXJ0LmFwcGx5KGNvbnNvbGUsbyhhcmd1bWVudHMpKX0sdC5sb2c9ZnVuY3Rpb24oKXtjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLG8oYXJndW1lbnRzKSl9fShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC5PcmllbnRhdGlvbk1vZGU9e0FVVE86XCJhdXRvXCIsUE9SVFJBSVQ6XCJwb3J0cmFpdFwiLExBTkRTQ0FQRTpcImxhbmRzY2FwZVwiLExBTkRTQ0FQRV9GTElQUEVEOlwibGFuZHNjYXBlRmxpcHBlZFwifX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKHQpe3ZhciBlPVtdLGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5taW5YPTAsdGhpcy5taW5ZPTAsdGhpcy5tYXhYPTAsdGhpcy5tYXhZPTAsdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5hcmVhPTAsdGhpcy5tb3ZlZD0hMX1yZXR1cm4gdC5yZWxlYXNlPWZ1bmN0aW9uKHQpe2UucHVzaCh0KX0sdC5jcmVhdGU9ZnVuY3Rpb24oKXt2YXIgaT1lLnBvcCgpO3JldHVybiBpfHwoaT1uZXcgdCksaX0sdC5wcm90b3R5cGUuc2V0VG89ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIHRoaXMubWluWD10LHRoaXMubWluWT1lLHRoaXMubWF4WD1pLHRoaXMubWF4WT1yLHRoaXMudXBkYXRlQXJlYSgpLHRoaXN9LHQucHJvdG90eXBlLmludFZhbHVlcz1mdW5jdGlvbigpe3RoaXMubWluWD1NYXRoLmZsb29yKHRoaXMubWluWCksdGhpcy5taW5ZPU1hdGguZmxvb3IodGhpcy5taW5ZKSx0aGlzLm1heFg9TWF0aC5jZWlsKHRoaXMubWF4WCksdGhpcy5tYXhZPU1hdGguY2VpbCh0aGlzLm1heFkpLHRoaXMudXBkYXRlQXJlYSgpfSx0LnByb3RvdHlwZS51cGRhdGVBcmVhPWZ1bmN0aW9uKCl7dGhpcy53aWR0aD10aGlzLm1heFgtdGhpcy5taW5YLHRoaXMuaGVpZ2h0PXRoaXMubWF4WS10aGlzLm1pblksdGhpcy5hcmVhPXRoaXMud2lkdGgqdGhpcy5oZWlnaHR9LHQucHJvdG90eXBlLnVuaW9uPWZ1bmN0aW9uKHQpe3RoaXMubWluWD50Lm1pblgmJih0aGlzLm1pblg9dC5taW5YKSx0aGlzLm1pblk+dC5taW5ZJiYodGhpcy5taW5ZPXQubWluWSksdGhpcy5tYXhYPHQubWF4WCYmKHRoaXMubWF4WD10Lm1heFgpLHRoaXMubWF4WTx0Lm1heFkmJih0aGlzLm1heFk9dC5tYXhZKSx0aGlzLnVwZGF0ZUFyZWEoKX0sdC5wcm90b3R5cGUuaW50ZXJzZWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pblg8dC5taW5YJiYodGhpcy5taW5YPXQubWluWCksdGhpcy5tYXhYPnQubWF4WCYmKHRoaXMubWF4WD10Lm1heFgpLHRoaXMubWluWD49dGhpcy5tYXhYP3ZvaWQgdGhpcy5zZXRFbXB0eSgpOih0aGlzLm1pblk8dC5taW5ZJiYodGhpcy5taW5ZPXQubWluWSksdGhpcy5tYXhZPnQubWF4WSYmKHRoaXMubWF4WT10Lm1heFkpLHRoaXMubWluWT49dGhpcy5tYXhZP3ZvaWQgdGhpcy5zZXRFbXB0eSgpOnZvaWQgdGhpcy51cGRhdGVBcmVhKCkpfSx0LnByb3RvdHlwZS5zZXRFbXB0eT1mdW5jdGlvbigpe3RoaXMubWluWD0wLHRoaXMubWluWT0wLHRoaXMubWF4WD0wLHRoaXMubWF4WT0wLHRoaXMud2lkdGg9MCx0aGlzLmhlaWdodD0wLHRoaXMuYXJlYT0wfSx0LnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkdGg8PTB8fHRoaXMuaGVpZ2h0PD0wfSx0LnByb3RvdHlwZS5pbnRlcnNlY3RzPWZ1bmN0aW9uKHQpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiExO3ZhciBlPXRoaXMubWluWD50Lm1pblg/dGhpcy5taW5YOnQubWluWCxpPXRoaXMubWF4WDx0Lm1heFg/dGhpcy5tYXhYOnQubWF4WDtyZXR1cm4gZT5pPyExOihlPXRoaXMubWluWT50Lm1pblk/dGhpcy5taW5ZOnQubWluWSxpPXRoaXMubWF4WTx0Lm1heFk/dGhpcy5tYXhZOnQubWF4WSxpPj1lKX0sdC5wcm90b3R5cGUudXBkYXRlUmVnaW9uPWZ1bmN0aW9uKHQsZSl7aWYoMD09dC53aWR0aHx8MD09dC5oZWlnaHQpcmV0dXJuIHZvaWQgdGhpcy5zZXRFbXB0eSgpO3ZhciBpLHIsbixhLG89ZSxzPW8uYSxoPW8uYixsPW8uYyx1PW8uZCxjPW8udHgscD1vLnR5LGQ9dC54LGY9dC55LGc9ZCt0LndpZHRoLHk9Zit0LmhlaWdodDtpZigxPT1zJiYwPT1oJiYwPT1sJiYxPT11KWk9ZCtjLTEscj1mK3AtMSxuPWcrYysxLGE9eStwKzE7ZWxzZXt2YXIgJD1zKmQrbCpmK2Msdj1oKmQrdSpmK3AsbT1zKmcrbCpmK2MsYj1oKmcrdSpmK3AseD1zKmcrbCp5K2MsVD1oKmcrdSp5K3AsXz1zKmQrbCp5K2MsTz1oKmQrdSp5K3AsRT0wOyQ+bSYmKEU9JCwkPW0sbT1FKSx4Pl8mJihFPXgseD1fLF89RSksaT0oeD4kPyQ6eCktMSxuPShtPl8/bTpfKSsxLHY+YiYmKEU9dix2PWIsYj1FKSxUPk8mJihFPVQsVD1PLE89RSkscj0oVD52P3Y6VCktMSxhPShiPk8/YjpPKSsxfXRoaXMubWluWD1pLHRoaXMubWluWT1yLHRoaXMubWF4WD1uLHRoaXMubWF4WT1hLHRoaXMud2lkdGg9bi1pLHRoaXMuaGVpZ2h0PWEtcix0aGlzLmFyZWE9dGhpcy53aWR0aCp0aGlzLmhlaWdodH0sdH0oKTt0LlJlZ2lvbj1pLF9fcmVmbGVjdChpLnByb3RvdHlwZSxcImVncmV0LnN5cy5SZWdpb25cIil9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7fShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKGUpe3ZhciBpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gZS5jYWxsKHRoaXMpfHx0aGlzfXJldHVybiBfX2V4dGVuZHMoaSxlKSxpLnByb3RvdHlwZS5jYWxjdWxhdGVTdGFnZVNpemU9ZnVuY3Rpb24oZSxpLHIsbixhKXt2YXIgbz1pLHM9cixoPW4sbD1hLHU9aS9ofHwwLGM9ci9sfHwwO3N3aXRjaChlKXtjYXNlIHQuU3RhZ2VTY2FsZU1vZGUuRVhBQ1RfRklUOmJyZWFrO2Nhc2UgdC5TdGFnZVNjYWxlTW9kZS5GSVhFRF9IRUlHSFQ6aD1NYXRoLnJvdW5kKGkvYyk7YnJlYWs7Y2FzZSB0LlN0YWdlU2NhbGVNb2RlLkZJWEVEX1dJRFRIOmw9TWF0aC5yb3VuZChyL3UpO2JyZWFrO2Nhc2UgdC5TdGFnZVNjYWxlTW9kZS5OT19CT1JERVI6dT5jP3M9TWF0aC5yb3VuZChsKnUpOm89TWF0aC5yb3VuZChoKmMpO2JyZWFrO2Nhc2UgdC5TdGFnZVNjYWxlTW9kZS5TSE9XX0FMTDp1PmM/bz1NYXRoLnJvdW5kKGgqYyk6cz1NYXRoLnJvdW5kKGwqdSk7YnJlYWs7Y2FzZSB0LlN0YWdlU2NhbGVNb2RlLkZJWEVEX05BUlJPVzp1PmM/aD1NYXRoLnJvdW5kKGkvYyk6bD1NYXRoLnJvdW5kKHIvdSk7YnJlYWs7Y2FzZSB0LlN0YWdlU2NhbGVNb2RlLkZJWEVEX1dJREU6dT5jP2w9TWF0aC5yb3VuZChyL3UpOmg9TWF0aC5yb3VuZChpL2MpO2JyZWFrO2RlZmF1bHQ6aD1pLGw9cn1yZXR1cm4gbyUyIT0wJiYobys9MSkscyUyIT0wJiYocys9MSkse3N0YWdlV2lkdGg6aCxzdGFnZUhlaWdodDpsLGRpc3BsYXlXaWR0aDpvLGRpc3BsYXlIZWlnaHQ6c319LGl9KHQuSGFzaE9iamVjdCk7ZS5EZWZhdWx0U2NyZWVuQWRhcHRlcj1pLF9fcmVmbGVjdChpLnByb3RvdHlwZSxcImVncmV0LnN5cy5EZWZhdWx0U2NyZWVuQWRhcHRlclwiLFtcImVncmV0LnN5cy5JU2NyZWVuQWRhcHRlclwiXSl9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5OT19TQ0FMRT1cIm5vU2NhbGVcIixlLlNIT1dfQUxMPVwic2hvd0FsbFwiLGUuTk9fQk9SREVSPVwibm9Cb3JkZXJcIixlLkVYQUNUX0ZJVD1cImV4YWN0Rml0XCIsZS5GSVhFRF9XSURUSD1cImZpeGVkV2lkdGhcIixlLkZJWEVEX0hFSUdIVD1cImZpeGVkSGVpZ2h0XCIsZS5GSVhFRF9OQVJST1c9XCJmaXhlZE5hcnJvd1wiLGUuRklYRURfV0lERT1cImZpeGVkV2lkZVwiLHQuU3RhZ2VTY2FsZU1vZGU9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5TdGFnZVNjYWxlTW9kZVwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKHQpe30oZT10LnN5c3x8KHQuc3lzPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbihlKXtlLiRTVEFSVF9USU1FPTAsZS4kaW52YWxpZGF0ZVJlbmRlckZsYWc9ITEsZS4kcmVxdWVzdFJlbmRlcmluZ0ZsYWc9ITE7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7dGhpcy5wbGF5ZXJMaXN0PVtdLHRoaXMuY2FsbEJhY2tMaXN0PVtdLHRoaXMudGhpc09iamVjdExpc3Q9W10sdGhpcy4kZnJhbWVSYXRlPTMwLHRoaXMubGFzdFRpbWVTdGFtcD0wLHRoaXMuY29zdEVudGVyRnJhbWU9MCxlLiR0aWNrZXImJnQuJGVycm9yKDEwMDgsXCJlZ3JldC5zeXMuU3lzdGVtVGlja2VyXCIpLGUuJFNUQVJUX1RJTUU9RGF0ZS5ub3coKSx0aGlzLmZyYW1lRGVsdGFUaW1lPTFlMy90aGlzLiRmcmFtZVJhdGUsdGhpcy5sYXN0Q291bnQ9dGhpcy5mcmFtZUludGVydmFsPU1hdGgucm91bmQoNmU0L3RoaXMuJGZyYW1lUmF0ZSl9cmV0dXJuIGkucHJvdG90eXBlLiRhZGRQbGF5ZXI9ZnVuY3Rpb24odCl7LTE9PXRoaXMucGxheWVyTGlzdC5pbmRleE9mKHQpJiYoZWdyZXRfc3RhZ2VzLnB1c2godC5zdGFnZSksdGhpcy5wbGF5ZXJMaXN0PXRoaXMucGxheWVyTGlzdC5jb25jYXQoKSx0aGlzLnBsYXllckxpc3QucHVzaCh0KSl9LGkucHJvdG90eXBlLiRyZW1vdmVQbGF5ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wbGF5ZXJMaXN0LmluZGV4T2YodCk7aWYoLTEhPT1lKXt2YXIgaT1lZ3JldF9zdGFnZXMuaW5kZXhPZih0LnN0YWdlKTtlZ3JldF9zdGFnZXMuc3BsaWNlKGksMSksdGhpcy5wbGF5ZXJMaXN0PXRoaXMucGxheWVyTGlzdC5jb25jYXQoKSx0aGlzLnBsYXllckxpc3Quc3BsaWNlKGUsMSl9fSxpLnByb3RvdHlwZS4kc3RhcnRUaWNrPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRUaWNrSW5kZXgodCxlKTstMT09aSYmKHRoaXMuY29uY2F0VGljaygpLHRoaXMuY2FsbEJhY2tMaXN0LnB1c2godCksdGhpcy50aGlzT2JqZWN0TGlzdC5wdXNoKGUpKX0saS5wcm90b3R5cGUuJHN0b3BUaWNrPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRUaWNrSW5kZXgodCxlKTstMSE9aSYmKHRoaXMuY29uY2F0VGljaygpLHRoaXMuY2FsbEJhY2tMaXN0LnNwbGljZShpLDEpLHRoaXMudGhpc09iamVjdExpc3Quc3BsaWNlKGksMSkpfSxpLnByb3RvdHlwZS5nZXRUaWNrSW5kZXg9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dGhpcy5jYWxsQmFja0xpc3Qscj10aGlzLnRoaXNPYmplY3RMaXN0LG49aS5sZW5ndGgtMTtuPj0wO24tLSlpZihpW25dPT10JiZyW25dPT1lKXJldHVybiBuO3JldHVybi0xfSxpLnByb3RvdHlwZS5jb25jYXRUaWNrPWZ1bmN0aW9uKCl7dGhpcy5jYWxsQmFja0xpc3Q9dGhpcy5jYWxsQmFja0xpc3QuY29uY2F0KCksdGhpcy50aGlzT2JqZWN0TGlzdD10aGlzLnRoaXNPYmplY3RMaXN0LmNvbmNhdCgpfSxpLnByb3RvdHlwZS4kc2V0RnJhbWVSYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlPStlfHwwLDA+PWU/ITE6dGhpcy4kZnJhbWVSYXRlPT1lPyExOih0aGlzLiRmcmFtZVJhdGU9ZSxlPjYwJiYoZT02MCksdC5DYXBhYmlsaXRpZXMucnVudGltZVR5cGU9PXQuUnVudGltZVR5cGUuTkFUSVZFJiYoZWdyZXRfbmF0aXZlLnNldEZyYW1lUmF0ZShlKSxlPTYwKSx0aGlzLmZyYW1lRGVsdGFUaW1lPTFlMy9lLHRoaXMubGFzdENvdW50PXRoaXMuZnJhbWVJbnRlcnZhbD1NYXRoLnJvdW5kKDZlNC9lKSwhMCl9LGkucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBpPXQuZ2V0VGltZXIoKSxyPXRoaXMuY2FsbEJhY2tMaXN0LG49dGhpcy50aGlzT2JqZWN0TGlzdCxhPXIubGVuZ3RoLG89ZS4kcmVxdWVzdFJlbmRlcmluZ0ZsYWcscz10LmdldFRpbWVyKCk7dGhpcy5jYWxsTGF0ZXJBc3luY3MoKTtmb3IodmFyIGg9MDthPmg7aCsrKXJbaF0uY2FsbChuW2hdLHMpJiYobz0hMCk7dmFyIGw9dC5nZXRUaW1lcigpLHU9cy10aGlzLmxhc3RUaW1lU3RhbXA7aWYodGhpcy5sYXN0VGltZVN0YW1wPXMsdT49dGhpcy5mcmFtZURlbHRhVGltZSl0aGlzLmxhc3RDb3VudD10aGlzLmZyYW1lSW50ZXJ2YWw7ZWxzZXtpZih0aGlzLmxhc3RDb3VudC09MWUzLHRoaXMubGFzdENvdW50PjApcmV0dXJuIHZvaWQobyYmdGhpcy5yZW5kZXIoITEsdGhpcy5jb3N0RW50ZXJGcmFtZStsLWkpKTt0aGlzLmxhc3RDb3VudCs9dGhpcy5mcmFtZUludGVydmFsfXRoaXMucmVuZGVyKCEwLHRoaXMuY29zdEVudGVyRnJhbWUrbC1pKTt2YXIgYz10LmdldFRpbWVyKCk7dGhpcy5icm9hZGNhc3RFbnRlckZyYW1lKCk7dmFyIHA9dC5nZXRUaW1lcigpO3RoaXMuY29zdEVudGVyRnJhbWU9cC1jfSxpLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCxpKXt2YXIgcj10aGlzLnBsYXllckxpc3Qsbj1yLmxlbmd0aDtpZigwIT1uKXt0aGlzLmNhbGxMYXRlcnMoKSxlLiRpbnZhbGlkYXRlUmVuZGVyRmxhZyYmKHRoaXMuYnJvYWRjYXN0UmVuZGVyKCksZS4kaW52YWxpZGF0ZVJlbmRlckZsYWc9ITEpO2Zvcih2YXIgYT0wO24+YTthKyspclthXS4kcmVuZGVyKHQsaSk7ZS4kcmVxdWVzdFJlbmRlcmluZ0ZsYWc9ITF9fSxpLnByb3RvdHlwZS5icm9hZGNhc3RFbnRlckZyYW1lPWZ1bmN0aW9uKCl7dmFyIGU9dC5EaXNwbGF5T2JqZWN0LiRlbnRlckZyYW1lQ2FsbEJhY2tMaXN0LGk9ZS5sZW5ndGg7aWYoMCE9aSl7ZT1lLmNvbmNhdCgpO2Zvcih2YXIgcj0wO2k+cjtyKyspZVtyXS5kaXNwYXRjaEV2ZW50V2l0aCh0LkV2ZW50LkVOVEVSX0ZSQU1FKX19LGkucHJvdG90eXBlLmJyb2FkY2FzdFJlbmRlcj1mdW5jdGlvbigpe3ZhciBlPXQuRGlzcGxheU9iamVjdC4kcmVuZGVyQ2FsbEJhY2tMaXN0LGk9ZS5sZW5ndGg7aWYoMCE9aSl7ZT1lLmNvbmNhdCgpO2Zvcih2YXIgcj0wO2k+cjtyKyspZVtyXS5kaXNwYXRjaEV2ZW50V2l0aCh0LkV2ZW50LlJFTkRFUil9fSxpLnByb3RvdHlwZS5jYWxsTGF0ZXJzPWZ1bmN0aW9uKCl7dmFyIGUsaSxyO2lmKHQuJGNhbGxMYXRlckZ1bmN0aW9uTGlzdC5sZW5ndGg+MCYmKGU9dC4kY2FsbExhdGVyRnVuY3Rpb25MaXN0LHQuJGNhbGxMYXRlckZ1bmN0aW9uTGlzdD1bXSxpPXQuJGNhbGxMYXRlclRoaXNMaXN0LHQuJGNhbGxMYXRlclRoaXNMaXN0PVtdLHI9dC4kY2FsbExhdGVyQXJnc0xpc3QsdC4kY2FsbExhdGVyQXJnc0xpc3Q9W10pLGUpZm9yKHZhciBuPWUubGVuZ3RoLGE9MDtuPmE7YSsrKXt2YXIgbz1lW2FdO251bGwhPW8mJm8uYXBwbHkoaVthXSxyW2FdKX19LGkucHJvdG90eXBlLmNhbGxMYXRlckFzeW5jcz1mdW5jdGlvbigpe2lmKHQuJGNhbGxBc3luY0Z1bmN0aW9uTGlzdC5sZW5ndGg+MCl7dmFyIGU9dC4kY2FsbEFzeW5jRnVuY3Rpb25MaXN0LGk9dC4kY2FsbEFzeW5jVGhpc0xpc3Qscj10LiRjYWxsQXN5bmNBcmdzTGlzdDt0LiRjYWxsQXN5bmNGdW5jdGlvbkxpc3Q9W10sdC4kY2FsbEFzeW5jVGhpc0xpc3Q9W10sdC4kY2FsbEFzeW5jQXJnc0xpc3Q9W107Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBhPWVbbl07bnVsbCE9YSYmYS5hcHBseShpW25dLHJbbl0pfX19LGl9KCk7ZS5TeXN0ZW1UaWNrZXI9aSxfX3JlZmxlY3QoaS5wcm90b3R5cGUsXCJlZ3JldC5zeXMuU3lzdGVtVGlja2VyXCIpLGUuJHRpY2tlcj1uZXcgZS5TeXN0ZW1UaWNrZXJ9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSksZWdyZXRfc3RhZ2VzPVtdO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKGUpe3ZhciBpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCl7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLm1heFRvdWNoZXM9MCxpLnVzZVRvdWNoZXNDb3VudD0wLGkudG91Y2hEb3duVGFyZ2V0PXt9LGkubGFzdFRvdWNoWD0tMSxpLmxhc3RUb3VjaFk9LTEsaS5zdGFnZT10LGl9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLGkucHJvdG90eXBlLiRpbml0TWF4VG91Y2hlcz1mdW5jdGlvbigpe3RoaXMubWF4VG91Y2hlcz10aGlzLnN0YWdlLiRtYXhUb3VjaGVzfSxpLnByb3RvdHlwZS5vblRvdWNoQmVnaW49ZnVuY3Rpb24oZSxpLHIpe2lmKCEodGhpcy51c2VUb3VjaGVzQ291bnQ+PXRoaXMubWF4VG91Y2hlcykpe3RoaXMubGFzdFRvdWNoWD1lLHRoaXMubGFzdFRvdWNoWT1pO3ZhciBuPXRoaXMuZmluZFRhcmdldChlLGkpO251bGw9PXRoaXMudG91Y2hEb3duVGFyZ2V0W3JdJiYodGhpcy50b3VjaERvd25UYXJnZXRbcl09bix0aGlzLnVzZVRvdWNoZXNDb3VudCsrKSx0LlRvdWNoRXZlbnQuZGlzcGF0Y2hUb3VjaEV2ZW50KG4sdC5Ub3VjaEV2ZW50LlRPVUNIX0JFR0lOLCEwLCEwLGUsaSxyLCEwKX19LGkucHJvdG90eXBlLm9uVG91Y2hNb3ZlPWZ1bmN0aW9uKGUsaSxyKXtpZihudWxsIT10aGlzLnRvdWNoRG93blRhcmdldFtyXSYmKHRoaXMubGFzdFRvdWNoWCE9ZXx8dGhpcy5sYXN0VG91Y2hZIT1pKSl7dGhpcy5sYXN0VG91Y2hYPWUsdGhpcy5sYXN0VG91Y2hZPWk7dmFyIG49dGhpcy5maW5kVGFyZ2V0KGUsaSk7dC5Ub3VjaEV2ZW50LmRpc3BhdGNoVG91Y2hFdmVudChuLHQuVG91Y2hFdmVudC5UT1VDSF9NT1ZFLCEwLCEwLGUsaSxyLCEwKX19LGkucHJvdG90eXBlLm9uVG91Y2hFbmQ9ZnVuY3Rpb24oZSxpLHIpe2lmKG51bGwhPXRoaXMudG91Y2hEb3duVGFyZ2V0W3JdKXt2YXIgbj10aGlzLmZpbmRUYXJnZXQoZSxpKSxhPXRoaXMudG91Y2hEb3duVGFyZ2V0W3JdO2RlbGV0ZSB0aGlzLnRvdWNoRG93blRhcmdldFtyXSx0aGlzLnVzZVRvdWNoZXNDb3VudC0tLHQuVG91Y2hFdmVudC5kaXNwYXRjaFRvdWNoRXZlbnQobix0LlRvdWNoRXZlbnQuVE9VQ0hfRU5ELCEwLCEwLGUsaSxyLCExKSxhPT1uP3QuVG91Y2hFdmVudC5kaXNwYXRjaFRvdWNoRXZlbnQobix0LlRvdWNoRXZlbnQuVE9VQ0hfVEFQLCEwLCEwLGUsaSxyLCExKTp0LlRvdWNoRXZlbnQuZGlzcGF0Y2hUb3VjaEV2ZW50KGEsdC5Ub3VjaEV2ZW50LlRPVUNIX1JFTEVBU0VfT1VUU0lERSwhMCwhMCxlLGksciwhMSl9fSxpLnByb3RvdHlwZS5maW5kVGFyZ2V0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zdGFnZS4kaGl0VGVzdCh0LGUpO3JldHVybiBpfHwoaT10aGlzLnN0YWdlKSxpfSxpfSh0Lkhhc2hPYmplY3QpO2UuVG91Y2hIYW5kbGVyPWksX19yZWZsZWN0KGkucHJvdG90eXBlLFwiZWdyZXQuc3lzLlRvdWNoSGFuZGxlclwiKX0oZT10LnN5c3x8KHQuc3lzPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbihlKXt2YXIgaT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7dmFyIHQ9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LmltYWdlPW51bGwsdC5zbW9vdGhpbmc9ITAsdC5ibGVuZE1vZGU9bnVsbCx0LmFscGhhPTAvMCx0LmZpbHRlcj1udWxsLHQudHlwZT0xLHR9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLGkucHJvdG90eXBlLmRyYXdJbWFnZT1mdW5jdGlvbih0LGUsaSxyLG4sYSxvLHMpe3RoaXMuZHJhd0RhdGEucHVzaCh0LGUsaSxyLG4sYSxvLHMpLHRoaXMucmVuZGVyQ291bnQrK30saS5wcm90b3R5cGUuY2xlYW5CZWZvcmVSZW5kZXI9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5jbGVhbkJlZm9yZVJlbmRlci5jYWxsKHRoaXMpLHRoaXMuaW1hZ2U9bnVsbCx0aGlzLm1hdHJpeD1udWxsLHRoaXMuYmxlbmRNb2RlPW51bGwsdGhpcy5hbHBoYT0wLzAsdGhpcy5maWx0ZXI9bnVsbH0saS4kdXBkYXRlVGV4dHVyZURhdGE9ZnVuY3Rpb24oZSxyLG4sYSxvLHMsaCxsLHUsYyxwLGQsZixnLHksJCx2KXtpZihyKXt2YXIgbT10LiRUZXh0dXJlU2NhbGVGYWN0b3I7aWYoZS5zbW9vdGhpbmc9dixlLmltYWdlPXIsZS5pbWFnZVdpZHRoPWYsZS5pbWFnZUhlaWdodD1nLHkpaS4kdXBkYXRlVGV4dHVyZURhdGFXaXRoU2NhbGU5R3JpZChlLHksbixhLG8scyxoLGwsdSxjLHAsZCk7ZWxzZSBpZigkPT10LkJpdG1hcEZpbGxNb2RlLlNDQUxFKXt2YXIgYj1wL3UqbSx4PWQvYyptO2UuZHJhd0ltYWdlKG4sYSxvLHMsYipoLHgqbCxiKm8seCpzKX1lbHNlIGlmKCQ9PXQuQml0bWFwRmlsbE1vZGUuQ0xJUCl7dmFyIFQ9TWF0aC5taW4odSxwKSxfPU1hdGgubWluKGMsZCksTz1vKm0sRT1zKm07aS5kcmF3Q2xpcEltYWdlKGUsbSxuLGEsTyxFLGgsbCxULF8pfWVsc2UgZm9yKHZhciBPPW8qbSxFPXMqbSxGPTA7cD5GO0YrPXUpZm9yKHZhciB3PTA7ZD53O3crPWMpe3ZhciBUPU1hdGgubWluKHAtRix1KSxfPU1hdGgubWluKGQtdyxjKTtpLmRyYXdDbGlwSW1hZ2UoZSxtLG4sYSxPLEUsaCxsLFQsXyxGLHcpfX19LGkuJHVwZGF0ZVRleHR1cmVEYXRhV2l0aFNjYWxlOUdyaWQ9ZnVuY3Rpb24oZSxpLHIsbixhLG8scyxoLGwsdSxjLHApe3ZhciBkPWEsZj1vO2MtPWwtYSp0LiRUZXh0dXJlU2NhbGVGYWN0b3IscC09dS1vKnQuJFRleHR1cmVTY2FsZUZhY3Rvcjt2YXIgZz1pLngtcyx5PWkueS1oLCQ9Zy90LiRUZXh0dXJlU2NhbGVGYWN0b3Isdj15L3QuJFRleHR1cmVTY2FsZUZhY3RvcixtPWkud2lkdGgvdC4kVGV4dHVyZVNjYWxlRmFjdG9yLGI9aS5oZWlnaHQvdC4kVGV4dHVyZVNjYWxlRmFjdG9yOzA9PWImJihiPTEsdj49ZiYmdi0tKSwwPT1tJiYobT0xLCQ+PWQmJiQtLSk7dmFyIHg9cixUPXgrJCxfPVQrbSxPPWQtJC1tLEU9bixGPUUrdix3PUYrYixSPWYtdi1iLEM9Typ0LiRUZXh0dXJlU2NhbGVGYWN0b3IsUz1SKnQuJFRleHR1cmVTY2FsZUZhY3RvcjtpZigoJCtPKSp0LiRUZXh0dXJlU2NhbGVGYWN0b3I+Y3x8KHYrUikqdC4kVGV4dHVyZVNjYWxlRmFjdG9yPnApcmV0dXJuIHZvaWQgZS5kcmF3SW1hZ2UocixuLGEsbyxzLGgsYyxwKTt2YXIgUD1zLEQ9UCtnLEw9UCsoYy1DKSxNPWMtZy1DLEE9aCxOPUEreSxCPUErcC1TLEk9cC15LVM7dj4wJiYoJD4wJiZlLmRyYXdJbWFnZSh4LEUsJCx2LFAsQSxnLHkpLG0+MCYmZS5kcmF3SW1hZ2UoVCxFLG0sdixELEEsTSx5KSxPPjAmJmUuZHJhd0ltYWdlKF8sRSxPLHYsTCxBLEMseSkpLGI+MCYmKCQ+MCYmZS5kcmF3SW1hZ2UoeCxGLCQsYixQLE4sZyxJKSxtPjAmJmUuZHJhd0ltYWdlKFQsRixtLGIsRCxOLE0sSSksTz4wJiZlLmRyYXdJbWFnZShfLEYsTyxiLEwsTixDLEkpKSxSPjAmJigkPjAmJmUuZHJhd0ltYWdlKHgsdywkLFIsUCxCLGcsUyksbT4wJiZlLmRyYXdJbWFnZShULHcsbSxSLEQsQixNLFMpLE8+MCYmZS5kcmF3SW1hZ2UoXyx3LE8sUixMLEIsQyxTKSl9LGkuZHJhd0NsaXBJbWFnZT1mdW5jdGlvbih0LGUsaSxyLG4sYSxvLHMsaCxsLHUsYyl7dm9pZCAwPT09dSYmKHU9MCksdm9pZCAwPT09YyYmKGM9MCk7dmFyIHA9bytuLWg7cD4wJiYobi09cCkscD1zK2EtbCxwPjAmJihhLT1wKSx0LmRyYXdJbWFnZShpLHIsbi9lLGEvZSx1K28sYytzLG4sYSl9LGl9KGUuUmVuZGVyTm9kZSk7ZS5CaXRtYXBOb2RlPWksX19yZWZsZWN0KGkucHJvdG90eXBlLFwiZWdyZXQuc3lzLkJpdG1hcE5vZGVcIil9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24oZSl7dmFyIGk9W1wibm9uZVwiLFwicm91bmRcIixcInNxdWFyZVwiXSxyPVtcImJldmVsXCIsXCJtaXRlclwiLFwicm91bmRcIl0sbj1mdW5jdGlvbihuKXtmdW5jdGlvbiBhKCl7dmFyIHQ9bi5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LmRpcnR5UmVuZGVyPSEwLHQudHlwZT0zLHR9cmV0dXJuIF9fZXh0ZW5kcyhhLG4pLGEucHJvdG90eXBlLmJlZ2luRmlsbD1mdW5jdGlvbih0LGkscil7dm9pZCAwPT09aSYmKGk9MSk7dmFyIG49bmV3IGUuRmlsbFBhdGg7aWYobi5maWxsQ29sb3I9dCxuLmZpbGxBbHBoYT1pLHIpe3ZhciBhPXRoaXMuZHJhd0RhdGEubGFzdEluZGV4T2Yocik7dGhpcy5kcmF3RGF0YS5zcGxpY2UoYSwwLG4pfWVsc2UgdGhpcy5kcmF3RGF0YS5wdXNoKG4pO3JldHVybiBufSxhLnByb3RvdHlwZS5iZWdpbkdyYWRpZW50RmlsbD1mdW5jdGlvbihpLHIsbixhLG8scyl7dmFyIGg9bmV3IHQuTWF0cml4O28/KGguYT04MTkuMipvLmEsaC5iPTgxOS4yKm8uYixoLmM9ODE5LjIqby5jLGguZD04MTkuMipvLmQsaC50eD1vLnR4LGgudHk9by50eSk6KGguYT0xMDAsaC5kPTEwMCk7dmFyIGw9bmV3IGUuR3JhZGllbnRGaWxsUGF0aDtpZihsLmdyYWRpZW50VHlwZT1pLGwuY29sb3JzPXIsbC5hbHBoYXM9bixsLnJhdGlvcz1hLGwubWF0cml4PWgscyl7dmFyIHU9dGhpcy5kcmF3RGF0YS5sYXN0SW5kZXhPZihzKTt0aGlzLmRyYXdEYXRhLnNwbGljZSh1LDAsbCl9ZWxzZSB0aGlzLmRyYXdEYXRhLnB1c2gobCk7cmV0dXJuIGx9LGEucHJvdG90eXBlLmxpbmVTdHlsZT1mdW5jdGlvbihuLGEsbyxzLGgsbCl7dm9pZCAwPT09byYmKG89MSksdm9pZCAwPT09bCYmKGw9MyksLTE9PWkuaW5kZXhPZihzKSYmKHM9XCJyb3VuZFwiKSwtMT09ci5pbmRleE9mKGgpJiYoaD1cInJvdW5kXCIpO3ZhciB1PW5ldyBlLlN0cm9rZVBhdGg7cmV0dXJuIHUubGluZVdpZHRoPW4sdS5saW5lQ29sb3I9YSx1LmxpbmVBbHBoYT1vLHUuY2Fwcz1zfHx0LkNhcHNTdHlsZS5ST1VORCx1LmpvaW50cz1oLHUubWl0ZXJMaW1pdD1sLHRoaXMuZHJhd0RhdGEucHVzaCh1KSx1fSxhLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuZHJhd0RhdGEubGVuZ3RoPTAsdGhpcy5kaXJ0eVJlbmRlcj0hMH0sYS5wcm90b3R5cGUuY2xlYW5CZWZvcmVSZW5kZXI9ZnVuY3Rpb24oKXt9LGEucHJvdG90eXBlLmNsZWFuPWZ1bmN0aW9uKCl7dGhpcy4kdGV4dHVyZSYmKHQuV2ViR0xVdGlscy5kZWxldGVXZWJHTFRleHR1cmUodGhpcy4kdGV4dHVyZSksdGhpcy4kdGV4dHVyZT1udWxsLHRoaXMuZGlydHlSZW5kZXI9ITApfSxhfShlLlJlbmRlck5vZGUpO2UuR3JhcGhpY3NOb2RlPW4sX19yZWZsZWN0KG4ucHJvdG90eXBlLFwiZWdyZXQuc3lzLkdyYXBoaWNzTm9kZVwiKX0oZT10LnN5c3x8KHQuc3lzPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLnR5cGU9NCxlfXJldHVybiBfX2V4dGVuZHMoZSx0KSxlLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQpe3RoaXMuZHJhd0RhdGEucHVzaCh0KX0sZS5wcm90b3R5cGUuY2xlYW5CZWZvcmVSZW5kZXI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5kcmF3RGF0YSxlPXQubGVuZ3RoLTE7ZT49MDtlLS0pdFtlXS5jbGVhbkJlZm9yZVJlbmRlcigpfSxlLnByb3RvdHlwZS4kZ2V0UmVuZGVyQ291bnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuZHJhd0RhdGEsaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXQrPWVbaV0uJGdldFJlbmRlckNvdW50KCk7cmV0dXJuIHR9LGV9KHQuUmVuZGVyTm9kZSk7dC5Hcm91cE5vZGU9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5zeXMuR3JvdXBOb2RlXCIpfShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKGUpe3ZhciBpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuaW1hZ2U9bnVsbCxpLnNtb290aGluZz0hMCxpLmJvdW5kcz1uZXcgdC5SZWN0YW5nbGUsaS50eXBlPTcsaS52ZXJ0aWNlcz1bXSxpLnV2cz1bXSxpLmluZGljZXM9W10saX1yZXR1cm4gX19leHRlbmRzKGksZSksaS5wcm90b3R5cGUuZHJhd01lc2g9ZnVuY3Rpb24odCxlLGkscixuLGEsbyxzKXt0aGlzLmRyYXdEYXRhLnB1c2godCxlLGkscixuLGEsbyxzKSx0aGlzLnJlbmRlckNvdW50Kyt9LGkucHJvdG90eXBlLmNsZWFuQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuY2xlYW5CZWZvcmVSZW5kZXIuY2FsbCh0aGlzKSx0aGlzLmltYWdlPW51bGwsdGhpcy5tYXRyaXg9bnVsbH0saX0oZS5SZW5kZXJOb2RlKTtlLk1lc2hOb2RlPWksX19yZWZsZWN0KGkucHJvdG90eXBlLFwiZWdyZXQuc3lzLk1lc2hOb2RlXCIpfShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSgpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztpLiRyZW5kZXJCdWZmZXI9bmV3IHQuc3lzLlJlbmRlckJ1ZmZlcjt2YXIgcj1uZXcgdC5CaXRtYXBEYXRhKGkuJHJlbmRlckJ1ZmZlci5zdXJmYWNlKTtyZXR1cm4gci4kZGVsZXRlU291cmNlPSExLGkuX3NldEJpdG1hcERhdGEociksaX1yZXR1cm4gX19leHRlbmRzKGksZSksaS5wcm90b3R5cGUuZHJhd1RvVGV4dHVyZT1mdW5jdGlvbihlLGkscil7aWYodm9pZCAwPT09ciYmKHI9MSksaSYmKDA9PWkud2lkdGh8fDA9PWkuaGVpZ2h0KSlyZXR1cm4hMTt2YXIgbj1pfHxlLiRnZXRPcmlnaW5hbEJvdW5kcygpO2lmKDA9PW4ud2lkdGh8fDA9PW4uaGVpZ2h0KXJldHVybiExO3IvPXQuJFRleHR1cmVTY2FsZUZhY3Rvcjt2YXIgYT0obi54K24ud2lkdGgpKnIsbz0obi55K24uaGVpZ2h0KSpyO2kmJihhPW4ud2lkdGgqcixvPW4uaGVpZ2h0KnIpO3ZhciBzPXRoaXMuJHJlbmRlckJ1ZmZlcjtpZighcylyZXR1cm4hMTtzLnJlc2l6ZShhLG8pLHRoaXMuX2JpdG1hcERhdGEud2lkdGg9YSx0aGlzLl9iaXRtYXBEYXRhLmhlaWdodD1vO3ZhciBoPXQuTWF0cml4LmNyZWF0ZSgpO3JldHVybiBoLmlkZW50aXR5KCksaSYmaC50cmFuc2xhdGUoLWkueCwtaS55KSxoLnNjYWxlKHIsciksdC5zeXMuc3lzdGVtUmVuZGVyZXIucmVuZGVyKGUscyxoLG51bGwsITApLHQuTWF0cml4LnJlbGVhc2UoaCksdGhpcy4kaW5pdERhdGEoMCwwLGEsbywwLDAsYSxvLGEsbyksITB9LGkucHJvdG90eXBlLmdldFBpeGVsMzI9ZnVuY3Rpb24oZSxpKXt2YXIgcjtpZih0aGlzLiRyZW5kZXJCdWZmZXIpe3ZhciBuPXQuJFRleHR1cmVTY2FsZUZhY3RvcjtlPU1hdGgucm91bmQoZS9uKSxpPU1hdGgucm91bmQoaS9uKSxyPXRoaXMuJHJlbmRlckJ1ZmZlci5nZXRQaXhlbHMoZSxpLDEsMSl9cmV0dXJuIHJ9LGkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy4kcmVuZGVyQnVmZmVyPW51bGx9LGl9KHQuVGV4dHVyZSk7dC5SZW5kZXJUZXh0dXJlPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuUmVuZGVyVGV4dHVyZVwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUudHlwZT02LGV9cmV0dXJuIF9fZXh0ZW5kcyhlLHQpLGUucHJvdG90eXBlLnNldEFscGhhPWZ1bmN0aW9uKHQpezAhPXRoaXMuZHJhd0RhdGEubGVuZ3RoJiYodGhpcy5kcmF3RGF0YS5sZW5ndGg9MCksdGhpcy5kcmF3RGF0YS5wdXNoKHQpLHRoaXMucmVuZGVyQ291bnQrK30sZX0odC5SZW5kZXJOb2RlKTt0LlNldEFscGhhTm9kZT1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LnN5cy5TZXRBbHBoYU5vZGVcIil9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24oZSl7dmFyIGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSgpe3ZhciB0PWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC50ZXh0Q29sb3I9MTY3NzcyMTUsdC5zdHJva2VDb2xvcj0wLHQuc2l6ZT0zMCx0LnN0cm9rZT0wLHQuYm9sZD0hMSx0Lml0YWxpYz0hMSx0LmZvbnRGYW1pbHk9XCJBcmlhbFwiLHQuZGlydHlSZW5kZXI9ITAsdC50eXBlPTIsdH1yZXR1cm4gX19leHRlbmRzKGksZSksaS5wcm90b3R5cGUuZHJhd1RleHQ9ZnVuY3Rpb24odCxlLGkscil7dGhpcy5kcmF3RGF0YS5wdXNoKHQsZSxpLHIpLHRoaXMucmVuZGVyQ291bnQrKyx0aGlzLmRpcnR5UmVuZGVyPSEwfSxpLnByb3RvdHlwZS5jbGVhbkJlZm9yZVJlbmRlcj1mdW5jdGlvbigpe2UucHJvdG90eXBlLmNsZWFuQmVmb3JlUmVuZGVyLmNhbGwodGhpcyl9LGkucHJvdG90eXBlLmNsZWFuPWZ1bmN0aW9uKCl7dGhpcy4kdGV4dHVyZSYmKHQuV2ViR0xVdGlscy5kZWxldGVXZWJHTFRleHR1cmUodGhpcy4kdGV4dHVyZSksdGhpcy4kdGV4dHVyZT1udWxsLHRoaXMuZGlydHlSZW5kZXI9ITApfSxpfShlLlJlbmRlck5vZGUpO2UuVGV4dE5vZGU9aSxfX3JlZmxlY3QoaS5wcm90b3R5cGUsXCJlZ3JldC5zeXMuVGV4dE5vZGVcIil9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS50eXBlPTEsZX1yZXR1cm4gX19leHRlbmRzKGUsdCksZX0odC5QYXRoMkQpO3QuRmlsbFBhdGg9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5zeXMuRmlsbFBhdGhcIil9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS50eXBlPTIsZX1yZXR1cm4gX19leHRlbmRzKGUsdCksZX0odC5QYXRoMkQpO3QuR3JhZGllbnRGaWxsUGF0aD1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LnN5cy5HcmFkaWVudEZpbGxQYXRoXCIpfShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSgpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS4kZ3JhcGhpY3M9bmV3IHQuR3JhcGhpY3MsaS4kZ3JhcGhpY3MuJHNldFRhcmdldChpKSxpfXJldHVybiBfX2V4dGVuZHMoaSxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJncmFwaGljc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZ3JhcGhpY3N9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuJG1lYXN1cmVDb250ZW50Qm91bmRzPWZ1bmN0aW9uKHQpe3RoaXMuJGdyYXBoaWNzLiRtZWFzdXJlQ29udGVudEJvdW5kcyh0KX0saS5wcm90b3R5cGUuJGhpdFRlc3Q9ZnVuY3Rpb24odCxpKXt2YXIgcj1lLnByb3RvdHlwZS4kaGl0VGVzdC5jYWxsKHRoaXMsdCxpKTtyZXR1cm4gcj09dGhpcyYmKHI9dGhpcy4kZ3JhcGhpY3MuJGhpdFRlc3QodCxpKSkscn0saS5wcm90b3R5cGUuJG9uUmVtb3ZlRnJvbVN0YWdlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuJG9uUmVtb3ZlRnJvbVN0YWdlLmNhbGwodGhpcyksdGhpcy4kZ3JhcGhpY3MmJnRoaXMuJGdyYXBoaWNzLiRvblJlbW92ZUZyb21TdGFnZSgpfSxpfSh0LkRpc3BsYXlPYmplY3QpO3QuU2hhcGU9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5TaGFwZVwiKSx0LiRtYXJrUmVhZE9ubHkoZSxcImdyYXBoaWNzXCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS50eXBlPTMsZX1yZXR1cm4gX19leHRlbmRzKGUsdCksZX0odC5QYXRoMkQpO3QuU3Ryb2tlUGF0aD1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LnN5cy5TdHJva2VQYXRoXCIpfShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUpe3ZhciBpPW51bGw9PWUuaXRhbGljP3QuaXRhbGljOmUuaXRhbGljLHI9bnVsbD09ZS5ib2xkP3QuYm9sZDplLmJvbGQsbj1udWxsPT1lLnNpemU/dC5zaXplOmUuc2l6ZSxhPWUuZm9udEZhbWlseXx8dC5mb250RmFtaWx5LG89aT9cIml0YWxpYyBcIjpcIm5vcm1hbCBcIjtyZXR1cm4gbys9cj9cImJvbGQgXCI6XCJub3JtYWwgXCIsbys9bitcInB4IFwiK2F9ZnVuY3Rpb24gaSh0LGUpe3ZhciBpPXQ+PjE2LHI9dD4+OCYyNTUsbj0yNTUmdDtyZXR1cm5cInJnYmEoXCIraStcIixcIityK1wiLFwiK24rXCIsXCIrZStcIilcIn1mdW5jdGlvbiByKGUscixuLGEsbyxzKXt2YXIgaDtoPXI9PXQuR3JhZGllbnRUeXBlLkxJTkVBUj9lLmNyZWF0ZUxpbmVhckdyYWRpZW50KC0xLDAsMSwwKTplLmNyZWF0ZVJhZGlhbEdyYWRpZW50KDAsMCwwLDAsMCwxKTtmb3IodmFyIGw9bi5sZW5ndGgsdT0wO2w+dTt1KyspaC5hZGRDb2xvclN0b3Aob1t1XS8yNTUsaShuW3VdLGFbdV0pKTtyZXR1cm4gaH1mdW5jdGlvbiBuKHQsZSxpKXt2b2lkIDA9PT1pJiYoaT0wKTtmb3IodmFyIHI9MCxuPWUubGVuZ3RoO24+cjtyKyspdFtyK2ldPWVbcl19ZnVuY3Rpb24gYSh0LGUsaSxyKXtmb3IodmFyIG49clswXSxhPXJbMV0sbz1yWzJdLHM9clszXSxoPXJbNF0sbD1yWzVdLHU9cls2XSxjPXJbN10scD1yWzhdLGQ9cls5XSxmPXJbMTBdLGc9clsxMV0seT1yWzEyXSwkPXJbMTNdLHY9clsxNF0sbT1yWzE1XSxiPXJbMTZdLHg9clsxN10sVD1yWzE4XSxfPXJbMTldLE89MCxFPWUqaSo0O0U+TztPKz00KXt2YXIgRj10W08rMF0sdz10W08rMV0sUj10W08rMl0sQz10W08rM107dFtPKzBdPW4qRithKncrbypSK3MqQytoLHRbTysxXT1sKkYrdSp3K2MqUitwKkMrZCx0W08rMl09ZipGK2cqdyt5KlIrJCpDK3YsdFtPKzNdPW0qRitiKncreCpSK1QqQytffX1mdW5jdGlvbiBvKHQsZSxpLHIsbil7cyh0LGUsaSxyKSxoKHQsZSxpLG4pfWZ1bmN0aW9uIHModCxlLGkscil7dmFyIGE7YT1UP25ldyBVaW50OENsYW1wZWRBcnJheSg0KmUpOm5ldyBBcnJheSg0KmUpO2Zvcih2YXIgbz00KmUscz0yKnIrMSxoPTA7aT5oO2grKyl7Zm9yKHZhciBsPWgqbyx1PTAsYz0wLHA9MCxkPTAsZj0wLGc9MCx5PTQqLXIsJD00KnIrNDskPnk7eSs9NCl7dmFyIHY9bCt5O2w+dnx8dj49bCtvfHwoZj10W3YrM10sdSs9dFt2KzBdKmYsYys9dFt2KzFdKmYscCs9dFt2KzJdKmYsZCs9Zil9Zm9yKHZhciB5PWwsJD1sK28sbT0wLGI9eS00KnIseD15KzQqKHIrMSk7JD55O3krPTQsbSs9NCx4Kz00LGIrPTQpMD09PWQ/KGFbbSswXT0wLGFbbSsxXT0wLGFbbSsyXT0wLGFbbSszXT0wKTooYVttKzBdPXUvZCxhW20rMV09Yy9kLGFbbSsyXT1wL2QsYVttKzNdPWQvcyksZj10W3grM10sZz10W2IrM10sZnx8MD09Zj9nfHwwPT1nPyh1Kz10W3grMF0qZi10W2IrMF0qZyxjKz10W3grMV0qZi10W2IrMV0qZyxwKz10W3grMl0qZi10W2IrMl0qZyxkKz1mLWcpOih1Kz10W3grMF0qZixjKz10W3grMV0qZixwKz10W3grMl0qZixkKz1mKTooZ3x8MD09ZykmJih1Kz0tdFtiKzBdKmcsYys9LXRbYisxXSpnLHArPS10W2IrMl0qZyxkKz0tZyk7VD90LnNldChhLGwpOm4odCxhLGwpfX1mdW5jdGlvbiBoKHQsZSxpLHIpe3ZhciBuO249VD9uZXcgVWludDhDbGFtcGVkQXJyYXkoNCppKTpuZXcgQXJyYXkoNCppKTtmb3IodmFyIGE9NCplLG89MipyKzEscz0wO2U+cztzKyspe2Zvcih2YXIgaD00KnMsbD0wLHU9MCxjPTAscD0wLGQ9MCxmPTAsZz0tciphLHk9ciphK2E7eT5nO2crPWEpe3ZhciAkPWgrZztoPiR8fCQ+PWgraSphfHwoZD10WyQrM10sbCs9dFskKzBdKmQsdSs9dFskKzFdKmQsYys9dFskKzJdKmQscCs9ZCl9Zm9yKHZhciBnPWgseT1oK2kqYSx2PTAsbT1oLXIqYSxiPWgrKHIrMSkqYTt5Pmc7Zys9YSx2Kz00LGIrPWEsbSs9YSkwPT09cD8oblt2KzBdPTAsblt2KzFdPTAsblt2KzJdPTAsblt2KzNdPTApOihuW3YrMF09bC9wLG5bdisxXT11L3Asblt2KzJdPWMvcCxuW3YrM109cC9vKSxkPXRbYiszXSxmPXRbbSszXSxkfHwwPT1kP2Z8fDA9PWY/KGwrPXRbYiswXSpkLXRbbSswXSpmLHUrPXRbYisxXSpkLXRbbSsxXSpmLGMrPXRbYisyXSpkLXRbbSsyXSpmLHArPWQtZik6KGwrPXRbYiswXSpkLHUrPXRbYisxXSpkLGMrPXRbYisyXSpkLHArPWQpOihmfHwwPT1mKSYmKGwrPS10W20rMF0qZix1Kz0tdFttKzFdKmYsYys9LXRbbSsyXSpmLHArPS1mKTtmb3IodmFyIHg9NCpzLHk9eCtpKmEsXz0wO3k+eDt4Kz1hLF8rPTQpdFt4KzBdPW5bXyswXSx0W3grMV09bltfKzFdLHRbeCsyXT1uW18rMl0sdFt4KzNdPW5bXyszXX19ZnVuY3Rpb24gbCh0LGUsaSxyLGEscyxoLGwsZil7dmFyIGc9dSh0LHIpO2MoZyxlLGksaCxsKSxvKGcsZSxpLGEscykscChnLGYpLGQoZyx0KSx0LnNldChnKSxUP3Quc2V0KGcpOm4odCxnKX1mdW5jdGlvbiB1KHQsZSl7ZXx8KGU9WzAsMCwwLDBdKTt2YXIgaTtUP2k9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHQpOihpPW5ldyBBcnJheSh0Lmxlbmd0aCksbihpLHQpKTtmb3IodmFyIHI9MCxhPWkubGVuZ3RoO2E+cjtyKz00KXt2YXIgbz1pW3IrM107aVtyKzBdPWVbMF0qbyxpW3IrMV09ZVsxXSpvLGlbcisyXT1lWzJdKm99cmV0dXJuIGl9ZnVuY3Rpb24gYyh0LGUsaSxyLGEpe3ZhciBvLHMsaD1NYXRoLnNpbihyKSphfDAsbD1NYXRoLmNvcyhyKSphfDA7aWYoVCl7bz1uZXcgSW50MzJBcnJheSh0LmJ1ZmZlcikscz1uZXcgSW50MzJBcnJheShvLmxlbmd0aCk7Zm9yKHZhciB1PTA7aT51O3UrKyl7dmFyIGM9dStoO2lmKCEoMD5jfHxjPmkpKWZvcih2YXIgcD0wO2U+cDtwKyspe3ZhciBkPXArbDswPmR8fGQ+ZXx8KHNbYyplK2RdPW9bdSplK3BdKX19by5zZXQocyl9ZWxzZXtvPXQscz1uZXcgQXJyYXkoby5sZW5ndGgpO2Zvcih2YXIgdT0wO2k+dTt1Kyspe3ZhciBjPXUraDtpZighKDA+Y3x8Yz5pKSlmb3IodmFyIHA9MDtlPnA7cCsrKXt2YXIgZD1wK2w7MD5kfHxkPmV8fChzWzQqKGMqZStkKSswXT1vWzQqKHUqZStwKSswXSxzWzQqKGMqZStkKSsxXT1vWzQqKHUqZStwKSsxXSxzWzQqKGMqZStkKSsyXT1vWzQqKHUqZStwKSsyXSxzWzQqKGMqZStkKSszXT1vWzQqKHUqZStwKSszXSl9fW4obyxzKX19ZnVuY3Rpb24gcCh0LGUpe2Zvcih2YXIgaT0wLHI9dC5sZW5ndGg7cj5pO2krPTQpdFtpKzNdKj1lfWZ1bmN0aW9uIGQodCxlKXtmb3IodmFyIGk9MCxyPXQubGVuZ3RoO3I+aTtpKz00KXt2YXIgbj10W2krMF0sYT10W2krMV0sbz10W2krMl0scz10W2krM10vMjU1LGg9ZVtpKzBdLGw9ZVtpKzFdLHU9ZVtpKzJdLGM9ZVtpKzNdLzI1NTt0W2krMF09aCtuKigxLWMpLHRbaSsxXT1sK2EqKDEtYyksdFtpKzJdPXUrbyooMS1jKSx0W2krM109MjU1KihjK3MqKDEtYykpfX1mdW5jdGlvbiBmKHQsZSxpKXtyZXR1cm4gdCooMS1pKStlKml9ZnVuY3Rpb24gZyh0LGUsaSxyLGEsbyxzLGgsbCx1LGMscCl7dmFyIGQ7ZD1UP25ldyBVaW50OENsYW1wZWRBcnJheSh0Lmxlbmd0aCk6bmV3IEFycmF5KHQubGVuZ3RoKTtmb3IodmFyIGcseSwkPXJbM10sdj0wLG09MCxiPWgqTWF0aC5jb3MocykseD1oKk1hdGguc2luKHMpLF89NyxPPTEyLEU9My4xNDE1OTI2NTM1ODk3OTMsRj1hL18sdz1vL18sUj0wO2U+UjtSKyspZm9yKHZhciBDPTA7aT5DO0MrKyl7Zm9yKHZhciBTPTAsUD1DKmUqNCs0KlIsRD0wLEw9MCxNPXRbUCswXS8yNTUsQT10W1ArMV0vMjU1LE49dFtQKzJdLzI1NSxCPXRbUCszXS8yNTUsST0wOzIqRT49STtJKz0yKkUvTyl7Zz1NYXRoLmNvcyhJK1MpLHk9TWF0aC5zaW4oSStTKTtmb3IodmFyIGs9MDtfPms7aysrKXt2PWsqRipnLG09ayp3Knk7dmFyIGo9TWF0aC5yb3VuZChSK3YtYiksVT1NYXRoLnJvdW5kKEMrbS14KSxYPTA7aWYoaj49ZXx8MD5qfHwwPlV8fFU+PWkpWD0wO2Vsc2V7dmFyIFk9VSplKjQrNCpqO1g9dFtZKzNdLzI1NX1EKz0oXy1rKSpYLEwrPV8ta319Qj1NYXRoLm1heChCLDFlLTQpO3ZhciBIPUQvTCpsKiQqKDEtdSkqTWF0aC5tYXgoTWF0aC5taW4ocCxjKSwxLUIpLFc9KEwtRCkvTCpsKiQqdSpCO0I9TWF0aC5tYXgoQipjKigxLXApLDFlLTQpO3ZhciBHPVcvKFcrQiksVj1mKE0sclswXSxHKSx6PWYoQSxyWzFdLEcpLFo9ZihOLHJbMl0sRykscT1ILyhXK0IrSCksSj1mKFYsclswXSxxKSxLPWYoeixyWzFdLHEpLFE9ZihaLHJbMl0scSksdGU9TWF0aC5taW4oQitIK1csMSk7ZFtQKzBdPTI1NSpKLGRbUCsxXT0yNTUqSyxkW1ArMl09MjU1KlEsZFtQKzNdPTI1NSp0ZX1UP3Quc2V0KGQpOm4odCxkKX12YXIgeT1bXCJzb3VyY2Utb3ZlclwiLFwibGlnaHRlclwiLFwiZGVzdGluYXRpb24tb3V0XCJdLCQ9XCJzb3VyY2Utb3ZlclwiLHY9XCIjMDAwMDAwXCIsbT17bm9uZTpcImJ1dHRcIixzcXVhcmU6XCJzcXVhcmVcIixyb3VuZDpcInJvdW5kXCJ9LGI9W10seD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLm5lc3RMZXZlbD0wLHRoaXMucmVuZGVyaW5nTWFzaz0hMX1yZXR1cm4gbi5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQsZSxpLHIsbil7dGhpcy5uZXN0TGV2ZWwrKzt2YXIgYT1lLmNvbnRleHQsbz1uP3Q6bnVsbCxzPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QodCxhLHIsaSxudWxsLG51bGwsbyk7aWYodGhpcy5uZXN0TGV2ZWwtLSwwPT09dGhpcy5uZXN0TGV2ZWwpe2IubGVuZ3RoPjYmJihiLmxlbmd0aD02KTtmb3IodmFyIGg9Yi5sZW5ndGgsbD0wO2g+bDtsKyspYltsXS5yZXNpemUoMCwwKX1yZXR1cm4gc30sbi5wcm90b3R5cGUuZHJhd0Rpc3BsYXlPYmplY3Q9ZnVuY3Rpb24oZSxpLHIsbixhLG8scyl7dmFyIGgsbD0wO2lmKGEmJiFzPyhhLmlzRGlydHkmJihsKz1hLmRyYXdUb1N1cmZhY2UoKSksaD1hLiRyZW5kZXJOb2RlKTpoPWUuJGdldFJlbmRlck5vZGUoKSxoKXtpZihyKXt2YXIgdT1oLnJlbmRlclJlZ2lvbjtpZihvJiYhby5pbnRlcnNlY3RzKHUpKWgubmVlZFJlZHJhdz0hMTtlbHNlIGlmKCFoLm5lZWRSZWRyYXcpZm9yKHZhciBjPXIubGVuZ3RoLHA9MDtjPnA7cCsrKWlmKHUuaW50ZXJzZWN0cyhyW3BdKSl7aC5uZWVkUmVkcmF3PSEwO2JyZWFrfX1lbHNlIGgubmVlZFJlZHJhdz0hMDtpZihoLm5lZWRSZWRyYXcpe3ZhciBkPXZvaWQgMCxmPXZvaWQgMDtzPyhkPWUuJGdldENvbmNhdGVuYXRlZEFscGhhQXQocyxlLiRnZXRDb25jYXRlbmF0ZWRBbHBoYSgpKSxmPXQuTWF0cml4LmNyZWF0ZSgpLmNvcHlGcm9tKGUuJGdldENvbmNhdGVuYXRlZE1hdHJpeCgpKSxlLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXhBdChzLGYpLG4uJHByZU11bHRpcGx5SW50byhmLGYpLGkuc2V0VHJhbnNmb3JtKGYuYSxmLmIsZi5jLGYuZCxmLnR4LGYudHkpLHQuTWF0cml4LnJlbGVhc2UoZikpOihkPWgucmVuZGVyQWxwaGEsZj1oLnJlbmRlck1hdHJpeCxpLnNldFRyYW5zZm9ybShmLmEsZi5iLGYuYyxmLmQsZi50eCtuLnR4LGYudHkrbi50eSkpLGkuZ2xvYmFsQWxwaGE9ZCxsKz10aGlzLnJlbmRlck5vZGUoaCxpKSxoLm5lZWRSZWRyYXc9ITF9fWlmKGEmJiFzKXJldHVybiBsO3ZhciBnPWUuJGNoaWxkcmVuO2lmKGcpZm9yKHZhciB5PWcubGVuZ3RoLCQ9MDt5PiQ7JCsrKXt2YXIgdj1nWyRdO2lmKCEoIXYuJHZpc2libGV8fHYuJGFscGhhPD0wfHx2LiRtYXNrZWRPYmplY3QpKXt2YXIgbT12LiRnZXRGaWx0ZXJzKCk7bSYmbS5sZW5ndGg+MD9sKz10aGlzLmRyYXdXaXRoRmlsdGVyKHYsaSxyLG4sbyxzKTowIT09di4kYmxlbmRNb2RlfHx2LiRtYXNrJiYodi4kbWFzay4kcGFyZW50RGlzcGxheUxpc3R8fHMpP2wrPXRoaXMuZHJhd1dpdGhDbGlwKHYsaSxyLG4sbyxzKTp2LiRzY3JvbGxSZWN0fHx2LiRtYXNrUmVjdD9sKz10aGlzLmRyYXdXaXRoU2Nyb2xsUmVjdCh2LGkscixuLG8scyk6di5pc0ZQUz90aGlzLmRyYXdEaXNwbGF5T2JqZWN0KHYsaSxyLG4sdi4kZGlzcGxheUxpc3QsbyxzKTpsKz10aGlzLmRyYXdEaXNwbGF5T2JqZWN0KHYsaSxyLG4sdi4kZGlzcGxheUxpc3QsbyxzKX19cmV0dXJuIGx9LG4ucHJvdG90eXBlLmRyYXdXaXRoRmlsdGVyPWZ1bmN0aW9uKGUsaSxyLG4scyxoKXtpZih0LkNhcGFiaWxpdGllcy5ydW50aW1lVHlwZT09dC5SdW50aW1lVHlwZS5OQVRJVkUpe3ZhciB1LGM9MCxwPWUuJGdldEZpbHRlcnMoKSxkPTAhPT1lLiRibGVuZE1vZGU7aWYoZCYmKHU9eVtlLiRibGVuZE1vZGVdLHV8fCh1PSQpKSwxPT1wLmxlbmd0aCYmXCJjb2xvclRyYW5zZm9ybVwiPT1wWzBdLnR5cGUmJiFlLiRjaGlsZHJlbilyZXR1cm4gZCYmKGkuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPXUpLGkuc2V0R2xvYmFsU2hhZGVyKHBbMF0pLGMrPWUuJG1hc2smJihlLiRtYXNrLiRwYXJlbnREaXNwbGF5TGlzdHx8aCk/dGhpcy5kcmF3V2l0aENsaXAoZSxpLHIsbixzLGgpOmUuJHNjcm9sbFJlY3R8fGUuJG1hc2tSZWN0P3RoaXMuZHJhd1dpdGhTY3JvbGxSZWN0KGUsaSxyLG4scyxoKTp0aGlzLmRyYXdEaXNwbGF5T2JqZWN0KGUsaSxyLG4sZS4kZGlzcGxheUxpc3QscyxoKSxpLnNldEdsb2JhbFNoYWRlcihudWxsKSxkJiYoaS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249JCksYzt2YXIgZj10Lk1hdHJpeC5jcmVhdGUoKTtmLmNvcHlGcm9tKGUuJGdldENvbmNhdGVuYXRlZE1hdHJpeCgpKSxoJiZlLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXhBdChoLGYpO3ZhciB2O3Y9dC5zeXMuUmVnaW9uLmNyZWF0ZSgpO3ZhciBtPWUuJGdldE9yaWdpbmFsQm91bmRzKCk7di51cGRhdGVSZWdpb24obSxmKTt2YXIgeD10aGlzLmNyZWF0ZVJlbmRlckJ1ZmZlcih2LndpZHRoLHYuaGVpZ2h0KTt4LmNvbnRleHQuc2V0VHJhbnNmb3JtKDEsMCwwLDEsLXYubWluWCwtdi5taW5ZKTt2YXIgVD10Lk1hdHJpeC5jcmVhdGUoKS5zZXRUbygxLDAsMCwxLC12Lm1pblgsLXYubWluWSk7cmV0dXJuIGMrPWUuJG1hc2smJihlLiRtYXNrLiRwYXJlbnREaXNwbGF5TGlzdHx8aCk/dGhpcy5kcmF3V2l0aENsaXAoZSx4LmNvbnRleHQscixULHYsaCk6ZS4kc2Nyb2xsUmVjdHx8ZS4kbWFza1JlY3Q/dGhpcy5kcmF3V2l0aFNjcm9sbFJlY3QoZSx4LmNvbnRleHQscixULHYsaCk6dGhpcy5kcmF3RGlzcGxheU9iamVjdChlLHguY29udGV4dCxyLFQsZS4kZGlzcGxheUxpc3QsdixoKSx0Lk1hdHJpeC5yZWxlYXNlKFQpLGM+MCYmKGQmJihpLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj11KSxjKyssaS5nbG9iYWxBbHBoYT0xLGkuc2V0VHJhbnNmb3JtKDEsMCwwLDEsdi5taW5YK24udHgsdi5taW5ZK24udHkpLGkuc2V0R2xvYmFsU2hhZGVyKHBbMF0pLGkuZHJhd0ltYWdlKHguc3VyZmFjZSwwLDAseC53aWR0aCx4LmhlaWdodCwwLDAseC53aWR0aCx4LmhlaWdodCksaS5zZXRHbG9iYWxTaGFkZXIobnVsbCksZCYmKGkuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSQpKSxiLnB1c2goeCksdC5zeXMuUmVnaW9uLnJlbGVhc2UodiksdC5NYXRyaXgucmVsZWFzZShmKSxjfXZhciBfLE89MCxFPWUuJGdldEZpbHRlcnMoKSxGPUUubGVuZ3RoLHc9MCE9PWUuJGJsZW5kTW9kZTt3JiYoXz15W2UuJGJsZW5kTW9kZV0sX3x8KF89JCkpO3ZhciBSPXQuTWF0cml4LmNyZWF0ZSgpO1IuY29weUZyb20oZS4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4KCkpLGgmJmUuJGdldENvbmNhdGVuYXRlZE1hdHJpeEF0KGgsUik7dmFyIEM7Qz10LnN5cy5SZWdpb24uY3JlYXRlKCk7dmFyIFM9ZS4kZ2V0T3JpZ2luYWxCb3VuZHMoKTtDLnVwZGF0ZVJlZ2lvbihTLFIpO3ZhciBQPXRoaXMuY3JlYXRlUmVuZGVyQnVmZmVyKEMud2lkdGgsQy5oZWlnaHQpLEQ9UC5jb250ZXh0O0Quc2V0VHJhbnNmb3JtKDEsMCwwLDEsLUMubWluWCwtQy5taW5ZKTt2YXIgTD10Lk1hdHJpeC5jcmVhdGUoKS5zZXRUbygxLDAsMCwxLC1DLm1pblgsLUMubWluWSk7aWYoTys9ZS4kbWFzayYmKGUuJG1hc2suJHBhcmVudERpc3BsYXlMaXN0fHxoKT90aGlzLmRyYXdXaXRoQ2xpcChlLEQscixMLEMsaCk6ZS4kc2Nyb2xsUmVjdHx8ZS4kbWFza1JlY3Q/dGhpcy5kcmF3V2l0aFNjcm9sbFJlY3QoZSxELHIsTCxDLGgpOnRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZSxELHIsTCxlLiRkaXNwbGF5TGlzdCxDLGgpLHQuTWF0cml4LnJlbGVhc2UoTCksTz4wKXt3JiYoaS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XyksTysrLGkuZ2xvYmFsQWxwaGE9MSxpLnNldFRyYW5zZm9ybSgxLDAsMCwxLEMubWluWCtuLnR4LEMubWluWStuLnR5KTtmb3IodmFyIE09RC5nZXRJbWFnZURhdGEoMCwwLFAuc3VyZmFjZS53aWR0aCxQLnN1cmZhY2UuaGVpZ2h0KSxBPTA7Rj5BO0ErKyl7dmFyIE49RVtBXTtpZihcImNvbG9yVHJhbnNmb3JtXCI9PU4udHlwZSlhKE0uZGF0YSxQLnN1cmZhY2Uud2lkdGgsUC5zdXJmYWNlLmhlaWdodCxOLiRtYXRyaXgpO2Vsc2UgaWYoXCJibHVyXCI9PU4udHlwZSlvKE0uZGF0YSxQLnN1cmZhY2Uud2lkdGgsUC5zdXJmYWNlLmhlaWdodCxOLiRibHVyWCxOLiRibHVyWSk7ZWxzZSBpZihcImdsb3dcIj09Ti50eXBlKXt2YXIgQj1OLiRyZWQsST1OLiRncmVlbixrPU4uJGJsdWUsaj1OLiRhbHBoYTtOLiRpbm5lcnx8Ti4ka25vY2tvdXR8fE4uJGhpZGVPYmplY3Q/ZyhNLmRhdGEsUC5zdXJmYWNlLndpZHRoLFAuc3VyZmFjZS5oZWlnaHQsW0IvMjU1LEkvMjU1LGsvMjU1LGpdLE4uJGJsdXJYLE4uJGJsdXJZLE4uJGFuZ2xlP04uJGFuZ2xlLzE4MCpNYXRoLlBJOjAsTi4kZGlzdGFuY2V8fDAsTi4kc3RyZW5ndGgsTi4kaW5uZXI/MTowLE4uJGtub2Nrb3V0PzA6MSxOLiRoaWRlT2JqZWN0PzE6MCk6bChNLmRhdGEsUC5zdXJmYWNlLndpZHRoLFAuc3VyZmFjZS5oZWlnaHQsW0IvMjU1LEkvMjU1LGsvMjU1LGovMjU1XSxOLiRibHVyWCxOLiRibHVyWSxOLiRhbmdsZT9OLiRhbmdsZS8xODAqTWF0aC5QSTowLE4uJGRpc3RhbmNlfHwwLE4uJHN0cmVuZ3RoKX19RC5wdXRJbWFnZURhdGEoTSwwLDApLGkuZHJhd0ltYWdlKFAuc3VyZmFjZSwwLDApLHcmJihpLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0kKX1yZXR1cm4gYi5wdXNoKFApLHQuc3lzLlJlZ2lvbi5yZWxlYXNlKEMpLHQuTWF0cml4LnJlbGVhc2UoUiksT30sbi5wcm90b3R5cGUuZHJhd1dpdGhDbGlwPWZ1bmN0aW9uKGUsaSxyLG4sYSxvKXt2YXIgcyxoPTAsbD0wIT09ZS4kYmxlbmRNb2RlO2wmJihzPXlbZS4kYmxlbmRNb2RlXSxzfHwocz0kKSk7dmFyIHUsYz1lLiRzY3JvbGxSZWN0P2UuJHNjcm9sbFJlY3Q6ZS4kbWFza1JlY3QscD1lLiRtYXNrO2lmKHAmJih1PXAuJGdldFJlbmRlck5vZGUoKSkpe3ZhciBkPXUucmVuZGVyTWF0cml4O2lmKDA9PWQuYSYmMD09ZC5ifHwwPT1kLmMmJjA9PWQuZClyZXR1cm4gaH12YXIgZixnPXQuTWF0cml4LmNyZWF0ZSgpO2lmKGcuY29weUZyb20oZS4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4KCkpLGUuJHBhcmVudERpc3BsYXlMaXN0KXt2YXIgdj1lLiRwYXJlbnREaXNwbGF5TGlzdC5yb290O3YhPT1lLiRzdGFnZSYmZS4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4QXQodixnKX12YXIgbTtpZihwKXttPXAuJGdldE9yaWdpbmFsQm91bmRzKCksZj10LnN5cy5SZWdpb24uY3JlYXRlKCk7dmFyIHg9dC5NYXRyaXguY3JlYXRlKCk7eC5jb3B5RnJvbShwLiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKSksZi51cGRhdGVSZWdpb24obSx4KSx0Lk1hdHJpeC5yZWxlYXNlKHgpfXZhciBUO2lmKGMmJihUPXQuc3lzLlJlZ2lvbi5jcmVhdGUoKSxULnVwZGF0ZVJlZ2lvbihjLGcpKSxUJiZmPyhULmludGVyc2VjdChmKSx0LnN5cy5SZWdpb24ucmVsZWFzZShmKSk6IVQmJmYmJihUPWYpLFQpe2lmKFQuaXNFbXB0eSgpfHxhJiYhYS5pbnRlcnNlY3RzKFQpKXJldHVybiB0LnN5cy5SZWdpb24ucmVsZWFzZShUKSx0Lk1hdHJpeC5yZWxlYXNlKGcpLGh9ZWxzZSBUPXQuc3lzLlJlZ2lvbi5jcmVhdGUoKSxtPWUuJGdldE9yaWdpbmFsQm91bmRzKCksVC51cGRhdGVSZWdpb24obSxnKTt2YXIgXz0hMTtpZihyKXtmb3IodmFyIE89ci5sZW5ndGgsRT0wO08+RTtFKyspaWYoVC5pbnRlcnNlY3RzKHJbRV0pKXtfPSEwO2JyZWFrfX1lbHNlIF89ITA7aWYoIV8pcmV0dXJuIHQuc3lzLlJlZ2lvbi5yZWxlYXNlKFQpLHQuTWF0cml4LnJlbGVhc2UoZyksaDtpZighKHB8fGUuJGNoaWxkcmVuJiYwIT1lLiRjaGlsZHJlbi5sZW5ndGgpKXtpZihjKXt2YXIgeD1nO2kuc2F2ZSgpLGkuc2V0VHJhbnNmb3JtKHguYSx4LmIseC5jLHguZCx4LnR4LVQubWluWCx4LnR5LVQubWluWSksaS5iZWdpblBhdGgoKSxpLnJlY3QoYy54LGMueSxjLndpZHRoLGMuaGVpZ2h0KSxpLmNsaXAoKX1yZXR1cm4gbCYmKGkuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPXMpLGgrPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZSxpLHIsbixlLiRkaXNwbGF5TGlzdCxhLG8pLGwmJihpLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0kKSxjJiZpLnJlc3RvcmUoKSxofWlmKHAmJnQuQ2FwYWJpbGl0aWVzLiRydW50aW1lVHlwZT09dC5SdW50aW1lVHlwZS5XRUImJighcC4kY2hpbGRyZW58fDA9PXAuJGNoaWxkcmVuLmxlbmd0aCkmJnUmJjM9PXUudHlwZSYmMT09dS5kcmF3RGF0YS5sZW5ndGgmJjE9PXUuZHJhd0RhdGFbMF0udHlwZSYmMT09dS5kcmF3RGF0YVswXS5maWxsQWxwaGEpe3RoaXMucmVuZGVyaW5nTWFzaz0hMCxpLnNhdmUoKTt2YXIgRj10aGlzLmRyYXdEaXNwbGF5T2JqZWN0KHAsaSxyLG4scC4kZGlzcGxheUxpc3QsYSxvKTtpZih0aGlzLnJlbmRlcmluZ01hc2s9ITEsYyl7dmFyIHg9ZztpLnNldFRyYW5zZm9ybSh4LmEseC5iLHguYyx4LmQseC50eC1ULm1pblgseC50eS1ULm1pblkpLGkuYmVnaW5QYXRoKCksaS5yZWN0KGMueCxjLnksYy53aWR0aCxjLmhlaWdodCksaS5jbGlwKCl9cmV0dXJuIEYrPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZSxpLHIsbixlLiRkaXNwbGF5TGlzdCxhLG8pLGkucmVzdG9yZSgpLEZ9dmFyIHc9dGhpcy5jcmVhdGVSZW5kZXJCdWZmZXIoVC53aWR0aCxULmhlaWdodCksUj13LmNvbnRleHQ7aWYoIVIpcmV0dXJuIGgrPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZSxpLHIsbixlLiRkaXNwbGF5TGlzdCxhLG8pLHQuc3lzLlJlZ2lvbi5yZWxlYXNlKFQpLHQuTWF0cml4LnJlbGVhc2UoZyksaDtSLnNldFRyYW5zZm9ybSgxLDAsMCwxLC1ULm1pblgsLVQubWluWSk7dmFyIEM9dC5NYXRyaXguY3JlYXRlKCkuc2V0VG8oMSwwLDAsMSwtVC5taW5YLC1ULm1pblkpO2lmKGgrPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZSxSLHIsQyxlLiRkaXNwbGF5TGlzdCxULG8pLHApaWYodC5DYXBhYmlsaXRpZXMuJHJ1bnRpbWVUeXBlPT10LlJ1bnRpbWVUeXBlLldFQiYmdSYmMT09dS4kZ2V0UmVuZGVyQ291bnQoKXx8cC4kZGlzcGxheUxpc3QpUi5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJkZXN0aW5hdGlvbi1pblwiLGgrPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QocCxSLHIsQyxwLiRkaXNwbGF5TGlzdCxULG8pO1xuZWxzZXt2YXIgUz10aGlzLmNyZWF0ZVJlbmRlckJ1ZmZlcihULndpZHRoLFQuaGVpZ2h0KSxQPVMuY29udGV4dDtpZighUClyZXR1cm4gaCs9dGhpcy5kcmF3RGlzcGxheU9iamVjdChlLGkscixuLGUuJGRpc3BsYXlMaXN0LGEsbyksYi5wdXNoKHcpLHQuc3lzLlJlZ2lvbi5yZWxlYXNlKFQpLHQuTWF0cml4LnJlbGVhc2UoZyksaDtQLnNldFRyYW5zZm9ybSgxLDAsMCwxLC1ULm1pblgsLVQubWluWSksQz10Lk1hdHJpeC5jcmVhdGUoKS5zZXRUbygxLDAsMCwxLC1ULm1pblgsLVQubWluWSksaCs9dGhpcy5kcmF3RGlzcGxheU9iamVjdChwLFAscixDLHAuJGRpc3BsYXlMaXN0LFQsbyksUi5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJkZXN0aW5hdGlvbi1pblwiLFIuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSxSLmdsb2JhbEFscGhhPTEsUi5kcmF3SW1hZ2UoUy5zdXJmYWNlLDAsMCksYi5wdXNoKFMpfWlmKHQuTWF0cml4LnJlbGVhc2UoQyksaD4wKXtpZihoKyssbCYmKGkuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPXMpLGMpe3ZhciB4PWc7aS5zYXZlKCksaS5zZXRUcmFuc2Zvcm0oeC5hLHguYix4LmMseC5kLHgudHgtVC5taW5YLHgudHktVC5taW5ZKSxpLmJlZ2luUGF0aCgpLGkucmVjdChjLngsYy55LGMud2lkdGgsYy5oZWlnaHQpLGkuY2xpcCgpfWkuZ2xvYmFsQWxwaGE9MSxpLnNldFRyYW5zZm9ybSgxLDAsMCwxLFQubWluWCtuLnR4LFQubWluWStuLnR5KSxpLmRyYXdJbWFnZSh3LnN1cmZhY2UsMCwwKSxjJiZpLnJlc3RvcmUoKSxsJiYoaS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249JCl9cmV0dXJuIGIucHVzaCh3KSx0LnN5cy5SZWdpb24ucmVsZWFzZShUKSx0Lk1hdHJpeC5yZWxlYXNlKGcpLGh9LG4ucHJvdG90eXBlLmRyYXdXaXRoU2Nyb2xsUmVjdD1mdW5jdGlvbihlLGkscixuLGEsbyl7dmFyIHM9MCxoPWUuJHNjcm9sbFJlY3Q/ZS4kc2Nyb2xsUmVjdDplLiRtYXNrUmVjdDtpZihoLmlzRW1wdHkoKSlyZXR1cm4gczt2YXIgbD10Lk1hdHJpeC5jcmVhdGUoKTtpZihsLmNvcHlGcm9tKGUuJGdldENvbmNhdGVuYXRlZE1hdHJpeCgpKSxvKWUuJGdldENvbmNhdGVuYXRlZE1hdHJpeEF0KG8sbCk7ZWxzZSBpZihlLiRwYXJlbnREaXNwbGF5TGlzdCl7dmFyIHU9ZS4kcGFyZW50RGlzcGxheUxpc3Qucm9vdDt1IT09ZS4kc3RhZ2UmJmUuJGdldENvbmNhdGVuYXRlZE1hdHJpeEF0KHUsbCl9dmFyIGM9dC5zeXMuUmVnaW9uLmNyZWF0ZSgpO2lmKGMudXBkYXRlUmVnaW9uKGgsbCksYy5pc0VtcHR5KCl8fGEmJiFhLmludGVyc2VjdHMoYykpcmV0dXJuIHQuc3lzLlJlZ2lvbi5yZWxlYXNlKGMpLHQuTWF0cml4LnJlbGVhc2UobCksczt2YXIgcD0hMTtpZihyKXtmb3IodmFyIGQ9ci5sZW5ndGgsZj0wO2Q+ZjtmKyspaWYoYy5pbnRlcnNlY3RzKHJbZl0pKXtwPSEwO2JyZWFrfX1lbHNlIHA9ITA7cmV0dXJuIHA/KGkuc2F2ZSgpLGkuc2V0VHJhbnNmb3JtKGwuYSxsLmIsbC5jLGwuZCxsLnR4K24udHgsbC50eStuLnR5KSxpLmJlZ2luUGF0aCgpLGkucmVjdChoLngsaC55LGgud2lkdGgsaC5oZWlnaHQpLGkuY2xpcCgpLHMrPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZSxpLHIsbixlLiRkaXNwbGF5TGlzdCxjLG8pLGkucmVzdG9yZSgpLHQuc3lzLlJlZ2lvbi5yZWxlYXNlKGMpLHQuTWF0cml4LnJlbGVhc2UobCkscyk6KHQuc3lzLlJlZ2lvbi5yZWxlYXNlKGMpLHQuTWF0cml4LnJlbGVhc2UobCkscyl9LG4ucHJvdG90eXBlLmRyYXdOb2RlVG9CdWZmZXI9ZnVuY3Rpb24odCxlLGkscil7dmFyIG49ZS5jb250ZXh0O24uc2V0VHJhbnNmb3JtKGkuYSxpLmIsaS5jLGkuZCxpLnR4LGkudHkpLHRoaXMucmVuZGVyTm9kZSh0LG4scil9LG4ucHJvdG90eXBlLnJlbmRlck5vZGU9ZnVuY3Rpb24odCxlLGkpe3ZhciByPTA7c3dpdGNoKHQudHlwZSl7Y2FzZSAxOnI9dGhpcy5yZW5kZXJCaXRtYXAodCxlKTticmVhaztjYXNlIDI6cj0xLHRoaXMucmVuZGVyVGV4dCh0LGUpO2JyZWFrO2Nhc2UgMzpyPXRoaXMucmVuZGVyR3JhcGhpY3ModCxlLGkpO2JyZWFrO2Nhc2UgNDpyPXRoaXMucmVuZGVyR3JvdXAodCxlKTticmVhaztjYXNlIDY6ZS5nbG9iYWxBbHBoYT10LmRyYXdEYXRhWzBdO2JyZWFrO2Nhc2UgNzpyPXRoaXMucmVuZGVyTWVzaCh0LGUpfXJldHVybiByfSxuLnByb3RvdHlwZS5yZW5kZXJNZXNoPWZ1bmN0aW9uKGUsaSl7aWYodC5DYXBhYmlsaXRpZXMucnVudGltZVR5cGUhPXQuUnVudGltZVR5cGUuTkFUSVZFKXJldHVybiAwO3ZhciByPWUuaW1hZ2Usbj1lLmRyYXdEYXRhLGE9bi5sZW5ndGgsbz0wLHM9ZS5tYXRyaXg7Zm9yKHMmJihpLnNhdmVUcmFuc2Zvcm0oKSxpLnRyYW5zZm9ybShzLmEscy5iLHMuYyxzLmQscy50eCxzLnR5KSk7YT5vOylpLmRyYXdNZXNoKHIuc291cmNlLG5bbysrXSxuW28rK10sbltvKytdLG5bbysrXSxuW28rK10sbltvKytdLG5bbysrXSxuW28rK10sZS5pbWFnZVdpZHRoLGUuaW1hZ2VIZWlnaHQsZS51dnMsZS52ZXJ0aWNlcyxlLmluZGljZXMsZS5ib3VuZHMpO3JldHVybiBzJiZpLnJlc3RvcmVUcmFuc2Zvcm0oKSwxfSxuLnByb3RvdHlwZS5yZW5kZXJCaXRtYXA9ZnVuY3Rpb24oZSxpKXt2YXIgcj1lLmltYWdlO2lmKCFyfHwhci5zb3VyY2UpcmV0dXJuIDA7aS4kaW1hZ2VTbW9vdGhpbmdFbmFibGVkIT1lLnNtb290aGluZyYmKGkuaW1hZ2VTbW9vdGhpbmdFbmFibGVkPWUuc21vb3RoaW5nLGkuJGltYWdlU21vb3RoaW5nRW5hYmxlZD1lLnNtb290aGluZyk7dmFyIG49ZS5kcmF3RGF0YSxvPW4ubGVuZ3RoLHM9MCxoPWUubWF0cml4LGw9ZS5ibGVuZE1vZGUsdT1lLmFscGhhLGM9ITE7aCYmKGkuc2F2ZVRyYW5zZm9ybT9pLnNhdmVUcmFuc2Zvcm0oKTppLnNhdmUoKSxjPSEwLGkudHJhbnNmb3JtKGguYSxoLmIsaC5jLGguZCxoLnR4LGgudHkpKSxsJiYoaS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249eVtsXSk7dmFyIHA7dT09dSYmKHA9aS5nbG9iYWxBbHBoYSxpLmdsb2JhbEFscGhhKj11KTt2YXIgZD0wLGY9ZS5maWx0ZXI7aWYoZiYmOD09bylpZih0LkNhcGFiaWxpdGllcy5ydW50aW1lVHlwZT09dC5SdW50aW1lVHlwZS5OQVRJVkUpe2ZvcihlZ3JldF9uYXRpdmUuR3JhcGhpY3Muc2V0R2xvYmFsU2hhZGVyKGYpO28+czspZCsrLGkuZHJhd0ltYWdlKHIuc291cmNlLG5bcysrXSxuW3MrK10sbltzKytdLG5bcysrXSxuW3MrK10sbltzKytdLG5bcysrXSxuW3MrK10pO2VncmV0X25hdGl2ZS5HcmFwaGljcy5zZXRHbG9iYWxTaGFkZXIobnVsbCl9ZWxzZXt2YXIgZz10aGlzLmNyZWF0ZVJlbmRlckJ1ZmZlcihuWzZdLG5bN10pLHY9Zy5jb250ZXh0O2QrKyx2LmRyYXdJbWFnZShyLnNvdXJjZSxuWzBdLG5bMV0sblsyXSxuWzNdLDAsMCxuWzZdLG5bN10pLGQrKzt2YXIgbT12LmdldEltYWdlRGF0YSgwLDAsZy5zdXJmYWNlLndpZHRoLGcuc3VyZmFjZS5oZWlnaHQpO2EobS5kYXRhLGcuc3VyZmFjZS53aWR0aCxnLnN1cmZhY2UuaGVpZ2h0LGYuJG1hdHJpeCksdi5wdXRJbWFnZURhdGEobSwwLDApLGkuZHJhd0ltYWdlKGcuc3VyZmFjZSwwLDAsbls2XSxuWzddLG5bNF0sbls1XSxuWzZdLG5bN10pLGIucHVzaChnKX1lbHNlIGZvcig7bz5zOylkKyssaS5kcmF3SW1hZ2Uoci5zb3VyY2UsbltzKytdLG5bcysrXSxuW3MrK10sbltzKytdLG5bcysrXSxuW3MrK10sbltzKytdLG5bcysrXSk7cmV0dXJuIGM/aS5yZXN0b3JlVHJhbnNmb3JtPyhpLnJlc3RvcmVUcmFuc2Zvcm0oKSxsJiYoaS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249JCksdT09dSYmKGkuZ2xvYmFsQWxwaGE9cCkpOmkucmVzdG9yZSgpOihsJiYoaS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249JCksdT09dSYmKGkuZ2xvYmFsQWxwaGE9cCkpLGR9LG4ucHJvdG90eXBlLnJlbmRlclRleHQ9ZnVuY3Rpb24oaSxyKXtyLnRleHRBbGlnbj1cImxlZnRcIixyLnRleHRCYXNlbGluZT1cIm1pZGRsZVwiLHIubGluZUpvaW49XCJyb3VuZFwiO2Zvcih2YXIgbj1pLmRyYXdEYXRhLGE9bi5sZW5ndGgsbz0wO2E+bzspe3ZhciBzPW5bbysrXSxoPW5bbysrXSxsPW5bbysrXSx1PW5bbysrXTtyLmZvbnQ9ZShpLHUpO3ZhciBjPW51bGw9PXUudGV4dENvbG9yP2kudGV4dENvbG9yOnUudGV4dENvbG9yLHA9bnVsbD09dS5zdHJva2VDb2xvcj9pLnN0cm9rZUNvbG9yOnUuc3Ryb2tlQ29sb3IsZD1udWxsPT11LnN0cm9rZT9pLnN0cm9rZTp1LnN0cm9rZTtyLmZpbGxTdHlsZT10LnRvQ29sb3JTdHJpbmcoYyksci5zdHJva2VTdHlsZT10LnRvQ29sb3JTdHJpbmcocCksZCYmKHIubGluZVdpZHRoPTIqZCxyLnN0cm9rZVRleHQobCxzLGgpKSxyLmZpbGxUZXh0KGwscyxoKX19LG4ucHJvdG90eXBlLnJlbmRlckdyYXBoaWNzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgYT10LmRyYXdEYXRhLG89YS5sZW5ndGg7bj0hIW47Zm9yKHZhciBzPTA7bz5zO3MrKyl7dmFyIGg9YVtzXTtzd2l0Y2goaC50eXBlKXtjYXNlIDE6dmFyIGw9aDtlLmZpbGxTdHlsZT1uP3Y6aShsLmZpbGxDb2xvcixsLmZpbGxBbHBoYSksdGhpcy5yZW5kZXJQYXRoKGgsZSksdGhpcy5yZW5kZXJpbmdNYXNrP2UuY2xpcCgpOmUuZmlsbCgpO2JyZWFrO2Nhc2UgMjp2YXIgdT1oO2UuZmlsbFN0eWxlPW4/djpyKGUsdS5ncmFkaWVudFR5cGUsdS5jb2xvcnMsdS5hbHBoYXMsdS5yYXRpb3MsdS5tYXRyaXgpLGUuc2F2ZSgpO3ZhciBjPXUubWF0cml4O3RoaXMucmVuZGVyUGF0aChoLGUpLGUudHJhbnNmb3JtKGMuYSxjLmIsYy5jLGMuZCxjLnR4LGMudHkpLGUuZmlsbCgpLGUucmVzdG9yZSgpO2JyZWFrO2Nhc2UgMzp2YXIgcD1oLGQ9cC5saW5lV2lkdGg7ZS5saW5lV2lkdGg9ZCxlLnN0cm9rZVN0eWxlPW4/djppKHAubGluZUNvbG9yLHAubGluZUFscGhhKSxlLmxpbmVDYXA9bVtwLmNhcHNdLGUubGluZUpvaW49cC5qb2ludHMsZS5taXRlckxpbWl0PXAubWl0ZXJMaW1pdDt2YXIgZj0xPT09ZHx8Mz09PWQ7ZiYmZS50cmFuc2xhdGUoLjUsLjUpLHRoaXMucmVuZGVyUGF0aChoLGUpLGUuc3Ryb2tlKCksZiYmZS50cmFuc2xhdGUoLS41LC0uNSl9fXJldHVybiAwPT1vPzA6MX0sbi5wcm90b3R5cGUucmVuZGVyUGF0aD1mdW5jdGlvbih0LGUpe2UuYmVnaW5QYXRoKCk7Zm9yKHZhciBpPXQuJGRhdGEscj10LiRjb21tYW5kcyxuPXIubGVuZ3RoLGE9MCxvPTA7bj5vO28rKyl7dmFyIHM9cltvXTtzd2l0Y2gocyl7Y2FzZSA0OmUuYmV6aWVyQ3VydmVUbyhpW2ErK10saVthKytdLGlbYSsrXSxpW2ErK10saVthKytdLGlbYSsrXSk7YnJlYWs7Y2FzZSAzOmUucXVhZHJhdGljQ3VydmVUbyhpW2ErK10saVthKytdLGlbYSsrXSxpW2ErK10pO2JyZWFrO2Nhc2UgMjplLmxpbmVUbyhpW2ErK10saVthKytdKTticmVhaztjYXNlIDE6ZS5tb3ZlVG8oaVthKytdLGlbYSsrXSl9fX0sbi5wcm90b3R5cGUucmVuZGVyR3JvdXA9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MCxyPXQuZHJhd0RhdGEsbj1yLmxlbmd0aCxhPTA7bj5hO2ErKyl7dmFyIG89clthXTtpKz10aGlzLnJlbmRlck5vZGUobyxlKX1yZXR1cm4gaX0sbi5wcm90b3R5cGUuY3JlYXRlUmVuZGVyQnVmZmVyPWZ1bmN0aW9uKGUsaSl7dmFyIHI9Yi5wb3AoKTtyZXR1cm4gcj9yLnJlc2l6ZShlLGksITApOnI9bmV3IHQuc3lzLkNhbnZhc1JlbmRlckJ1ZmZlcihlLGkpLHJ9LG59KCk7dC5DYW52YXNSZW5kZXJlcj14LF9fcmVmbGVjdCh4LnByb3RvdHlwZSxcImVncmV0LkNhbnZhc1JlbmRlcmVyXCIsW1wiZWdyZXQuc3lzLlN5c3RlbVJlbmRlcmVyXCJdKTt2YXIgVD0hMTt0cnl7VD12b2lkIDAhPT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXl9Y2F0Y2goXyl7fX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC5EZXZpY2VPcmllbnRhdGlvbj1udWxsfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe30oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO2UuV0VCPVwid2ViXCIsZS5OQVRJVkU9XCJuYXRpdmVcIix0LlJ1bnRpbWVUeXBlPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuUnVudGltZVR5cGVcIik7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImxhbmd1YWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LiRsYW5ndWFnZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImlzTW9iaWxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LiRpc01vYmlsZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIm9zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LiRvc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcInJ1bnRpbWVUeXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LiRydW50aW1lVHlwZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcInN1cHBvcnRWZXJzaW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LiRzdXBwb3J0VmVyc2lvbn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImVuZ2luZVZlcnNpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCIzLjIuNlwifSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQuJHNldE5hdGl2ZUNhcGFiaWxpdGllcz1mdW5jdGlvbihlKXt2YXIgaT1lLnNwbGl0KFwiLVwiKTtpZihpLmxlbmd0aDw9NCl7dmFyIHI9aVswXTtzd2l0Y2gocil7Y2FzZVwiYW5kcm9pZFwiOnI9XCJBbmRyb2lkXCI7YnJlYWs7Y2FzZVwiaW9zXCI6cj1cImlPU1wifXQuJG9zPXI7dmFyIG49aVsyXS5zdWJzdHJpbmcoMSxpWzJdLmxlbmd0aCk7dC4kc3VwcG9ydFZlcnNpb249bn19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwicmVuZGVyTW9kZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC4kcmVuZGVyTW9kZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImJvdW5kaW5nQ2xpZW50V2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuJGJvdW5kaW5nQ2xpZW50V2lkdGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJib3VuZGluZ0NsaWVudEhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC4kYm91bmRpbmdDbGllbnRIZWlnaHR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdH0oKTtpLiRsYW5ndWFnZT1cInpoLUNOXCIsaS4kb3M9XCJVbmtub3duXCIsaS4kcnVudGltZVR5cGU9XCJVbmtub3duXCIsaS4kc3VwcG9ydFZlcnNpb249XCJVbmtub3duXCIsaS4kcmVuZGVyTW9kZT1cIlVua25vd25cIixpLiRib3VuZGluZ0NsaWVudFdpZHRoPTAsaS4kYm91bmRpbmdDbGllbnRIZWlnaHQ9MCx0LkNhcGFiaWxpdGllcz1pLF9fcmVmbGVjdChpLnByb3RvdHlwZSxcImVncmV0LkNhcGFiaWxpdGllc1wiKSx0LiRtYXJrUmVhZE9ubHkoaSxcImxhbmd1YWdlXCIsITEpLHQuJG1hcmtSZWFkT25seShpLFwiaXNNb2JpbGVcIiwhMSksdC4kbWFya1JlYWRPbmx5KGksXCJvc1wiLCExKSx0LiRtYXJrUmVhZE9ubHkoaSxcInJ1bnRpbWVUeXBlXCIsITEpLHQuJG1hcmtSZWFkT25seShpLFwic3VwcG9ydFZlcnNpb25cIiwhMSksdC4kbWFya1JlYWRPbmx5KGksXCJyZW5kZXJNb2RlXCIsITEpLHQuJG1hcmtSZWFkT25seShpLFwiYm91bmRpbmdDbGllbnRXaWR0aFwiLCExKSx0LiRtYXJrUmVhZE9ubHkoaSxcImJvdW5kaW5nQ2xpZW50SGVpZ2h0XCIsITEpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIHRlc3REZXZpY2VUeXBlPWZ1bmN0aW9uKCl7aWYoIXRoaXMubmF2aWdhdG9yKXJldHVybiEwO3ZhciB0PW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtyZXR1cm4tMSE9dC5pbmRleE9mKFwibW9iaWxlXCIpfHwtMSE9dC5pbmRleE9mKFwiYW5kcm9pZFwiKX0sdGVzdFJ1bnRpbWVUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmF2aWdhdG9yPyEwOiExfTtlZ3JldC5DYXBhYmlsaXRpZXMuJGlzTW9iaWxlPXRlc3REZXZpY2VUeXBlKCksZWdyZXQuQ2FwYWJpbGl0aWVzLiRydW50aW1lVHlwZT10ZXN0UnVudGltZVR5cGUoKT9lZ3JldC5SdW50aW1lVHlwZS5XRUI6ZWdyZXQuUnVudGltZVR5cGUuTkFUSVZFO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dC5CaXRtYXBGaWxsTW9kZT17UkVQRUFUOlwicmVwZWF0XCIsU0NBTEU6XCJzY2FsZVwiLENMSVA6XCJjbGlwXCJ9fShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7clt0XT1lfWZ1bmN0aW9uIGkodCl7cmV0dXJuIHJbdF19dmFyIHI9e307dC5yZWdpc3RlckltcGxlbWVudGF0aW9uPWUsdC5nZXRJbXBsZW1lbnRhdGlvbj1pfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIHI9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIHIuZmlyc3RDaGFySGVpZ2h0PTAsXCJzdHJpbmdcIj09dHlwZW9mIGk/ci5jaGFyTGlzdD1yLnBhcnNlQ29uZmlnKGkpOmkmJmkuaGFzT3duUHJvcGVydHkoXCJmcmFtZXNcIik/ci5jaGFyTGlzdD1pLmZyYW1lczpyLmNoYXJMaXN0PXt9LHJ9cmV0dXJuIF9fZXh0ZW5kcyhlLHQpLGUucHJvdG90eXBlLmdldFRleHR1cmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdGV4dHVyZU1hcFt0XTtpZighZSl7dmFyIGk9dGhpcy5jaGFyTGlzdFt0XTtpZighaSlyZXR1cm4gbnVsbDtlPXRoaXMuY3JlYXRlVGV4dHVyZSh0LGkueCxpLnksaS53LGkuaCxpLm9mZlgsaS5vZmZZLGkuc291cmNlVyxpLnNvdXJjZUgpLHRoaXMuX3RleHR1cmVNYXBbdF09ZX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuZ2V0Q29uZmlnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY2hhckxpc3RbdF0/dGhpcy5jaGFyTGlzdFt0XVtlXTowfSxlLnByb3RvdHlwZS5fZ2V0Rmlyc3RDaGFySGVpZ2h0PWZ1bmN0aW9uKCl7aWYoMD09dGhpcy5maXJzdENoYXJIZWlnaHQpZm9yKHZhciB0IGluIHRoaXMuY2hhckxpc3Qpe3ZhciBlPXRoaXMuY2hhckxpc3RbdF07aWYoZSl7dmFyIGk9ZS5zb3VyY2VIO2lmKHZvaWQgMD09PWkpe3ZhciByPWUuaDt2b2lkIDA9PT1yJiYocj0wKTt2YXIgbj1lLm9mZlk7dm9pZCAwPT09biYmKG49MCksaT1yK259aWYoMD49aSljb250aW51ZTt0aGlzLmZpcnN0Q2hhckhlaWdodD1pO2JyZWFrfX1yZXR1cm4gdGhpcy5maXJzdENoYXJIZWlnaHR9LGUucHJvdG90eXBlLnBhcnNlQ29uZmlnPWZ1bmN0aW9uKHQpe3Q9dC5zcGxpdChcIlxcclxcblwiKS5qb2luKFwiXFxuXCIpO2Zvcih2YXIgZT10LnNwbGl0KFwiXFxuXCIpLGk9dGhpcy5nZXRDb25maWdCeUtleShlWzNdLFwiY291bnRcIikscj17fSxuPTQ7NCtpPm47bisrKXt2YXIgYT1lW25dLG89U3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmdldENvbmZpZ0J5S2V5KGEsXCJpZFwiKSkscz17fTtyW29dPXMscy54PXRoaXMuZ2V0Q29uZmlnQnlLZXkoYSxcInhcIikscy55PXRoaXMuZ2V0Q29uZmlnQnlLZXkoYSxcInlcIikscy53PXRoaXMuZ2V0Q29uZmlnQnlLZXkoYSxcIndpZHRoXCIpLHMuaD10aGlzLmdldENvbmZpZ0J5S2V5KGEsXCJoZWlnaHRcIikscy5vZmZYPXRoaXMuZ2V0Q29uZmlnQnlLZXkoYSxcInhvZmZzZXRcIikscy5vZmZZPXRoaXMuZ2V0Q29uZmlnQnlLZXkoYSxcInlvZmZzZXRcIikscy54YWR2YW5jZT10aGlzLmdldENvbmZpZ0J5S2V5KGEsXCJ4YWR2YW5jZVwiKX1yZXR1cm4gcn0sZS5wcm90b3R5cGUuZ2V0Q29uZmlnQnlLZXk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dC5zcGxpdChcIiBcIikscj0wLG49aS5sZW5ndGg7bj5yO3IrKyl7dmFyIGE9aVtyXTtpZihlPT1hLnN1YnN0cmluZygwLGUubGVuZ3RoKSl7dmFyIG89YS5zdWJzdHJpbmcoZS5sZW5ndGgrMSk7cmV0dXJuIHBhcnNlSW50KG8pfX1yZXR1cm4gMH0sZX0odC5TcHJpdGVTaGVldCk7dC5CaXRtYXBGb250PWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuQml0bWFwRm9udFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSgpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS4kdGV4dE9mZnNldFg9MCxpLiR0ZXh0T2Zmc2V0WT0wLGkuJHRleHRTdGFydFg9MCxpLiR0ZXh0U3RhcnRZPTAsaS4kbGluZUhlaWdodHM9W10saS4kcmVuZGVyTm9kZT1uZXcgdC5zeXMuQml0bWFwTm9kZSxpLiRCaXRtYXBUZXh0PXswOjAvMCwxOjAvMCwyOlwiXCIsMzowLDQ6MCw1Om51bGwsNjohMSw3OiExLDg6ITEsOTohMSwxMDpcImxlZnRcIiwxMTpcInRvcFwiLDEyOnQuQml0bWFwLmRlZmF1bHRTbW9vdGhpbmd9LGl9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInNtb290aGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRCaXRtYXBUZXh0O3JldHVybiB0WzEyXX0sc2V0OmZ1bmN0aW9uKHQpe3Q9ISF0O3ZhciBlPXRoaXMuJEJpdG1hcFRleHQ7dCE9ZVsxMl0mJihlWzEyXT10LHRoaXMuJGludmFsaWRhdGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwidGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kQml0bWFwVGV4dFsyXX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFRleHQodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuJHNldFRleHQ9ZnVuY3Rpb24odCl7bnVsbD09dCYmKHQ9XCJcIiksdD1TdHJpbmcodCk7dmFyIGU9dGhpcy4kQml0bWFwVGV4dDtyZXR1cm4gdD09ZVsyXT8hMTooZVsyXT10LHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksITApfSxpLnByb3RvdHlwZS4kZ2V0V2lkdGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRCaXRtYXBUZXh0WzBdO3JldHVybiBpc05hTih0KT90aGlzLiRnZXRDb250ZW50Qm91bmRzKCkud2lkdGg6dH0saS5wcm90b3R5cGUuJHNldFdpZHRoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuJEJpdG1hcFRleHQ7cmV0dXJuIDA+dHx8dD09ZVswXT8hMTooZVswXT10LHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksITApfSxpLnByb3RvdHlwZS4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHM9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMuY2FsbCh0aGlzKSx0aGlzLiRCaXRtYXBUZXh0WzddPSEwfSxpLnByb3RvdHlwZS4kZ2V0SGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kQml0bWFwVGV4dFsxXTtyZXR1cm4gaXNOYU4odCk/dGhpcy4kZ2V0Q29udGVudEJvdW5kcygpLmhlaWdodDp0fSxpLnByb3RvdHlwZS4kc2V0SGVpZ2h0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuJEJpdG1hcFRleHQ7cmV0dXJuIDA+dHx8dD09ZVsxXT8hMTooZVsxXT10LHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJmb250XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRCaXRtYXBUZXh0WzVdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0Rm9udCh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS4kc2V0Rm9udD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRCaXRtYXBUZXh0O3JldHVybiBlWzVdPT10PyExOihlWzVdPXQsdGhpcy4kQml0bWFwVGV4dFs2XT0hMCx0aGlzLiRpbnZhbGlkYXRlQ29udGVudEJvdW5kcygpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwibGluZVNwYWNpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJEJpdG1hcFRleHRbM119LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRMaW5lU3BhY2luZyh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS4kc2V0TGluZVNwYWNpbmc9ZnVuY3Rpb24odCl7dD0rdHx8MDt2YXIgZT10aGlzLiRCaXRtYXBUZXh0O3JldHVybiBlWzNdPT10PyExOihlWzNdPXQsdGhpcy4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKSwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImxldHRlclNwYWNpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJEJpdG1hcFRleHRbNF19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRMZXR0ZXJTcGFjaW5nKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLiRzZXRMZXR0ZXJTcGFjaW5nPWZ1bmN0aW9uKHQpe3Q9K3R8fDA7dmFyIGU9dGhpcy4kQml0bWFwVGV4dDtyZXR1cm4gZVs0XT09dD8hMTooZVs0XT10LHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJ0ZXh0QWxpZ25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJEJpdG1hcFRleHRbMTBdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0VGV4dEFsaWduKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLiRzZXRUZXh0QWxpZ249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kQml0bWFwVGV4dDtyZXR1cm4gZVsxMF09PXQ/ITE6KGVbMTBdPXQsdGhpcy4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKSwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInZlcnRpY2FsQWxpZ25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJEJpdG1hcFRleHRbMTFdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0VmVydGljYWxBbGlnbih0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS4kc2V0VmVydGljYWxBbGlnbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRCaXRtYXBUZXh0O3JldHVybiBlWzExXT09dD8hMTooZVsxMV09dCx0aGlzLiRpbnZhbGlkYXRlQ29udGVudEJvdW5kcygpLCEwKX0saS5wcm90b3R5cGUuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuJEJpdG1hcFRleHQscj10aGlzLiRnZXRUZXh0TGluZXMoKSxuPXIubGVuZ3RoO2lmKDAhPW4pe3ZhciBhPXRoaXMuJHRleHRMaW5lc1dpZHRoLG89ZVs1XSxzPXRoaXMuJHJlbmRlck5vZGU7by4kdGV4dHVyZSYmKHMuaW1hZ2U9by4kdGV4dHVyZS5fYml0bWFwRGF0YSkscy5zbW9vdGhpbmc9ZVsxMl07Zm9yKHZhciBoPW8uX2dldEZpcnN0Q2hhckhlaWdodCgpLGw9TWF0aC5jZWlsKGgqaS5FTVBUWV9GQUNUT1IpLHU9IWlzTmFOKGVbMV0pLGM9ZVs4XSxwPWVbMF0sZD1lWzFdLGY9ZVsxMF0sZz10aGlzLiR0ZXh0T2Zmc2V0WSt0aGlzLiR0ZXh0U3RhcnRZLHk9dGhpcy4kbGluZUhlaWdodHMsJD0wO24+JDskKyspe3ZhciB2PXlbJF07aWYodSYmJD4wJiZnK3Y+ZClicmVhazt2YXIgbT1yWyRdLGI9bS5sZW5ndGgseD10aGlzLiR0ZXh0T2Zmc2V0WDtpZihmIT10Lkhvcml6b250YWxBbGlnbi5MRUZUKXt2YXIgVD1wPmM/cDpjO2Y9PXQuSG9yaXpvbnRhbEFsaWduLlJJR0hUP3grPVQtYVskXTpmPT10Lkhvcml6b250YWxBbGlnbi5DRU5URVImJih4Kz1NYXRoLmZsb29yKChULWFbJF0pLzIpKX1mb3IodmFyIF89MDtiPl87XysrKXt2YXIgTz1tLmNoYXJBdChfKSxFPW8uZ2V0VGV4dHVyZShPKTtpZihFKXt2YXIgRj1FLl9iaXRtYXBXaWR0aCx3PUUuX2JpdG1hcEhlaWdodDtzLmltYWdlV2lkdGg9RS5fc291cmNlV2lkdGgscy5pbWFnZUhlaWdodD1FLl9zb3VyY2VIZWlnaHQscy5kcmF3SW1hZ2UoRS5fYml0bWFwWCxFLl9iaXRtYXBZLEYsdyx4K0UuX29mZnNldFgsZytFLl9vZmZzZXRZLEUuJGdldFNjYWxlQml0bWFwV2lkdGgoKSxFLiRnZXRTY2FsZUJpdG1hcEhlaWdodCgpKSx4Kz0oby5nZXRDb25maWcoTyxcInhhZHZhbmNlXCIpfHxFLiRnZXRUZXh0dXJlV2lkdGgoKSkrZVs0XX1lbHNlXCIgXCI9PU8/eCs9bDp0LiR3YXJuKDEwNDYsTyl9Zys9ditlWzNdfX19LGkucHJvdG90eXBlLiRtZWFzdXJlQ29udGVudEJvdW5kcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRnZXRUZXh0TGluZXMoKTswPT1lLmxlbmd0aD90LnNldEVtcHR5KCk6dC5zZXRUbyh0aGlzLiR0ZXh0T2Zmc2V0WCt0aGlzLiR0ZXh0U3RhcnRYLHRoaXMuJHRleHRPZmZzZXRZK3RoaXMuJHRleHRTdGFydFksdGhpcy4kQml0bWFwVGV4dFs4XS10aGlzLiR0ZXh0T2Zmc2V0WCx0aGlzLiRCaXRtYXBUZXh0WzldLXRoaXMuJHRleHRPZmZzZXRZKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwidGV4dFdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRUZXh0TGluZXMoKSx0aGlzLiRCaXRtYXBUZXh0WzhdfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInRleHRIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGdldFRleHRMaW5lcygpLHRoaXMuJEJpdG1hcFRleHRbOV19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuJGdldFRleHRMaW5lcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIG0mJm4ubGVuZ3RoPjAmJmY+bT8hMTooZis9bCtjLHN8fGh8fCh1LT1wKSxuLnB1c2godCksby5wdXNoKGwpLGEucHVzaCh1KSxkPU1hdGgubWF4KHUsZCksITApfXZhciByPXRoaXMuJEJpdG1hcFRleHQ7aWYoIXJbN10pcmV0dXJuIHRoaXMudGV4dExpbmVzO3ZhciBuPVtdO3RoaXMudGV4dExpbmVzPW47dmFyIGE9W107dGhpcy4kdGV4dExpbmVzV2lkdGg9YSxyWzddPSExO3ZhciBvPVtdO2lmKHRoaXMuJGxpbmVIZWlnaHRzPW8sIXJbMl18fCFyWzVdKXJldHVybiBuO2Zvcih2YXIgcyxoLGwsdSxjPXJbM10scD1yWzRdLGQ9MCxmPTAsZz0wLHk9MCwkPSFpc05hTihyWzBdKSx2PXJbMF0sbT1yWzFdLGI9cls1XSx4PWIuX2dldEZpcnN0Q2hhckhlaWdodCgpLFQ9TWF0aC5jZWlsKHgqaS5FTVBUWV9GQUNUT1IpLF89clsyXSxPPV8uc3BsaXQoLyg/OlxcclxcbnxcXHJ8XFxuKS8pLEU9Ty5sZW5ndGgsRj0hMCx3PTA7RT53O3crKyl7dmFyIFI9T1t3XSxDPVIubGVuZ3RoO2w9MCx1PTAscz0hMCxoPSExO2Zvcih2YXIgUz0wO0M+UztTKyspe3N8fCh1Kz1wKTt2YXIgUD1SLmNoYXJBdChTKSxEPXZvaWQgMCxMPXZvaWQgMCxNPTAsQT0wLE49Yi5nZXRUZXh0dXJlKFApO2lmKE4pRD1OLiRnZXRUZXh0dXJlV2lkdGgoKSxMPU4uJGdldFRleHR1cmVIZWlnaHQoKSxNPU4uX29mZnNldFgsQT1OLl9vZmZzZXRZO2Vsc2V7aWYoXCIgXCIhPVApe3QuJHdhcm4oMTA0NixQKSxzJiYocz0hMSk7Y29udGludWV9RD1ULEw9eH1pZihzJiYocz0hMSxnPU1hdGgubWluKE0sZykpLEYmJihGPSExLHk9TWF0aC5taW4oQSx5KSksJCYmUz4wJiZ1K0Q+dil7aWYoIWUoUi5zdWJzdHJpbmcoMCxTKSkpYnJlYWs7Uj1SLnN1YnN0cmluZyhTKSxDPVIubGVuZ3RoLFM9MCx1PVM9PUMtMT9EOmIuZ2V0Q29uZmlnKFAsXCJ4YWR2YW5jZVwiKXx8RCxsPUx9ZWxzZSB1Kz1TPT1DLTE/RDpiLmdldENvbmZpZyhQLFwieGFkdmFuY2VcIil8fEQsbD1NYXRoLm1heChMLGwpfWlmKG0mJnc+MCYmZj5tKWJyZWFrO2lmKGg9ITAsIWUoUikpYnJlYWt9Zi09YyxyWzhdPWQscls5XT1mLHRoaXMuJHRleHRPZmZzZXRYPWcsdGhpcy4kdGV4dE9mZnNldFk9eSx0aGlzLiR0ZXh0U3RhcnRYPTAsdGhpcy4kdGV4dFN0YXJ0WT0wO3ZhciBCO3JldHVybiB2PmQmJihCPXJbMTBdLEI9PXQuSG9yaXpvbnRhbEFsaWduLlJJR0hUP3RoaXMuJHRleHRTdGFydFg9di1kOkI9PXQuSG9yaXpvbnRhbEFsaWduLkNFTlRFUiYmKHRoaXMuJHRleHRTdGFydFg9TWF0aC5mbG9vcigodi1kKS8yKSkpLG0+ZiYmKEI9clsxMV0sQj09dC5WZXJ0aWNhbEFsaWduLkJPVFRPTT90aGlzLiR0ZXh0U3RhcnRZPW0tZjpCPT10LlZlcnRpY2FsQWxpZ24uTUlERExFJiYodGhpcy4kdGV4dFN0YXJ0WT1NYXRoLmZsb29yKChtLWYpLzIpKSksbn0saX0odC5EaXNwbGF5T2JqZWN0KTtlLkVNUFRZX0ZBQ1RPUj0uMzMsdC5CaXRtYXBUZXh0PWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuQml0bWFwVGV4dFwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO2UuTEVGVD1cImxlZnRcIixlLlJJR0hUPVwicmlnaHRcIixlLkNFTlRFUj1cImNlbnRlclwiLGUuSlVTVElGWT1cImp1c3RpZnlcIixlLkNPTlRFTlRfSlVTVElGWT1cImNvbnRlbnRKdXN0aWZ5XCIsdC5Ib3Jpem9udGFsQWxpZ249ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5Ib3Jpem9udGFsQWxpZ25cIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMucmVwbGFjZUFycj1bXSx0aGlzLnJlc3V0bEFycj1bXSx0aGlzLmluaXRSZXBsYWNlQXJyKCl9cmV0dXJuIGUucHJvdG90eXBlLmluaXRSZXBsYWNlQXJyPWZ1bmN0aW9uKCl7dGhpcy5yZXBsYWNlQXJyPVtdLHRoaXMucmVwbGFjZUFyci5wdXNoKFsvJmx0Oy9nLFwiPFwiXSksdGhpcy5yZXBsYWNlQXJyLnB1c2goWy8mZ3Q7L2csXCI+XCJdKSx0aGlzLnJlcGxhY2VBcnIucHVzaChbLyZhbXA7L2csXCImXCJdKSx0aGlzLnJlcGxhY2VBcnIucHVzaChbLyZxdW90Oy9nLCdcIiddKSx0aGlzLnJlcGxhY2VBcnIucHVzaChbLyZhcG9zOy9nLFwiJ1wiXSl9LGUucHJvdG90eXBlLnJlcGxhY2VTcGVjaWFsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5yZXBsYWNlQXJyLmxlbmd0aDtlKyspe3ZhciBpPXRoaXMucmVwbGFjZUFycltlXVswXSxyPXRoaXMucmVwbGFjZUFycltlXVsxXTt0PXQucmVwbGFjZShpLHIpfXJldHVybiB0fSxlLnByb3RvdHlwZS5wYXJzZXI9ZnVuY3Rpb24oZSl7dGhpcy5zdGFja0FycmF5PVtdLHRoaXMucmVzdXRsQXJyPVtdO2Zvcih2YXIgaT0wLHI9ZS5sZW5ndGg7cj5pOyl7dmFyIG49ZS5pbmRleE9mKFwiPFwiLGkpO2lmKDA+bil0aGlzLmFkZFRvUmVzdWx0QXJyKGUuc3Vic3RyaW5nKGkpKSxpPXI7ZWxzZXt0aGlzLmFkZFRvUmVzdWx0QXJyKGUuc3Vic3RyaW5nKGksbikpO3ZhciBhPWUuaW5kZXhPZihcIj5cIixuKTstMT09YT8odC4kZXJyb3IoMTAzOCksYT1uKTpcIi9cIj09ZS5jaGFyQXQobisxKT90aGlzLnN0YWNrQXJyYXkucG9wKCk6dGhpcy5hZGRUb0FycmF5KGUuc3Vic3RyaW5nKG4rMSxhKSksaT1hKzF9fXJldHVybiB0aGlzLnJlc3V0bEFycn0sZS5wcm90b3R5cGUuYWRkVG9SZXN1bHRBcnI9ZnVuY3Rpb24odCl7XCJcIiE9dCYmKHQ9dGhpcy5yZXBsYWNlU3BlY2lhbCh0KSx0aGlzLnN0YWNrQXJyYXkubGVuZ3RoPjA/dGhpcy5yZXN1dGxBcnIucHVzaCh7dGV4dDp0LHN0eWxlOnRoaXMuc3RhY2tBcnJheVt0aGlzLnN0YWNrQXJyYXkubGVuZ3RoLTFdfSk6dGhpcy5yZXN1dGxBcnIucHVzaCh7dGV4dDp0fSkpfSxlLnByb3RvdHlwZS5jaGFuZ2VTdHJpbmdUb09iamVjdD1mdW5jdGlvbih0KXt0PXQudHJpbSgpO3ZhciBlPXt9LGk9W107aWYoXCJpXCI9PXQuY2hhckF0KDApfHxcImJcIj09dC5jaGFyQXQoMCl8fFwidVwiPT10LmNoYXJBdCgwKSl0aGlzLmFkZFByb3BlcnR5KGUsdCxcInRydWVcIik7ZWxzZSBpZihpPXQubWF0Y2goL14oZm9udHxhKVxccy8pKXt0PXQuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKS50cmltKCk7Zm9yKHZhciByPTAsbj12b2lkIDA7bj10Lm1hdGNoKHRoaXMuZ2V0SGVhZFJlZygpKTspe3ZhciBhPW5bMF0sbz1cIlwiO3Q9dC5zdWJzdHJpbmcoYS5sZW5ndGgpLnRyaW0oKSwnXCInPT10LmNoYXJBdCgwKT8ocj10LmluZGV4T2YoJ1wiJywxKSxvPXQuc3Vic3RyaW5nKDEscikscis9MSk6XCInXCI9PXQuY2hhckF0KDApPyhyPXQuaW5kZXhPZihcIidcIiwxKSxvPXQuc3Vic3RyaW5nKDEscikscis9MSk6KG89dC5tYXRjaCgvKFxcUykrLylbMF0scj1vLmxlbmd0aCksdGhpcy5hZGRQcm9wZXJ0eShlLGEuc3Vic3RyaW5nKDAsYS5sZW5ndGgtMSkudHJpbSgpLG8udHJpbSgpKSx0PXQuc3Vic3RyaW5nKHIpLnRyaW0oKX19cmV0dXJuIGV9LGUucHJvdG90eXBlLmdldEhlYWRSZWc9ZnVuY3Rpb24oKXtyZXR1cm4vXihjb2xvcnx0ZXh0Y29sb3J8c3Ryb2tlY29sb3J8c3Ryb2tlfGJ8Ym9sZHxpfGl0YWxpY3x1fHNpemV8Zm9udGZhbWlseXxocmVmfHRhcmdldCkoXFxzKSo9L30sZS5wcm90b3R5cGUuYWRkUHJvcGVydHk9ZnVuY3Rpb24odCxlLGkpe3N3aXRjaChlLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImNvbG9yXCI6Y2FzZVwidGV4dGNvbG9yXCI6aT1pLnJlcGxhY2UoLyMvLFwiMHhcIiksdC50ZXh0Q29sb3I9cGFyc2VJbnQoaSk7YnJlYWs7Y2FzZVwic3Ryb2tlY29sb3JcIjppPWkucmVwbGFjZSgvIy8sXCIweFwiKSx0LnN0cm9rZUNvbG9yPXBhcnNlSW50KGkpO2JyZWFrO2Nhc2VcInN0cm9rZVwiOnQuc3Ryb2tlPXBhcnNlSW50KGkpO2JyZWFrO2Nhc2VcImJcIjpjYXNlXCJib2xkXCI6dC5ib2xkPVwidHJ1ZVwiPT1pO2JyZWFrO2Nhc2VcInVcIjp0LnVuZGVybGluZT1cInRydWVcIj09aTticmVhaztjYXNlXCJpXCI6Y2FzZVwiaXRhbGljXCI6dC5pdGFsaWM9XCJ0cnVlXCI9PWk7YnJlYWs7Y2FzZVwic2l6ZVwiOnQuc2l6ZT1wYXJzZUludChpKTticmVhaztjYXNlXCJmb250ZmFtaWx5XCI6dC5mb250RmFtaWx5PWk7YnJlYWs7Y2FzZVwiaHJlZlwiOnQuaHJlZj10aGlzLnJlcGxhY2VTcGVjaWFsKGkpO2JyZWFrO2Nhc2VcInRhcmdldFwiOnQudGFyZ2V0PXRoaXMucmVwbGFjZVNwZWNpYWwoaSl9fSxlLnByb3RvdHlwZS5hZGRUb0FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2hhbmdlU3RyaW5nVG9PYmplY3QodCk7aWYoMD09dGhpcy5zdGFja0FycmF5Lmxlbmd0aCl0aGlzLnN0YWNrQXJyYXkucHVzaChlKTtlbHNle3ZhciBpPXRoaXMuc3RhY2tBcnJheVt0aGlzLnN0YWNrQXJyYXkubGVuZ3RoLTFdO2Zvcih2YXIgciBpbiBpKW51bGw9PWVbcl0mJihlW3JdPWlbcl0pO3RoaXMuc3RhY2tBcnJheS5wdXNoKGUpfX0sZX0oKTt0Lkh0bWxUZXh0UGFyc2VyPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuSHRtbFRleHRQYXJzZXJcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXt2YXIgdD1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuc3RhZ2VUZXh0QWRkZWQ9ITEsdC5fdGV4dD1udWxsLHQuX2lzRm9jdXM9ITEsdH1yZXR1cm4gX19leHRlbmRzKGksZSksaS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlKXt0aGlzLl90ZXh0PWUsdGhpcy5zdGFnZVRleHQ9bmV3IHQuU3RhZ2VUZXh0LHRoaXMuc3RhZ2VUZXh0LiRzZXRUZXh0RmllbGQodGhpcy5fdGV4dCl9LGkucHJvdG90eXBlLl9hZGRTdGFnZVRleHQ9ZnVuY3Rpb24oKXt0aGlzLnN0YWdlVGV4dEFkZGVkfHwodGhpcy5fdGV4dC4kaW5wdXRFbmFibGVkfHwodGhpcy5fdGV4dC4kdG91Y2hFbmFibGVkPSEwKSx0aGlzLnRlbXBTdGFnZT10aGlzLl90ZXh0LnN0YWdlLHRoaXMuc3RhZ2VUZXh0LiRhZGRUb1N0YWdlKCksdGhpcy5zdGFnZVRleHQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVRleHRcIix0aGlzLnVwZGF0ZVRleHRIYW5kbGVyLHRoaXMpLHRoaXMuX3RleHQuYWRkRXZlbnRMaXN0ZW5lcih0LlRvdWNoRXZlbnQuVE9VQ0hfQkVHSU4sdGhpcy5vbk1vdXNlRG93bkhhbmRsZXIsdGhpcyksdGhpcy5zdGFnZVRleHQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLmJsdXJIYW5kbGVyLHRoaXMpLHRoaXMuc3RhZ2VUZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuZm9jdXNIYW5kbGVyLHRoaXMpLHRoaXMuc3RhZ2VUZXh0QWRkZWQ9ITApfSxpLnByb3RvdHlwZS5fcmVtb3ZlU3RhZ2VUZXh0PWZ1bmN0aW9uKCl7dGhpcy5zdGFnZVRleHRBZGRlZCYmKHRoaXMuX3RleHQuJGlucHV0RW5hYmxlZHx8KHRoaXMuX3RleHQuJHRvdWNoRW5hYmxlZD0hMSksdGhpcy5zdGFnZVRleHQuJHJlbW92ZUZyb21TdGFnZSgpLHRoaXMuc3RhZ2VUZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVUZXh0XCIsdGhpcy51cGRhdGVUZXh0SGFuZGxlcix0aGlzKSx0aGlzLl90ZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIodC5Ub3VjaEV2ZW50LlRPVUNIX0JFR0lOLHRoaXMub25Nb3VzZURvd25IYW5kbGVyLHRoaXMpLHRoaXMudGVtcFN0YWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIodC5Ub3VjaEV2ZW50LlRPVUNIX0JFR0lOLHRoaXMub25TdGFnZURvd25IYW5kbGVyLHRoaXMpLHRoaXMuc3RhZ2VUZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5ibHVySGFuZGxlcix0aGlzKSx0aGlzLnN0YWdlVGV4dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLmZvY3VzSGFuZGxlcix0aGlzKSx0aGlzLnN0YWdlVGV4dEFkZGVkPSExKX0saS5wcm90b3R5cGUuX2dldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFnZVRleHQuJGdldFRleHQoKX0saS5wcm90b3R5cGUuX3NldFRleHQ9ZnVuY3Rpb24odCl7dGhpcy5zdGFnZVRleHQuJHNldFRleHQodCl9LGkucHJvdG90eXBlLl9zZXRDb2xvcj1mdW5jdGlvbih0KXt0aGlzLnN0YWdlVGV4dC4kc2V0Q29sb3IodCl9LGkucHJvdG90eXBlLmZvY3VzSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9pc0ZvY3VzfHwodGhpcy5faXNGb2N1cz0hMCxlLnNob3dpbmd8fCh0aGlzLl90ZXh0LiRpc1R5cGluZz0hMCksdGhpcy5fdGV4dC4kaW52YWxpZGF0ZUNvbnRlbnRCb3VuZHMoKSx0aGlzLl90ZXh0LmRpc3BhdGNoRXZlbnQobmV3IHQuRm9jdXNFdmVudCh0LkZvY3VzRXZlbnQuRk9DVVNfSU4sITApKSl9LGkucHJvdG90eXBlLmJsdXJIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2lzRm9jdXMmJih0aGlzLl9pc0ZvY3VzPSExLHRoaXMudGVtcFN0YWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIodC5Ub3VjaEV2ZW50LlRPVUNIX0JFR0lOLHRoaXMub25TdGFnZURvd25IYW5kbGVyLHRoaXMpLHRoaXMuX3RleHQuJGlzVHlwaW5nPSExLHRoaXMuX3RleHQuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksdGhpcy5zdGFnZVRleHQuJG9uQmx1cigpLHRoaXMuX3RleHQuZGlzcGF0Y2hFdmVudChuZXcgdC5Gb2N1c0V2ZW50KHQuRm9jdXNFdmVudC5GT0NVU19PVVQsITApKSl9LGkucHJvdG90eXBlLm9uTW91c2VEb3duSGFuZGxlcj1mdW5jdGlvbih0KXt0aGlzLiRvbkZvY3VzKCl9LGkucHJvdG90eXBlLiRvbkZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5fdGV4dC52aXNpYmxlJiYodGhpcy5faXNGb2N1c3x8KHRoaXMudGVtcFN0YWdlLmFkZEV2ZW50TGlzdGVuZXIodC5Ub3VjaEV2ZW50LlRPVUNIX0JFR0lOLHRoaXMub25TdGFnZURvd25IYW5kbGVyLHRoaXMpLHRoaXMuc3RhZ2VUZXh0LiRzaG93KCkpKX0saS5wcm90b3R5cGUub25TdGFnZURvd25IYW5kbGVyPWZ1bmN0aW9uKHQpe3QuJHRhcmdldCE9dGhpcy5fdGV4dCYmdGhpcy5zdGFnZVRleHQuJGhpZGUoKX0saS5wcm90b3R5cGUudXBkYXRlVGV4dEhhbmRsZXI9ZnVuY3Rpb24oZSl7dmFyIGkscixuPXRoaXMuX3RleHQuJFRleHRGaWVsZCxhPXRoaXMuc3RhZ2VUZXh0LiRnZXRUZXh0KCksbz0hMTtudWxsIT1uWzM1XSYmKGk9bmV3IFJlZ0V4cChcIltcIituWzM1XStcIl1cIixcImdcIikscj1hLm1hdGNoKGkpLGE9cj9yLmpvaW4oXCJcIik6XCJcIixvPSEwKSxudWxsIT1uWzM2XSYmKGk9bmV3IFJlZ0V4cChcIlteXCIrblszNl0rXCJdXCIsXCJnXCIpLHI9YS5tYXRjaChpKSxhPXI/ci5qb2luKFwiXCIpOlwiXCIsbz0hMCksbyYmdGhpcy5zdGFnZVRleHQuJGdldFRleHQoKSE9YSYmdGhpcy5zdGFnZVRleHQuJHNldFRleHQoYSksdGhpcy5yZXNldFRleHQoKSx0aGlzLl90ZXh0LmRpc3BhdGNoRXZlbnQobmV3IHQuRXZlbnQodC5FdmVudC5DSEFOR0UsITApKX0saS5wcm90b3R5cGUucmVzZXRUZXh0PWZ1bmN0aW9uKCl7dGhpcy5fdGV4dC4kc2V0QmFzZVRleHQodGhpcy5zdGFnZVRleHQuJGdldFRleHQoKSl9LGkucHJvdG90eXBlLl9oaWRlSW5wdXQ9ZnVuY3Rpb24oKXt0aGlzLnN0YWdlVGV4dC4kcmVtb3ZlRnJvbVN0YWdlKCl9LGkucHJvdG90eXBlLnVwZGF0ZUlucHV0PWZ1bmN0aW9uKCl7IXRoaXMuX3RleHQuJHZpc2libGUmJnRoaXMuc3RhZ2VUZXh0JiZ0aGlzLl9oaWRlSW5wdXQoKX0saS5wcm90b3R5cGUuX3VwZGF0ZVByb3BlcnRpZXM9ZnVuY3Rpb24oKXtpZih0aGlzLl9pc0ZvY3VzKXJldHVybiB0aGlzLnN0YWdlVGV4dC4kcmVzZXRTdGFnZVRleHQoKSx2b2lkIHRoaXMudXBkYXRlSW5wdXQoKTt2YXIgdD10aGlzLl90ZXh0LiRzdGFnZTtpZihudWxsPT10KTtlbHNlIGZvcih2YXIgZT10aGlzLl90ZXh0LGk9ZS4kdmlzaWJsZTs7KXtpZighaSlicmVhaztpZihlPWUucGFyZW50LGU9PXQpYnJlYWs7aT1lLiR2aXNpYmxlfXRoaXMuc3RhZ2VUZXh0LiRzZXRUZXh0KHRoaXMuX3RleHQuJFRleHRGaWVsZFsxM10pLHRoaXMuc3RhZ2VUZXh0LiRyZXNldFN0YWdlVGV4dCgpLHRoaXMudXBkYXRlSW5wdXQoKX0saX0odC5IYXNoT2JqZWN0KTt0LklucHV0Q29udHJvbGxlcj1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LklucHV0Q29udHJvbGxlclwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7fShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuKXtuPW58fHt9O3ZhciBhPW51bGw9PW4uaXRhbGljP2lbMTZdOm4uaXRhbGljLG89bnVsbD09bi5ib2xkP2lbMTVdOm4uYm9sZCxzPW51bGw9PW4uc2l6ZT9pWzBdOm4uc2l6ZSxoPW4uZm9udEZhbWlseXx8aVs4XXx8ci5kZWZhdWx0X2ZvbnRGYW1pbHk7cmV0dXJuIHQuc3lzLm1lYXN1cmVUZXh0KGUsaCxzLG8sYSl9dmFyIGk9bmV3IFJlZ0V4cChcIig/PVtcXFxcdTAwQkYtXFxcXHUxRkZGXFxcXHUyQzAwLVxcXFx1RDdGRl18XFxcXGJ8XFxcXHMpKD8hW+OAgu+8jO+8geOAgeOAi+KApu+8iSl94oCd44CRXFxcXC5cXFxcLFxcXFwhXFxcXD9cXFxcXVxcXFw6XSlcIikscj1mdW5jdGlvbihyKXtmdW5jdGlvbiBuKCl7dmFyIGU9ci5jYWxsKHRoaXMpfHx0aGlzO2UuJGlucHV0RW5hYmxlZD0hMSxlLmlucHV0VXRpbHM9bnVsbCxlLmdyYXBoaWNzTm9kZT1udWxsLGUuaXNGbG93PSExLGUudGV4dEFycj1bXSxlLmxpbmVzQXJyPVtdLGUuJGlzVHlwaW5nPSExO3ZhciBpPW5ldyB0LnN5cy5UZXh0Tm9kZTtyZXR1cm4gaS5mb250RmFtaWx5PW4uZGVmYXVsdF9mb250RmFtaWx5LGUudGV4dE5vZGU9aSxlLiRyZW5kZXJOb2RlPWksZS4kVGV4dEZpZWxkPXswOm4uZGVmYXVsdF9zaXplLDE6MCwyOm4uZGVmYXVsdF90ZXh0Q29sb3IsMzowLzAsNDowLzAsNTowLDY6MCw3OjAsODpuLmRlZmF1bHRfZm9udEZhbWlseSw5OlwibGVmdFwiLDEwOlwidG9wXCIsMTE6XCIjZmZmZmZmXCIsMTI6XCJcIiwxMzpcIlwiLDE0OltdLDE1OiExLDE2OiExLDE3OiEwLDE4OiExLDE5OiExLDIwOiExLDIxOjAsMjI6MCwyMzowLDI0OnQuVGV4dEZpZWxkVHlwZS5EWU5BTUlDLDI1OjAsMjY6XCIjMDAwMDAwXCIsMjc6MCwyODotMSwyOTowLDMwOiExLDMxOiExLDMyOjAsMzM6ITEsMzQ6MTY3NzcyMTUsMzU6bnVsbCwzNjpudWxsLDM3OnQuVGV4dEZpZWxkSW5wdXRUeXBlLlRFWFR9LGV9cmV0dXJuIF9fZXh0ZW5kcyhuLHIpLG4ucHJvdG90eXBlLmlzSW5wdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzI0XT09dC5UZXh0RmllbGRUeXBlLklOUFVUfSxuLnByb3RvdHlwZS4kc2V0VG91Y2hFbmFibGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXIucHJvdG90eXBlLiRzZXRUb3VjaEVuYWJsZWQuY2FsbCh0aGlzLHQpO3JldHVybiB0aGlzLmlzSW5wdXQoKSYmKHRoaXMuJGlucHV0RW5hYmxlZD0hMCksZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiZm9udEZhbWlseVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzhdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0Rm9udEZhbWlseSh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS4kc2V0Rm9udEZhbWlseT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRUZXh0RmllbGQ7cmV0dXJuIGVbOF09PXQ/ITE6KGVbOF09dCx0aGlzLmludmFsaWRhdGVGb250U3RyaW5nKCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRUZXh0RmllbGRbMF19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRTaXplKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRzZXRTaXplPWZ1bmN0aW9uKHQpe3Q9K3R8fDA7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO3JldHVybiBlWzBdPT10PyExOihlWzBdPXQsdGhpcy5pbnZhbGlkYXRlRm9udFN0cmluZygpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiYm9sZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzE1XX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldEJvbGQodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuJHNldEJvbGQ9ZnVuY3Rpb24odCl7dD0hIXQ7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO3JldHVybiB0PT1lWzE1XT8hMTooZVsxNV09dCx0aGlzLmludmFsaWRhdGVGb250U3RyaW5nKCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJpdGFsaWNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJFRleHRGaWVsZFsxNl19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRJdGFsaWModCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuJHNldEl0YWxpYz1mdW5jdGlvbih0KXt0PSEhdDt2YXIgZT10aGlzLiRUZXh0RmllbGQ7cmV0dXJuIHQ9PWVbMTZdPyExOihlWzE2XT10LHRoaXMuaW52YWxpZGF0ZUZvbnRTdHJpbmcoKSwhMCl9LG4ucHJvdG90eXBlLmludmFsaWRhdGVGb250U3RyaW5nPWZ1bmN0aW9uKCl7dGhpcy4kVGV4dEZpZWxkWzE3XT0hMCx0aGlzLiRpbnZhbGlkYXRlVGV4dEZpZWxkKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcInRleHRBbGlnblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzldfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0VGV4dEFsaWduKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRzZXRUZXh0QWxpZ249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO3JldHVybiBlWzldPT10PyExOihlWzldPXQsdGhpcy4kaW52YWxpZGF0ZVRleHRGaWVsZCgpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwidmVydGljYWxBbGlnblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzEwXX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldFZlcnRpY2FsQWxpZ24odCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuJHNldFZlcnRpY2FsQWxpZ249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO3JldHVybiBlWzEwXT09dD8hMTooZVsxMF09dCx0aGlzLiRpbnZhbGlkYXRlVGV4dEZpZWxkKCksITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJsaW5lU3BhY2luZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzFdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0TGluZVNwYWNpbmcodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuJHNldExpbmVTcGFjaW5nPWZ1bmN0aW9uKHQpe3Q9K3R8fDA7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO3JldHVybiBlWzFdPT10PyExOihlWzFdPXQsdGhpcy4kaW52YWxpZGF0ZVRleHRGaWVsZCgpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwidGV4dENvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRUZXh0RmllbGRbMl19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRUZXh0Q29sb3IodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuJHNldFRleHRDb2xvcj1mdW5jdGlvbih0KXt0PTB8K3Q7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO3JldHVybiBlWzJdPT10PyExOihlWzJdPXQsdGhpcy5pbnB1dFV0aWxzJiZ0aGlzLmlucHV0VXRpbHMuX3NldENvbG9yKHRoaXMuJFRleHRGaWVsZFsyXSksdGhpcy4kaW52YWxpZGF0ZSgpLCEwKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwid29yZFdyYXBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJFRleHRGaWVsZFsxOV19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRXb3JkV3JhcCh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS4kc2V0V29yZFdyYXA9ZnVuY3Rpb24odCl7dD0hIXQ7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO3QhPWVbMTldJiYoZVsyMF18fChlWzE5XT10LHRoaXMuJGludmFsaWRhdGVUZXh0RmllbGQoKSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRUZXh0RmllbGRbMjRdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0VHlwZSh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS4kc2V0VHlwZT1mdW5jdGlvbihlKXt2YXIgaT10aGlzLiRUZXh0RmllbGQ7cmV0dXJuIGlbMjRdIT1lPyhpWzI0XT1lLGU9PXQuVGV4dEZpZWxkVHlwZS5JTlBVVD8oaXNOYU4oaVszXSkmJnRoaXMuJHNldFdpZHRoKDEwMCksaXNOYU4oaVs0XSkmJnRoaXMuJHNldEhlaWdodCgzMCksdGhpcy4kc2V0VG91Y2hFbmFibGVkKCEwKSxudWxsPT10aGlzLmlucHV0VXRpbHMmJih0aGlzLmlucHV0VXRpbHM9bmV3IHQuSW5wdXRDb250cm9sbGVyKSx0aGlzLmlucHV0VXRpbHMuaW5pdCh0aGlzKSx0aGlzLiRpbnZhbGlkYXRlVGV4dEZpZWxkKCksdGhpcy4kc3RhZ2UmJnRoaXMuaW5wdXRVdGlscy5fYWRkU3RhZ2VUZXh0KCkpOih0aGlzLmlucHV0VXRpbHMmJih0aGlzLmlucHV0VXRpbHMuX3JlbW92ZVN0YWdlVGV4dCgpLHRoaXMuaW5wdXRVdGlscz1udWxsKSx0aGlzLiRzZXRUb3VjaEVuYWJsZWQoITEpKSwhMCk6ITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcImlucHV0VHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzM3XX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJFRleHRGaWVsZFszN109dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJ0ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRUZXh0KCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRUZXh0KHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRnZXRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJFRleHRGaWVsZFsyNF09PXQuVGV4dEZpZWxkVHlwZS5JTlBVVD90aGlzLmlucHV0VXRpbHMuX2dldFRleHQoKTp0aGlzLiRUZXh0RmllbGRbMTNdfSxuLnByb3RvdHlwZS4kc2V0QmFzZVRleHQ9ZnVuY3Rpb24odCl7bnVsbD09dCYmKHQ9XCJcIiksdD10LnRvU3RyaW5nKCksdGhpcy5pc0Zsb3c9ITE7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO2lmKGVbMTNdIT10KXt0aGlzLiRpbnZhbGlkYXRlVGV4dEZpZWxkKCksZVsxM109dDt2YXIgaT1cIlwiO3JldHVybiBpPWVbMjBdP3RoaXMuY2hhbmdlVG9QYXNzVGV4dCh0KTp0LHRoaXMuc2V0TWlkZGxlU3R5bGUoW3t0ZXh0Oml9XSksITB9cmV0dXJuITF9LG4ucHJvdG90eXBlLiRzZXRUZXh0PWZ1bmN0aW9uKHQpe251bGw9PXQmJih0PVwiXCIpO3ZhciBlPXRoaXMuJHNldEJhc2VUZXh0KHQpO3JldHVybiB0aGlzLmlucHV0VXRpbHMmJnRoaXMuaW5wdXRVdGlscy5fc2V0VGV4dCh0aGlzLiRUZXh0RmllbGRbMTNdKSxlfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJkaXNwbGF5QXNQYXNzd29yZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzIwXX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldERpc3BsYXlBc1Bhc3N3b3JkKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRzZXREaXNwbGF5QXNQYXNzd29yZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRUZXh0RmllbGQ7aWYoZVsyMF0hPXQpe2VbMjBdPXQsdGhpcy4kaW52YWxpZGF0ZVRleHRGaWVsZCgpO3ZhciBpPVwiXCI7cmV0dXJuIGk9dD90aGlzLmNoYW5nZVRvUGFzc1RleHQoZVsxM10pOmVbMTNdLHRoaXMuc2V0TWlkZGxlU3R5bGUoW3t0ZXh0Oml9XSksITB9cmV0dXJuITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcInN0cm9rZUNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRUZXh0RmllbGRbMjVdfSxzZXQ6ZnVuY3Rpb24odCl7dD0rdHx8MCx0aGlzLiRzZXRTdHJva2VDb2xvcih0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS4kc2V0U3Ryb2tlQ29sb3I9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy4kVGV4dEZpZWxkO3JldHVybiBpWzI1XSE9ZT8odGhpcy4kaW52YWxpZGF0ZVRleHRGaWVsZCgpLGlbMjVdPWUsaVsyNl09dC50b0NvbG9yU3RyaW5nKGUpLCEwKTohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwic3Ryb2tlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRUZXh0RmllbGRbMjddfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0U3Ryb2tlKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRzZXRTdHJva2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuJFRleHRGaWVsZFsyN10hPXQ/KHRoaXMuJGludmFsaWRhdGVUZXh0RmllbGQoKSx0aGlzLiRUZXh0RmllbGRbMjddPXQsITApOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJtYXhDaGFyc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzIxXX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldE1heENoYXJzKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRzZXRNYXhDaGFycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzIxXSE9dD8odGhpcy4kVGV4dEZpZWxkWzIxXT10LCEwKTohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwic2Nyb2xsVlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodGhpcy4kVGV4dEZpZWxkWzI4XSwxKSx0aGlzLm1heFNjcm9sbFYpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kVGV4dEZpZWxkWzI4XT1NYXRoLm1heCh0LDEpLHRoaXMuJGludmFsaWRhdGVUZXh0RmllbGQoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJtYXhTY3JvbGxWXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRMaW5lc0FycigpLE1hdGgubWF4KHRoaXMuJFRleHRGaWVsZFsyOV0tdC5UZXh0RmllbGRVdGlscy4kZ2V0U2Nyb2xsTnVtKHRoaXMpKzEsMSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwic2VsZWN0aW9uQmVnaW5JbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJzZWxlY3Rpb25FbmRJbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJjYXJldEluZGV4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiAwfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRzZXRTZWxlY3Rpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4hMX0sbi5wcm90b3R5cGUuJGdldExpbmVIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzFdK3RoaXMuJFRleHRGaWVsZFswXX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwibnVtTGluZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGdldExpbmVzQXJyKCksdGhpcy4kVGV4dEZpZWxkWzI5XX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJtdWx0aWxpbmVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJFRleHRGaWVsZFszMF19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRNdWx0aWxpbmUodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuJHNldE11bHRpbGluZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzMwXT10LHRoaXMuJGludmFsaWRhdGVUZXh0RmllbGQoKSwhMH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwicmVzdHJpY3RcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kVGV4dEZpZWxkLGU9bnVsbDtyZXR1cm4gbnVsbCE9dFszNV0mJihlPXRbMzVdKSxudWxsIT10WzM2XSYmKG51bGw9PWUmJihlPVwiXCIpLGUrPVwiXlwiK3RbMzZdKSxlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO2lmKG51bGw9PXQpZVszNV09bnVsbCxlWzM2XT1udWxsO2Vsc2V7Zm9yKHZhciBpPS0xO2k8dC5sZW5ndGgmJihpPXQuaW5kZXhPZihcIl5cIixpKSwwIT1pKSYmaT4wJiZcIlxcXFxcIj09dC5jaGFyQXQoaS0xKTspaSsrOzA9PWk/KGVbMzVdPW51bGwsZVszNl09dC5zdWJzdHJpbmcoaSsxKSk6aT4wPyhlWzM1XT10LnN1YnN0cmluZygwLGkpLGVbMzZdPXQuc3Vic3RyaW5nKGkrMSkpOihlWzM1XT10LGVbMzZdPW51bGwpfX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS4kc2V0V2lkdGg9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kVGV4dEZpZWxkO2lmKGlzTmFOKHQpKXtpZihpc05hTihlWzNdKSlyZXR1cm4hMTtlWzNdPTAvMH1lbHNle2lmKGVbM109PXQpcmV0dXJuITE7ZVszXT10fXJldHVybiB0PSt0LDA+dD8hMToodGhpcy4kaW52YWxpZGF0ZVRleHRGaWVsZCgpLCEwKX0sbi5wcm90b3R5cGUuJHNldEhlaWdodD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRUZXh0RmllbGQ7aWYoaXNOYU4odCkpe2lmKGlzTmFOKGVbNF0pKXJldHVybiExO2VbNF09MC8wfWVsc2V7aWYoZVs0XT09dClyZXR1cm4hMTtlWzRdPXR9cmV0dXJuIHQ9K3QsMD50PyExOih0aGlzLiRpbnZhbGlkYXRlVGV4dEZpZWxkKCksITApfSxuLnByb3RvdHlwZS4kZ2V0V2lkdGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRUZXh0RmllbGQ7cmV0dXJuIGlzTmFOKHRbM10pP3RoaXMuJGdldENvbnRlbnRCb3VuZHMoKS53aWR0aDp0WzNdfSxuLnByb3RvdHlwZS4kZ2V0SGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kVGV4dEZpZWxkO3JldHVybiBpc05hTih0WzRdKT90aGlzLiRnZXRDb250ZW50Qm91bmRzKCkuaGVpZ2h0OnRbNF19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcImJvcmRlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzMxXX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldEJvcmRlcih0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS4kc2V0Qm9yZGVyPWZ1bmN0aW9uKHQpe3RoaXMuJFRleHRGaWVsZFszMV09ISF0LHRoaXMuJGludmFsaWRhdGUoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiYm9yZGVyQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJFRleHRGaWVsZFszMl19LHNldDpmdW5jdGlvbih0KXt0aGlzLiRzZXRCb3JkZXJDb2xvcih0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS4kc2V0Qm9yZGVyQ29sb3I9ZnVuY3Rpb24odCl7dGhpcy4kVGV4dEZpZWxkWzMyXT0rdHx8MCx0aGlzLiRpbnZhbGlkYXRlKClcbn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiYmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kVGV4dEZpZWxkWzMzXX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJHNldEJhY2tncm91bmQodCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuJHNldEJhY2tncm91bmQ9ZnVuY3Rpb24odCl7dGhpcy4kVGV4dEZpZWxkWzMzXT10LHRoaXMuJGludmFsaWRhdGUoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiYmFja2dyb3VuZENvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRUZXh0RmllbGRbMzRdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2V0QmFja2dyb3VuZENvbG9yKHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLiRzZXRCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24odCl7dGhpcy4kVGV4dEZpZWxkWzM0XT10LHRoaXMuJGludmFsaWRhdGUoKX0sbi5wcm90b3R5cGUuZmlsbEJhY2tncm91bmQ9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5ncmFwaGljc05vZGU7aSYmaS5jbGVhcigpO3ZhciByPXRoaXMuJFRleHRGaWVsZDtpZihyWzMzXXx8clszMV18fGUmJmUubGVuZ3RoPjApe2lmKCFpKXtpPXRoaXMuZ3JhcGhpY3NOb2RlPW5ldyB0LnN5cy5HcmFwaGljc05vZGU7dmFyIG49bmV3IHQuc3lzLkdyb3VwTm9kZTtuLmFkZE5vZGUoaSksbi5hZGROb2RlKHRoaXMudGV4dE5vZGUpLHRoaXMuJHJlbmRlck5vZGU9bn12YXIgYT12b2lkIDAsbz12b2lkIDA7aWYoclszM10mJihhPWkuYmVnaW5GaWxsKHJbMzRdKSxhLmRyYXdSZWN0KDAsMCx0aGlzLiRnZXRXaWR0aCgpLHRoaXMuJGdldEhlaWdodCgpKSksclszMV0mJihvPWkubGluZVN0eWxlKDEsclszMl0pLG8uZHJhd1JlY3QoMCwwLHRoaXMuJGdldFdpZHRoKCktMSx0aGlzLiRnZXRIZWlnaHQoKS0xKSksZSYmZS5sZW5ndGg+MClmb3IodmFyIHM9clsyXSxoPS0xLGw9ZS5sZW5ndGgsdT0wO2w+dTt1Kz00KXt2YXIgYz1lW3VdLHA9ZVt1KzFdLGQ9ZVt1KzJdLGY9ZVt1KzNdfHxzOygwPmh8fGghPWYpJiYoaD1mLG89aS5saW5lU3R5bGUoMixmLDEsdC5DYXBzU3R5bGUuTk9ORSkpLG8ubW92ZVRvKGMscCksby5saW5lVG8oYytkLHApfX1pZihpKXt2YXIgZz10aGlzLiRnZXRSZW5kZXJCb3VuZHMoKTtpLng9Zy54LGkueT1nLnksaS53aWR0aD1nLndpZHRoLGkuaGVpZ2h0PWcuaGVpZ2h0LHQuUmVjdGFuZ2xlLnJlbGVhc2UoZyl9fSxuLnByb3RvdHlwZS5zZXRGb2N1cz1mdW5jdGlvbigpe3RoaXMudHlwZT09dC5UZXh0RmllbGRUeXBlLklOUFVUJiZ0aGlzLiRzdGFnZSYmdGhpcy5pbnB1dFV0aWxzLiRvbkZvY3VzKCl9LG4ucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZT1mdW5jdGlvbigpe3IucHJvdG90eXBlLiRvblJlbW92ZUZyb21TdGFnZS5jYWxsKHRoaXMpLHRoaXMucmVtb3ZlRXZlbnQoKSx0aGlzLiRUZXh0RmllbGRbMjRdPT10LlRleHRGaWVsZFR5cGUuSU5QVVQmJnRoaXMuaW5wdXRVdGlscy5fcmVtb3ZlU3RhZ2VUZXh0KCksdGhpcy50ZXh0Tm9kZSYmdGhpcy50ZXh0Tm9kZS5jbGVhbigpfSxuLnByb3RvdHlwZS4kb25BZGRUb1N0YWdlPWZ1bmN0aW9uKGUsaSl7ci5wcm90b3R5cGUuJG9uQWRkVG9TdGFnZS5jYWxsKHRoaXMsZSxpKSx0aGlzLmFkZEV2ZW50KCksdGhpcy4kVGV4dEZpZWxkWzI0XT09dC5UZXh0RmllbGRUeXBlLklOUFVUJiZ0aGlzLmlucHV0VXRpbHMuX2FkZFN0YWdlVGV4dCgpfSxuLnByb3RvdHlwZS4kaW52YWxpZGF0ZVRleHRGaWVsZD1mdW5jdGlvbigpe3RoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksdGhpcy4kVGV4dEZpZWxkWzE4XT0hMH0sbi5wcm90b3R5cGUuJHVwZGF0ZT1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXMuJGdldFJlbmRlckJvdW5kcygpLGE9ci5wcm90b3R5cGUuJHVwZGF0ZS5jYWxsKHRoaXMsZSxuKTtyZXR1cm4gdC5SZWN0YW5nbGUucmVsZWFzZShuKSxhfSxuLnByb3RvdHlwZS4kZ2V0UmVuZGVyQm91bmRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kZ2V0Q29udGVudEJvdW5kcygpLGk9dC5SZWN0YW5nbGUuY3JlYXRlKCk7aS5jb3B5RnJvbShlKSx0aGlzLiRUZXh0RmllbGRbMzFdJiYoaS53aWR0aCs9MixpLmhlaWdodCs9Mik7dmFyIHI9Mip0aGlzLiRUZXh0RmllbGRbMjddO3JldHVybiByPjAmJihpLndpZHRoKz0yKnIsaS5oZWlnaHQrPTIqciksaS54LT1yKzIsaS55LT1yKzIsaS53aWR0aD1NYXRoLmNlaWwoaS53aWR0aCkrNCxpLmhlaWdodD1NYXRoLmNlaWwoaS5oZWlnaHQpKzQsaX0sbi5wcm90b3R5cGUuJG1lYXN1cmVDb250ZW50Qm91bmRzPWZ1bmN0aW9uKGUpe3RoaXMuJGdldExpbmVzQXJyKCk7dmFyIGk9aXNOYU4odGhpcy4kVGV4dEZpZWxkWzNdKT90aGlzLiRUZXh0RmllbGRbNV06dGhpcy4kVGV4dEZpZWxkWzNdLHI9aXNOYU4odGhpcy4kVGV4dEZpZWxkWzRdKT90LlRleHRGaWVsZFV0aWxzLiRnZXRUZXh0SGVpZ2h0KHRoaXMpOnRoaXMuJFRleHRGaWVsZFs0XTtlLnNldFRvKDAsMCxpLHIpfSxuLnByb3RvdHlwZS4kcmVuZGVyPWZ1bmN0aW9uKCl7aWYodGhpcy4kVGV4dEZpZWxkWzI0XT09dC5UZXh0RmllbGRUeXBlLklOUFVUKXtpZigodGhpcy4kaGFzQW55RmxhZ3MoMjAzMil8fHRoaXMuJGhhc0FueUZsYWdzKDE2NDgpKSYmdGhpcy5pbnB1dFV0aWxzLl91cGRhdGVQcm9wZXJ0aWVzKCksdGhpcy4kaXNUeXBpbmcpcmV0dXJuIHZvaWQgdGhpcy5maWxsQmFja2dyb3VuZCgpfWVsc2UgaWYoMD09dGhpcy4kVGV4dEZpZWxkWzNdKXJldHVybjt2YXIgZT10aGlzLmRyYXdUZXh0KCk7dGhpcy5maWxsQmFja2dyb3VuZChlKTt2YXIgaT10aGlzLiRnZXRSZW5kZXJCb3VuZHMoKSxyPXRoaXMudGV4dE5vZGU7ci54PWkueCxyLnk9aS55LHIud2lkdGg9TWF0aC5jZWlsKGkud2lkdGgpLHIuaGVpZ2h0PU1hdGguY2VpbChpLmhlaWdodCksdC5SZWN0YW5nbGUucmVsZWFzZShpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwidGV4dEZsb3dcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEFycn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuaXNGbG93PSEwO3ZhciBlPVwiXCI7bnVsbD09dCYmKHQ9W10pO2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgcj10W2ldO2UrPXIudGV4dH10aGlzLiRUZXh0RmllbGRbMjBdP3RoaXMuJHNldEJhc2VUZXh0KGUpOih0aGlzLiRUZXh0RmllbGRbMTNdPWUsdGhpcy5zZXRNaWRkbGVTdHlsZSh0KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuY2hhbmdlVG9QYXNzVGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLiRUZXh0RmllbGRbMjBdKXtmb3IodmFyIGU9XCJcIixpPTAscj10Lmxlbmd0aDtyPmk7aSsrKXN3aXRjaCh0LmNoYXJBdChpKSl7Y2FzZVwiXFxuXCI6ZSs9XCJcXG5cIjticmVhaztjYXNlXCJcXHJcIjpicmVhaztkZWZhdWx0OmUrPVwiKlwifXJldHVybiBlfXJldHVybiB0fSxuLnByb3RvdHlwZS5zZXRNaWRkbGVTdHlsZT1mdW5jdGlvbih0KXt0aGlzLiRUZXh0RmllbGRbMThdPSEwLHRoaXMudGV4dEFycj10LHRoaXMuJGludmFsaWRhdGVUZXh0RmllbGQoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwidGV4dFdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRMaW5lc0FycigpLHRoaXMuJFRleHRGaWVsZFs1XX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJ0ZXh0SGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRnZXRMaW5lc0FycigpLHQuVGV4dEZpZWxkVXRpbHMuJGdldFRleHRIZWlnaHQodGhpcyl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuYXBwZW5kVGV4dD1mdW5jdGlvbih0KXt0aGlzLmFwcGVuZEVsZW1lbnQoe3RleHQ6dH0pfSxuLnByb3RvdHlwZS5hcHBlbmRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuJFRleHRGaWVsZFsxM10rdC50ZXh0O3RoaXMuJFRleHRGaWVsZFsyMF0/dGhpcy4kc2V0QmFzZVRleHQoZSk6KHRoaXMuJFRleHRGaWVsZFsxM109ZSx0aGlzLnRleHRBcnIucHVzaCh0KSx0aGlzLnNldE1pZGRsZVN0eWxlKHRoaXMudGV4dEFycikpfSxuLnByb3RvdHlwZS4kZ2V0TGluZXNBcnI9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLiRUZXh0RmllbGQ7aWYoIXJbMThdKXJldHVybiB0aGlzLmxpbmVzQXJyO3JbMThdPSExO3ZhciBuPXRoaXMudGV4dEFycjt0aGlzLmxpbmVzQXJyLmxlbmd0aD0wLHJbNl09MCxyWzVdPTA7dmFyIGE9clszXTtpZighaXNOYU4oYSkmJjA9PWEpcmV0dXJuIHJbMjldPTAsW3t3aWR0aDowLGhlaWdodDowLGNoYXJOdW06MCxlbGVtZW50czpbXSxoYXNOZXh0TGluZTohMX1dO2Zvcih2YXIgbyxzPXRoaXMubGluZXNBcnIsaD0wLGw9MCx1PTAsYz0wLHA9MCxkPW4ubGVuZ3RoO2Q+cDtwKyspe3ZhciBmPW5bcF07aWYoZi50ZXh0KXtmLnN0eWxlPWYuc3R5bGV8fHt9O2Zvcih2YXIgZz1mLnRleHQudG9TdHJpbmcoKSx5PWcuc3BsaXQoLyg/OlxcclxcbnxcXHJ8XFxuKS8pLCQ9MCx2PXkubGVuZ3RoO3Y+JDskKyspe251bGw9PXNbY10mJihvPXt3aWR0aDowLGhlaWdodDowLGVsZW1lbnRzOltdLGNoYXJOdW06MCxoYXNOZXh0TGluZTohMX0sc1tjXT1vLGg9MCx1PTAsbD0wKSx1PXJbMjRdPT10LlRleHRGaWVsZFR5cGUuSU5QVVQ/clswXTpNYXRoLm1heCh1LGYuc3R5bGUuc2l6ZXx8clswXSk7dmFyIG09ITA7aWYoXCJcIj09eVskXSkkPT12LTEmJihtPSExKTtlbHNle3ZhciBiPWUoeVskXSxyLGYuc3R5bGUpO2lmKGlzTmFOKGEpKWgrPWIsbCs9eVskXS5sZW5ndGgsby5lbGVtZW50cy5wdXNoKHt3aWR0aDpiLHRleHQ6eVskXSxzdHlsZTpmLnN0eWxlfSksJD09di0xJiYobT0hMSk7ZWxzZSBpZihhPj1oK2Ipby5lbGVtZW50cy5wdXNoKHt3aWR0aDpiLHRleHQ6eVskXSxzdHlsZTpmLnN0eWxlfSksaCs9YixsKz15WyRdLmxlbmd0aCwkPT12LTEmJihtPSExKTtlbHNle3ZhciB4PTAsVD0wLF89eVskXSxPPXZvaWQgMDtPPXJbMTldP18uc3BsaXQoaSk6Xy5tYXRjaCgvLi9nKTtmb3IodmFyIEU9Ty5sZW5ndGgsRj0wO0U+eDt4Kyspe3ZhciB3PU9beF0ubGVuZ3RoLFI9ITE7aWYoMT09dyYmRS0xPngpe3ZhciBDPU9beF0uY2hhckNvZGVBdCgwKSxTPU9beCsxXS5jaGFyQ29kZUF0KDApO2lmKEM+PTU1Mjk2JiY1NjMxOT49QyYmNTYzMjA9PSg2NDUxMiZTKSl7dmFyIFA9T1t4XStPW3grMV07dz0yLFI9ITAsYj1lKFAscixmLnN0eWxlKX1lbHNlIGI9ZShPW3hdLHIsZi5zdHlsZSl9ZWxzZSBiPWUoT1t4XSxyLGYuc3R5bGUpO2lmKDAhPWgmJmgrYj5hJiZoK3ghPTApYnJlYWs7aWYoVCtiPmEpZm9yKHZhciBEPU9beF0ubWF0Y2goLy4vZyksTD0wLE09RC5sZW5ndGg7TT5MO0wrKyl7dmFyIHc9RFtMXS5sZW5ndGgsQT0hMTtpZigxPT13JiZNLTE+TCl7dmFyIEM9RFtMXS5jaGFyQ29kZUF0KDApLFM9RFtMKzFdLmNoYXJDb2RlQXQoMCk7aWYoQz49NTUyOTYmJjU2MzE5Pj1DJiY1NjMyMD09KDY0NTEyJlMpKXt2YXIgUD1EW0xdK0RbTCsxXTt3PTIsQT0hMCxiPWUoUCxyLGYuc3R5bGUpfWVsc2UgYj1lKERbTF0scixmLnN0eWxlKX1lbHNlIGI9ZShEW0xdLHIsZi5zdHlsZSk7aWYoTD4wJiZoK2I+YSlicmVhaztGKz13LFQrPWIsaCs9YixsKz1GLEEmJkwrK31lbHNlIEYrPXcsVCs9YixoKz1iLGwrPUY7UiYmeCsrfWlmKHg+MCl7by5lbGVtZW50cy5wdXNoKHt3aWR0aDpULHRleHQ6Xy5zdWJzdHJpbmcoMCxGKSxzdHlsZTpmLnN0eWxlfSk7dmFyIE49Xy5zdWJzdHJpbmcoRiksQj12b2lkIDAsST1OLmxlbmd0aDtmb3IoQj0wO0k+QiYmXCIgXCI9PU4uY2hhckF0KEIpO0IrKyk7eVskXT1OLnN1YnN0cmluZyhCKX1cIlwiIT15WyRdJiYoJC0tLG09ITEpfX1tJiYobCsrLG8uaGFzTmV4dExpbmU9ITApLCQ8eS5sZW5ndGgtMSYmKG8ud2lkdGg9aCxvLmhlaWdodD11LG8uY2hhck51bT1sLHJbNV09TWF0aC5tYXgocls1XSxoKSxyWzZdKz11LGMrKyl9cD09bi5sZW5ndGgtMSYmbyYmKG8ud2lkdGg9aCxvLmhlaWdodD11LG8uY2hhck51bT1sLHJbNV09TWF0aC5tYXgocls1XSxoKSxyWzZdKz11KX1lbHNlIG8mJihvLndpZHRoPWgsby5oZWlnaHQ9dSxvLmNoYXJOdW09bCxyWzVdPU1hdGgubWF4KHJbNV0saCkscls2XSs9dSl9cmV0dXJuIHJbMjldPXMubGVuZ3RoLHN9LG4ucHJvdG90eXBlLmRyYXdUZXh0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50ZXh0Tm9kZSxpPXRoaXMuJFRleHRGaWVsZDtlLmJvbGQ9aVsxNV0sZS5mb250RmFtaWx5PWlbOF18fG4uZGVmYXVsdF9mb250RmFtaWx5LGUuaXRhbGljPWlbMTZdLGUuc2l6ZT1pWzBdLGUuc3Ryb2tlPWlbMjddLGUuc3Ryb2tlQ29sb3I9aVsyNV0sZS50ZXh0Q29sb3I9aVsyXTt2YXIgcj10aGlzLiRnZXRMaW5lc0FycigpO2lmKDA9PWlbNV0pcmV0dXJuW107dmFyIGE9aXNOYU4oaVszXSk/aVs1XTppWzNdLG89dC5UZXh0RmllbGRVdGlscy4kZ2V0VGV4dEhlaWdodCh0aGlzKSxzPTAsaD10LlRleHRGaWVsZFV0aWxzLiRnZXRTdGFydExpbmUodGhpcyksbD1pWzRdO2lmKCFpc05hTihsKSYmbD5vKXt2YXIgdT10LlRleHRGaWVsZFV0aWxzLiRnZXRWYWxpZ24odGhpcyk7cys9dSoobC1vKX1zPU1hdGgucm91bmQocyk7Zm9yKHZhciBjPXQuVGV4dEZpZWxkVXRpbHMuJGdldEhhbGlnbih0aGlzKSxwPTAsZD1bXSxmPWgsZz1pWzI5XTtnPmY7ZisrKXt2YXIgeT1yW2ZdLCQ9eS5oZWlnaHQ7aWYocys9JC8yLGYhPWgpe2lmKGlbMjRdPT10LlRleHRGaWVsZFR5cGUuSU5QVVQmJiFpWzMwXSlicmVhaztpZighaXNOYU4obCkmJnM+bClicmVha31wPU1hdGgucm91bmQoKGEteS53aWR0aCkqYyk7Zm9yKHZhciB2PTAsbT15LmVsZW1lbnRzLmxlbmd0aDttPnY7disrKXt2YXIgYj15LmVsZW1lbnRzW3ZdLHg9Yi5zdHlsZS5zaXplfHxpWzBdO2UuZHJhd1RleHQocCxzKygkLXgpLzIsYi50ZXh0LGIuc3R5bGUpLGIuc3R5bGUudW5kZXJsaW5lJiZkLnB1c2gocCxzKyQvMixiLndpZHRoLGIuc3R5bGUudGV4dENvbG9yKSxwKz1iLndpZHRofXMrPSQvMitpWzFdfXJldHVybiBkfSxuLnByb3RvdHlwZS5hZGRFdmVudD1mdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lcih0LlRvdWNoRXZlbnQuVE9VQ0hfVEFQLHRoaXMub25UYXBIYW5kbGVyLHRoaXMpfSxuLnByb3RvdHlwZS5yZW1vdmVFdmVudD1mdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LlRvdWNoRXZlbnQuVE9VQ0hfVEFQLHRoaXMub25UYXBIYW5kbGVyLHRoaXMpfSxuLnByb3RvdHlwZS5vblRhcEhhbmRsZXI9ZnVuY3Rpb24oZSl7aWYodGhpcy4kVGV4dEZpZWxkWzI0XSE9dC5UZXh0RmllbGRUeXBlLklOUFVUKXt2YXIgaT10LlRleHRGaWVsZFV0aWxzLiRnZXRUZXh0RWxlbWVudCh0aGlzLGUubG9jYWxYLGUubG9jYWxZKTtpZihudWxsIT1pKXt2YXIgcj1pLnN0eWxlO2lmKHImJnIuaHJlZilpZihyLmhyZWYubWF0Y2goL15ldmVudDovKSl7dmFyIG49ci5ocmVmLm1hdGNoKC9eZXZlbnQ6LylbMF07dC5UZXh0RXZlbnQuZGlzcGF0Y2hUZXh0RXZlbnQodGhpcyx0LlRleHRFdmVudC5MSU5LLHIuaHJlZi5zdWJzdHJpbmcobi5sZW5ndGgpKX1lbHNlIG9wZW4oci5ocmVmLHIudGFyZ2V0fHxcIl9ibGFua1wiKX19fSxufSh0LkRpc3BsYXlPYmplY3QpO3IuZGVmYXVsdF9mb250RmFtaWx5PVwiQXJpYWxcIixyLmRlZmF1bHRfc2l6ZT0zMCxyLmRlZmF1bHRfdGV4dENvbG9yPTE2Nzc3MjE1LHQuVGV4dEZpZWxkPXIsX19yZWZsZWN0KHIucHJvdG90eXBlLFwiZWdyZXQuVGV4dEZpZWxkXCIpLHQuJG1hcmtSZWFkT25seShyLFwibnVtTGluZXNcIiksdC4kbWFya1JlYWRPbmx5KHIsXCJ0ZXh0V2lkdGhcIiksdC4kbWFya1JlYWRPbmx5KHIsXCJ0ZXh0SGVpZ2h0XCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5URVhUPVwidGV4dFwiLGUuVEVMPVwidGVsXCIsZS5QQVNTV09SRD1cInBhc3N3b3JkXCIsdC5UZXh0RmllbGRJbnB1dFR5cGU9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5UZXh0RmllbGRJbnB1dFR5cGVcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtlLkRZTkFNSUM9XCJkeW5hbWljXCIsZS5JTlBVVD1cImlucHV0XCIsdC5UZXh0RmllbGRUeXBlPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuVGV4dEZpZWxkVHlwZVwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLiRnZXRTdGFydExpbmU9ZnVuY3Rpb24odCl7dmFyIGk9dC4kVGV4dEZpZWxkLHI9ZS4kZ2V0VGV4dEhlaWdodCh0KSxuPTAsYT1pWzRdO3JldHVybiBpc05hTihhKXx8KGE+cnx8cj5hJiYobj1NYXRoLm1heChpWzI4XS0xLDApLG49TWF0aC5taW4oaVsyOV0tMSxuKSksaVszMF18fChuPU1hdGgubWF4KGlbMjhdLTEsMCksaVsyOV0+MCYmKG49TWF0aC5taW4oaVsyOV0tMSxuKSkpKSxufSxlLiRnZXRIYWxpZ249ZnVuY3Rpb24oZSl7dmFyIGk9ZS4kZ2V0TGluZXNBcnIoKSxyPTA7cmV0dXJuIGUuJFRleHRGaWVsZFs5XT09dC5Ib3Jpem9udGFsQWxpZ24uQ0VOVEVSP3I9LjU6ZS4kVGV4dEZpZWxkWzldPT10Lkhvcml6b250YWxBbGlnbi5SSUdIVCYmKHI9MSksZS4kVGV4dEZpZWxkWzI0XT09dC5UZXh0RmllbGRUeXBlLklOUFVUJiYhZS4kVGV4dEZpZWxkWzMwXSYmaS5sZW5ndGg+MSYmKHI9MCkscn0sZS4kZ2V0VGV4dEhlaWdodD1mdW5jdGlvbihlKXt2YXIgaT10LlRleHRGaWVsZFR5cGUuSU5QVVQhPWUuJFRleHRGaWVsZFsyNF18fGUuJFRleHRGaWVsZFszMF0/ZS4kVGV4dEZpZWxkWzZdKyhlLiRUZXh0RmllbGRbMjldLTEpKmUuJFRleHRGaWVsZFsxXTplLiRUZXh0RmllbGRbMF07cmV0dXJuIGl9LGUuJGdldFZhbGlnbj1mdW5jdGlvbihpKXt2YXIgcj1lLiRnZXRUZXh0SGVpZ2h0KGkpLG49aS4kVGV4dEZpZWxkWzRdO2lmKCFpc05hTihuKSYmbj5yKXt2YXIgYT0wO3JldHVybiBpLiRUZXh0RmllbGRbMTBdPT10LlZlcnRpY2FsQWxpZ24uTUlERExFP2E9LjU6aS4kVGV4dEZpZWxkWzEwXT09dC5WZXJ0aWNhbEFsaWduLkJPVFRPTSYmKGE9MSksYX1yZXR1cm4gMH0sZS4kZ2V0VGV4dEVsZW1lbnQ9ZnVuY3Rpb24odCxpLHIpe3ZhciBuPWUuJGdldEhpdCh0LGksciksYT10LiRnZXRMaW5lc0FycigpO3JldHVybiBuJiZhW24ubGluZUluZGV4XSYmYVtuLmxpbmVJbmRleF0uZWxlbWVudHNbbi50ZXh0RWxlbWVudEluZGV4XT9hW24ubGluZUluZGV4XS5lbGVtZW50c1tuLnRleHRFbGVtZW50SW5kZXhdOm51bGx9LGUuJGdldEhpdD1mdW5jdGlvbih0LGkscil7dmFyIG49dC4kZ2V0TGluZXNBcnIoKTtpZigwPT10LiRUZXh0RmllbGRbM10pcmV0dXJuIG51bGw7dmFyIGE9MCxvPWUuJGdldFRleHRIZWlnaHQodCkscz0wLGg9dC4kVGV4dEZpZWxkWzRdO2lmKCFpc05hTihoKSYmaD5vKXt2YXIgbD1lLiRnZXRWYWxpZ24odCk7cz1sKihoLW8pLDAhPXMmJihyLT1zKX1mb3IodmFyIHU9ZS4kZ2V0U3RhcnRMaW5lKHQpLGM9MCxwPXU7cDxuLmxlbmd0aDtwKyspe3ZhciBkPW5bcF07aWYoYytkLmhlaWdodD49cil7cj5jJiYoYT1wKzEpO2JyZWFrfWlmKGMrPWQuaGVpZ2h0LGMrdC4kVGV4dEZpZWxkWzFdPnIpcmV0dXJuIG51bGw7Yys9dC4kVGV4dEZpZWxkWzFdfWlmKDA9PWEpcmV0dXJuIG51bGw7dmFyIGY9blthLTFdLGc9dC4kVGV4dEZpZWxkWzNdO2lzTmFOKGcpJiYoZz10LnRleHRXaWR0aCk7dmFyIHk9ZS4kZ2V0SGFsaWduKHQpO2ktPXkqKGctZi53aWR0aCk7Zm9yKHZhciAkPTAscD0wO3A8Zi5lbGVtZW50cy5sZW5ndGg7cCsrKXt2YXIgdj1mLmVsZW1lbnRzW3BdO2lmKCQrdi53aWR0aDw9aSkkKz12LndpZHRoO2Vsc2UgaWYoaT4kKXJldHVybntsaW5lSW5kZXg6YS0xLHRleHRFbGVtZW50SW5kZXg6cH19cmV0dXJuIG51bGx9LGUuJGdldFNjcm9sbE51bT1mdW5jdGlvbih0KXt2YXIgZT0xO2lmKHQuJFRleHRGaWVsZFszMF0pe3ZhciBpPXQuaGVpZ2h0LHI9dC5zaXplLG49dC5saW5lU3BhY2luZztlPU1hdGguZmxvb3IoaS8ocituKSk7dmFyIGE9aS0ocituKSplO2E+ci8yJiZlKyt9cmV0dXJuIGV9LGV9KCk7dC5UZXh0RmllbGRVdGlscz1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LlRleHRGaWVsZFV0aWxzXCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7fShlPXQuc3lzfHwodC5zeXM9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO2UuVE9QPVwidG9wXCIsZS5CT1RUT009XCJib3R0b21cIixlLk1JRERMRT1cIm1pZGRsZVwiLGUuSlVTVElGWT1cImp1c3RpZnlcIixlLkNPTlRFTlRfSlVTVElGWT1cImNvbnRlbnRKdXN0aWZ5XCIsdC5WZXJ0aWNhbEFsaWduPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuVmVydGljYWxBbGlnblwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO2UuTElUVExFX0VORElBTj1cImxpdHRsZUVuZGlhblwiLGUuQklHX0VORElBTj1cImJpZ0VuZGlhblwiLHQuRW5kaWFuPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuRW5kaWFuXCIpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSh0KXt0aGlzLkJVRkZFUl9FWFRfU0laRT0wLHRoaXMuRU9GX2J5dGU9LTEsdGhpcy5FT0ZfY29kZV9wb2ludD0tMSx0aGlzLl9zZXRBcnJheUJ1ZmZlcih0fHxuZXcgQXJyYXlCdWZmZXIodGhpcy5CVUZGRVJfRVhUX1NJWkUpKSx0aGlzLmVuZGlhbj1lLkJJR19FTkRJQU59cmV0dXJuIGkucHJvdG90eXBlLl9zZXRBcnJheUJ1ZmZlcj1mdW5jdGlvbih0KXt0aGlzLndyaXRlX3Bvc2l0aW9uPXQuYnl0ZUxlbmd0aCx0aGlzLmRhdGE9bmV3IERhdGFWaWV3KHQpLHRoaXMuX3Bvc2l0aW9uPTB9LGkucHJvdG90eXBlLnNldEFycmF5QnVmZmVyPWZ1bmN0aW9uKHQpe30sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiYnVmZmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuYnVmZmVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5kYXRhPW5ldyBEYXRhVmlldyh0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJkYXRhVmlld1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5kYXRhPXQsdGhpcy53cml0ZV9wb3NpdGlvbj10LmJ5dGVMZW5ndGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiYnVmZmVyT2Zmc2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuYnl0ZU9mZnNldH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJwb3NpdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wb3NpdGlvbj10LHRoaXMud3JpdGVfcG9zaXRpb249dD50aGlzLndyaXRlX3Bvc2l0aW9uP3Q6dGhpcy53cml0ZV9wb3NpdGlvbn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3JpdGVfcG9zaXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLndyaXRlX3Bvc2l0aW9uPXQ7dmFyIGU9bmV3IFVpbnQ4QXJyYXkobmV3IEFycmF5QnVmZmVyKHQpKSxpPXRoaXMuZGF0YS5idWZmZXIuYnl0ZUxlbmd0aDtpPnQmJih0aGlzLl9wb3NpdGlvbj10KTt2YXIgcj1NYXRoLm1pbihpLHQpO2Uuc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuZGF0YS5idWZmZXIsMCxyKSksdGhpcy5idWZmZXI9ZS5idWZmZXJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiYnl0ZXNBdmFpbGFibGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5ieXRlTGVuZ3RoLXRoaXMuX3Bvc2l0aW9ufSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fc2V0QXJyYXlCdWZmZXIobmV3IEFycmF5QnVmZmVyKHRoaXMuQlVGRkVSX0VYVF9TSVpFKSl9LGkucHJvdG90eXBlLnJlYWRCb29sZWFuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsaWRhdGUoaS5TSVpFX09GX0JPT0xFQU4pPzAhPXRoaXMuZGF0YS5nZXRVaW50OCh0aGlzLnBvc2l0aW9uKyspOm51bGx9LGkucHJvdG90eXBlLnJlYWRCeXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsaWRhdGUoaS5TSVpFX09GX0lOVDgpP3RoaXMuZGF0YS5nZXRJbnQ4KHRoaXMucG9zaXRpb24rKyk6bnVsbH0saS5wcm90b3R5cGUucmVhZEJ5dGVzPWZ1bmN0aW9uKHQsZSxyKXtpZih2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1yJiYocj0wKSwwPT1yKXI9dGhpcy5ieXRlc0F2YWlsYWJsZTtlbHNlIGlmKCF0aGlzLnZhbGlkYXRlKHIpKXJldHVybiBudWxsO3Q/dC52YWxpZGF0ZUJ1ZmZlcihlK3IpOnQ9bmV3IGkobmV3IEFycmF5QnVmZmVyKGUrcikpO2Zvcih2YXIgbj0wO3I+bjtuKyspdC5kYXRhLnNldFVpbnQ4KG4rZSx0aGlzLmRhdGEuZ2V0VWludDgodGhpcy5wb3NpdGlvbisrKSl9LGkucHJvdG90eXBlLnJlYWREb3VibGU9ZnVuY3Rpb24oKXtpZighdGhpcy52YWxpZGF0ZShpLlNJWkVfT0ZfRkxPQVQ2NCkpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5kYXRhLmdldEZsb2F0NjQodGhpcy5wb3NpdGlvbix0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9aS5TSVpFX09GX0ZMT0FUNjQsdH0saS5wcm90b3R5cGUucmVhZEZsb2F0PWZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsaWRhdGUoaS5TSVpFX09GX0ZMT0FUMzIpKXJldHVybiBudWxsO3ZhciB0PXRoaXMuZGF0YS5nZXRGbG9hdDMyKHRoaXMucG9zaXRpb24sdGhpcy5lbmRpYW49PWUuTElUVExFX0VORElBTik7cmV0dXJuIHRoaXMucG9zaXRpb24rPWkuU0laRV9PRl9GTE9BVDMyLHR9LGkucHJvdG90eXBlLnJlYWRJbnQ9ZnVuY3Rpb24oKXtpZighdGhpcy52YWxpZGF0ZShpLlNJWkVfT0ZfSU5UMzIpKXJldHVybiBudWxsO3ZhciB0PXRoaXMuZGF0YS5nZXRJbnQzMih0aGlzLnBvc2l0aW9uLHRoaXMuZW5kaWFuPT1lLkxJVFRMRV9FTkRJQU4pO3JldHVybiB0aGlzLnBvc2l0aW9uKz1pLlNJWkVfT0ZfSU5UMzIsdH0saS5wcm90b3R5cGUucmVhZFNob3J0PWZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsaWRhdGUoaS5TSVpFX09GX0lOVDE2KSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLmRhdGEuZ2V0SW50MTYodGhpcy5wb3NpdGlvbix0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9aS5TSVpFX09GX0lOVDE2LHR9LGkucHJvdG90eXBlLnJlYWRVbnNpZ25lZEJ5dGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWxpZGF0ZShpLlNJWkVfT0ZfVUlOVDgpP3RoaXMuZGF0YS5nZXRVaW50OCh0aGlzLnBvc2l0aW9uKyspOm51bGx9LGkucHJvdG90eXBlLnJlYWRVbnNpZ25lZEludD1mdW5jdGlvbigpe2lmKCF0aGlzLnZhbGlkYXRlKGkuU0laRV9PRl9VSU5UMzIpKXJldHVybiBudWxsO3ZhciB0PXRoaXMuZGF0YS5nZXRVaW50MzIodGhpcy5wb3NpdGlvbix0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9aS5TSVpFX09GX1VJTlQzMix0fSxpLnByb3RvdHlwZS5yZWFkVW5zaWduZWRTaG9ydD1mdW5jdGlvbigpe2lmKCF0aGlzLnZhbGlkYXRlKGkuU0laRV9PRl9VSU5UMTYpKXJldHVybiBudWxsO3ZhciB0PXRoaXMuZGF0YS5nZXRVaW50MTYodGhpcy5wb3NpdGlvbix0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9aS5TSVpFX09GX1VJTlQxNix0fSxpLnByb3RvdHlwZS5yZWFkVVRGPWZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsaWRhdGUoaS5TSVpFX09GX1VJTlQxNikpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5kYXRhLmdldFVpbnQxNih0aGlzLnBvc2l0aW9uLHRoaXMuZW5kaWFuPT1lLkxJVFRMRV9FTkRJQU4pO3JldHVybiB0aGlzLnBvc2l0aW9uKz1pLlNJWkVfT0ZfVUlOVDE2LHQ+MD90aGlzLnJlYWRVVEZCeXRlcyh0KTpcIlwifSxpLnByb3RvdHlwZS5yZWFkVVRGQnl0ZXM9ZnVuY3Rpb24odCl7aWYoIXRoaXMudmFsaWRhdGUodCkpcmV0dXJuIG51bGw7dmFyIGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIsdGhpcy5idWZmZXJPZmZzZXQrdGhpcy5wb3NpdGlvbix0KTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9dCx0aGlzLmRlY29kZVVURjgoZSl9LGkucHJvdG90eXBlLndyaXRlQm9vbGVhbj1mdW5jdGlvbih0KXt0aGlzLnZhbGlkYXRlQnVmZmVyKGkuU0laRV9PRl9CT09MRUFOKSx0aGlzLmRhdGEuc2V0VWludDgodGhpcy5wb3NpdGlvbisrLHQ/MTowKX0saS5wcm90b3R5cGUud3JpdGVCeXRlPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRhdGVCdWZmZXIoaS5TSVpFX09GX0lOVDgpLHRoaXMuZGF0YS5zZXRJbnQ4KHRoaXMucG9zaXRpb24rKyx0KX0saS5wcm90b3R5cGUud3JpdGVCeXRlcz1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09aSYmKGk9MCk7dmFyIHI7aWYoISgwPmUpJiYhKDA+aSkmJihyPTA9PWk/dC5sZW5ndGgtZTpNYXRoLm1pbih0Lmxlbmd0aC1lLGkpLHI+MCkpe3RoaXMudmFsaWRhdGVCdWZmZXIocik7Zm9yKHZhciBuPW5ldyBEYXRhVmlldyh0LmJ1ZmZlciksYT1yLG89NDthPm87YS09byl0aGlzLmRhdGEuc2V0VWludDMyKHRoaXMuX3Bvc2l0aW9uLG4uZ2V0VWludDMyKGUpKSx0aGlzLnBvc2l0aW9uKz1vLGUrPW87Zm9yKDthPjA7YS0tKXRoaXMuZGF0YS5zZXRVaW50OCh0aGlzLnBvc2l0aW9uKyssbi5nZXRVaW50OChlKyspKX19LGkucHJvdG90eXBlLndyaXRlRG91YmxlPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRhdGVCdWZmZXIoaS5TSVpFX09GX0ZMT0FUNjQpLHRoaXMuZGF0YS5zZXRGbG9hdDY0KHRoaXMucG9zaXRpb24sdCx0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKSx0aGlzLnBvc2l0aW9uKz1pLlNJWkVfT0ZfRkxPQVQ2NH0saS5wcm90b3R5cGUud3JpdGVGbG9hdD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkYXRlQnVmZmVyKGkuU0laRV9PRl9GTE9BVDMyKSx0aGlzLmRhdGEuc2V0RmxvYXQzMih0aGlzLnBvc2l0aW9uLHQsdGhpcy5lbmRpYW49PWUuTElUVExFX0VORElBTiksdGhpcy5wb3NpdGlvbis9aS5TSVpFX09GX0ZMT0FUMzJ9LGkucHJvdG90eXBlLndyaXRlSW50PWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRhdGVCdWZmZXIoaS5TSVpFX09GX0lOVDMyKSx0aGlzLmRhdGEuc2V0SW50MzIodGhpcy5wb3NpdGlvbix0LHRoaXMuZW5kaWFuPT1lLkxJVFRMRV9FTkRJQU4pLHRoaXMucG9zaXRpb24rPWkuU0laRV9PRl9JTlQzMn0saS5wcm90b3R5cGUud3JpdGVTaG9ydD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkYXRlQnVmZmVyKGkuU0laRV9PRl9JTlQxNiksdGhpcy5kYXRhLnNldEludDE2KHRoaXMucG9zaXRpb24sdCx0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKSx0aGlzLnBvc2l0aW9uKz1pLlNJWkVfT0ZfSU5UMTZ9LGkucHJvdG90eXBlLndyaXRlVW5zaWduZWRJbnQ9ZnVuY3Rpb24odCl7dGhpcy52YWxpZGF0ZUJ1ZmZlcihpLlNJWkVfT0ZfVUlOVDMyKSx0aGlzLmRhdGEuc2V0VWludDMyKHRoaXMucG9zaXRpb24sdCx0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKSx0aGlzLnBvc2l0aW9uKz1pLlNJWkVfT0ZfVUlOVDMyfSxpLnByb3RvdHlwZS53cml0ZVVuc2lnbmVkU2hvcnQ9ZnVuY3Rpb24odCl7dGhpcy52YWxpZGF0ZUJ1ZmZlcihpLlNJWkVfT0ZfVUlOVDE2KSx0aGlzLmRhdGEuc2V0VWludDE2KHRoaXMucG9zaXRpb24sdCx0aGlzLmVuZGlhbj09ZS5MSVRUTEVfRU5ESUFOKSx0aGlzLnBvc2l0aW9uKz1pLlNJWkVfT0ZfVUlOVDE2fSxpLnByb3RvdHlwZS53cml0ZVVURj1mdW5jdGlvbih0KXt2YXIgcj10aGlzLmVuY29kZVVURjgodCksbj1yLmxlbmd0aDt0aGlzLnZhbGlkYXRlQnVmZmVyKGkuU0laRV9PRl9VSU5UMTYrbiksdGhpcy5kYXRhLnNldFVpbnQxNih0aGlzLnBvc2l0aW9uLG4sdGhpcy5lbmRpYW49PWUuTElUVExFX0VORElBTiksdGhpcy5wb3NpdGlvbis9aS5TSVpFX09GX1VJTlQxNix0aGlzLl93cml0ZVVpbnQ4QXJyYXkociwhMSl9LGkucHJvdG90eXBlLndyaXRlVVRGQnl0ZXM9ZnVuY3Rpb24odCl7dGhpcy5fd3JpdGVVaW50OEFycmF5KHRoaXMuZW5jb2RlVVRGOCh0KSl9LGkucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJbQnl0ZUFycmF5XSBsZW5ndGg6XCIrdGhpcy5sZW5ndGgrXCIsIGJ5dGVzQXZhaWxhYmxlOlwiK3RoaXMuYnl0ZXNBdmFpbGFibGV9LGkucHJvdG90eXBlLl93cml0ZVVpbnQ4QXJyYXk9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCksZSYmdGhpcy52YWxpZGF0ZUJ1ZmZlcih0aGlzLnBvc2l0aW9uK3QubGVuZ3RoKTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl0aGlzLmRhdGEuc2V0VWludDgodGhpcy5wb3NpdGlvbisrLHRbaV0pfSxpLnByb3RvdHlwZS52YWxpZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhLmJ5dGVMZW5ndGg+MCYmdGhpcy5fcG9zaXRpb24rZTw9dGhpcy5kYXRhLmJ5dGVMZW5ndGg/ITA6dm9pZCB0LiRlcnJvcigxMDI1KX0saS5wcm90b3R5cGUudmFsaWRhdGVCdWZmZXI9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0hMSksdGhpcy53cml0ZV9wb3NpdGlvbj10PnRoaXMud3JpdGVfcG9zaXRpb24/dDp0aGlzLndyaXRlX3Bvc2l0aW9uLHQrPXRoaXMuX3Bvc2l0aW9uLHRoaXMuZGF0YS5ieXRlTGVuZ3RoPHR8fGUpe3ZhciBpPW5ldyBVaW50OEFycmF5KG5ldyBBcnJheUJ1ZmZlcih0K3RoaXMuQlVGRkVSX0VYVF9TSVpFKSkscj1NYXRoLm1pbih0aGlzLmRhdGEuYnVmZmVyLmJ5dGVMZW5ndGgsdCt0aGlzLkJVRkZFUl9FWFRfU0laRSk7aS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhLmJ1ZmZlciwwLHIpKSx0aGlzLmJ1ZmZlcj1pLmJ1ZmZlcn19LGkucHJvdG90eXBlLmVuY29kZVVURjg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10aGlzLnN0cmluZ1RvQ29kZVBvaW50cyh0KSxyPVtdO2kubGVuZ3RoPmU7KXt2YXIgbj1pW2UrK107aWYodGhpcy5pblJhbmdlKG4sNTUyOTYsNTczNDMpKXRoaXMuZW5jb2RlckVycm9yKG4pO2Vsc2UgaWYodGhpcy5pblJhbmdlKG4sMCwxMjcpKXIucHVzaChuKTtlbHNle3ZhciBhPXZvaWQgMCxvPXZvaWQgMDtmb3IodGhpcy5pblJhbmdlKG4sMTI4LDIwNDcpPyhhPTEsbz0xOTIpOnRoaXMuaW5SYW5nZShuLDIwNDgsNjU1MzUpPyhhPTIsbz0yMjQpOnRoaXMuaW5SYW5nZShuLDY1NTM2LDExMTQxMTEpJiYoYT0zLG89MjQwKSxyLnB1c2godGhpcy5kaXYobixNYXRoLnBvdyg2NCxhKSkrbyk7YT4wOyl7dmFyIHM9dGhpcy5kaXYobixNYXRoLnBvdyg2NCxhLTEpKTtyLnB1c2goMTI4K3MlNjQpLGEtPTF9fX1yZXR1cm4gbmV3IFVpbnQ4QXJyYXkocil9LGkucHJvdG90eXBlLmRlY29kZVVURjg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGk9ITEscj0wLG49XCJcIixhPTAsbz0wLHM9MCxoPTA7dC5sZW5ndGg+cjspe3ZhciBsPXRbcisrXTtpZihsPT10aGlzLkVPRl9ieXRlKWU9MCE9bz90aGlzLmRlY29kZXJFcnJvcihpKTp0aGlzLkVPRl9jb2RlX3BvaW50O2Vsc2UgaWYoMD09byl0aGlzLmluUmFuZ2UobCwwLDEyNyk/ZT1sOih0aGlzLmluUmFuZ2UobCwxOTQsMjIzKT8obz0xLGg9MTI4LGE9bC0xOTIpOnRoaXMuaW5SYW5nZShsLDIyNCwyMzkpPyhvPTIsaD0yMDQ4LGE9bC0yMjQpOnRoaXMuaW5SYW5nZShsLDI0MCwyNDQpPyhvPTMsaD02NTUzNixhPWwtMjQwKTp0aGlzLmRlY29kZXJFcnJvcihpKSxhKj1NYXRoLnBvdyg2NCxvKSxlPW51bGwpO2Vsc2UgaWYodGhpcy5pblJhbmdlKGwsMTI4LDE5MSkpaWYocys9MSxhKz0obC0xMjgpKk1hdGgucG93KDY0LG8tcykscyE9PW8pZT1udWxsO2Vsc2V7dmFyIHU9YSxjPWg7YT0wLG89MCxzPTAsaD0wLGU9dGhpcy5pblJhbmdlKHUsYywxMTE0MTExKSYmIXRoaXMuaW5SYW5nZSh1LDU1Mjk2LDU3MzQzKT91OnRoaXMuZGVjb2RlckVycm9yKGksbCl9ZWxzZSBhPTAsbz0wLHM9MCxoPTAsci0tLGU9dGhpcy5kZWNvZGVyRXJyb3IoaSxsKTtudWxsIT09ZSYmZSE9PXRoaXMuRU9GX2NvZGVfcG9pbnQmJig2NTUzNT49ZT9lPjAmJihuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUpKTooZS09NjU1MzYsbis9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NisoZT4+MTAmMTAyMykpLG4rPVN0cmluZy5mcm9tQ2hhckNvZGUoNTYzMjArKDEwMjMmZSkpKSl9cmV0dXJuIG59LGkucHJvdG90eXBlLmVuY29kZXJFcnJvcj1mdW5jdGlvbihlKXt0LiRlcnJvcigxMDI2LGUpfSxpLnByb3RvdHlwZS5kZWNvZGVyRXJyb3I9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gZSYmdC4kZXJyb3IoMTAyNyksaXx8NjU1MzN9LGkucHJvdG90eXBlLmluUmFuZ2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0Pj1lJiZpPj10fSxpLnByb3RvdHlwZS5kaXY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5mbG9vcih0L2UpfSxpLnByb3RvdHlwZS5zdHJpbmdUb0NvZGVQb2ludHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLGk9MCxyPXQubGVuZ3RoO2k8dC5sZW5ndGg7KXt2YXIgbj10LmNoYXJDb2RlQXQoaSk7aWYodGhpcy5pblJhbmdlKG4sNTUyOTYsNTczNDMpKWlmKHRoaXMuaW5SYW5nZShuLDU2MzIwLDU3MzQzKSllLnB1c2goNjU1MzMpO2Vsc2UgaWYoaT09ci0xKWUucHVzaCg2NTUzMyk7ZWxzZXt2YXIgYT10LmNoYXJDb2RlQXQoaSsxKTtpZih0aGlzLmluUmFuZ2UoYSw1NjMyMCw1NzM0Mykpe3ZhciBvPTEwMjMmbixzPTEwMjMmYTtpKz0xLGUucHVzaCg2NTUzNisobzw8MTApK3MpfWVsc2UgZS5wdXNoKDY1NTMzKX1lbHNlIGUucHVzaChuKTtpKz0xfXJldHVybiBlfSxpfSgpO2kuU0laRV9PRl9CT09MRUFOPTEsaS5TSVpFX09GX0lOVDg9MSxpLlNJWkVfT0ZfSU5UMTY9MixpLlNJWkVfT0ZfSU5UMzI9NCxpLlNJWkVfT0ZfVUlOVDg9MSxpLlNJWkVfT0ZfVUlOVDE2PTIsaS5TSVpFX09GX1VJTlQzMj00LGkuU0laRV9PRl9GTE9BVDMyPTQsaS5TSVpFX09GX0ZMT0FUNjQ9OCx0LkJ5dGVBcnJheT1pLF9fcmVmbGVjdChpLnByb3RvdHlwZSxcImVncmV0LkJ5dGVBcnJheVwiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO2UuTk9STUFMPVwibm9ybWFsXCIsZS5BREQ9XCJhZGRcIixlLkVSQVNFPVwiZXJhc2VcIix0LkJsZW5kTW9kZT1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LkJsZW5kTW9kZVwiKX0oZWdyZXR8fChlZ3JldD17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ZhciBlPW5bdF07cmV0dXJuIHZvaWQgMD09PWU/MDplfWZ1bmN0aW9uIGkodCl7dmFyIGU9clt0XTtyZXR1cm4gdm9pZCAwPT09ZT9cIm5vcm1hbFwiOmV9Zm9yKHZhciByPVtcIm5vcm1hbFwiLFwiYWRkXCIsXCJlcmFzZVwiXSxuPXt9LGE9ci5sZW5ndGgsbz0wO2E+bztvKyspe3ZhciBzPXJbb107bltzXT1vfXQuYmxlbmRNb2RlVG9OdW1iZXI9ZSx0Lm51bWJlclRvQmxlbmRNb2RlPWl9KGU9dC5zeXN8fCh0LnN5cz17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dC51c2VGb250TWFwcGluZz0hMCx0LmZvbnRNYXBwaW5nW2VdPWl9dC5mb250TWFwcGluZz17fSx0LnVzZUZvbnRNYXBwaW5nPSExLHQucmVnaXN0ZXJGb250TWFwcGluZz1lfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLiRzdGFnZVdpZHRoPTAsaS4kc3RhZ2VIZWlnaHQ9MCxpLiRzY2FsZU1vZGU9dC5TdGFnZVNjYWxlTW9kZS5TSE9XX0FMTCxpLiRvcmllbnRhdGlvbj10Lk9yaWVudGF0aW9uTW9kZS5BVVRPLGkuJG1heFRvdWNoZXM9OTksaS4kZGlydHlSZWdpb25Qb2xpY3k9dC5EaXJ0eVJlZ2lvblBvbGljeS5PTixpLiRzdGFnZT1pLGkuJG5lc3RMZXZlbD0xLGl9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImZyYW1lUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zeXMuJHRpY2tlci4kZnJhbWVSYXRlfSxzZXQ6ZnVuY3Rpb24oZSl7dC5zeXMuJHRpY2tlci4kc2V0RnJhbWVSYXRlKGUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInN0YWdlV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHN0YWdlV2lkdGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwic3RhZ2VIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHN0YWdlSGVpZ2h0fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXt0LnN5cy4kaW52YWxpZGF0ZVJlbmRlckZsYWc9ITB9LGkucHJvdG90eXBlLnJlZ2lzdGVySW1wbGVtZW50YXRpb249ZnVuY3Rpb24oZSxpKXt0LnJlZ2lzdGVySW1wbGVtZW50YXRpb24oZSxpKX0saS5wcm90b3R5cGUuZ2V0SW1wbGVtZW50YXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0SW1wbGVtZW50YXRpb24oZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInNjYWxlTW9kZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2NhbGVNb2RlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kc2NhbGVNb2RlIT10JiYodGhpcy4kc2NhbGVNb2RlPXQsdGhpcy4kc2NyZWVuLnVwZGF0ZVNjcmVlblNpemUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwib3JpZW50YXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJG9yaWVudGF0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kb3JpZW50YXRpb24hPXQmJih0aGlzLiRvcmllbnRhdGlvbj10LHRoaXMuJHNjcmVlbi51cGRhdGVTY3JlZW5TaXplKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInRleHR1cmVTY2FsZUZhY3RvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC4kVGV4dHVyZVNjYWxlRmFjdG9yfSxzZXQ6ZnVuY3Rpb24oZSl7dC4kVGV4dHVyZVNjYWxlRmFjdG9yPWV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwibWF4VG91Y2hlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbWF4VG91Y2hlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuJG1heFRvdWNoZXMhPXQmJih0aGlzLiRtYXhUb3VjaGVzPXQsdGhpcy4kc2NyZWVuLnVwZGF0ZU1heFRvdWNoZXMoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZGlydHlSZWdpb25Qb2xpY3lcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGRpcnR5UmVnaW9uUG9saWN5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy4kZGlydHlSZWdpb25Qb2xpY3khPXQmJih0aGlzLiRkaXJ0eVJlZ2lvblBvbGljeT10LHRoaXMuJGRpc3BsYXlMaXN0LnNldERpcnR5UmVnaW9uUG9saWN5KHQpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS5zZXRDb250ZW50U2l6ZT1mdW5jdGlvbih0LGUpe3RoaXMuJHNjcmVlbi5zZXRDb250ZW50U2l6ZSh0LGUpfSxpfSh0LkRpc3BsYXlPYmplY3RDb250YWluZXIpO3QuU3RhZ2U9ZSxfX3JlZmxlY3QoZS5wcm90b3R5cGUsXCJlZ3JldC5TdGFnZVwiKSx0LiRtYXJrQ2Fubm90VXNlKGUsXCJhbHBoYVwiLDEpLHQuJG1hcmtDYW5ub3RVc2UoZSxcInZpc2libGVcIiwhMCksdC4kbWFya0Nhbm5vdFVzZShlLFwieFwiLDApLHQuJG1hcmtDYW5ub3RVc2UoZSxcInlcIiwwKSx0LiRtYXJrQ2Fubm90VXNlKGUsXCJzY2FsZVhcIiwxKSx0LiRtYXJrQ2Fubm90VXNlKGUsXCJzY2FsZVlcIiwxKSx0LiRtYXJrQ2Fubm90VXNlKGUsXCJyb3RhdGlvblwiLDApLHQuJG1hcmtDYW5ub3RVc2UoZSxcImNhY2hlQXNCaXRtYXBcIiwhMSksdC4kbWFya0Nhbm5vdFVzZShlLFwic2Nyb2xsUmVjdFwiLG51bGwpLHQuJG1hcmtDYW5ub3RVc2UoZSxcImZpbHRlcnNcIixudWxsKSx0LiRtYXJrQ2Fubm90VXNlKGUsXCJibGVuZE1vZGVcIixudWxsKSx0LiRtYXJrQ2Fubm90VXNlKGUsXCJ0b3VjaEVuYWJsZWRcIiwhMCksdC4kbWFya0Nhbm5vdFVzZShlLFwibWF0cml4XCIsbnVsbCksdC4kbWFya1JlYWRPbmx5KGUsXCJzdGFnZVdpZHRoXCIpLHQuJG1hcmtSZWFkT25seShlLFwic3RhZ2VIZWlnaHRcIil9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJsb2dMZXZlbFwiLHtzZXQ6ZnVuY3Rpb24odCl7fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHR9KCk7ZS5BTEw9XCJhbGxcIixlW1widHJ1ZVwiXT1cImRlYnVnXCIsZS5JTkZPPVwiaW5mb1wiLGUuV0FSTj1cIndhcm5cIixlLkVSUk9SPVwiZXJyb3JcIixlLk9GRj1cIm9mZlwiLHQuTG9nZ2VyPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuTG9nZ2VyXCIpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQuaXNOdW1iZXI9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJiFpc05hTih0KX0sdC5zaW49ZnVuY3Rpb24oZSl7dmFyIGk9TWF0aC5mbG9vcihlKSxyPWkrMSxuPXQuc2luSW50KGkpO2lmKGk9PWUpcmV0dXJuIG47dmFyIGE9dC5zaW5JbnQocik7cmV0dXJuKGUtaSkqYSsoci1lKSpufSx0LnNpbkludD1mdW5jdGlvbih0KXtyZXR1cm4gdCU9MzYwLDA+dCYmKHQrPTM2MCksZWdyZXRfc2luX21hcFt0XX0sdC5jb3M9ZnVuY3Rpb24oZSl7dmFyIGk9TWF0aC5mbG9vcihlKSxyPWkrMSxuPXQuY29zSW50KGkpO2lmKGk9PWUpcmV0dXJuIG47dmFyIGE9dC5jb3NJbnQocik7cmV0dXJuKGUtaSkqYSsoci1lKSpufSx0LmNvc0ludD1mdW5jdGlvbih0KXtyZXR1cm4gdCU9MzYwLDA+dCYmKHQrPTM2MCksZWdyZXRfY29zX21hcFt0XX0sdH0oKTt0Lk51bWJlclV0aWxzPWUsX19yZWZsZWN0KGUucHJvdG90eXBlLFwiZWdyZXQuTnVtYmVyVXRpbHNcIil9KGVncmV0fHwoZWdyZXQ9e30pKTtmb3IodmFyIGVncmV0X3Npbl9tYXA9e30sZWdyZXRfY29zX21hcD17fSxERUdfVE9fUkFEPU1hdGguUEkvMTgwLE51bWJlclV0aWxzX2k9MDszNjA+TnVtYmVyVXRpbHNfaTtOdW1iZXJVdGlsc19pKyspZWdyZXRfc2luX21hcFtOdW1iZXJVdGlsc19pXT1NYXRoLnNpbihOdW1iZXJVdGlsc19pKkRFR19UT19SQUQpLGVncmV0X2Nvc19tYXBbTnVtYmVyVXRpbHNfaV09TWF0aC5jb3MoTnVtYmVyVXRpbHNfaSpERUdfVE9fUkFEKTtlZ3JldF9zaW5fbWFwWzkwXT0xLGVncmV0X2Nvc19tYXBbOTBdPTAsZWdyZXRfc2luX21hcFsxODBdPTAsZWdyZXRfY29zX21hcFsxODBdPS0xLGVncmV0X3Npbl9tYXBbMjcwXT0tMSxlZ3JldF9jb3NfbWFwWzI3MF09MCxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMmJmVncmV0LiRlcnJvcigxMDI5KTt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksaT10aGlzLHI9ZnVuY3Rpb24oKXt9LG49ZnVuY3Rpb24oKXtyZXR1cm4gaS5hcHBseSh0aGlzIGluc3RhbmNlb2YgciYmdD90aGlzOnQsZS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpfTtyZXR1cm4gci5wcm90b3R5cGU9dGhpcy5wcm90b3R5cGUsbi5wcm90b3R5cGU9bmV3IHIsbn0pO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGkpe3ZvaWQgMD09PWkmJihpPTApO3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fZGVsYXk9MCxyLl9jdXJyZW50Q291bnQ9MCxyLl9ydW5uaW5nPSExLHIudXBkYXRlSW50ZXJ2YWw9MWUzLHIubGFzdENvdW50PTFlMyxyLmxhc3RUaW1lU3RhbXA9MCxyLmRlbGF5PXQsci5yZXBlYXRDb3VudD0wfCtpLHJ9cmV0dXJuIF9fZXh0ZW5kcyhpLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImRlbGF5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxheX0sc2V0OmZ1bmN0aW9uKHQpezE+dCYmKHQ9MSksdGhpcy5fZGVsYXkhPXQmJih0aGlzLl9kZWxheT10LHRoaXMubGFzdENvdW50PXRoaXMudXBkYXRlSW50ZXJ2YWw9TWF0aC5yb3VuZCg2MCp0KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiY3VycmVudENvdW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50Q291bnR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwicnVubmluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVubmluZ30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuc3RvcCgpLHRoaXMuX2N1cnJlbnRDb3VudD0wfSxpLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuX3J1bm5pbmd8fCh0aGlzLmxhc3RDb3VudD10aGlzLnVwZGF0ZUludGVydmFsLHRoaXMubGFzdFRpbWVTdGFtcD10LmdldFRpbWVyKCksdC5zeXMuJHRpY2tlci4kc3RhcnRUaWNrKHRoaXMuJHVwZGF0ZSx0aGlzKSx0aGlzLl9ydW5uaW5nPSEwKX0saS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX3J1bm5pbmcmJih0LnN0b3BUaWNrKHRoaXMuJHVwZGF0ZSx0aGlzKSx0aGlzLl9ydW5uaW5nPSExKX0saS5wcm90b3R5cGUuJHVwZGF0ZT1mdW5jdGlvbihlKXt2YXIgaT1lLXRoaXMubGFzdFRpbWVTdGFtcDtpZihpPj10aGlzLl9kZWxheSl0aGlzLmxhc3RDb3VudD10aGlzLnVwZGF0ZUludGVydmFsO2Vsc2V7aWYodGhpcy5sYXN0Q291bnQtPTFlMyx0aGlzLmxhc3RDb3VudD4wKXJldHVybiExO3RoaXMubGFzdENvdW50Kz10aGlzLnVwZGF0ZUludGVydmFsfXRoaXMubGFzdFRpbWVTdGFtcD1lLHRoaXMuX2N1cnJlbnRDb3VudCsrO3ZhciByPXRoaXMucmVwZWF0Q291bnQ+MCYmdGhpcy5fY3VycmVudENvdW50Pj10aGlzLnJlcGVhdENvdW50O3JldHVybiB0LlRpbWVyRXZlbnQuZGlzcGF0Y2hUaW1lckV2ZW50KHRoaXMsdC5UaW1lckV2ZW50LlRJTUVSKSxyJiYodGhpcy5zdG9wKCksdC5UaW1lckV2ZW50LmRpc3BhdGNoVGltZXJFdmVudCh0aGlzLHQuVGltZXJFdmVudC5USU1FUl9DT01QTEVURSkpLCExfSxpfSh0LkV2ZW50RGlzcGF0Y2hlcik7dC5UaW1lcj1lLF9fcmVmbGVjdChlLnByb3RvdHlwZSxcImVncmV0LlRpbWVyXCIpLHQuJG1hcmtSZWFkT25seShlLFwiY3VycmVudENvdW50XCIpLHQuJG1hcmtSZWFkT25seShlLFwicnVubmluZ1wiKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7fShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7Zm9yKHZhciByPVtdLG49MjtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXJbbi0yXT1hcmd1bWVudHNbbl07dC4kY2FsbExhdGVyRnVuY3Rpb25MaXN0LnB1c2goZSksdC4kY2FsbExhdGVyVGhpc0xpc3QucHVzaChpKSx0LiRjYWxsTGF0ZXJBcmdzTGlzdC5wdXNoKHIpfWZ1bmN0aW9uIGkoZSxpKXtmb3IodmFyIHI9W10sbj0yO248YXJndW1lbnRzLmxlbmd0aDtuKyspcltuLTJdPWFyZ3VtZW50c1tuXTt0LiRjYWxsQXN5bmNGdW5jdGlvbkxpc3QucHVzaChlKSx0LiRjYWxsQXN5bmNUaGlzTGlzdC5wdXNoKGkpLHQuJGNhbGxBc3luY0FyZ3NMaXN0LnB1c2gocil9dC4kY2FsbExhdGVyRnVuY3Rpb25MaXN0PVtdLHQuJGNhbGxMYXRlclRoaXNMaXN0PVtdLHQuJGNhbGxMYXRlckFyZ3NMaXN0PVtdLHQuY2FsbExhdGVyPWUsdC4kY2FsbEFzeW5jRnVuY3Rpb25MaXN0PVtdLHQuJGNhbGxBc3luY1RoaXNMaXN0PVtdLHQuJGNhbGxBc3luY0FyZ3NMaXN0PVtdLHQuJGNhbGxBc3luYz1pfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSxpKXtmb3IodmFyIHI9W10sbj0zO248YXJndW1lbnRzLmxlbmd0aDtuKyspcltuLTNdPWFyZ3VtZW50c1tuXTt2YXIgYSxvPXQucHJvdG90eXBlO3QuaGFzT3duUHJvcGVydHkoXCJfX3NldHNfX1wiKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX3NldHNfX1wiLHt2YWx1ZTp7fX0pLGE9dC5fX3NldHNfXzt2YXIgcz1hW2ldO2lmKHMpcmV0dXJuIHMuYXBwbHkoZSxyKTt2YXIgaD1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbCE9aCl7Zm9yKDshaC5oYXNPd25Qcm9wZXJ0eShpKTspaWYoaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaCksbnVsbD09aClyZXR1cm47cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGgsaSkuc2V0LGFbaV09cyxzLmFwcGx5KGUscil9fWZ1bmN0aW9uIGkodCxlLGkpe3ZhciByLG49dC5wcm90b3R5cGU7dC5oYXNPd25Qcm9wZXJ0eShcIl9fZ2V0c19fXCIpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZ2V0c19fXCIse3ZhbHVlOnt9fSkscj10Ll9fZ2V0c19fO3ZhciBhPXJbaV07aWYoYSlyZXR1cm4gYS5jYWxsKGUpO3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihuKTtpZihudWxsIT1vKXtmb3IoOyFvLmhhc093blByb3BlcnR5KGkpOylpZihvPU9iamVjdC5nZXRQcm90b3R5cGVPZihvKSxudWxsPT1vKXJldHVybjtyZXR1cm4gYT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSkuZ2V0LHJbaV09YSxhLmNhbGwoZSl9fXQuc3VwZXJTZXR0ZXI9ZSx0LnN1cGVyR2V0dGVyPWl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7aWYoIXQpcmV0dXJuIG51bGw7dmFyIGU9aVt0XTtpZihlKXJldHVybiBlO3ZhciByPXQuc3BsaXQoXCIuXCIpLG49ci5sZW5ndGg7ZT1fX2dsb2JhbDtmb3IodmFyIGE9MDtuPmE7YSsrKXt2YXIgbz1yW2FdO2lmKGU9ZVtvXSwhZSlyZXR1cm4gbnVsbH1yZXR1cm4gaVt0XT1lLGV9dmFyIGk9e307dC5nZXREZWZpbml0aW9uQnlOYW1lPWUsdC5jbGVhbkNhY2hlPWZ1bmN0aW9uKCl7aT17fX19KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgX19nbG9iYWw9dGhpcy5fX2dsb2JhbHx8dGhpcyxlZ3JldDshZnVuY3Rpb24odCl7fShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ZhciBlPXR5cGVvZiB0O2lmKCF0fHxcIm9iamVjdFwiIT1lJiYhdC5wcm90b3R5cGUpcmV0dXJuIGU7dmFyIGk9dC5wcm90b3R5cGU/dC5wcm90b3R5cGU6T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpO2lmKGkuaGFzT3duUHJvcGVydHkoXCJfX2NsYXNzX19cIikpcmV0dXJuIGkuX19jbGFzc19fO3ZhciByPWkuY29uc3RydWN0b3IudG9TdHJpbmcoKS50cmltKCksbj1yLmluZGV4T2YoXCIoXCIpLGE9ci5zdWJzdHJpbmcoOSxuKTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCJfX2NsYXNzX19cIix7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwfSksYX10LmdldFF1YWxpZmllZENsYXNzTmFtZT1lfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe2lmKCFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmIWUucHJvdG90eXBlKXJldHVybiBudWxsO3ZhciBpPWUucHJvdG90eXBlP2UucHJvdG90eXBlOk9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxyPU9iamVjdC5nZXRQcm90b3R5cGVPZihpKTtpZighcilyZXR1cm4gbnVsbDt2YXIgbj10LmdldFF1YWxpZmllZENsYXNzTmFtZShyLmNvbnN0cnVjdG9yKTtyZXR1cm4gbj9uOm51bGx9dC5nZXRRdWFsaWZpZWRTdXBlcmNsYXNzTmFtZT1lfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIERhdGUubm93KCktdC5zeXMuJFNUQVJUX1RJTUV9dC5nZXRUaW1lcj1lfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuZ2V0RGVmaW5pdGlvbkJ5TmFtZShlKTtyZXR1cm4gaT8hMDohMX10Lmhhc0RlZmluaXRpb249ZX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUpe2lmKCF0fHxcIm9iamVjdFwiIT10eXBlb2YgdClyZXR1cm4hMTt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCkscj1pP2kuX190eXBlc19fOm51bGw7cmV0dXJuIHI/LTEhPT1yLmluZGV4T2YoZSk6ITF9dC5pcz1lfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7ZXx8dC4kZXJyb3IoMTAwMyxcImNhbGxCYWNrXCIpLHQuc3lzLiR0aWNrZXIuJHN0YXJ0VGljayhlLGkpfXQuc3RhcnRUaWNrPWV9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXtlfHx0LiRlcnJvcigxMDAzLFwiY2FsbEJhY2tcIiksdC5zeXMuJHRpY2tlci4kc3RvcFRpY2soZSxpKX10LnN0b3BUaWNrPWV9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7MD50JiYodD0wKSx0PjE2Nzc3MjE1JiYodD0xNjc3NzIxNSk7Zm9yKHZhciBlPXQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7ZS5sZW5ndGg+NjspZT1lLnNsaWNlKDEsZS5sZW5ndGgpO2Zvcig7ZS5sZW5ndGg8NjspZT1cIjBcIitlO3JldHVyblwiI1wiK2V9dC50b0NvbG9yU3RyaW5nPWV9KGVncmV0fHwoZWdyZXQ9e30pKTsiLCJ2YXIgX19yZWZsZWN0PXRoaXMmJnRoaXMuX19yZWZsZWN0fHxmdW5jdGlvbihlLHQscil7ZS5fX2NsYXNzX189dCxyP3IucHVzaCh0KTpyPVt0XSxlLl9fdHlwZXNfXz1lLl9fdHlwZXNfXz9yLmNvbmNhdChlLl9fdHlwZXNfXyk6cn0sX19leHRlbmRzPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt0aGlzLmRlZmF1bHRWZXJ0ZXhTcmM9XCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5hdHRyaWJ1dGUgdmVjMiBhQ29sb3I7XFxudW5pZm9ybSB2ZWMyIHByb2plY3Rpb25WZWN0b3I7XFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxudmFyeWluZyB2ZWM0IHZDb2xvcjtcXG5jb25zdCB2ZWMyIGNlbnRlciA9IHZlYzIoLTEuMCwgMS4wKTtcXG52b2lkIG1haW4odm9pZCkge1xcbiAgIGdsX1Bvc2l0aW9uID0gdmVjNCggKGFWZXJ0ZXhQb3NpdGlvbiAvIHByb2plY3Rpb25WZWN0b3IpICsgY2VudGVyICwgMC4wLCAxLjApO1xcbiAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1xcbiAgIHZDb2xvciA9IHZlYzQoYUNvbG9yLngsIGFDb2xvci54LCBhQ29sb3IueCwgYUNvbG9yLngpO1xcbn1cIix0aGlzLmZyYWdtZW50U3JjPVwiXCIsdGhpcy5nbD1udWxsLHRoaXMucHJvZ3JhbT1udWxsLHRoaXMudW5pZm9ybXM9e3Byb2plY3Rpb25WZWN0b3I6e3R5cGU6XCIyZlwiLHZhbHVlOnt4OjAseTowfSxkaXJ0eTohMH19LHRoaXMuZ2w9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2wscj1lLldlYkdMVXRpbHMuY29tcGlsZVByb2dyYW0odCx0aGlzLmRlZmF1bHRWZXJ0ZXhTcmMsdGhpcy5mcmFnbWVudFNyYyk7dC51c2VQcm9ncmFtKHIpLHRoaXMuYVZlcnRleFBvc2l0aW9uPXQuZ2V0QXR0cmliTG9jYXRpb24ocixcImFWZXJ0ZXhQb3NpdGlvblwiKSx0aGlzLmFUZXh0dXJlQ29vcmQ9dC5nZXRBdHRyaWJMb2NhdGlvbihyLFwiYVRleHR1cmVDb29yZFwiKSx0aGlzLmNvbG9yQXR0cmlidXRlPXQuZ2V0QXR0cmliTG9jYXRpb24ocixcImFDb2xvclwiKSwtMT09PXRoaXMuY29sb3JBdHRyaWJ1dGUmJih0aGlzLmNvbG9yQXR0cmlidXRlPTIpLHRoaXMuYXR0cmlidXRlcz1bdGhpcy5hVmVydGV4UG9zaXRpb24sdGhpcy5hVGV4dHVyZUNvb3JkLHRoaXMuY29sb3JBdHRyaWJ1dGVdO2Zvcih2YXIgaSBpbiB0aGlzLnVuaWZvcm1zKXRoaXMudW5pZm9ybXNbaV0udW5pZm9ybUxvY2F0aW9uPXQuZ2V0VW5pZm9ybUxvY2F0aW9uKHIsaSk7dGhpcy5pbml0VW5pZm9ybXMoKSx0aGlzLnByb2dyYW09cn0sdC5wcm90b3R5cGUuaW5pdFVuaWZvcm1zPWZ1bmN0aW9uKCl7aWYodGhpcy51bmlmb3Jtcyl7dmFyIGUsdD10aGlzLmdsO2Zvcih2YXIgciBpbiB0aGlzLnVuaWZvcm1zKXtlPXRoaXMudW5pZm9ybXNbcl0sZS5kaXJ0eT0hMDt2YXIgaT1lLnR5cGU7XCJtYXQyXCI9PT1pfHxcIm1hdDNcIj09PWl8fFwibWF0NFwiPT09aT8oZS5nbE1hdHJpeD0hMCxlLmdsVmFsdWVMZW5ndGg9MSxcIm1hdDJcIj09PWk/ZS5nbEZ1bmM9dC51bmlmb3JtTWF0cml4MmZ2OlwibWF0M1wiPT09aT9lLmdsRnVuYz10LnVuaWZvcm1NYXRyaXgzZnY6XCJtYXQ0XCI9PT1pJiYoZS5nbEZ1bmM9dC51bmlmb3JtTWF0cml4NGZ2KSk6KGUuZ2xGdW5jPXRbXCJ1bmlmb3JtXCIraV0sXCIyZlwiPT09aXx8XCIyaVwiPT09aT9lLmdsVmFsdWVMZW5ndGg9MjpcIjNmXCI9PT1pfHxcIjNpXCI9PT1pP2UuZ2xWYWx1ZUxlbmd0aD0zOlwiNGZcIj09PWl8fFwiNGlcIj09PWk/ZS5nbFZhbHVlTGVuZ3RoPTQ6ZS5nbFZhbHVlTGVuZ3RoPTEpfX19LHQucHJvdG90eXBlLnN5bmNVbmlmb3Jtcz1mdW5jdGlvbigpe2lmKHRoaXMudW5pZm9ybXMpe3ZhciBlLHQ9dGhpcy5nbDtmb3IodmFyIHIgaW4gdGhpcy51bmlmb3JtcyllPXRoaXMudW5pZm9ybXNbcl0sZS5kaXJ0eSYmKDE9PT1lLmdsVmFsdWVMZW5ndGg/ZS5nbE1hdHJpeD09PSEwP2UuZ2xGdW5jLmNhbGwodCxlLnVuaWZvcm1Mb2NhdGlvbixlLnRyYW5zcG9zZSxlLnZhbHVlKTplLmdsRnVuYy5jYWxsKHQsZS51bmlmb3JtTG9jYXRpb24sZS52YWx1ZSk6Mj09PWUuZ2xWYWx1ZUxlbmd0aD9lLmdsRnVuYy5jYWxsKHQsZS51bmlmb3JtTG9jYXRpb24sZS52YWx1ZS54LGUudmFsdWUueSk6Mz09PWUuZ2xWYWx1ZUxlbmd0aD9lLmdsRnVuYy5jYWxsKHQsZS51bmlmb3JtTG9jYXRpb24sZS52YWx1ZS54LGUudmFsdWUueSxlLnZhbHVlLnopOjQ9PT1lLmdsVmFsdWVMZW5ndGgmJmUuZ2xGdW5jLmNhbGwodCxlLnVuaWZvcm1Mb2NhdGlvbixlLnZhbHVlLngsZS52YWx1ZS55LGUudmFsdWUueixlLnZhbHVlLncpLGUuZGlydHk9ITEpfX0sdC5wcm90b3R5cGUuc2V0UHJvamVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMudW5pZm9ybXMucHJvamVjdGlvblZlY3Rvcjsoci52YWx1ZS54IT1lfHxyLnZhbHVlLnkhPXQpJiYoci52YWx1ZS54PWUsci52YWx1ZS55PXQsci5kaXJ0eT0hMCl9LHQucHJvdG90eXBlLnNldEF0dHJpYlBvaW50ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nbDt0LnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hVmVydGV4UG9zaXRpb24sMix0LkZMT0FULCExLGUsMCksdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuYVRleHR1cmVDb29yZCwyLHQuRkxPQVQsITEsZSw4KSx0LnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5jb2xvckF0dHJpYnV0ZSwxLHQuRkxPQVQsITEsZSwxNil9LHR9KCk7dC5FZ3JldFNoYWRlcj1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5FZ3JldFNoYWRlclwiKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuZnJhZ21lbnRTcmM9XCJwcmVjaXNpb24gbG93cCBmbG9hdDtcXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG52YXJ5aW5nIHZlYzQgdkNvbG9yO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1xcbnZvaWQgbWFpbih2b2lkKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIHZDb2xvcjtcXG59XCIsdH1yZXR1cm4gX19leHRlbmRzKHQsZSksdH0oZS5FZ3JldFNoYWRlcik7ZS5UZXh0dXJlU2hhZGVyPXQsX19yZWZsZWN0KHQucHJvdG90eXBlLFwiZWdyZXQud2ViLlRleHR1cmVTaGFkZXJcIil9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI7IWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIGkoZSl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKX1mdW5jdGlvbiBuKHQscil7dHJ5e3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odCxyKSwhMH1jYXRjaChpKXtyZXR1cm4gZS4kd2FybigxMDQ3LHQsciksITF9fWZ1bmN0aW9uIG8oZSl7d2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpfWZ1bmN0aW9uIGEoKXt3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCl9dC5nZXRJdGVtPWksdC5zZXRJdGVtPW4sdC5yZW1vdmVJdGVtPW8sdC5jbGVhcj1hfShyPXQud2VifHwodC53ZWI9e30pKX0odD1lLmxvY2FsU3RvcmFnZXx8KGUubG9jYWxTdG9yYWdlPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbihyKXtmdW5jdGlvbiBpKCl7dmFyIGU9ci5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLmxvYWRlZD0hMSxlfXJldHVybiBfX2V4dGVuZHMoaSxyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5BdWRpbylyZXR1cm4gdGhpcy5vcmlnaW5BdWRpby5kdXJhdGlvbjt0aHJvdyBuZXcgRXJyb3IoXCJzb3VuZCBub3QgbG9hZGVkIVwiKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoKXtvKCksbC5pbmRleE9mKFwiZmlyZWZveFwiKT49MCYmKHMucGF1c2UoKSxzLm11dGVkPSExKSxhLmxvYWRlZD0hMCxhLmRpc3BhdGNoRXZlbnRXaXRoKGUuRXZlbnQuQ09NUExFVEUpfWZ1bmN0aW9uIG4oKXtvKCksYS5kaXNwYXRjaEV2ZW50V2l0aChlLklPRXJyb3JFdmVudC5JT19FUlJPUil9ZnVuY3Rpb24gbygpe3MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNhbnBsYXl0aHJvdWdoXCIscikscy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixuKX12YXIgYT10aGlzO3RoaXMudXJsPXQsdHx8ZS4kZXJyb3IoMzAwMik7dmFyIHM9bmV3IEF1ZGlvKHQpO3MuYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXl0aHJvdWdoXCIscikscy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixuKTt2YXIgbD1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7bC5pbmRleE9mKFwiZmlyZWZveFwiKT49MCYmKHMuYXV0b3BsYXk9ITAscy5tdXRlZD0hMCkscy5sb2FkKCksdGhpcy5vcmlnaW5BdWRpbz1zLGkuJHJlY3ljbGUodGhpcy51cmwscyl9LGkucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24ocixuKXtyPStyfHwwLG49K258fDAsMD09dGhpcy5sb2FkZWQmJmUuJGVycm9yKDEwNDkpO3ZhciBvPWkuJHBvcCh0aGlzLnVybCk7bnVsbD09byYmKG89dGhpcy5vcmlnaW5BdWRpby5jbG9uZU5vZGUoKSksby5hdXRvcGxheT0hMDt2YXIgYT1uZXcgdC5IdG1sU291bmRDaGFubmVsKG8pO3JldHVybiBhLiR1cmw9dGhpcy51cmwsYS4kbG9vcHM9bixhLiRzdGFydFRpbWU9cixhLiRwbGF5KCksZS5zeXMuJHB1c2hTb3VuZENoYW5uZWwoYSksYX0saS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXswPT10aGlzLmxvYWRlZCYmdGhpcy5vcmlnaW5BdWRpbyYmKHRoaXMub3JpZ2luQXVkaW8uc3JjPVwiXCIpLHRoaXMub3JpZ2luQXVkaW8mJih0aGlzLm9yaWdpbkF1ZGlvPW51bGwpLGkuJGNsZWFyKHRoaXMudXJsKX0saS4kY2xlYXI9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5hdWRpb3NbZV07dCYmKHQubGVuZ3RoPTApfSxpLiRwb3A9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5hdWRpb3NbZV07cmV0dXJuIHQmJnQubGVuZ3RoPjA/dC5wb3AoKTpudWxsfSxpLiRyZWN5Y2xlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5hdWRpb3NbZV07bnVsbD09aS5hdWRpb3NbZV0mJihyPWkuYXVkaW9zW2VdPVtdKSxyLnB1c2godCl9LGl9KGUuRXZlbnREaXNwYXRjaGVyKTtyLk1VU0lDPVwibXVzaWNcIixyLkVGRkVDVD1cImVmZmVjdFwiLHIuYXVkaW9zPXt9LHQuSHRtbFNvdW5kPXIsX19yZWZsZWN0KHIucHJvdG90eXBlLFwiZWdyZXQud2ViLkh0bWxTb3VuZFwiLFtcImVncmV0LlNvdW5kXCJdKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbihyKXtmdW5jdGlvbiBpKHQpe3ZhciBpPXIuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS4kc3RhcnRUaW1lPTAsaS5hdWRpbz1udWxsLGkuaXNTdG9wcGVkPSExLGkuY2FuUGxheT1mdW5jdGlvbigpe2kuYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNhbnBsYXlcIixpLmNhblBsYXkpO3RyeXtpLmF1ZGlvLmN1cnJlbnRUaW1lPWkuJHN0YXJ0VGltZX1jYXRjaChlKXt9ZmluYWxseXtpLmF1ZGlvLnBsYXkoKX19LGkub25QbGF5RW5kPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PWkuJGxvb3BzPyhpLnN0b3AoKSx2b2lkIGkuZGlzcGF0Y2hFdmVudFdpdGgoZS5FdmVudC5TT1VORF9DT01QTEVURSkpOihpLiRsb29wcz4wJiZpLiRsb29wcy0tLHZvaWQgaS4kcGxheSgpKX0saS5fdm9sdW1lPTEsdC5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIixpLm9uUGxheUVuZCksaS5hdWRpbz10LGl9cmV0dXJuIF9fZXh0ZW5kcyhpLHIpLGkucHJvdG90eXBlLiRwbGF5PWZ1bmN0aW9uKCl7aWYodGhpcy5pc1N0b3BwZWQpcmV0dXJuIHZvaWQgZS4kZXJyb3IoMTAzNik7dHJ5e3RoaXMuYXVkaW8udm9sdW1lPXRoaXMuX3ZvbHVtZSx0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lPXRoaXMuJHN0YXJ0VGltZX1jYXRjaCh0KXtyZXR1cm4gdm9pZCB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsdGhpcy5jYW5QbGF5KX10aGlzLmF1ZGlvLnBsYXkoKX0saS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKHRoaXMuYXVkaW8pe3RoaXMuaXNTdG9wcGVkfHxlLnN5cy4kcG9wU291bmRDaGFubmVsKHRoaXMpLHRoaXMuaXNTdG9wcGVkPSEwO3ZhciByPXRoaXMuYXVkaW87ci5yZW1vdmVFdmVudExpc3RlbmVyKFwiZW5kZWRcIix0aGlzLm9uUGxheUVuZCksci52b2x1bWU9MCx0aGlzLl92b2x1bWU9MCx0aGlzLmF1ZGlvPW51bGw7dmFyIGk9dGhpcy4kdXJsO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5wYXVzZSgpLHQuSHRtbFNvdW5kLiRyZWN5Y2xlKGkscil9LDIwMCl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJ2b2x1bWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzU3RvcHBlZD92b2lkIGUuJGVycm9yKDEwMzYpOih0aGlzLl92b2x1bWU9dCx2b2lkKHRoaXMuYXVkaW8mJih0aGlzLmF1ZGlvLnZvbHVtZT10KSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInBvc2l0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF1ZGlvP3RoaXMuYXVkaW8uY3VycmVudFRpbWU6MH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpfShlLkV2ZW50RGlzcGF0Y2hlcik7dC5IdG1sU291bmRDaGFubmVsPXIsX19yZWZsZWN0KHIucHJvdG90eXBlLFwiZWdyZXQud2ViLkh0bWxTb3VuZENoYW5uZWxcIixbXCJlZ3JldC5Tb3VuZENoYW5uZWxcIixcImVncmV0LklFdmVudERpc3BhdGNoZXJcIl0pfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe3ZhciByPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIGkoKXt2YXIgZT1yLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUubG9hZGVkPSExLGV9cmV0dXJuIF9fZXh0ZW5kcyhpLHIpLGkucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24ocil7dmFyIGk9dGhpczt0aGlzLnVybD1yLHJ8fGUuJGVycm9yKDMwMDIpLFFaQXBwRXh0ZXJuYWwucHJlbG9hZFNvdW5kKGZ1bmN0aW9uKHQpezA9PXQuY29kZT8oaS5sb2FkZWQ9ITAsaS5kaXNwYXRjaEV2ZW50V2l0aChlLkV2ZW50LkNPTVBMRVRFKSk6aS5kaXNwYXRjaEV2ZW50V2l0aChlLklPRXJyb3JFdmVudC5JT19FUlJPUil9LHtiaWQ6LTEsdXJsOnQuSHRtbDVDYXBhdGliaWxpdHkuX1FRUm9vdFBhdGgrcixyZWZyZXNoOjF9KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwibGVuZ3RoXCIse2dldDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcInFxIHNvdW5kIG5vdCBzdXBwb3J0ZWQhXCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGkucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24ocixpKXtyPStyfHwwLGk9K2l8fDAsMD09dGhpcy5sb2FkZWQmJmUuJGVycm9yKDEwNDkpO3ZhciBuPW5ldyB0LlFRU291bmRDaGFubmVsO3JldHVybiBuLiR1cmw9dGhpcy51cmwsbi4kbG9vcHM9aSxuLiR0eXBlPXRoaXMudHlwZSxuLiRzdGFydFRpbWU9cixuLiRwbGF5KCksZS5zeXMuJHB1c2hTb3VuZENoYW5uZWwobiksbn0saS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt9LGl9KGUuRXZlbnREaXNwYXRjaGVyKTtyLk1VU0lDPVwibXVzaWNcIixyLkVGRkVDVD1cImVmZmVjdFwiLHQuUVFTb3VuZD1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5RUVNvdW5kXCIsW1wiZWdyZXQuU291bmRcIl0pfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe3ZhciByPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIuJHN0YXJ0VGltZT0wLHIuaXNTdG9wcGVkPSExLHIub25QbGF5RW5kPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PXIuJGxvb3BzPyhyLnN0b3AoKSx2b2lkIHIuZGlzcGF0Y2hFdmVudFdpdGgoZS5FdmVudC5TT1VORF9DT01QTEVURSkpOihyLiRsb29wcz4wJiZyLiRsb29wcy0tLHZvaWQgci4kcGxheSgpKX0sci5fc3RhcnRUaW1lPTAscn1yZXR1cm4gX19leHRlbmRzKHIsdCksci5wcm90b3R5cGUuJHBsYXk9ZnVuY3Rpb24oKXtpZih0aGlzLmlzU3RvcHBlZClyZXR1cm4gdm9pZCBlLiRlcnJvcigxMDM2KTt2YXIgdD10aGlzO3RoaXMuX3N0YXJ0VGltZT1EYXRlLm5vdygpO3ZhciByPTA7cj10LiRsb29wcz4wP3QuJGxvb3BzLTE6LTEsdGhpcy4kdHlwZT09ZS5Tb3VuZC5FRkZFQ1Q/UVpBcHBFeHRlcm5hbC5wbGF5TG9jYWxTb3VuZChmdW5jdGlvbihlKXt9LHtiaWQ6LTEsdXJsOnQuJHVybCxsb29wOnJ9KTpRWkFwcEV4dGVybmFsLnBsYXlMb2NhbEJhY2tTb3VuZChmdW5jdGlvbihlKXt9LHtiaWQ6LTEsdXJsOnQuJHVybCxsb29wOnJ9KX0sci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuJHR5cGU9PWUuU291bmQuRUZGRUNUP1FaQXBwRXh0ZXJuYWwuc3RvcFNvdW5kKCk6UVpBcHBFeHRlcm5hbC5zdG9wQmFja1NvdW5kKCksdGhpcy5pc1N0b3BwZWR8fGUuc3lzLiRwb3BTb3VuZENoYW5uZWwodGhpcyksdGhpcy5pc1N0b3BwZWQ9ITB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInZvbHVtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzU3RvcHBlZD92b2lkIGUuJGVycm9yKDEwMzYpOnZvaWQgMH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJwb3NpdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4oRGF0ZS5ub3coKS10aGlzLl9zdGFydFRpbWUpLzFlM30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfShlLkV2ZW50RGlzcGF0Y2hlcik7dC5RUVNvdW5kQ2hhbm5lbD1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5RUVNvdW5kQ2hhbm5lbFwiLFtcImVncmV0LlNvdW5kQ2hhbm5lbFwiLFwiZWdyZXQuSUV2ZW50RGlzcGF0Y2hlclwiXSl9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmRlY29kZUF1ZGlvcz1mdW5jdGlvbigpe2lmKCEoZS5kZWNvZGVBcnIubGVuZ3RoPD0wfHxlLmlzRGVjb2RpbmcpKXtlLmlzRGVjb2Rpbmc9ITA7dmFyIHQ9ZS5kZWNvZGVBcnIuc2hpZnQoKTtlLmN0eC5kZWNvZGVBdWRpb0RhdGEodC5idWZmZXIsZnVuY3Rpb24ocil7dC5zZWxmLmF1ZGlvQnVmZmVyPXIsdC5zdWNjZXNzJiZ0LnN1Y2Nlc3MoKSxlLmlzRGVjb2Rpbmc9ITEsZS5kZWNvZGVBdWRpb3MoKX0sZnVuY3Rpb24oKXthbGVydChcInNvdW5kIGRlY29kZSBlcnJvcjogXCIrdC51cmwrXCLvvIFcXG5zZWUgaHR0cDovL2Vkbi5lZ3JldC5jb20vY24vZG9jcy9wYWdlLzE1NlwiKSx0LmZhaWwmJnQuZmFpbCgpLGUuaXNEZWNvZGluZz0hMSxlLmRlY29kZUF1ZGlvcygpfSl9fSxlfSgpO3IuY2FuVXNlV2ViQXVkaW89d2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dHx8d2luZG93Lm1vekF1ZGlvQ29udGV4dCxyLmN0eD1yLmNhblVzZVdlYkF1ZGlvP25ldyh3aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0fHx3aW5kb3cubW96QXVkaW9Db250ZXh0KTp2b2lkIDAsci5kZWNvZGVBcnI9W10sci5pc0RlY29kaW5nPSExLHQuV2ViQXVkaW9EZWNvZGU9cixfX3JlZmxlY3Qoci5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViQXVkaW9EZWNvZGVcIik7dmFyIGk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gbigpe3ZhciBlPWkuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5sb2FkZWQ9ITEsZX1yZXR1cm4gX19leHRlbmRzKG4saSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwibGVuZ3RoXCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuYXVkaW9CdWZmZXIpcmV0dXJuIHRoaXMuYXVkaW9CdWZmZXIuZHVyYXRpb247dGhyb3cgbmV3IEVycm9yKFwic291bmQgbm90IGxvYWRlZCFcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUubG9hZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBpKCl7by5sb2FkZWQ9ITAsby5kaXNwYXRjaEV2ZW50V2l0aChlLkV2ZW50LkNPTVBMRVRFKX1mdW5jdGlvbiBuKCl7by5kaXNwYXRjaEV2ZW50V2l0aChlLklPRXJyb3JFdmVudC5JT19FUlJPUil9dmFyIG89dGhpczt0aGlzLnVybD10LHR8fGUuJGVycm9yKDMwMDIpO3ZhciBhPW5ldyBYTUxIdHRwUmVxdWVzdDthLm9wZW4oXCJHRVRcIix0LCEwKSxhLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIsYS5vbmxvYWQ9ZnVuY3Rpb24oKXtyLmRlY29kZUFyci5wdXNoKHtidWZmZXI6YS5yZXNwb25zZSxzdWNjZXNzOmksZmFpbDpuLHNlbGY6byx1cmw6by51cmx9KSxyLmRlY29kZUF1ZGlvcygpfSxhLnNlbmQoKX0sbi5wcm90b3R5cGUucGxheT1mdW5jdGlvbihyLGkpe3I9K3J8fDAsaT0raXx8MCwwPT10aGlzLmxvYWRlZCYmZS4kZXJyb3IoMTA0OSk7dmFyIG49bmV3IHQuV2ViQXVkaW9Tb3VuZENoYW5uZWw7cmV0dXJuIG4uJHVybD10aGlzLnVybCxuLiRsb29wcz1pLG4uJGF1ZGlvQnVmZmVyPXRoaXMuYXVkaW9CdWZmZXIsbi4kc3RhcnRUaW1lPXIsbi4kcGxheSgpLGUuc3lzLiRwdXNoU291bmRDaGFubmVsKG4pLG59LG4ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7fSxufShlLkV2ZW50RGlzcGF0Y2hlcik7aS5NVVNJQz1cIm11c2ljXCIsaS5FRkZFQ1Q9XCJlZmZlY3RcIix0LldlYkF1ZGlvU291bmQ9aSxfX3JlZmxlY3QoaS5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViQXVkaW9Tb3VuZFwiLFtcImVncmV0LlNvdW5kXCJdKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbihyKXtmdW5jdGlvbiBpKCl7dmFyIGk9ci5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLiRzdGFydFRpbWU9MCxpLmJ1ZmZlclNvdXJjZT1udWxsLGkuY29udGV4dD10LldlYkF1ZGlvRGVjb2RlLmN0eCxpLmlzU3RvcHBlZD0hMSxpLl9jdXJyZW50VGltZT0wLGkuX3ZvbHVtZT0xLGkub25QbGF5RW5kPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PWkuJGxvb3BzPyhpLnN0b3AoKSx2b2lkIGkuZGlzcGF0Y2hFdmVudFdpdGgoZS5FdmVudC5TT1VORF9DT01QTEVURSkpOihpLiRsb29wcz4wJiZpLiRsb29wcy0tLHZvaWQgaS4kcGxheSgpKX0saS5fc3RhcnRUaW1lPTAsaS5jb250ZXh0LmNyZWF0ZUdhaW4/aS5nYWluPWkuY29udGV4dC5jcmVhdGVHYWluKCk6aS5nYWluPWkuY29udGV4dC5jcmVhdGVHYWluTm9kZSgpLGl9cmV0dXJuIF9fZXh0ZW5kcyhpLHIpLGkucHJvdG90eXBlLiRwbGF5PWZ1bmN0aW9uKCl7aWYodGhpcy5pc1N0b3BwZWQpcmV0dXJuIHZvaWQgZS4kZXJyb3IoMTAzNik7dGhpcy5idWZmZXJTb3VyY2UmJih0aGlzLmJ1ZmZlclNvdXJjZS5vbmVuZGVkPW51bGwsdGhpcy5idWZmZXJTb3VyY2U9bnVsbCk7dmFyIHQ9dGhpcy5jb250ZXh0LHI9dGhpcy5nYWluLGk9dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTt0aGlzLmJ1ZmZlclNvdXJjZT1pLGkuYnVmZmVyPXRoaXMuJGF1ZGlvQnVmZmVyLGkuY29ubmVjdChyKSxyLmNvbm5lY3QodC5kZXN0aW5hdGlvbiksaS5vbmVuZGVkPXRoaXMub25QbGF5RW5kLHRoaXMuX3N0YXJ0VGltZT1EYXRlLm5vdygpLHRoaXMuZ2Fpbi5nYWluLnZhbHVlPXRoaXMuX3ZvbHVtZSxpLnN0YXJ0KDAsdGhpcy4kc3RhcnRUaW1lKSx0aGlzLl9jdXJyZW50VGltZT0wfSxpLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7aWYodGhpcy5idWZmZXJTb3VyY2Upe3ZhciB0PXRoaXMuYnVmZmVyU291cmNlO3Quc3RvcD90LnN0b3AoMCk6dC5ub3RlT2ZmKDApLHRoaXMuYnVmZmVyU291cmNlLmRpc2Nvbm5lY3QoKSx0aGlzLmJ1ZmZlclNvdXJjZT1udWxsLHRoaXMuJGF1ZGlvQnVmZmVyPW51bGx9dGhpcy5pc1N0b3BwZWR8fGUuc3lzLiRwb3BTb3VuZENoYW5uZWwodGhpcyksdGhpcy5pc1N0b3BwZWQ9ITB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInZvbHVtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lfSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkP3ZvaWQgZS4kZXJyb3IoMTAzNik6KHRoaXMuX3ZvbHVtZT10LHZvaWQodGhpcy5nYWluLmdhaW4udmFsdWU9dCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInBvc2l0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlclNvdXJjZT8oRGF0ZS5ub3coKS10aGlzLl9zdGFydFRpbWUpLzFlMyt0aGlzLiRzdGFydFRpbWU6MH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxpfShlLkV2ZW50RGlzcGF0Y2hlcik7dC5XZWJBdWRpb1NvdW5kQ2hhbm5lbD1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJBdWRpb1NvdW5kQ2hhbm5lbFwiLFtcImVncmV0LlNvdW5kQ2hhbm5lbFwiLFwiZWdyZXQuSUV2ZW50RGlzcGF0Y2hlclwiXSl9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihyLGkpe3ZvaWQgMD09PWkmJihpPSEwKTt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4ubG9hZGVkPSExLG4uY2xvc2VkPSExLG4uaGVpZ2h0U2V0PTAvMCxuLndpZHRoU2V0PTAvMCxuLmlzUGxheWVkPSExLG4uc2NyZWVuQ2hhbmdlZD1mdW5jdGlvbih0KXt2YXIgcj0hIW4udmlkZW8ud2Via2l0RGlzcGxheWluZ0Z1bGxzY3JlZW47cnx8KG4uY2hlY2tGdWxsU2NyZWVuKCExKSxlLkNhcGFiaWxpdGllcy5pc01vYmlsZXx8KG4uX2Z1bGxzY3JlZW49cikpfSxuLl9mdWxsc2NyZWVuPSEwLG4ub25WaWRlb0xvYWRlZD1mdW5jdGlvbigpe24udmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNhbnBsYXlcIixuLm9uVmlkZW9Mb2FkZWQpO3ZhciB0PW4udmlkZW87bi5sb2FkZWQ9ITAsbi5wb3N0ZXJEYXRhJiYobi5wb3N0ZXJEYXRhLndpZHRoPW4uZ2V0UGxheVdpZHRoKCksbi5wb3N0ZXJEYXRhLmhlaWdodD1uLmdldFBsYXlIZWlnaHQoKSksdC53aWR0aD10LnZpZGVvV2lkdGgsdC5oZWlnaHQ9dC52aWRlb0hlaWdodCxuLiRpbnZhbGlkYXRlQ29udGVudEJvdW5kcygpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5kaXNwYXRjaEV2ZW50V2l0aChlLkV2ZW50LkNPTVBMRVRFKX0sMjAwKX0sbi4kcmVuZGVyTm9kZT1uZXcgZS5zeXMuQml0bWFwTm9kZSxuLnNyYz1yLG4ub25jZShlLkV2ZW50LkFEREVEX1RPX1NUQUdFLG4ubG9hZFBvc3RlcixuKSxyJiZuLmxvYWQoKSxufXJldHVybiBfX2V4dGVuZHMocix0KSxyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQscil7dmFyIGk9dGhpcztpZih2b2lkIDA9PT1yJiYocj0hMCksdD10fHx0aGlzLnNyYyx0aGlzLnNyYz10LHR8fGUuJGVycm9yKDMwMDIpLCF0aGlzLnZpZGVvfHx0aGlzLnZpZGVvLnNyYyE9dCl7dmFyIG47IXRoaXMudmlkZW98fGUuQ2FwYWJpbGl0aWVzLmlzTW9iaWxlPyhuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKSx0aGlzLnZpZGVvPW4sbi5jb250cm9scz1udWxsKTpuPXRoaXMudmlkZW8sbi5zcmM9dCxuLnNldEF0dHJpYnV0ZShcImF1dG9wbGF5XCIsXCJhdXRvcGxheVwiKSxuLnNldEF0dHJpYnV0ZShcIndlYmtpdC1wbGF5c2lubGluZVwiLFwidHJ1ZVwiKSxuLmFkZEV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsdGhpcy5vblZpZGVvTG9hZGVkKSxuLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGkub25WaWRlb0Vycm9yKCl9KSxuLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGkub25WaWRlb0VuZGVkKCl9KSxuLmxvYWQoKSxuLnBsYXkoKSxuLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixuLnN0eWxlLnRvcD1cIjBweFwiLG4uc3R5bGUuekluZGV4PVwiLTg4ODg4XCIsbi5zdHlsZS5sZWZ0PVwiMHB4XCIsbi5oZWlnaHQ9MSxuLndpZHRoPTEsd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXVzZSgpfSwxNzApfX0sci5wcm90b3R5cGUucGxheT1mdW5jdGlvbih0LHIpe3ZhciBpPXRoaXM7aWYodm9pZCAwPT09ciYmKHI9ITEpLDA9PXRoaXMubG9hZGVkKXJldHVybiB0aGlzLmxvYWQodGhpcy5zcmMpLHZvaWQgdGhpcy5vbmNlKGUuRXZlbnQuQ09NUExFVEUsZnVuY3Rpb24oZSl7cmV0dXJuIGkucGxheSh0LHIpfSx0aGlzKTt0aGlzLmlzUGxheWVkPSEwO3ZhciBuPXRoaXMudmlkZW87dm9pZCAwIT10JiYobi5jdXJyZW50VGltZT0rdHx8MCksbi5sb29wPSEhcixlLkNhcGFiaWxpdGllcy5pc01vYmlsZT9uLnN0eWxlLnpJbmRleD1cIi04ODg4OFwiOm4uc3R5bGUuekluZGV4PVwiOTk5OVwiLG4uc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLG4uc3R5bGUudG9wPVwiMHB4XCIsbi5zdHlsZS5sZWZ0PVwiMHB4XCIsbi5oZWlnaHQ9bi52aWRlb0hlaWdodCxuLndpZHRoPW4udmlkZW9XaWR0aCxcIldpbmRvd3MgUENcIiE9ZS5DYXBhYmlsaXRpZXMub3MmJlwiTWFjIE9TXCIhPWUuQ2FwYWJpbGl0aWVzLm9zJiZ3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe24ud2lkdGg9MH0sMWUzKSx0aGlzLmNoZWNrRnVsbFNjcmVlbih0aGlzLl9mdWxsc2NyZWVuKX0sci5wcm90b3R5cGUuY2hlY2tGdWxsU2NyZWVuPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMudmlkZW87aWYodCludWxsPT1yLnBhcmVudEVsZW1lbnQmJihyLnJlbW92ZUF0dHJpYnV0ZShcIndlYmtpdC1wbGF5c2lubGluZVwiKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHIpKSxlLnN0b3BUaWNrKHRoaXMubWFya0RpcnR5LHRoaXMpLHRoaXMuZ29GdWxsc2NyZWVuKCk7ZWxzZSBpZihudWxsIT1yLnBhcmVudEVsZW1lbnQmJnIucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChyKSxyLnNldEF0dHJpYnV0ZShcIndlYmtpdC1wbGF5c2lubGluZVwiLFwidHJ1ZVwiKSx0aGlzLnNldEZ1bGxTY3JlZW5Nb25pdG9yKCExKSxlLnN0YXJ0VGljayh0aGlzLm1hcmtEaXJ0eSx0aGlzKSxlLkNhcGFiaWxpdGllcy5pc01vYmlsZSlyZXR1cm4gdGhpcy52aWRlby5jdXJyZW50VGltZT0wLHZvaWQgdGhpcy5vblZpZGVvRW5kZWQoKTtyLnBsYXkoKX0sci5wcm90b3R5cGUuZ29GdWxsc2NyZWVuPWZ1bmN0aW9uKCl7dmFyIHQscj10aGlzLnZpZGVvO3JldHVybiB0PWUud2ViLmdldFByZWZpeFN0eWxlTmFtZShcInJlcXVlc3RGdWxsc2NyZWVuXCIsciksclt0XXx8KHQ9ZS53ZWIuZ2V0UHJlZml4U3R5bGVOYW1lKFwicmVxdWVzdEZ1bGxTY3JlZW5cIixyKSxyW3RdKT8oci5yZW1vdmVBdHRyaWJ1dGUoXCJ3ZWJraXQtcGxheXNpbmxpbmVcIiksclt0XSgpLHRoaXMuc2V0RnVsbFNjcmVlbk1vbml0b3IoITApLCEwKTohMH0sci5wcm90b3R5cGUuc2V0RnVsbFNjcmVlbk1vbml0b3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52aWRlbztlPyh0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3pmdWxsc2NyZWVuY2hhbmdlXCIsdGhpcy5zY3JlZW5DaGFuZ2VkKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsdGhpcy5zY3JlZW5DaGFuZ2VkKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3pmdWxsc2NyZWVuZXJyb3JcIix0aGlzLnNjcmVlbkVycm9yKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuZXJyb3JcIix0aGlzLnNjcmVlbkVycm9yKSk6KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vemZ1bGxzY3JlZW5jaGFuZ2VcIix0aGlzLnNjcmVlbkNoYW5nZWQpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2VcIix0aGlzLnNjcmVlbkNoYW5nZWQpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vemZ1bGxzY3JlZW5lcnJvclwiLHRoaXMuc2NyZWVuRXJyb3IpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmtpdGZ1bGxzY3JlZW5lcnJvclwiLHRoaXMuc2NyZWVuRXJyb3IpKX0sci5wcm90b3R5cGUuc2NyZWVuRXJyb3I9ZnVuY3Rpb24oKXtlLiRlcnJvcigzMDE0KX0sci5wcm90b3R5cGUuZXhpdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKXtkb2N1bWVudC5leGl0RnVsbHNjcmVlbj9kb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOmRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4/ZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpOmRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4/ZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOmRvY3VtZW50Lm9DYW5jZWxGdWxsU2NyZWVuP2RvY3VtZW50Lm9DYW5jZWxGdWxsU2NyZWVuKCk6ZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4mJmRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCl9LHIucHJvdG90eXBlLm9uVmlkZW9FbmRlZD1mdW5jdGlvbigpe3RoaXMucGF1c2UoKSx0aGlzLmlzUGxheWVkPSExLHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksdGhpcy5kaXNwYXRjaEV2ZW50V2l0aChlLkV2ZW50LkVOREVEKX0sci5wcm90b3R5cGUub25WaWRlb0Vycm9yPWZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50V2l0aChlLklPRXJyb3JFdmVudC5JT19FUlJPUil9LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmNsb3NlZD0hMCx0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsdGhpcy5vblZpZGVvTG9hZGVkKSx0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGUub25WaWRlb0Vycm9yKCl9KSx0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGUub25WaWRlb0VuZGVkKCl9KSx0aGlzLnBhdXNlKCksMD09dGhpcy5sb2FkZWQmJnRoaXMudmlkZW8mJih0aGlzLnZpZGVvLnNyYz1cIlwiKSx0aGlzLnZpZGVvJiZ0aGlzLnZpZGVvLnBhcmVudEVsZW1lbnQmJih0aGlzLnZpZGVvLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy52aWRlbyksdGhpcy52aWRlbz1udWxsKSx0aGlzLmxvYWRlZD0hMX0sci5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLnZpZGVvJiZ0aGlzLnZpZGVvLnBhdXNlKCksZS5zdG9wVGljayh0aGlzLm1hcmtEaXJ0eSx0aGlzKSx0aGlzLiRpbnZhbGlkYXRlKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInZvbHVtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWRlbz90aGlzLnZpZGVvLnZvbHVtZToxfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy52aWRlbyYmKHRoaXMudmlkZW8udm9sdW1lPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInBvc2l0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZGVvP3RoaXMudmlkZW8uY3VycmVudFRpbWU6MH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMudmlkZW8mJih0aGlzLnZpZGVvLmN1cnJlbnRUaW1lPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImZ1bGxzY3JlZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Z1bGxzY3JlZW59LHNldDpmdW5jdGlvbih0KXtlLkNhcGFiaWxpdGllcy5pc01vYmlsZXx8KHRoaXMuX2Z1bGxzY3JlZW49ISF0LHRoaXMudmlkZW8mJjA9PXRoaXMudmlkZW8ucGF1c2VkJiZ0aGlzLmNoZWNrRnVsbFNjcmVlbih0aGlzLl9mdWxsc2NyZWVuKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiYml0bWFwRGF0YVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWRlbyYmdGhpcy5sb2FkZWQ/KHRoaXMuX2JpdG1hcERhdGF8fCh0aGlzLnZpZGVvLndpZHRoPXRoaXMudmlkZW8udmlkZW9XaWR0aCx0aGlzLnZpZGVvLmhlaWdodD10aGlzLnZpZGVvLnZpZGVvSGVpZ2h0LHRoaXMuX2JpdG1hcERhdGE9bmV3IGUuQml0bWFwRGF0YSh0aGlzLnZpZGVvKSx0aGlzLl9iaXRtYXBEYXRhLiRkZWxldGVTb3VyY2U9ITEpLHRoaXMuX2JpdG1hcERhdGEpOm51bGx9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUubG9hZFBvc3Rlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMscj10aGlzLnBvc3RlcjtpZihyKXt2YXIgaT1uZXcgZS5JbWFnZUxvYWRlcjtpLm9uY2UoZS5FdmVudC5DT01QTEVURSxmdW5jdGlvbihlKXtpLmRhdGE7dC5wb3N0ZXJEYXRhPWkuZGF0YSx0LnBvc3RlckRhdGEud2lkdGg9dC5nZXRQbGF5V2lkdGgoKSx0LnBvc3RlckRhdGEuaGVpZ2h0PXQuZ2V0UGxheUhlaWdodCgpLHQuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCl9LHRoaXMpLGkubG9hZChyKX19LHIucHJvdG90eXBlLiRtZWFzdXJlQ29udGVudEJvdW5kcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmJpdG1hcERhdGEscj10aGlzLnBvc3RlckRhdGE7dD9lLnNldFRvKDAsMCx0aGlzLmdldFBsYXlXaWR0aCgpLHRoaXMuZ2V0UGxheUhlaWdodCgpKTpyP2Uuc2V0VG8oMCwwLHRoaXMuZ2V0UGxheVdpZHRoKCksdGhpcy5nZXRQbGF5SGVpZ2h0KCkpOmUuc2V0RW1wdHkoKX0sci5wcm90b3R5cGUuZ2V0UGxheVdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIGlzTmFOKHRoaXMud2lkdGhTZXQpP3RoaXMuYml0bWFwRGF0YT90aGlzLmJpdG1hcERhdGEud2lkdGg6dGhpcy5wb3N0ZXJEYXRhP3RoaXMucG9zdGVyRGF0YS53aWR0aDowLzA6dGhpcy53aWR0aFNldH0sci5wcm90b3R5cGUuZ2V0UGxheUhlaWdodD1mdW5jdGlvbigpe3JldHVybiBpc05hTih0aGlzLmhlaWdodFNldCk/dGhpcy5iaXRtYXBEYXRhP3RoaXMuYml0bWFwRGF0YS5oZWlnaHQ6dGhpcy5wb3N0ZXJEYXRhP3RoaXMucG9zdGVyRGF0YS5oZWlnaHQ6MC8wOnRoaXMuaGVpZ2h0U2V0fSxyLnByb3RvdHlwZS4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kcmVuZGVyTm9kZSxyPXRoaXMuYml0bWFwRGF0YSxpPXRoaXMucG9zdGVyRGF0YSxuPXRoaXMuZ2V0UGxheVdpZHRoKCksbz10aGlzLmdldFBsYXlIZWlnaHQoKTt0aGlzLmlzUGxheWVkJiYhZS5DYXBhYmlsaXRpZXMuaXNNb2JpbGV8fCFpP3RoaXMuaXNQbGF5ZWQmJnImJih0LmltYWdlPXIsdC5pbWFnZVdpZHRoPXIud2lkdGgsdC5pbWFnZUhlaWdodD1yLmhlaWdodCxlLldlYkdMVXRpbHMuZGVsZXRlV2ViR0xUZXh0dXJlKHIud2ViR0xUZXh0dXJlKSxyLndlYkdMVGV4dHVyZT1udWxsLHQuZHJhd0ltYWdlKDAsMCxyLndpZHRoLHIuaGVpZ2h0LDAsMCxuLG8pKToodC5pbWFnZT1pLHQuaW1hZ2VXaWR0aD1uLHQuaW1hZ2VIZWlnaHQ9byx0LmRyYXdJbWFnZSgwLDAsaS53aWR0aCxpLmhlaWdodCwwLDAsbixvKSl9LHIucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRpbnZhbGlkYXRlKCksITB9LHIucHJvdG90eXBlLiRzZXRIZWlnaHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaGVpZ2h0U2V0PStlfHwwLHRoaXMuJGludmFsaWRhdGUoKSx0aGlzLiRpbnZhbGlkYXRlQ29udGVudEJvdW5kcygpLHQucHJvdG90eXBlLiRzZXRIZWlnaHQuY2FsbCh0aGlzLGUpfSxyLnByb3RvdHlwZS4kc2V0V2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMud2lkdGhTZXQ9K2V8fDAsdGhpcy4kaW52YWxpZGF0ZSgpLHRoaXMuJGludmFsaWRhdGVDb250ZW50Qm91bmRzKCksdC5wcm90b3R5cGUuJHNldFdpZHRoLmNhbGwodGhpcyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwicGF1c2VkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZGVvP3RoaXMudmlkZW8ucGF1c2VkOiEwfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnZpZGVvKXJldHVybiB0aGlzLnZpZGVvLmR1cmF0aW9uO3Rocm93IG5ldyBFcnJvcihcIlZpZGVvIG5vdCBsb2FkZWQhXCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHJ9KGUuRGlzcGxheU9iamVjdCk7dC5XZWJWaWRlbz1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJWaWRlb1wiLFtcImVncmV0LlZpZGVvXCJdKSxlLlZpZGVvPXJ9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcigpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5fdXJsPVwiXCIsZS5fbWV0aG9kPVwiXCIsZX1yZXR1cm4gX19leHRlbmRzKHIsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwicmVzcG9uc2VcIix7Z2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3hocilyZXR1cm4gbnVsbDtpZih2b2lkIDAhPXRoaXMuX3hoci5yZXNwb25zZSlyZXR1cm4gdGhpcy5feGhyLnJlc3BvbnNlO2lmKFwidGV4dFwiPT10aGlzLl9yZXNwb25zZVR5cGUpcmV0dXJuIHRoaXMuX3hoci5yZXNwb25zZVRleHQ7aWYoXCJhcnJheWJ1ZmZlclwiPT10aGlzLl9yZXNwb25zZVR5cGUmJi9tc2llIDkuMC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe3ZhciBlPXdpbmRvdztyZXR1cm4gZS5jb252ZXJ0UmVzcG9uc2VCb2R5VG9UZXh0KHRoaXMuX3hoci5yZXNwb25zZUJvZHkpfXJldHVyblwiZG9jdW1lbnRcIj09dGhpcy5fcmVzcG9uc2VUeXBlP3RoaXMuX3hoci5yZXNwb25zZVhNTDpudWxsfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInJlc3BvbnNlVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzcG9uc2VUeXBlfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcmVzcG9uc2VUeXBlPWV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aXRoQ3JlZGVudGlhbHN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl93aXRoQ3JlZGVudGlhbHM9ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS5nZXRYSFI9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LlhNTEh0dHBSZXF1ZXN0P25ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3Q6bmV3IEFjdGl2ZVhPYmplY3QoXCJNU1hNTDIuWE1MSFRUUFwiKX0sci5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PVwiR0VUXCIpLHRoaXMuX3VybD1lLHRoaXMuX21ldGhvZD10LHRoaXMuX3hociYmKHRoaXMuX3hoci5hYm9ydCgpLHRoaXMuX3hocj1udWxsKSx0aGlzLl94aHI9dGhpcy5nZXRYSFIoKSx0aGlzLl94aHIub25yZWFkeXN0YXRlY2hhbmdlPXRoaXMub25SZWFkeVN0YXRlQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5feGhyLm9ucHJvZ3Jlc3M9dGhpcy51cGRhdGVQcm9ncmVzcy5iaW5kKHRoaXMpLHRoaXMuX3hoci5vcGVuKHRoaXMuX21ldGhvZCx0aGlzLl91cmwsITApfSxyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUpe2lmKG51bGwhPXRoaXMuX3Jlc3BvbnNlVHlwZSYmKHRoaXMuX3hoci5yZXNwb25zZVR5cGU9dGhpcy5fcmVzcG9uc2VUeXBlKSxudWxsIT10aGlzLl93aXRoQ3JlZGVudGlhbHMmJih0aGlzLl94aHIud2l0aENyZWRlbnRpYWxzPXRoaXMuX3dpdGhDcmVkZW50aWFscyksdGhpcy5oZWFkZXJPYmopZm9yKHZhciB0IGluIHRoaXMuaGVhZGVyT2JqKXRoaXMuX3hoci5zZXRSZXF1ZXN0SGVhZGVyKHQsdGhpcy5oZWFkZXJPYmpbdF0pO3RoaXMuX3hoci5zZW5kKGUpfSxyLnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbigpe3RoaXMuX3hociYmdGhpcy5feGhyLmFib3J0KCl9LHIucHJvdG90eXBlLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe2lmKCF0aGlzLl94aHIpcmV0dXJuIG51bGw7dmFyIGU9dGhpcy5feGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO3JldHVybiBlP2U6XCJcIn0sci5wcm90b3R5cGUuc2V0UmVxdWVzdEhlYWRlcj1mdW5jdGlvbihlLHQpe3RoaXMuaGVhZGVyT2JqfHwodGhpcy5oZWFkZXJPYmo9e30pLHRoaXMuaGVhZGVyT2JqW2VdPXR9LHIucHJvdG90eXBlLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl94aHIpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5feGhyLmdldFJlc3BvbnNlSGVhZGVyKGUpO3JldHVybiB0P3Q6XCJcIn0sci5wcm90b3R5cGUub25SZWFkeVN0YXRlQ2hhbmdlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5feGhyO2lmKDQ9PXQucmVhZHlTdGF0ZSl7dmFyIHI9dC5zdGF0dXM+PTQwMHx8MD09dC5zdGF0dXMsaT10aGlzLl91cmwsbj10aGlzO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cj8obi5oYXNFdmVudExpc3RlbmVyKGUuSU9FcnJvckV2ZW50LklPX0VSUk9SKXx8ZS4kZXJyb3IoMTAxMSxpKSxuLmRpc3BhdGNoRXZlbnRXaXRoKGUuSU9FcnJvckV2ZW50LklPX0VSUk9SKSk6bi5kaXNwYXRjaEV2ZW50V2l0aChlLkV2ZW50LkNPTVBMRVRFKX0sMCl9fSxyLnByb3RvdHlwZS51cGRhdGVQcm9ncmVzcz1mdW5jdGlvbih0KXt0Lmxlbmd0aENvbXB1dGFibGUmJmUuUHJvZ3Jlc3NFdmVudC5kaXNwYXRjaFByb2dyZXNzRXZlbnQodGhpcyxlLlByb2dyZXNzRXZlbnQuUFJPR1JFU1MsdC5sb2FkZWQsdC50b3RhbCl9LHJ9KGUuRXZlbnREaXNwYXRjaGVyKTt0LldlYkh0dHBSZXF1ZXN0PXIsX19yZWZsZWN0KHIucHJvdG90eXBlLFwiZWdyZXQud2ViLldlYkh0dHBSZXF1ZXN0XCIsW1wiZWdyZXQuSHR0cFJlcXVlc3RcIl0pLGUuSHR0cFJlcXVlc3Q9cixlLiRtYXJrUmVhZE9ubHkocixcInJlc3BvbnNlXCIpfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe3ZhciByPXdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkwsaT1mdW5jdGlvbihpKXtmdW5jdGlvbiBuKCl7dmFyIGU9aS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuZGF0YT1udWxsLGUuX2Nyb3NzT3JpZ2luPW51bGwsZS5faGFzQ3Jvc3NPcmlnaW5TZXQ9ITEsZS5jdXJyZW50SW1hZ2U9bnVsbCxlLnJlcXVlc3Q9bnVsbCxlfXJldHVybiBfX2V4dGVuZHMobixpKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJjcm9zc09yaWdpblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3Jvc3NPcmlnaW59LHNldDpmdW5jdGlvbihlKXt0aGlzLl9oYXNDcm9zc09yaWdpblNldD0hMCx0aGlzLl9jcm9zc09yaWdpbj1lfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24ocil7aWYodC5IdG1sNUNhcGF0aWJpbGl0eS5fY2FuVXNlQmxvYiYmMCE9ci5pbmRleE9mKFwid3hMb2NhbFJlc291cmNlOlwiKSYmMCE9ci5pbmRleE9mKFwiZGF0YTpcIikmJjAhPXIuaW5kZXhPZihcImh0dHA6XCIpJiYwIT1yLmluZGV4T2YoXCJodHRwczpcIikpe3ZhciBpPXRoaXMucmVxdWVzdDtpfHwoaT10aGlzLnJlcXVlc3Q9bmV3IGUud2ViLldlYkh0dHBSZXF1ZXN0LGkuYWRkRXZlbnRMaXN0ZW5lcihlLkV2ZW50LkNPTVBMRVRFLHRoaXMub25CbG9iTG9hZGVkLHRoaXMpLGkuYWRkRXZlbnRMaXN0ZW5lcihlLklPRXJyb3JFdmVudC5JT19FUlJPUix0aGlzLm9uQmxvYkVycm9yLHRoaXMpLGkucmVzcG9uc2VUeXBlPVwiYmxvYlwiKSx0aGlzLmN1cnJlbnRVUkw9cixpLm9wZW4ociksaS5zZW5kKCl9ZWxzZSB0aGlzLmxvYWRJbWFnZShyKX0sbi5wcm90b3R5cGUub25CbG9iTG9hZGVkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucmVxdWVzdC5yZXNwb25zZTt0aGlzLmxvYWRJbWFnZShyLmNyZWF0ZU9iamVjdFVSTCh0KSl9LG4ucHJvdG90eXBlLm9uQmxvYkVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuZGlzcGF0Y2hJT0Vycm9yKHRoaXMuY3VycmVudFVSTCl9LG4ucHJvdG90eXBlLmxvYWRJbWFnZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgSW1hZ2U7dGhpcy5kYXRhPW51bGwsdGhpcy5jdXJyZW50SW1hZ2U9dCx0aGlzLl9oYXNDcm9zc09yaWdpblNldD90aGlzLl9jcm9zc09yaWdpbiYmKHQuY3Jvc3NPcmlnaW49dGhpcy5fY3Jvc3NPcmlnaW4pOm4uY3Jvc3NPcmlnaW4mJih0LmNyb3NzT3JpZ2luPW4uY3Jvc3NPcmlnaW4pLHQub25sb2FkPXRoaXMub25JbWFnZUNvbXBsZXRlLmJpbmQodGhpcyksdC5vbmVycm9yPXRoaXMub25Mb2FkRXJyb3IuYmluZCh0aGlzKSx0LnNyYz1lfSxuLnByb3RvdHlwZS5vbkltYWdlQ29tcGxldGU9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5nZXRJbWFnZSh0KTtpZihyKXt0aGlzLmRhdGE9bmV3IGUuQml0bWFwRGF0YShyKTt2YXIgaT10aGlzO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5kaXNwYXRjaEV2ZW50V2l0aChlLkV2ZW50LkNPTVBMRVRFKX0sMCl9fSxuLnByb3RvdHlwZS5vbkxvYWRFcnJvcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldEltYWdlKGUpO3QmJnRoaXMuZGlzcGF0Y2hJT0Vycm9yKHQuc3JjKX0sbi5wcm90b3R5cGUuZGlzcGF0Y2hJT0Vycm9yPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmhhc0V2ZW50TGlzdGVuZXIoZS5JT0Vycm9yRXZlbnQuSU9fRVJST1IpfHxlLiRlcnJvcigxMDExLHQpLHIuZGlzcGF0Y2hFdmVudFdpdGgoZS5JT0Vycm9yRXZlbnQuSU9fRVJST1IpfSwwKX0sbi5wcm90b3R5cGUuZ2V0SW1hZ2U9ZnVuY3Rpb24odCl7dmFyIGk9dC50YXJnZXQsbj1pLnNyYztpZigwPT1uLmluZGV4T2YoXCJibG9iOlwiKSl0cnl7ci5yZXZva2VPYmplY3RVUkwoaS5zcmMpfWNhdGNoKG8pe2UuJHdhcm4oMTAzNyl9cmV0dXJuIGkub25lcnJvcj1udWxsLGkub25sb2FkPW51bGwsdGhpcy5jdXJyZW50SW1hZ2UhPT1pP251bGw6KHRoaXMuY3VycmVudEltYWdlPW51bGwsaSl9LG59KGUuRXZlbnREaXNwYXRjaGVyKTtpLmNyb3NzT3JpZ2luPW51bGwsdC5XZWJJbWFnZUxvYWRlcj1pLF9fcmVmbGVjdChpLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJJbWFnZUxvYWRlclwiLFtcImVncmV0LkltYWdlTG9hZGVyXCJdKSxlLkltYWdlTG9hZGVyPWl9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gaSgpe3ZhciBlPXIuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5faXNOZWVkU2hvdz0hMSxlLmlucHV0RWxlbWVudD1udWxsLGUuaW5wdXREaXY9bnVsbCxlLl9nc2NhbGVYPTAsZS5fZ3NjYWxlWT0wLGUuX2lzTmVlc0hpZGU9ITEsZS50ZXh0VmFsdWU9XCJcIixlLmNvbG9yVmFsdWU9MTY3NzcyMTUsZS5fc3R5bGVJbmZvZXM9e30sZX1yZXR1cm4gX19leHRlbmRzKGksciksaS5wcm90b3R5cGUuJHNldFRleHRGaWVsZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kdGV4dGZpZWxkPWUsITB9LGkucHJvdG90eXBlLiRhZGRUb1N0YWdlPWZ1bmN0aW9uKCl7dGhpcy5odG1sSW5wdXQ9ZS53ZWIuJGdldFRleHRBZGFwdGVyKHRoaXMuJHRleHRmaWVsZCl9LGkucHJvdG90eXBlLl9pbml0RWxlbWVudD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJHRleHRmaWVsZC5sb2NhbFRvR2xvYmFsKDAsMCkscj10LngsaT10Lnksbj10aGlzLmh0bWxJbnB1dC4kc2NhbGVYLG89dGhpcy5odG1sSW5wdXQuJHNjYWxlWTt0aGlzLmlucHV0RGl2LnN0eWxlLmxlZnQ9cipuK1wicHhcIix0aGlzLmlucHV0RGl2LnN0eWxlLnRvcD1pKm8rXCJweFwiLHRoaXMuJHRleHRmaWVsZC5tdWx0aWxpbmUmJnRoaXMuJHRleHRmaWVsZC5oZWlnaHQ+dGhpcy4kdGV4dGZpZWxkLnNpemU/KHRoaXMuaW5wdXREaXYuc3R5bGUudG9wPWkqbytcInB4XCIsdGhpcy5pbnB1dEVsZW1lbnQuc3R5bGUudG9wPS10aGlzLiR0ZXh0ZmllbGQubGluZVNwYWNpbmcvMipvK1wicHhcIik6KHRoaXMuaW5wdXREaXYuc3R5bGUudG9wPWkqbytcInB4XCIsdGhpcy5pbnB1dEVsZW1lbnQuc3R5bGUudG9wPVwiMHB4XCIpO2Zvcih2YXIgYT10aGlzLiR0ZXh0ZmllbGQscz0xLGw9MSxoPTA7YS5wYXJlbnQ7KXMqPWEuc2NhbGVYLGwqPWEuc2NhbGVZLGgrPWEucm90YXRpb24sYT1hLnBhcmVudDt2YXIgdT1lLndlYi5nZXRQcmVmaXhTdHlsZU5hbWUoXCJ0cmFuc2Zvcm1cIik7dGhpcy5pbnB1dERpdi5zdHlsZVt1XT1cInJvdGF0ZShcIitoK1wiZGVnKVwiLHRoaXMuX2dzY2FsZVg9bipzLHRoaXMuX2dzY2FsZVk9bypsfSxpLnByb3RvdHlwZS4kc2hvdz1mdW5jdGlvbigpe3RoaXMuaHRtbElucHV0LmlzQ3VycmVudFN0YWdlVGV4dCh0aGlzKT90aGlzLmlucHV0RWxlbWVudC5vbmJsdXI9bnVsbDoodGhpcy5pbnB1dEVsZW1lbnQ9dGhpcy5odG1sSW5wdXQuZ2V0SW5wdXRFbGVtZW50KHRoaXMpLHRoaXMuJHRleHRmaWVsZC5tdWx0aWxpbmU/dGhpcy5pbnB1dEVsZW1lbnQudHlwZT1cInRleHRcIjp0aGlzLmlucHV0RWxlbWVudC50eXBlPXRoaXMuJHRleHRmaWVsZC5pbnB1dFR5cGUsdGhpcy5pbnB1dERpdj10aGlzLmh0bWxJbnB1dC5faW5wdXRESVYpLHRoaXMuaHRtbElucHV0Ll9uZWVkU2hvdz0hMCx0aGlzLl9pc05lZWRTaG93PSEwLHRoaXMuX2luaXRFbGVtZW50KCl9LGkucHJvdG90eXBlLm9uQmx1ckhhbmRsZXI9ZnVuY3Rpb24oKXt0aGlzLmh0bWxJbnB1dC5jbGVhcklucHV0RWxlbWVudCgpLHdpbmRvdy5zY3JvbGxUbygwLDApfSxpLnByb3RvdHlwZS5leGVjdXRlU2hvdz1mdW5jdGlvbigpe3RoaXMuaW5wdXRFbGVtZW50LnZhbHVlPXRoaXMuJGdldFRleHQoKSxudWxsPT10aGlzLmlucHV0RWxlbWVudC5vbmJsdXImJih0aGlzLmlucHV0RWxlbWVudC5vbmJsdXI9dGhpcy5vbkJsdXJIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuJHJlc2V0U3RhZ2VUZXh0KCksdGhpcy4kdGV4dGZpZWxkLm1heENoYXJzPjA/dGhpcy5pbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsdGhpcy4kdGV4dGZpZWxkLm1heENoYXJzKTp0aGlzLmlucHV0RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiksdGhpcy5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ9dGhpcy5pbnB1dEVsZW1lbnQudmFsdWUubGVuZ3RoLHRoaXMuaW5wdXRFbGVtZW50LnNlbGVjdGlvbkVuZD10aGlzLmlucHV0RWxlbWVudC52YWx1ZS5sZW5ndGgsdGhpcy5pbnB1dEVsZW1lbnQuZm9jdXMoKX0saS5wcm90b3R5cGUuJGhpZGU9ZnVuY3Rpb24oKXt0aGlzLl9pc05lZXNIaWRlPSEwLHRoaXMuaHRtbElucHV0JiZlLndlYi5IdG1sNUNhcGF0aWJpbGl0eS5fU3lzdGVtX09TPT1lLndlYi5TeXN0ZW1PU1R5cGUuSU9TJiZ0aGlzLmh0bWxJbnB1dC5kaXNjb25uZWN0U3RhZ2VUZXh0KHRoaXMpfSxpLnByb3RvdHlwZS4kZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRWYWx1ZXx8KHRoaXMudGV4dFZhbHVlPVwiXCIpLHRoaXMudGV4dFZhbHVlfSxpLnByb3RvdHlwZS4kc2V0VGV4dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50ZXh0VmFsdWU9ZSx0aGlzLnJlc2V0VGV4dCgpLCEwfSxpLnByb3RvdHlwZS5yZXNldFRleHQ9ZnVuY3Rpb24oKXt0aGlzLmlucHV0RWxlbWVudCYmKHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlPXRoaXMudGV4dFZhbHVlKX0saS5wcm90b3R5cGUuJHNldENvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbG9yVmFsdWU9ZSx0aGlzLnJlc2V0Q29sb3IoKSwhMH0saS5wcm90b3R5cGUucmVzZXRDb2xvcj1mdW5jdGlvbigpe3RoaXMuaW5wdXRFbGVtZW50JiZ0aGlzLnNldEVsZW1lbnRTdHlsZShcImNvbG9yXCIsZS50b0NvbG9yU3RyaW5nKHRoaXMuY29sb3JWYWx1ZSkpfSxpLnByb3RvdHlwZS4kb25CbHVyPWZ1bmN0aW9uKCl7dC5IdG1sNUNhcGF0aWJpbGl0eS5fU3lzdGVtX09TPT10LlN5c3RlbU9TVHlwZS5XUEhPTkUmJmUuRXZlbnQuZGlzcGF0Y2hFdmVudCh0aGlzLFwidXBkYXRlVGV4dFwiLCExKX0saS5wcm90b3R5cGUuX29uSW5wdXQ9ZnVuY3Rpb24oKXt2YXIgcj10aGlzO2lmKHQuSHRtbDVDYXBhdGliaWxpdHkuX1N5c3RlbV9PUz09dC5TeXN0ZW1PU1R5cGUuV1BIT05FKXt2YXIgaT10aGlzLiR0ZXh0ZmllbGQuJFRleHRGaWVsZDtudWxsPT1pWzM1XSYmbnVsbD09aVszNl0/KHIudGV4dFZhbHVlPXIuaW5wdXRFbGVtZW50LnZhbHVlLGUuRXZlbnQuZGlzcGF0Y2hFdmVudChyLFwidXBkYXRlVGV4dFwiLCExKSk6d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmlucHV0RWxlbWVudCYmci5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQmJnIuaW5wdXRFbGVtZW50LnNlbGVjdGlvbkVuZCYmci5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ9PXIuaW5wdXRFbGVtZW50LnNlbGVjdGlvbkVuZCYmKHIudGV4dFZhbHVlPXIuaW5wdXRFbGVtZW50LnZhbHVlLGUuRXZlbnQuZGlzcGF0Y2hFdmVudChyLFwidXBkYXRlVGV4dFwiLCExKSl9LDApfWVsc2Ugd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmlucHV0RWxlbWVudCYmci5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ9PXIuaW5wdXRFbGVtZW50LnNlbGVjdGlvbkVuZCYmKHIudGV4dFZhbHVlPXIuaW5wdXRFbGVtZW50LnZhbHVlLGUuRXZlbnQuZGlzcGF0Y2hFdmVudChyLFwidXBkYXRlVGV4dFwiLCExKSl9LDApfSxpLnByb3RvdHlwZS5zZXRBcmVhSGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kdGV4dGZpZWxkO2lmKHQubXVsdGlsaW5lKXt2YXIgcj1lLlRleHRGaWVsZFV0aWxzLiRnZXRUZXh0SGVpZ2h0KHQpO2lmKHQuaGVpZ2h0PD10LnNpemUpdGhpcy5zZXRFbGVtZW50U3R5bGUoXCJoZWlnaHRcIix0LnNpemUqdGhpcy5fZ3NjYWxlWStcInB4XCIpLHRoaXMuc2V0RWxlbWVudFN0eWxlKFwicGFkZGluZ1wiLFwiMHB4XCIpLHRoaXMuc2V0RWxlbWVudFN0eWxlKFwibGluZUhlaWdodFwiLHQuc2l6ZSp0aGlzLl9nc2NhbGVZK1wicHhcIik7ZWxzZSBpZih0LmhlaWdodDxyKXRoaXMuc2V0RWxlbWVudFN0eWxlKFwiaGVpZ2h0XCIsdC5oZWlnaHQqdGhpcy5fZ3NjYWxlWStcInB4XCIpLHRoaXMuc2V0RWxlbWVudFN0eWxlKFwicGFkZGluZ1wiLFwiMHB4XCIpLHRoaXMuc2V0RWxlbWVudFN0eWxlKFwibGluZUhlaWdodFwiLCh0LnNpemUrdC5saW5lU3BhY2luZykqdGhpcy5fZ3NjYWxlWStcInB4XCIpO2Vsc2V7dGhpcy5zZXRFbGVtZW50U3R5bGUoXCJoZWlnaHRcIiwocit0LmxpbmVTcGFjaW5nKSp0aGlzLl9nc2NhbGVZK1wicHhcIik7dmFyIGk9KHQuaGVpZ2h0LXIpKnRoaXMuX2dzY2FsZVksbj1lLlRleHRGaWVsZFV0aWxzLiRnZXRWYWxpZ24odCksbz1pKm4sYT1pLW87dGhpcy5zZXRFbGVtZW50U3R5bGUoXCJwYWRkaW5nXCIsbytcInB4IDBweCBcIithK1wicHggMHB4XCIpLHRoaXMuc2V0RWxlbWVudFN0eWxlKFwibGluZUhlaWdodFwiLCh0LnNpemUrdC5saW5lU3BhY2luZykqdGhpcy5fZ3NjYWxlWStcInB4XCIpfX19LGkucHJvdG90eXBlLl9vbkNsaWNrSGFuZGxlcj1mdW5jdGlvbih0KXt0aGlzLl9pc05lZWRTaG93JiYodC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLl9pc05lZWRTaG93PSExLHRoaXMuZXhlY3V0ZVNob3coKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IGUuRXZlbnQoXCJmb2N1c1wiKSkpfSxpLnByb3RvdHlwZS5fb25EaXNjb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5pbnB1dEVsZW1lbnQ9bnVsbCx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IGUuRXZlbnQoXCJibHVyXCIpKX0saS5wcm90b3R5cGUuc2V0RWxlbWVudFN0eWxlPWZ1bmN0aW9uKGUsdCl7dGhpcy5pbnB1dEVsZW1lbnQmJnRoaXMuX3N0eWxlSW5mb2VzW2VdIT10JiYodGhpcy5pbnB1dEVsZW1lbnQuc3R5bGVbZV09dCl9LGkucHJvdG90eXBlLiRyZW1vdmVGcm9tU3RhZ2U9ZnVuY3Rpb24oKXt0aGlzLmlucHV0RWxlbWVudCYmdGhpcy5odG1sSW5wdXQuZGlzY29ubmVjdFN0YWdlVGV4dCh0aGlzKX0saS5wcm90b3R5cGUuJHJlc2V0U3RhZ2VUZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5pbnB1dEVsZW1lbnQpe3ZhciB0PXRoaXMuJHRleHRmaWVsZDt0aGlzLnNldEVsZW1lbnRTdHlsZShcImZvbnRGYW1pbHlcIix0LmZvbnRGYW1pbHkpLHRoaXMuc2V0RWxlbWVudFN0eWxlKFwiZm9udFN0eWxlXCIsdC5pdGFsaWM/XCJpdGFsaWNcIjpcIm5vcm1hbFwiKSx0aGlzLnNldEVsZW1lbnRTdHlsZShcImZvbnRXZWlnaHRcIix0LmJvbGQ/XCJib2xkXCI6XCJub3JtYWxcIiksdGhpcy5zZXRFbGVtZW50U3R5bGUoXCJ0ZXh0QWxpZ25cIix0LnRleHRBbGlnbiksdGhpcy5zZXRFbGVtZW50U3R5bGUoXCJmb250U2l6ZVwiLHQuc2l6ZSp0aGlzLl9nc2NhbGVZK1wicHhcIiksdGhpcy5zZXRFbGVtZW50U3R5bGUoXCJjb2xvclwiLGUudG9Db2xvclN0cmluZyh0LnRleHRDb2xvcikpO3ZhciByPXZvaWQgMDtpZih0LnN0YWdlPyhyPXQubG9jYWxUb0dsb2JhbCgwLDApLngscj1NYXRoLm1pbih0LndpZHRoLHQuc3RhZ2Uuc3RhZ2VXaWR0aC1yKSk6cj10LndpZHRoLHRoaXMuc2V0RWxlbWVudFN0eWxlKFwid2lkdGhcIixyKnRoaXMuX2dzY2FsZVgrXCJweFwiKSx0aGlzLnNldEVsZW1lbnRTdHlsZShcInZlcnRpY2FsQWxpZ25cIix0LnZlcnRpY2FsQWxpZ24pLHQubXVsdGlsaW5lKXRoaXMuc2V0QXJlYUhlaWdodCgpO2Vsc2UgaWYodGhpcy5zZXRFbGVtZW50U3R5bGUoXCJsaW5lSGVpZ2h0XCIsdC5zaXplKnRoaXMuX2dzY2FsZVkrXCJweFwiKSx0LmhlaWdodDx0LnNpemUpe3RoaXMuc2V0RWxlbWVudFN0eWxlKFwiaGVpZ2h0XCIsdC5zaXplKnRoaXMuX2dzY2FsZVkrXCJweFwiKTt2YXIgaT10LnNpemUvMip0aGlzLl9nc2NhbGVZO3RoaXMuc2V0RWxlbWVudFN0eWxlKFwicGFkZGluZ1wiLFwiMHB4IDBweCBcIitpK1wicHggMHB4XCIpfWVsc2V7dGhpcy5zZXRFbGVtZW50U3R5bGUoXCJoZWlnaHRcIix0LnNpemUqdGhpcy5fZ3NjYWxlWStcInB4XCIpO3ZhciBuPSh0LmhlaWdodC10LnNpemUpKnRoaXMuX2dzY2FsZVksbz1lLlRleHRGaWVsZFV0aWxzLiRnZXRWYWxpZ24odCksYT1uKm8saT1uLWE7aTx0LnNpemUvMip0aGlzLl9nc2NhbGVZJiYoaT10LnNpemUvMip0aGlzLl9nc2NhbGVZKSx0aGlzLnNldEVsZW1lbnRTdHlsZShcInBhZGRpbmdcIixhK1wicHggMHB4IFwiK2krXCJweCAwcHhcIil9dGhpcy5pbnB1dERpdi5zdHlsZS5jbGlwPVwicmVjdCgwcHggXCIrdC53aWR0aCp0aGlzLl9nc2NhbGVYK1wicHggXCIrdC5oZWlnaHQqdGhpcy5fZ3NjYWxlWStcInB4IDBweClcIix0aGlzLmlucHV0RGl2LnN0eWxlLmhlaWdodD10LmhlaWdodCp0aGlzLl9nc2NhbGVZK1wicHhcIix0aGlzLmlucHV0RGl2LnN0eWxlLndpZHRoPXIqdGhpcy5fZ3NjYWxlWCtcInB4XCJ9fSxpfShlLkV2ZW50RGlzcGF0Y2hlcik7dC5IVE1MNVN0YWdlVGV4dD1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5IVE1MNVN0YWdlVGV4dFwiLFtcImVncmV0LlN0YWdlVGV4dFwiXSksZS5TdGFnZVRleHQ9cn0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKSxmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5fbmVlZFNob3c9ITEsdGhpcy4kc2NhbGVYPTEsdGhpcy4kc2NhbGVZPTFcbn1yZXR1cm4gdC5wcm90b3R5cGUuaXNJbnB1dE9uPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMuX3N0YWdlVGV4dH0sdC5wcm90b3R5cGUuaXNDdXJyZW50U3RhZ2VUZXh0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdGFnZVRleHQ9PWV9LHQucHJvdG90eXBlLmluaXRWYWx1ZT1mdW5jdGlvbihlKXtlLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLnN0eWxlLmxlZnQ9XCIwcHhcIixlLnN0eWxlLnRvcD1cIjBweFwiLGUuc3R5bGUuYm9yZGVyPVwibm9uZVwiLGUuc3R5bGUucGFkZGluZz1cIjBcIn0sdC5wcm90b3R5cGUuJHVwZGF0ZVNpemU9ZnVuY3Rpb24oKXtpZih0aGlzLmNhbnZhcyl7dmFyIHQ9dGhpcy5jYW52YXMud2lkdGgscj10aGlzLmNhbnZhcy5oZWlnaHQsaT10aGlzLmNhbnZhcy5zdHlsZS53aWR0aC5zcGxpdChcInB4XCIpWzBdLG49dGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0LnNwbGl0KFwicHhcIilbMF07dGhpcy4kc2NhbGVYPWkvdCx0aGlzLiRzY2FsZVk9bi9yLHRoaXMuU3RhZ2VEZWxlZ2F0ZURpdi5zdHlsZS5sZWZ0PXRoaXMuY2FudmFzLnN0eWxlLmxlZnQsdGhpcy5TdGFnZURlbGVnYXRlRGl2LnN0eWxlLnRvcD10aGlzLmNhbnZhcy5zdHlsZS50b3A7dmFyIG89ZS53ZWIuZ2V0UHJlZml4U3R5bGVOYW1lKFwidHJhbnNmb3JtXCIpO3RoaXMuU3RhZ2VEZWxlZ2F0ZURpdi5zdHlsZVtvXT10aGlzLmNhbnZhcy5zdHlsZVtvXSx0aGlzLlN0YWdlRGVsZWdhdGVEaXYuc3R5bGVbZS53ZWIuZ2V0UHJlZml4U3R5bGVOYW1lKFwidHJhbnNmb3JtT3JpZ2luXCIpXT1cIjAlIDAlIDBweFwifX0sdC5wcm90b3R5cGUuX2luaXRTdGFnZURlbGVnYXRlRGl2PWZ1bmN0aW9uKHQscil7dGhpcy5jYW52YXM9cjt2YXIgaSxuPXRoaXM7aXx8KGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLlN0YWdlRGVsZWdhdGVEaXY9aSxpLmlkPVwiU3RhZ2VEZWxlZ2F0ZURpdlwiLHQuYXBwZW5kQ2hpbGQoaSksbi5pbml0VmFsdWUoaSksbi5faW5wdXRESVY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxuLmluaXRWYWx1ZShuLl9pbnB1dERJViksbi5faW5wdXRESVYuc3R5bGUud2lkdGg9XCIwcHhcIixuLl9pbnB1dERJVi5zdHlsZS5oZWlnaHQ9XCIwcHhcIixuLl9pbnB1dERJVi5zdHlsZS5sZWZ0PVwiMHB4XCIsbi5faW5wdXRESVYuc3R5bGUudG9wPVwiLTEwMHB4XCIsbi5faW5wdXRESVYuc3R5bGVbZS53ZWIuZ2V0UHJlZml4U3R5bGVOYW1lKFwidHJhbnNmb3JtT3JpZ2luXCIpXT1cIjAlIDAlIDBweFwiLGkuYXBwZW5kQ2hpbGQobi5faW5wdXRESVYpLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKGUpe24uX25lZWRTaG93PyhuLl9uZWVkU2hvdz0hMSxuLl9zdGFnZVRleHQuX29uQ2xpY2tIYW5kbGVyKGUpLG4uc2hvdygpKTpuLl9pbnB1dEVsZW1lbnQmJihuLmNsZWFySW5wdXRFbGVtZW50KCksbi5faW5wdXRFbGVtZW50LmJsdXIoKSxuLl9pbnB1dEVsZW1lbnQ9bnVsbCl9KSxuLmluaXRJbnB1dEVsZW1lbnQoITApLG4uaW5pdElucHV0RWxlbWVudCghMSkpfSx0LnByb3RvdHlwZS5pbml0SW5wdXRFbGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztlPyh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKSx0LnN0eWxlLnJlc2l6ZT1cIm5vbmVcIixyLl9tdWx0aUVsZW1lbnQ9dCx0LmlkPVwiZWdyZXRUZXh0YXJlYVwiKToodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksci5fc2ltcGxlRWxlbWVudD10LHQuaWQ9XCJlZ3JldElucHV0XCIpLHQudHlwZT1cInRleHRcIixyLl9pbnB1dERJVi5hcHBlbmRDaGlsZCh0KSx0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCItMVwiKSx0LnN0eWxlLndpZHRoPVwiMXB4XCIsdC5zdHlsZS5oZWlnaHQ9XCIxMnB4XCIsci5pbml0VmFsdWUodCksdC5zdHlsZS5vdXRsaW5lPVwidGhpblwiLHQuc3R5bGUuYmFja2dyb3VuZD1cIm5vbmVcIix0LnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIsdC5zdHlsZS53b3JkQnJlYWs9XCJicmVhay1hbGxcIix0LnN0eWxlLm9wYWNpdHk9MCx0Lm9uaW5wdXQ9ZnVuY3Rpb24oKXtyLl9zdGFnZVRleHQmJnIuX3N0YWdlVGV4dC5fb25JbnB1dCgpfX0sdC5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3ZhciB0PXRoaXMscj10Ll9pbnB1dEVsZW1lbnQ7ZS4kY2FsbEFzeW5jKGZ1bmN0aW9uKCl7ci5zdHlsZS5vcGFjaXR5PTF9LHQpfSx0LnByb3RvdHlwZS5kaXNjb25uZWN0U3RhZ2VUZXh0PWZ1bmN0aW9uKGUpeyhudWxsPT10aGlzLl9zdGFnZVRleHR8fHRoaXMuX3N0YWdlVGV4dD09ZSkmJih0aGlzLmNsZWFySW5wdXRFbGVtZW50KCksdGhpcy5faW5wdXRFbGVtZW50JiZ0aGlzLl9pbnB1dEVsZW1lbnQuYmx1cigpKX0sdC5wcm90b3R5cGUuY2xlYXJJbnB1dEVsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUuX2lucHV0RWxlbWVudCl7ZS5faW5wdXRFbGVtZW50LnZhbHVlPVwiXCIsZS5faW5wdXRFbGVtZW50Lm9uYmx1cj1udWxsLGUuX2lucHV0RWxlbWVudC5zdHlsZS53aWR0aD1cIjFweFwiLGUuX2lucHV0RWxlbWVudC5zdHlsZS5oZWlnaHQ9XCIxMnB4XCIsZS5faW5wdXRFbGVtZW50LnN0eWxlLmxlZnQ9XCIwcHhcIixlLl9pbnB1dEVsZW1lbnQuc3R5bGUudG9wPVwiMHB4XCIsZS5faW5wdXRFbGVtZW50LnN0eWxlLm9wYWNpdHk9MDt2YXIgdD12b2lkIDA7dD1lLl9zaW1wbGVFbGVtZW50PT1lLl9pbnB1dEVsZW1lbnQ/ZS5fbXVsdGlFbGVtZW50OmUuX3NpbXBsZUVsZW1lbnQsdC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixlLl9pbnB1dERJVi5zdHlsZS5sZWZ0PVwiMHB4XCIsZS5faW5wdXRESVYuc3R5bGUudG9wPVwiLTEwMHB4XCIsZS5faW5wdXRESVYuc3R5bGUuaGVpZ2h0PVwiMHB4XCIsZS5faW5wdXRESVYuc3R5bGUud2lkdGg9XCIwcHhcIn1lLl9zdGFnZVRleHQmJihlLl9zdGFnZVRleHQuX29uRGlzY29ubmVjdCgpLGUuX3N0YWdlVGV4dD1udWxsLHRoaXMuY2FudmFzLnVzZXJUeXBpbmc9ITEpfSx0LnByb3RvdHlwZS5nZXRJbnB1dEVsZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmNsZWFySW5wdXRFbGVtZW50KCksdC5fc3RhZ2VUZXh0PWUsdGhpcy5jYW52YXMudXNlclR5cGluZz0hMCx0Ll9zdGFnZVRleHQuJHRleHRmaWVsZC5tdWx0aWxpbmU/dC5faW5wdXRFbGVtZW50PXQuX211bHRpRWxlbWVudDp0Ll9pbnB1dEVsZW1lbnQ9dC5fc2ltcGxlRWxlbWVudDt2YXIgcjtyZXR1cm4gcj10Ll9zaW1wbGVFbGVtZW50PT10Ll9pbnB1dEVsZW1lbnQ/dC5fbXVsdGlFbGVtZW50OnQuX3NpbXBsZUVsZW1lbnQsci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQuX2lucHV0RWxlbWVudH0sdH0oKTt0LkhUTUxJbnB1dD1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5IVE1MSW5wdXRcIil9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSksZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQ9ZS5zdGFnZT9lLnN0YWdlLiRoYXNoQ29kZTowLHI9aVt0XSxhPW5bdF0scz1vW3RdO3JldHVybiBhJiZzJiYoZGVsZXRlIG5bdF0sZGVsZXRlIG9bdF0pLHJ9ZnVuY3Rpb24gcihlLHQscixhKXtlLl9pbml0U3RhZ2VEZWxlZ2F0ZURpdihyLGEpLGlbdC4kaGFzaENvZGVdPWUsblt0LiRoYXNoQ29kZV09YSxvW3QuJGhhc2hDb2RlXT1yfXZhciBpPXt9LG49e30sbz17fTtlLiRnZXRUZXh0QWRhcHRlcj10LGUuJGNhY2hlVGV4dEFkYXB0ZXI9cn0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsdCxyLG8sYSl7bnx8aSgpO3ZhciBzPVwiXCI7cmV0dXJuIGEmJihzKz1cIml0YWxpYyBcIiksbyYmKHMrPVwiYm9sZCBcIikscys9KHJ8fDEyKStcInB4IFwiLHMrPXR8fFwiQXJpYWxcIixuLmZvbnQ9cyxuLm1lYXN1cmVUZXh0KGUpLndpZHRofWZ1bmN0aW9uIGkoKXtuPWUuc3lzLmNhbnZhc0hpdFRlc3RCdWZmZXIuY29udGV4dCxuLnRleHRBbGlnbj1cImxlZnRcIixuLnRleHRCYXNlbGluZT1cIm1pZGRsZVwifXZhciBuPW51bGw7ZS5zeXMubWVhc3VyZVRleHQ9cn0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtpc05hTihlKXx8aXNOYU4odCl8fChyLndpZHRoPWUsci5oZWlnaHQ9dCk7dmFyIGk9ci5nZXRDb250ZXh0KFwiMmRcIik7aWYodm9pZCAwPT09aS5pbWFnZVNtb290aGluZ0VuYWJsZWQpe2Zvcih2YXIgbixvPVtcIndlYmtpdEltYWdlU21vb3RoaW5nRW5hYmxlZFwiLFwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsXCJtc0ltYWdlU21vb3RoaW5nRW5hYmxlZFwiXSxhPW8ubGVuZ3RoLTE7YT49MCYmKG49b1thXSx2b2lkIDA9PT1pW25dKTthLS0pO3RyeXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxcImltYWdlU21vb3RoaW5nRW5hYmxlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tuXX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXNbbl09ZX19KX1jYXRjaChzKXtpLmltYWdlU21vb3RoaW5nRW5hYmxlZD1pW25dfX1yZXR1cm4gcn12YXIgcixpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIsaSl7dGhpcy5zdXJmYWNlPXQoZSxyKSx0aGlzLmNvbnRleHQ9dGhpcy5zdXJmYWNlLmdldENvbnRleHQoXCIyZFwiKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwid2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3VyZmFjZS53aWR0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJoZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3VyZmFjZS5oZWlnaHR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLnN1cmZhY2U7aWYocil7dmFyIG49ITE7aS53aWR0aDxlJiYoaS53aWR0aD1lLG49ITApLGkuaGVpZ2h0PHQmJihpLmhlaWdodD10LG49ITApLG58fCh0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwic291cmNlLW92ZXJcIix0aGlzLmNvbnRleHQuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSx0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGE9MSl9ZWxzZSBpLndpZHRoIT1lJiYoaS53aWR0aD1lKSxpLmhlaWdodCE9dCYmKGkuaGVpZ2h0PXQpO3RoaXMuY2xlYXIoKX0sZS5wcm90b3R5cGUucmVzaXplVG89ZnVuY3Rpb24oZSxpLG4sbyl7cnx8KHI9dCgpKTt2YXIgYT0odGhpcy5jb250ZXh0LHRoaXMuc3VyZmFjZSkscz1yLGw9cy5nZXRDb250ZXh0KFwiMmRcIik7cj1hLHRoaXMuY29udGV4dD1sLHRoaXMuc3VyZmFjZT1zLHMud2lkdGg9TWF0aC5tYXgoZSwyNTcpLHMuaGVpZ2h0PU1hdGgubWF4KGksMjU3KSxsLnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCksbC5kcmF3SW1hZ2UoYSxuLG8pLGEuaGVpZ2h0PTEsYS53aWR0aD0xfSxlLnByb3RvdHlwZS5zZXREaXJ0eVJlZ2lvblBvbGljeT1mdW5jdGlvbihlKXt9LGUucHJvdG90eXBlLmJlZ2luQ2xpcD1mdW5jdGlvbihlLHQscil7dD0rdHx8MCxyPStyfHwwO3ZhciBpPXRoaXMuY29udGV4dDtpLnNhdmUoKSxpLmJlZ2luUGF0aCgpLGkuc2V0VHJhbnNmb3JtKDEsMCwwLDEsdCxyKTtmb3IodmFyIG49ZS5sZW5ndGgsbz0wO24+bztvKyspe3ZhciBhPWVbb107aS5jbGVhclJlY3QoYS5taW5YLGEubWluWSxhLndpZHRoLGEuaGVpZ2h0KSxpLnJlY3QoYS5taW5YLGEubWluWSxhLndpZHRoLGEuaGVpZ2h0KX1pLmNsaXAoKX0sZS5wcm90b3R5cGUuZW5kQ2xpcD1mdW5jdGlvbigpe3RoaXMuY29udGV4dC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLmdldFBpeGVscz1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9MSksdm9pZCAwPT09aSYmKGk9MSksdGhpcy5jb250ZXh0LmdldEltYWdlRGF0YShlLHQscixpKS5kYXRhfSxlLnByb3RvdHlwZS50b0RhdGFVUkw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zdXJmYWNlLnRvRGF0YVVSTChlLHQpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApLHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwwLHRoaXMuc3VyZmFjZS53aWR0aCx0aGlzLnN1cmZhY2UuaGVpZ2h0KX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuc3VyZmFjZS53aWR0aD10aGlzLnN1cmZhY2UuaGVpZ2h0PTB9LGV9KCk7ZS5DYW52YXNSZW5kZXJCdWZmZXI9aSxfX3JlZmxlY3QoaS5wcm90b3R5cGUsXCJlZ3JldC53ZWIuQ2FudmFzUmVuZGVyQnVmZmVyXCIsW1wiZWdyZXQuc3lzLlJlbmRlckJ1ZmZlclwiXSl9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihyLGkpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5vblRvdWNoQmVnaW49ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRMb2NhdGlvbihlKTtuLnRvdWNoLm9uVG91Y2hCZWdpbih0LngsdC55LGUuaWRlbnRpZmllcil9LG4ub25Ub3VjaE1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRMb2NhdGlvbihlKTtuLnRvdWNoLm9uVG91Y2hNb3ZlKHQueCx0LnksZS5pZGVudGlmaWVyKX0sbi5vblRvdWNoRW5kPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0TG9jYXRpb24oZSk7bi50b3VjaC5vblRvdWNoRW5kKHQueCx0LnksZS5pZGVudGlmaWVyKX0sbi5zY2FsZVg9MSxuLnNjYWxlWT0xLG4ucm90YXRpb249MCxuLmNhbnZhcz1pLG4udG91Y2g9bmV3IGUuc3lzLlRvdWNoSGFuZGxlcihyKSxuLmFkZExpc3RlbmVycygpLG59cmV0dXJuIF9fZXh0ZW5kcyhyLHQpLHIucHJvdG90eXBlLmFkZExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkPyh0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyRG93blwiLGZ1bmN0aW9uKGUpe2UuaWRlbnRpZmllcj1lLnBvaW50ZXJJZCx0Lm9uVG91Y2hCZWdpbihlKSx0LnByZXZlbnQoZSl9LCExKSx0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyTW92ZVwiLGZ1bmN0aW9uKGUpe2UuaWRlbnRpZmllcj1lLnBvaW50ZXJJZCx0Lm9uVG91Y2hNb3ZlKGUpLHQucHJldmVudChlKX0sITEpLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJNU1BvaW50ZXJVcFwiLGZ1bmN0aW9uKGUpe2UuaWRlbnRpZmllcj1lLnBvaW50ZXJJZCx0Lm9uVG91Y2hFbmQoZSksdC5wcmV2ZW50KGUpfSwhMSkpOihlLkNhcGFiaWxpdGllcy4kaXNNb2JpbGV8fHRoaXMuYWRkTW91c2VMaXN0ZW5lcigpLHRoaXMuYWRkVG91Y2hMaXN0ZW5lcigpKX0sci5wcm90b3R5cGUuYWRkTW91c2VMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uVG91Y2hCZWdpbiksdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Ub3VjaE1vdmUpLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vblRvdWNoRW5kKX0sci5wcm90b3R5cGUuYWRkVG91Y2hMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixmdW5jdGlvbih0KXtmb3IodmFyIHI9dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgsaT0wO3I+aTtpKyspZS5vblRvdWNoQmVnaW4odC5jaGFuZ2VkVG91Y2hlc1tpXSk7ZS5wcmV2ZW50KHQpfSwhMSksdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10LmNoYW5nZWRUb3VjaGVzLmxlbmd0aCxpPTA7cj5pO2krKyllLm9uVG91Y2hNb3ZlKHQuY2hhbmdlZFRvdWNoZXNbaV0pO2UucHJldmVudCh0KX0sITEpLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10LmNoYW5nZWRUb3VjaGVzLmxlbmd0aCxpPTA7cj5pO2krKyllLm9uVG91Y2hFbmQodC5jaGFuZ2VkVG91Y2hlc1tpXSk7ZS5wcmV2ZW50KHQpfSwhMSksdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsZnVuY3Rpb24odCl7Zm9yKHZhciByPXQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoLGk9MDtyPmk7aSsrKWUub25Ub3VjaEVuZCh0LmNoYW5nZWRUb3VjaGVzW2ldKTtlLnByZXZlbnQodCl9LCExKX0sci5wcm90b3R5cGUucHJldmVudD1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLDE9PWUuaXNTY3JvbGx8fHRoaXMuY2FudmFzLnVzZXJUeXBpbmd8fGUucHJldmVudERlZmF1bHQoKX0sci5wcm90b3R5cGUuZ2V0TG9jYXRpb249ZnVuY3Rpb24odCl7dC5pZGVudGlmaWVyPSt0LmlkZW50aWZpZXJ8fDA7dmFyIHI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGk9dGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj1pLmxlZnQrd2luZG93LnBhZ2VYT2Zmc2V0LXIuY2xpZW50TGVmdCxvPWkudG9wK3dpbmRvdy5wYWdlWU9mZnNldC1yLmNsaWVudFRvcCxhPXQucGFnZVgtbixzPWEsbD10LnBhZ2VZLW8saD1sO3JldHVybiA5MD09dGhpcy5yb3RhdGlvbj8ocz1sLGg9aS53aWR0aC1hKTotOTA9PXRoaXMucm90YXRpb24mJihzPWkuaGVpZ2h0LWwsaD1hKSxzLz10aGlzLnNjYWxlWCxoLz10aGlzLnNjYWxlWSxlLiRUZW1wUG9pbnQuc2V0VG8oTWF0aC5yb3VuZChzKSxNYXRoLnJvdW5kKGgpKX0sci5wcm90b3R5cGUudXBkYXRlU2NhbGVNb2RlPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLnNjYWxlWD1lLHRoaXMuc2NhbGVZPXQsdGhpcy5yb3RhdGlvbj1yfSxyLnByb3RvdHlwZS4kdXBkYXRlTWF4VG91Y2hlcz1mdW5jdGlvbigpe3RoaXMudG91Y2guJGluaXRNYXhUb3VjaGVzKCl9LHJ9KGUuSGFzaE9iamVjdCk7dC5XZWJUb3VjaEhhbmRsZXI9cixfX3JlZmxlY3Qoci5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViVG91Y2hIYW5kbGVyXCIpfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe3ZhciByPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLmlzQWN0aXZhdGU9ITAsci5zdGFnZT1lLHIucmVnaXN0ZXJMaXN0ZW5lcigpLHJ9cmV0dXJuIF9fZXh0ZW5kcyhyLHQpLHIucHJvdG90eXBlLnJlZ2lzdGVyTGlzdGVuZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9ZnVuY3Rpb24oKXt0LmlzQWN0aXZhdGUmJih0LmlzQWN0aXZhdGU9ITEsdC5zdGFnZS5kaXNwYXRjaEV2ZW50KG5ldyBlLkV2ZW50KGUuRXZlbnQuREVBQ1RJVkFURSkpKX0saT1mdW5jdGlvbigpe3QuaXNBY3RpdmF0ZXx8KHQuaXNBY3RpdmF0ZT0hMCx0LnN0YWdlLmRpc3BhdGNoRXZlbnQobmV3IGUuRXZlbnQoZS5FdmVudC5BQ1RJVkFURSkpKX0sbj1mdW5jdGlvbigpe2RvY3VtZW50W29dP3IoKTppKCl9O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIixpLCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIixyLCExKTt2YXIgbyxhO1widW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudC5oaWRkZW4/KG89XCJoaWRkZW5cIixhPVwidmlzaWJpbGl0eWNoYW5nZVwiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQubW96SGlkZGVuPyhvPVwibW96SGlkZGVuXCIsYT1cIm1venZpc2liaWxpdHljaGFuZ2VcIik6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50Lm1zSGlkZGVuPyhvPVwibXNIaWRkZW5cIixhPVwibXN2aXNpYmlsaXR5Y2hhbmdlXCIpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudC53ZWJraXRIaWRkZW4/KG89XCJ3ZWJraXRIaWRkZW5cIixhPVwid2Via2l0dmlzaWJpbGl0eWNoYW5nZVwiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQub0hpZGRlbiYmKG89XCJvSGlkZGVuXCIsYT1cIm92aXNpYmlsaXR5Y2hhbmdlXCIpLFwib25wYWdlc2hvd1wiaW4gd2luZG93JiZcIm9ucGFnZWhpZGVcImluIHdpbmRvdyYmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIixpLCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsciwhMSkpLG8mJmEmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYSxuLCExKTt2YXIgcz1uYXZpZ2F0b3IudXNlckFnZW50LGw9L21pY3JvbWVzc2VuZ2VyL2dpLnRlc3QocyksaD0vbXFxL2dpLnRlc3QocyksdT0vbW9iaWxlLipxcS9naS50ZXN0KHMpO2lmKCh1fHxsKSYmKGg9ITEpLGgpe3ZhciBjPXdpbmRvdy5icm93c2VyfHx7fTtjLmV4ZWNXZWJGbj1jLmV4ZWNXZWJGbnx8e30sYy5leGVjV2ViRm4ucG9zdFg1R2FtZVBsYXllck1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50eXBlO1wiYXBwX2VudGVyX2JhY2tncm91bmRcIj09dD9yKCk6XCJhcHBfZW50ZXJfZm9yZWdyb3VuZFwiPT10JiZpKCl9LHdpbmRvdy5icm93c2VyPWN9fSxyfShlLkhhc2hPYmplY3QpO3QuV2ViSGlkZUhhbmRsZXI9cixfX3JlZmxlY3Qoci5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViSGlkZUhhbmRsZXJcIil9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihlLHQpe3ZhciByPVwiXCI7aWYobnVsbCE9dClyPWkoZSx0KTtlbHNle2lmKG51bGw9PXMpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGU7cz1pKFwidHJhbnNmb3JtXCIsbil9cj1zfXJldHVyblwiXCI9PXI/ZTpyK2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHJpbmcoMSxlLmxlbmd0aCl9ZnVuY3Rpb24gaShlLHQpe2lmKGUgaW4gdClyZXR1cm5cIlwiO2U9ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnN1YnN0cmluZygxLGUubGVuZ3RoKTtmb3IodmFyIHI9W1wid2Via2l0XCIsXCJtc1wiLFwiTW96XCIsXCJPXCJdLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG49cltpXStlO2lmKG4gaW4gdClyZXR1cm4gcltpXX1yZXR1cm5cIlwifXZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtuLlFRX0FVRElPPTEsbi5XRUJfQVVESU89MixuLkhUTUw1X0FVRElPPTMsdC5BdWRpb1R5cGU9bixfX3JlZmxlY3Qobi5wcm90b3R5cGUsXCJlZ3JldC53ZWIuQXVkaW9UeXBlXCIpO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtvLldQSE9ORT0xLG8uSU9TPTIsby5BRE5ST0lEPTMsdC5TeXN0ZW1PU1R5cGU9byxfX3JlZmxlY3Qoby5wcm90b3R5cGUsXCJlZ3JldC53ZWIuU3lzdGVtT1NUeXBlXCIpO3ZhciBhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gdC5jYWxsKHRoaXMpfHx0aGlzfXJldHVybiBfX2V4dGVuZHMocix0KSxyLiRpbml0PWZ1bmN0aW9uKCl7dmFyIHQ9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO3IudWE9dCxlLkNhcGFiaWxpdGllcy4kaXNNb2JpbGU9LTEhPXQuaW5kZXhPZihcIm1vYmlsZVwiKXx8LTEhPXQuaW5kZXhPZihcImFuZHJvaWRcIiksci5fY2FuVXNlQmxvYj0hMTt2YXIgaSxhPXIuX2F1ZGlvVHlwZSxzPXdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHR8fHdpbmRvdy5tb3pBdWRpb0NvbnRleHQ7aWYoMT09YXx8Mj09YXx8Mz09YT8oaT0hMSxyLnNldEF1ZGlvVHlwZShhKSk6KGk9ITAsci5zZXRBdWRpb1R5cGUobi5IVE1MNV9BVURJTykpLHQuaW5kZXhPZihcIndpbmRvd3MgcGhvbmVcIik+PTApci5fU3lzdGVtX09TPW8uV1BIT05FLGUuQ2FwYWJpbGl0aWVzLiRvcz1cIldpbmRvd3MgUGhvbmVcIjtlbHNlIGlmKHQuaW5kZXhPZihcImFuZHJvaWRcIik+PTApe2lmKGUuQ2FwYWJpbGl0aWVzLiRvcz1cIkFuZHJvaWRcIixyLl9TeXN0ZW1fT1M9by5BRE5ST0lELGkmJihzP3Iuc2V0QXVkaW9UeXBlKG4uV0VCX0FVRElPKTpyLnNldEF1ZGlvVHlwZShuLkhUTUw1X0FVRElPKSksd2luZG93Lmhhc093blByb3BlcnR5KFwiUVpBcHBFeHRlcm5hbFwiKSYmdC5pbmRleE9mKFwicXpvbmVcIik+PTApe2kmJnIuc2V0QXVkaW9UeXBlKG4uUVFfQVVESU8pO3ZhciBsPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKTtpZihsJiZsLmxlbmd0aD4wKXIuX1FRUm9vdFBhdGg9bFswXS5iYXNlVVJJO2Vsc2V7dmFyIGg9d2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcIj9cIik7LTE9PWgmJihoPXdpbmRvdy5sb2NhdGlvbi5ocmVmLmxlbmd0aCk7dmFyIHU9d2luZG93LmxvY2F0aW9uLmhyZWYuc3Vic3RyaW5nKDAsaCk7dT11LnN1YnN0cmluZygwLHUubGFzdEluZGV4T2YoXCIvXCIpKSxyLl9RUVJvb3RQYXRoPXUrXCIvXCJ9fX1lbHNlIHQuaW5kZXhPZihcImlwaG9uZVwiKT49MHx8dC5pbmRleE9mKFwiaXBhZFwiKT49MHx8dC5pbmRleE9mKFwiaXBvZFwiKT49MD8oZS5DYXBhYmlsaXRpZXMuJG9zPVwiaU9TXCIsci5fU3lzdGVtX09TPW8uSU9TLHIuZ2V0SU9TVmVyc2lvbigpPj03JiYoci5fY2FuVXNlQmxvYj0hMCxpJiZyLnNldEF1ZGlvVHlwZShuLldFQl9BVURJTykpKTotMSE9dC5pbmRleE9mKFwid2luZG93cyBudFwiKT9lLkNhcGFiaWxpdGllcy4kb3M9XCJXaW5kb3dzIFBDXCI6LTEhPXQuaW5kZXhPZihcIm1hYyBvc1wiKSYmKGUuQ2FwYWJpbGl0aWVzLiRvcz1cIk1hYyBPU1wiKTt2YXIgYz13aW5kb3cuVVJMfHx3aW5kb3cud2Via2l0VVJMO2N8fChyLl9jYW5Vc2VCbG9iPSExKSxlLlNvdW5kPXIuX0F1ZGlvQ2xhc3N9LHIuc2V0QXVkaW9UeXBlPWZ1bmN0aW9uKHQpe3N3aXRjaChyLl9hdWRpb1R5cGU9dCx0KXtjYXNlIG4uUVFfQVVESU86ci5fQXVkaW9DbGFzcz1lLndlYi5RUVNvdW5kO2JyZWFrO2Nhc2Ugbi5XRUJfQVVESU86ci5fQXVkaW9DbGFzcz1lLndlYi5XZWJBdWRpb1NvdW5kO2JyZWFrO2Nhc2Ugbi5IVE1MNV9BVURJTzpyLl9BdWRpb0NsYXNzPWUud2ViLkh0bWxTb3VuZH19LHIuZ2V0SU9TVmVyc2lvbj1mdW5jdGlvbigpe3ZhciBlPXIudWEudG9Mb3dlckNhc2UoKS5tYXRjaCgvY3B1IFteXFxkXSpcXGQuKmxpa2UgbWFjIG9zIHgvKVswXTtyZXR1cm4gcGFyc2VJbnQoZS5tYXRjaCgvXFxkKyhfXFxkKSovKVswXSl8fDB9LHIuY2hlY2tIdG1sNVN1cHBvcnQ9ZnVuY3Rpb24oKXt2YXIgdD0obmF2aWdhdG9yLmxhbmd1YWdlfHxuYXZpZ2F0b3IuYnJvd3Nlckxhbmd1YWdlKS50b0xvd2VyQ2FzZSgpLHI9dC5zcGxpdChcIi1cIik7ci5sZW5ndGg+MSYmKHJbMV09clsxXS50b1VwcGVyQ2FzZSgpKSxlLkNhcGFiaWxpdGllcy4kbGFuZ3VhZ2U9ci5qb2luKFwiLVwiKX0scn0oZS5IYXNoT2JqZWN0KTthLl9jYW5Vc2VCbG9iPSExLGEuX2F1ZGlvVHlwZT0wLGEuX1FRUm9vdFBhdGg9XCJcIixhLl9TeXN0ZW1fT1M9MCxhLnVhPVwiXCIsdC5IdG1sNUNhcGF0aWJpbGl0eT1hLF9fcmVmbGVjdChhLnByb3RvdHlwZSxcImVncmV0LndlYi5IdG1sNUNhcGF0aWJpbGl0eVwiKTt2YXIgcz1udWxsO3QuZ2V0UHJlZml4U3R5bGVOYW1lPXIsdC5nZXRQcmVmaXg9aX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7aWYocylmb3IodmFyIGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZ3JldC1wbGF5ZXJcIiksdD1lLmxlbmd0aCxyPTA7dD5yO3IrKyl7dmFyIGk9ZVtyXSxuPWlbXCJlZ3JldC1wbGF5ZXJcIl07bi51cGRhdGVTY3JlZW5TaXplKCl9fWZ1bmN0aW9uIGkocil7aWYoIXMpe2lmKHM9ITAscnx8KHI9e30pLHQuSHRtbDVDYXBhdGliaWxpdHkuX2F1ZGlvVHlwZT1yLmF1ZGlvVHlwZSx0Lkh0bWw1Q2FwYXRpYmlsaXR5LiRpbml0KCksXCJ3ZWJnbFwiPT1yLnJlbmRlck1vZGUpe3ZhciBpPXIuYW50aWFsaWFzO3QuV2ViR0xSZW5kZXJDb250ZXh0LmFudGlhbGlhcz0hIWl9ZS5zeXMuQ2FudmFzUmVuZGVyQnVmZmVyPXQuQ2FudmFzUmVuZGVyQnVmZmVyLG4oci5yZW5kZXJNb2RlKTt2YXIgYT1lLnN5cy4kdGlja2VyO28oYSksci5zY3JlZW5BZGFwdGVyP2Uuc3lzLnNjcmVlbkFkYXB0ZXI9ci5zY3JlZW5BZGFwdGVyOmUuc3lzLnNjcmVlbkFkYXB0ZXJ8fChlLnN5cy5zY3JlZW5BZGFwdGVyPW5ldyBlLnN5cy5EZWZhdWx0U2NyZWVuQWRhcHRlcik7Zm9yKHZhciBsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWdyZXQtcGxheWVyXCIpLGg9bC5sZW5ndGgsdT0wO2g+dTt1Kyspe3ZhciBjPWxbdV0sZD1uZXcgdC5XZWJQbGF5ZXIoYyxyKTtjW1wiZWdyZXQtcGxheWVyXCJdPWQsXCJ3ZWJnbFwiPT1lLkNhcGFiaWxpdGllcy4kcmVuZGVyTW9kZSYmKGQuc3RhZ2UuZGlydHlSZWdpb25Qb2xpY3k9ZS5EaXJ0eVJlZ2lvblBvbGljeS5PRkYpfVwid2ViZ2xcIj09ZS5DYXBhYmlsaXRpZXMuJHJlbmRlck1vZGUmJihlLnN5cy5EaXNwbGF5TGlzdC5wcm90b3R5cGUuc2V0RGlydHlSZWdpb25Qb2xpY3k9ZnVuY3Rpb24oKXt9KX19ZnVuY3Rpb24gbihyKXtcIndlYmdsXCI9PXImJmUuV2ViR0xVdGlscy5jaGVja0NhblVzZVdlYkdMKCk/KGUuc3lzLlJlbmRlckJ1ZmZlcj10LldlYkdMUmVuZGVyQnVmZmVyLGUuc3lzLnN5c3RlbVJlbmRlcmVyPW5ldyB0LldlYkdMUmVuZGVyZXIsZS5zeXMuY2FudmFzUmVuZGVyZXI9bmV3IGUuQ2FudmFzUmVuZGVyZXIsZS5zeXMuY3VzdG9tSGl0VGVzdEJ1ZmZlcj1uZXcgdC5XZWJHTFJlbmRlckJ1ZmZlcigzLDMpLGUuc3lzLmNhbnZhc0hpdFRlc3RCdWZmZXI9bmV3IHQuQ2FudmFzUmVuZGVyQnVmZmVyKDMsMyksZS5DYXBhYmlsaXRpZXMuJHJlbmRlck1vZGU9XCJ3ZWJnbFwiKTooZS5zeXMuUmVuZGVyQnVmZmVyPXQuQ2FudmFzUmVuZGVyQnVmZmVyLGUuc3lzLnN5c3RlbVJlbmRlcmVyPW5ldyBlLkNhbnZhc1JlbmRlcmVyLGUuc3lzLmNhbnZhc1JlbmRlcmVyPWUuc3lzLnN5c3RlbVJlbmRlcmVyLGUuc3lzLmN1c3RvbUhpdFRlc3RCdWZmZXI9bmV3IHQuQ2FudmFzUmVuZGVyQnVmZmVyKDMsMyksZS5zeXMuY2FudmFzSGl0VGVzdEJ1ZmZlcj1lLnN5cy5jdXN0b21IaXRUZXN0QnVmZmVyLGUuQ2FwYWJpbGl0aWVzLiRyZW5kZXJNb2RlPVwiY2FudmFzXCIpfWZ1bmN0aW9uIG8oZSl7ZnVuY3Rpb24gdCgpe2UudXBkYXRlKCksci5jYWxsKHdpbmRvdyx0KX12YXIgcj13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lO3J8fChyPWZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChlLDFlMy82MCl9KSxyLmNhbGwod2luZG93LHQpfWZ1bmN0aW9uIGEoKXtsPTAvMCxlLnVwZGF0ZUFsbFNjcmVlbnMoKX12YXIgcz0hMTt3aW5kb3cuaXNOYU49ZnVuY3Rpb24oZSl7cmV0dXJuIGU9K2UsZSE9PWV9LGUucnVuRWdyZXQ9aSxlLnVwZGF0ZUFsbFNjcmVlbnM9cjt2YXIgbD0wLzA7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixmdW5jdGlvbigpe2lzTmFOKGwpJiYobD13aW5kb3cuc2V0VGltZW91dChhLDMwMCkpfSl9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGxhbmd1YWdlPW5hdmlnYXRvci5sYW5ndWFnZXx8bmF2aWdhdG9yLmJyb3dzZXJMYW5ndWFnZXx8XCJlbl9VU1wiO2xhbmd1YWdlPWxhbmd1YWdlLnJlcGxhY2UoXCItXCIsXCJfXCIpLGxhbmd1YWdlIGluIGVncmV0LiRsb2NhbGVfc3RyaW5ncyYmKGVncmV0LiRsYW5ndWFnZT1sYW5ndWFnZSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LmRldGVjdD1mdW5jdGlvbigpe3ZhciByPWUuQ2FwYWJpbGl0aWVzLGk9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO3IuJGlzTW9iaWxlPS0xIT1pLmluZGV4T2YoXCJtb2JpbGVcIil8fC0xIT1pLmluZGV4T2YoXCJhbmRyb2lkXCIpLHIuJGlzTW9iaWxlP2kuaW5kZXhPZihcIndpbmRvd3NcIik8MCYmKC0xIT1pLmluZGV4T2YoXCJpcGhvbmVcIil8fC0xIT1pLmluZGV4T2YoXCJpcGFkXCIpfHwtMSE9aS5pbmRleE9mKFwiaXBvZFwiKSk/ci4kb3M9XCJpT1NcIjotMSE9aS5pbmRleE9mKFwiYW5kcm9pZFwiKSYmLTEhPWkuaW5kZXhPZihcImxpbnV4XCIpP3IuJG9zPVwiQW5kcm9pZFwiOi0xIT1pLmluZGV4T2YoXCJ3aW5kb3dzXCIpJiYoci4kb3M9XCJXaW5kb3dzIFBob25lXCIpOi0xIT1pLmluZGV4T2YoXCJ3aW5kb3dzIG50XCIpP3IuJG9zPVwiV2luZG93cyBQQ1wiOi0xIT1pLmluZGV4T2YoXCJtYWMgb3NcIikmJihyLiRvcz1cIk1hYyBPU1wiKTt2YXIgbj0obmF2aWdhdG9yLmxhbmd1YWdlfHxuYXZpZ2F0b3IuYnJvd3Nlckxhbmd1YWdlKS50b0xvd2VyQ2FzZSgpLG89bi5zcGxpdChcIi1cIik7by5sZW5ndGg+MSYmKG9bMV09b1sxXS50b1VwcGVyQ2FzZSgpKSxyLiRsYW5ndWFnZT1vLmpvaW4oXCItXCIpLHQuaW5qZWN0VUludEZpeE9uSUU5KCl9LHQuaW5qZWN0VUludEZpeE9uSUU5PWZ1bmN0aW9uKCl7aWYoL21zaWUgOS4wL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmIS9vcGVyYS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe3ZhciBlPVwiPCEtLSBJRUJpbmFyeVRvQXJyYXlfQnl0ZVN0ciAtLT5cXHJcXG48c2NyaXB0IHR5cGU9J3RleHQvdmJzY3JpcHQnIGxhbmd1YWdlPSdWQlNjcmlwdCc+XFxyXFxuRnVuY3Rpb24gSUVCaW5hcnlUb0FycmF5X0J5dGVTdHIoQmluYXJ5KVxcclxcbiAgIElFQmluYXJ5VG9BcnJheV9CeXRlU3RyID0gQ1N0cihCaW5hcnkpXFxyXFxuRW5kIEZ1bmN0aW9uXFxyXFxuRnVuY3Rpb24gSUVCaW5hcnlUb0FycmF5X0J5dGVTdHJfTGFzdChCaW5hcnkpXFxyXFxuICAgRGltIGxhc3RJbmRleFxcclxcbiAgIGxhc3RJbmRleCA9IExlbkIoQmluYXJ5KVxcclxcbiAgIGlmIGxhc3RJbmRleCBtb2QgMiBUaGVuXFxyXFxuICAgICAgIElFQmluYXJ5VG9BcnJheV9CeXRlU3RyX0xhc3QgPSBDaHIoIEFzY0IoIE1pZEIoIEJpbmFyeSwgbGFzdEluZGV4LCAxICkgKSApXFxyXFxuICAgRWxzZVxcclxcbiAgICAgICBJRUJpbmFyeVRvQXJyYXlfQnl0ZVN0cl9MYXN0ID0gXFxcIlxcXCJcXHJcXG4gICBFbmQgSWZcXHJcXG5FbmQgRnVuY3Rpb25cXHJcXG48L3NjcmlwdD5cXHJcXG48IS0tIGNvbnZlcnRSZXNwb25zZUJvZHlUb1RleHQgLS0+XFxyXFxuPHNjcmlwdD5cXHJcXG5sZXQgY29udmVydFJlc3BvbnNlQm9keVRvVGV4dCA9IGZ1bmN0aW9uIChiaW5hcnkpIHtcXHJcXG4gICBsZXQgYnl0ZU1hcHBpbmcgPSB7fTtcXHJcXG4gICBmb3IgKCBsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKyApIHtcXHJcXG4gICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgMjU2OyBqKysgKSB7XFxyXFxuICAgICAgICAgICBieXRlTWFwcGluZ1sgU3RyaW5nLmZyb21DaGFyQ29kZSggaSArIGogKiAyNTYgKSBdID1cXHJcXG4gICAgICAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUoaSkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGopO1xcclxcbiAgICAgICB9XFxyXFxuICAgfVxcclxcbiAgIGxldCByYXdCeXRlcyA9IElFQmluYXJ5VG9BcnJheV9CeXRlU3RyKGJpbmFyeSk7XFxyXFxuICAgbGV0IGxhc3RDaHIgPSBJRUJpbmFyeVRvQXJyYXlfQnl0ZVN0cl9MYXN0KGJpbmFyeSk7XFxyXFxuICAgcmV0dXJuIHJhd0J5dGVzLnJlcGxhY2UoL1tcXFxcc1xcXFxTXS9nLCAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBtYXRjaCApIHsgcmV0dXJuIGJ5dGVNYXBwaW5nW21hdGNoXTsgfSkgKyBsYXN0Q2hyO1xcclxcbn07XFxyXFxuPC9zY3JpcHQ+XFxyXFxuXCI7ZG9jdW1lbnQud3JpdGUoZSl9fSx0fSgpO3QuV2ViQ2FwYWJpbGl0eT1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJDYXBhYmlsaXR5XCIpLHIuZGV0ZWN0KCl9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9W1wic291cmNlLW92ZXJcIixcImxpZ2h0ZXJcIixcImRlc3RpbmF0aW9uLW91dFwiXSxpPVwic291cmNlLW92ZXJcIixuPVtdLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBvKCl7dGhpcy5uZXN0TGV2ZWw9MH1yZXR1cm4gby5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCxyLGksbyl7dGhpcy5uZXN0TGV2ZWwrKzt2YXIgYT10LHM9YS5jb250ZXh0LGw9bz9lOm51bGw7cy5wdXNoQnVmZmVyKGEpLHRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZSxhLGkscixudWxsLG51bGwsbCkscy4kZHJhd1dlYkdMKCk7dmFyIGg9YS4kZHJhd0NhbGxzO2lmKGEub25SZW5kZXJGaW5pc2goKSxzLnBvcEJ1ZmZlcigpLHRoaXMubmVzdExldmVsLS0sMD09PXRoaXMubmVzdExldmVsKXtuLmxlbmd0aD42JiYobi5sZW5ndGg9Nik7Zm9yKHZhciB1PW4ubGVuZ3RoLGM9MDt1PmM7YysrKW5bY10ucmVzaXplKDAsMCl9cmV0dXJuIGh9LG8ucHJvdG90eXBlLmRyYXdEaXNwbGF5T2JqZWN0PWZ1bmN0aW9uKHQscixpLG4sbyxhLHMpe3ZhciBsLGg9MDtpZihvJiYhcz8oby5pc0RpcnR5JiYoaCs9by5kcmF3VG9TdXJmYWNlKCkpLGw9by4kcmVuZGVyTm9kZSk6bD10LiRnZXRSZW5kZXJOb2RlKCksbCl7aWYoaSl7dmFyIHU9bC5yZW5kZXJSZWdpb247aWYoYSYmIWEuaW50ZXJzZWN0cyh1KSlsLm5lZWRSZWRyYXc9ITE7ZWxzZSBpZighbC5uZWVkUmVkcmF3KWZvcih2YXIgYz1pLmxlbmd0aCxkPTA7Yz5kO2QrKylpZih1LmludGVyc2VjdHMoaVtkXSkpe2wubmVlZFJlZHJhdz0hMDticmVha319ZWxzZSBsLm5lZWRSZWRyYXc9ITA7aWYobC5uZWVkUmVkcmF3KXtoKys7dmFyIHA9dm9pZCAwLGY9dm9pZCAwO3M/KHA9dC4kZ2V0Q29uY2F0ZW5hdGVkQWxwaGFBdChzLHQuJGdldENvbmNhdGVuYXRlZEFscGhhKCkpLGY9ZS5NYXRyaXguY3JlYXRlKCkuY29weUZyb20odC4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4KCkpLHQuJGdldENvbmNhdGVuYXRlZE1hdHJpeEF0KHMsZiksbi4kcHJlTXVsdGlwbHlJbnRvKGYsZiksci5zZXRUcmFuc2Zvcm0oZi5hLGYuYixmLmMsZi5kLGYudHgsZi50eSksZS5NYXRyaXgucmVsZWFzZShmKSk6KHA9bC5yZW5kZXJBbHBoYSxmPWwucmVuZGVyTWF0cml4LHIuc2V0VHJhbnNmb3JtKGYuYSxmLmIsZi5jLGYuZCxmLnR4K24udHgsZi50eStuLnR5KSksci5nbG9iYWxBbHBoYT1wLHRoaXMucmVuZGVyTm9kZShsLHIpLGwubmVlZFJlZHJhdz0hMX19aWYobyYmIXMpcmV0dXJuIGg7dmFyIGc9dC4kY2hpbGRyZW47aWYoZylmb3IodmFyIHY9Zy5sZW5ndGgseT0wO3Y+eTt5Kyspe3ZhciBtPWdbeV07aWYoISghbS4kdmlzaWJsZXx8bS4kYWxwaGE8PTB8fG0uJG1hc2tlZE9iamVjdCkpe3ZhciB4PW0uJGdldEZpbHRlcnMoKTt4JiZ4Lmxlbmd0aD4wP2grPXRoaXMuZHJhd1dpdGhGaWx0ZXIobSxyLGksbixhLHMpOjAhPT1tLiRibGVuZE1vZGV8fG0uJG1hc2smJihtLiRtYXNrLiRwYXJlbnREaXNwbGF5TGlzdHx8cyk/aCs9dGhpcy5kcmF3V2l0aENsaXAobSxyLGksbixhLHMpOm0uJHNjcm9sbFJlY3R8fG0uJG1hc2tSZWN0P2grPXRoaXMuZHJhd1dpdGhTY3JvbGxSZWN0KG0scixpLG4sYSxzKTptLmlzRlBTPyhyLmNvbnRleHQuJGRyYXdXZWJHTCgpLHIuJGNvbXB1dGVEcmF3Q2FsbD0hMSx0aGlzLmRyYXdEaXNwbGF5T2JqZWN0KG0scixpLG4sbS4kZGlzcGxheUxpc3QsYSxzKSxyLmNvbnRleHQuJGRyYXdXZWJHTCgpLHIuJGNvbXB1dGVEcmF3Q2FsbD0hMCk6aCs9dGhpcy5kcmF3RGlzcGxheU9iamVjdChtLHIsaSxuLG0uJGRpc3BsYXlMaXN0LGEscyl9fXJldHVybiBofSxvLnByb3RvdHlwZS5kcmF3V2l0aEZpbHRlcj1mdW5jdGlvbih0LG8sYSxzLGwsaCl7dmFyIHUsYz0wLGQ9dC4kZ2V0RmlsdGVycygpLHA9MCE9PXQuJGJsZW5kTW9kZTtpZihwJiYodT1yW3QuJGJsZW5kTW9kZV0sdXx8KHU9aSkpLDE9PWQubGVuZ3RoJiZcImNvbG9yVHJhbnNmb3JtXCI9PWRbMF0udHlwZSYmIXQuJGNoaWxkcmVuKXJldHVybiBwJiZvLmNvbnRleHQuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKHUpLG8uY29udGV4dC4kZmlsdGVyPWRbMF0sYys9dC4kbWFzayYmKHQuJG1hc2suJHBhcmVudERpc3BsYXlMaXN0fHxoKT90aGlzLmRyYXdXaXRoQ2xpcCh0LG8sYSxzLGwsaCk6dC4kc2Nyb2xsUmVjdHx8dC4kbWFza1JlY3Q/dGhpcy5kcmF3V2l0aFNjcm9sbFJlY3QodCxvLGEscyxsLGgpOnRoaXMuZHJhd0Rpc3BsYXlPYmplY3QodCxvLGEscyx0LiRkaXNwbGF5TGlzdCxsLGgpLG8uY29udGV4dC4kZmlsdGVyPW51bGwscCYmby5jb250ZXh0LnNldEdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbihpKSxjO3ZhciBmPWUuTWF0cml4LmNyZWF0ZSgpO2YuY29weUZyb20odC4kZ2V0Q29uY2F0ZW5hdGVkTWF0cml4KCkpLGgmJnQuJGdldENvbmNhdGVuYXRlZE1hdHJpeEF0KGgsZik7dmFyIGc7Zz1lLnN5cy5SZWdpb24uY3JlYXRlKCk7dmFyIHY9dC4kZ2V0T3JpZ2luYWxCb3VuZHMoKTtnLnVwZGF0ZVJlZ2lvbih2LGYpO3ZhciB5PXRoaXMuY3JlYXRlUmVuZGVyQnVmZmVyKGcud2lkdGgsZy5oZWlnaHQpO3kuY29udGV4dC5wdXNoQnVmZmVyKHkpLHkuc2V0VHJhbnNmb3JtKDEsMCwwLDEsLWcubWluWCwtZy5taW5ZKTt2YXIgbT1lLk1hdHJpeC5jcmVhdGUoKS5zZXRUbygxLDAsMCwxLC1nLm1pblgsLWcubWluWSk7cmV0dXJuIGMrPXQuJG1hc2smJih0LiRtYXNrLiRwYXJlbnREaXNwbGF5TGlzdHx8aCk/dGhpcy5kcmF3V2l0aENsaXAodCx5LGEsbSxnLGgpOnQuJHNjcm9sbFJlY3R8fHQuJG1hc2tSZWN0P3RoaXMuZHJhd1dpdGhTY3JvbGxSZWN0KHQseSxhLG0sZyxoKTp0aGlzLmRyYXdEaXNwbGF5T2JqZWN0KHQseSxhLG0sdC4kZGlzcGxheUxpc3QsZyxoKSxlLk1hdHJpeC5yZWxlYXNlKG0pLHkuY29udGV4dC5wb3BCdWZmZXIoKSxjPjAmJihwJiZvLmNvbnRleHQuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKHUpLGMrKyxvLmdsb2JhbEFscGhhPTEsby5zZXRUcmFuc2Zvcm0oMSwwLDAsMSxnLm1pblgrcy50eCxnLm1pblkrcy50eSksby5jb250ZXh0LmRyYXdUYXJnZXRXaWR0aEZpbHRlcnMoZCx5KSxwJiZvLmNvbnRleHQuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKGkpKSxuLnB1c2goeSksZS5zeXMuUmVnaW9uLnJlbGVhc2UoZyksZS5NYXRyaXgucmVsZWFzZShmKSxjfSxvLnByb3RvdHlwZS5kcmF3V2l0aENsaXA9ZnVuY3Rpb24odCxvLGEscyxsLGgpe3ZhciB1LGM9MCxkPTAhPT10LiRibGVuZE1vZGU7ZCYmKHU9clt0LiRibGVuZE1vZGVdLHV8fCh1PWkpKTt2YXIgcD10LiRzY3JvbGxSZWN0P3QuJHNjcm9sbFJlY3Q6dC4kbWFza1JlY3QsZj10LiRtYXNrO2lmKGYpe3ZhciBnPWYuJGdldFJlbmRlck5vZGUoKTtpZihnKXt2YXIgdj1nLnJlbmRlck1hdHJpeDtpZigwPT12LmEmJjA9PXYuYnx8MD09di5jJiYwPT12LmQpcmV0dXJuIGN9fXZhciB5LG09ZS5NYXRyaXguY3JlYXRlKCk7aWYobS5jb3B5RnJvbSh0LiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKSksdC4kcGFyZW50RGlzcGxheUxpc3Qpe3ZhciB4PXQuJHBhcmVudERpc3BsYXlMaXN0LnJvb3Q7eCE9PXQuJHN0YWdlJiZ0LiRnZXRDb25jYXRlbmF0ZWRNYXRyaXhBdCh4LG0pfXZhciBiO2lmKGYpe2I9Zi4kZ2V0T3JpZ2luYWxCb3VuZHMoKSx5PWUuc3lzLlJlZ2lvbi5jcmVhdGUoKTt2YXIgdz1lLk1hdHJpeC5jcmVhdGUoKTt3LmNvcHlGcm9tKGYuJGdldENvbmNhdGVuYXRlZE1hdHJpeCgpKSx5LnVwZGF0ZVJlZ2lvbihiLHcpLGUuTWF0cml4LnJlbGVhc2Uodyl9dmFyIEU7aWYocCYmKEU9ZS5zeXMuUmVnaW9uLmNyZWF0ZSgpLEUudXBkYXRlUmVnaW9uKHAsbSkpLEUmJnk/KEUuaW50ZXJzZWN0KHkpLGUuc3lzLlJlZ2lvbi5yZWxlYXNlKHkpKTohRSYmeSYmKEU9eSksRSl7aWYoRS5pc0VtcHR5KCl8fGwmJiFsLmludGVyc2VjdHMoRSkpcmV0dXJuIGUuc3lzLlJlZ2lvbi5yZWxlYXNlKEUpLGUuTWF0cml4LnJlbGVhc2UobSksY31lbHNlIEU9ZS5zeXMuUmVnaW9uLmNyZWF0ZSgpLGI9dC4kZ2V0T3JpZ2luYWxCb3VuZHMoKSxFLnVwZGF0ZVJlZ2lvbihiLG0pO3ZhciBUPSExO2lmKGEpe2Zvcih2YXIgUz1hLmxlbmd0aCxfPTA7Uz5fO18rKylpZihFLmludGVyc2VjdHMoYVtfXSkpe1Q9ITA7YnJlYWt9fWVsc2UgVD0hMDtpZighVClyZXR1cm4gZS5zeXMuUmVnaW9uLnJlbGVhc2UoRSksZS5NYXRyaXgucmVsZWFzZShtKSxjO2lmKGZ8fHQuJGNoaWxkcmVuJiYwIT10LiRjaGlsZHJlbi5sZW5ndGgpe3ZhciBDPXRoaXMuY3JlYXRlUmVuZGVyQnVmZmVyKEUud2lkdGgsRS5oZWlnaHQpO0MuY29udGV4dC5wdXNoQnVmZmVyKEMpLEMuc2V0VHJhbnNmb3JtKDEsMCwwLDEsLUUubWluWCwtRS5taW5ZKTt2YXIgUj1lLk1hdHJpeC5jcmVhdGUoKS5zZXRUbygxLDAsMCwxLC1FLm1pblgsLUUubWluWSk7aWYoYys9dGhpcy5kcmF3RGlzcGxheU9iamVjdCh0LEMsYSxSLHQuJGRpc3BsYXlMaXN0LEUsaCksZil7dmFyIEw9dGhpcy5jcmVhdGVSZW5kZXJCdWZmZXIoRS53aWR0aCxFLmhlaWdodCk7TC5jb250ZXh0LnB1c2hCdWZmZXIoTCksTC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwtRS5taW5YLC1FLm1pblkpLFI9ZS5NYXRyaXguY3JlYXRlKCkuc2V0VG8oMSwwLDAsMSwtRS5taW5YLC1FLm1pblkpLGMrPXRoaXMuZHJhd0Rpc3BsYXlPYmplY3QoZixMLGEsUixmLiRkaXNwbGF5TGlzdCxFLGgpLEwuY29udGV4dC5wb3BCdWZmZXIoKSxDLmNvbnRleHQuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKFwiZGVzdGluYXRpb24taW5cIiksQy5zZXRUcmFuc2Zvcm0oMSwwLDAsLTEsMCxMLmhlaWdodCksQy5nbG9iYWxBbHBoYT0xO3ZhciBEPUwucm9vdFJlbmRlclRhcmdldC53aWR0aCxBPUwucm9vdFJlbmRlclRhcmdldC5oZWlnaHQ7Qy5jb250ZXh0LmRyYXdUZXh0dXJlKEwucm9vdFJlbmRlclRhcmdldC50ZXh0dXJlLDAsMCxELEEsMCwwLEQsQSxELEEpLEMuY29udGV4dC5zZXRHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24oXCJzb3VyY2Utb3ZlclwiKSxuLnB1c2goTCl9aWYoZS5NYXRyaXgucmVsZWFzZShSKSxDLmNvbnRleHQuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKGkpLEMuY29udGV4dC5wb3BCdWZmZXIoKSxjPjApe2lmKGMrKyxkJiZvLmNvbnRleHQuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKHUpLHApe3ZhciB3PW07Qy5zZXRUcmFuc2Zvcm0ody5hLHcuYix3LmMsdy5kLHcudHgtRS5taW5YLHcudHktRS5taW5ZKSxDLmNvbnRleHQucHVzaE1hc2socCl9by5nbG9iYWxBbHBoYT0xLG8uc2V0VHJhbnNmb3JtKDEsMCwwLC0xLEUubWluWCtzLnR4LEUubWluWStzLnR5K0MuaGVpZ2h0KTt2YXIgJD1DLnJvb3RSZW5kZXJUYXJnZXQud2lkdGgsTT1DLnJvb3RSZW5kZXJUYXJnZXQuaGVpZ2h0O28uY29udGV4dC5kcmF3VGV4dHVyZShDLnJvb3RSZW5kZXJUYXJnZXQudGV4dHVyZSwwLDAsJCxNLDAsMCwkLE0sJCxNKSxwJiZDLmNvbnRleHQucG9wTWFzaygpLGQmJm8uY29udGV4dC5zZXRHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24oaSl9cmV0dXJuIG4ucHVzaChDKSxlLnN5cy5SZWdpb24ucmVsZWFzZShFKSxlLk1hdHJpeC5yZWxlYXNlKG0pLGN9aWYocCl7dmFyIHc9bTtvLnNldFRyYW5zZm9ybSh3LmEsdy5iLHcuYyx3LmQsdy50eC1FLm1pblgsdy50eS1FLm1pblkpLG8uY29udGV4dC5wdXNoTWFzayhwKX1yZXR1cm4gZCYmby5jb250ZXh0LnNldEdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbih1KSxjKz10aGlzLmRyYXdEaXNwbGF5T2JqZWN0KHQsbyxhLHMsdC4kZGlzcGxheUxpc3QsbCxoKSxkJiZvLmNvbnRleHQuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKGkpLHAmJm8uY29udGV4dC5wb3BNYXNrKCksZS5zeXMuUmVnaW9uLnJlbGVhc2UoRSksZS5NYXRyaXgucmVsZWFzZShtKSxjfSxvLnByb3RvdHlwZS5kcmF3V2l0aFNjcm9sbFJlY3Q9ZnVuY3Rpb24odCxyLGksbixvLGEpe3ZhciBzPTAsbD10LiRzY3JvbGxSZWN0P3QuJHNjcm9sbFJlY3Q6dC4kbWFza1JlY3Q7aWYobC5pc0VtcHR5KCkpcmV0dXJuIHM7dmFyIGg9ZS5NYXRyaXguY3JlYXRlKCk7aWYoaC5jb3B5RnJvbSh0LiRnZXRDb25jYXRlbmF0ZWRNYXRyaXgoKSksYSl0LiRnZXRDb25jYXRlbmF0ZWRNYXRyaXhBdChhLGgpO2Vsc2UgaWYodC4kcGFyZW50RGlzcGxheUxpc3Qpe3ZhciB1PXQuJHBhcmVudERpc3BsYXlMaXN0LnJvb3Q7dSE9PXQuJHN0YWdlJiZ0LiRnZXRDb25jYXRlbmF0ZWRNYXRyaXhBdCh1LGgpfXZhciBjPWUuc3lzLlJlZ2lvbi5jcmVhdGUoKTtpZihjLnVwZGF0ZVJlZ2lvbihsLGgpLGMuaXNFbXB0eSgpfHxvJiYhby5pbnRlcnNlY3RzKGMpKXJldHVybiBlLnN5cy5SZWdpb24ucmVsZWFzZShjKSxlLk1hdHJpeC5yZWxlYXNlKGgpLHM7dmFyIGQ9ITE7aWYoaSl7Zm9yKHZhciBwPWkubGVuZ3RoLGY9MDtwPmY7ZisrKWlmKGMuaW50ZXJzZWN0cyhpW2ZdKSl7ZD0hMDticmVha319ZWxzZSBkPSEwO2lmKCFkKXJldHVybiBlLnN5cy5SZWdpb24ucmVsZWFzZShjKSxlLk1hdHJpeC5yZWxlYXNlKGgpLHM7ci5zZXRUcmFuc2Zvcm0oaC5hLGguYixoLmMsaC5kLGgudHgrbi50eCxoLnR5K24udHkpO3ZhciBnPXIuY29udGV4dCx2PSExO2lmKHIuJGhhc1NjaXNzb3J8fDAhPWguYnx8MCE9aC5jKWcucHVzaE1hc2sobCk7ZWxzZXt2YXIgeT1sLngsbT1sLnkseD1sLndpZHRoLGI9bC5oZWlnaHQ7eT15KmguYStoLnR4K24udHgsbT1tKmguZCtoLnR5K24udHkseCo9aC5hLGIqPWguZCxnLmVuYWJsZVNjaXNzb3IoeSwtbS1iK3IuaGVpZ2h0LHgsYiksdj0hMH1yZXR1cm4gcys9dGhpcy5kcmF3RGlzcGxheU9iamVjdCh0LHIsaSxuLHQuJGRpc3BsYXlMaXN0LGMsYSksci5zZXRUcmFuc2Zvcm0oaC5hLGguYixoLmMsaC5kLGgudHgrbi50eCxoLnR5K24udHkpLHY/Zy5kaXNhYmxlU2Npc3NvcigpOmcucG9wTWFzaygpLGUuc3lzLlJlZ2lvbi5yZWxlYXNlKGMpLGUuTWF0cml4LnJlbGVhc2UoaCksc30sby5wcm90b3R5cGUuZHJhd05vZGVUb0J1ZmZlcj1mdW5jdGlvbihlLHQscixpKXt2YXIgbj10O24uY29udGV4dC5wdXNoQnVmZmVyKG4pLG4uc2V0VHJhbnNmb3JtKHIuYSxyLmIsci5jLHIuZCxyLnR4LHIudHkpLHRoaXMucmVuZGVyTm9kZShlLHQsaSksbi5jb250ZXh0LiRkcmF3V2ViR0woKSxuLm9uUmVuZGVyRmluaXNoKCksbi5jb250ZXh0LnBvcEJ1ZmZlcigpfSxvLnByb3RvdHlwZS5yZW5kZXJOb2RlPWZ1bmN0aW9uKGUsdCxyKXtzd2l0Y2goZS50eXBlKXtjYXNlIDE6dGhpcy5yZW5kZXJCaXRtYXAoZSx0KTticmVhaztjYXNlIDI6dGhpcy5yZW5kZXJUZXh0KGUsdCk7YnJlYWs7Y2FzZSAzOnRoaXMucmVuZGVyR3JhcGhpY3MoZSx0LHIpO2JyZWFrO2Nhc2UgNDp0aGlzLnJlbmRlckdyb3VwKGUsdCk7YnJlYWs7Y2FzZSA2OnQuZ2xvYmFsQWxwaGE9ZS5kcmF3RGF0YVswXTticmVhaztjYXNlIDc6dGhpcy5yZW5kZXJNZXNoKGUsdCl9fSxvLnByb3RvdHlwZS5yZW5kZXJCaXRtYXA9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmltYWdlO2lmKG4pe3ZhciBvPWUuZHJhd0RhdGEsYT1vLmxlbmd0aCxzPTAsbD1lLm1hdHJpeCxoPWUuYmxlbmRNb2RlLHU9ZS5hbHBoYTtsJiYodC5zYXZlVHJhbnNmb3JtKCksdC50cmFuc2Zvcm0obC5hLGwuYixsLmMsbC5kLGwudHgsbC50eSkpLGgmJnQuY29udGV4dC5zZXRHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24ocltoXSk7dmFyIGM7aWYodT09dSYmKGM9dC5nbG9iYWxBbHBoYSx0Lmdsb2JhbEFscGhhKj11KSxlLmZpbHRlcil7Zm9yKHQuY29udGV4dC4kZmlsdGVyPWUuZmlsdGVyO2E+czspdC5jb250ZXh0LmRyYXdJbWFnZShuLG9bcysrXSxvW3MrK10sb1tzKytdLG9bcysrXSxvW3MrK10sb1tzKytdLG9bcysrXSxvW3MrK10sZS5pbWFnZVdpZHRoLGUuaW1hZ2VIZWlnaHQpO3QuY29udGV4dC4kZmlsdGVyPW51bGx9ZWxzZSBmb3IoO2E+czspdC5jb250ZXh0LmRyYXdJbWFnZShuLG9bcysrXSxvW3MrK10sb1tzKytdLG9bcysrXSxvW3MrK10sb1tzKytdLG9bcysrXSxvW3MrK10sZS5pbWFnZVdpZHRoLGUuaW1hZ2VIZWlnaHQpO2gmJnQuY29udGV4dC5zZXRHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24oaSksdT09dSYmKHQuZ2xvYmFsQWxwaGE9YyksbCYmdC5yZXN0b3JlVHJhbnNmb3JtKCl9fSxvLnByb3RvdHlwZS5yZW5kZXJNZXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5pbWFnZSxpPWUuZHJhd0RhdGEsbj1pLmxlbmd0aCxvPTAsYT1lLm1hdHJpeDtmb3IoYSYmKHQuc2F2ZVRyYW5zZm9ybSgpLHQudHJhbnNmb3JtKGEuYSxhLmIsYS5jLGEuZCxhLnR4LGEudHkpKTtuPm87KXQuY29udGV4dC5kcmF3TWVzaChyLGlbbysrXSxpW28rK10saVtvKytdLGlbbysrXSxpW28rK10saVtvKytdLGlbbysrXSxpW28rK10sZS5pbWFnZVdpZHRoLGUuaW1hZ2VIZWlnaHQsZS51dnMsZS52ZXJ0aWNlcyxlLmluZGljZXMsZS5ib3VuZHMpO2EmJnQucmVzdG9yZVRyYW5zZm9ybSgpfSxvLnByb3RvdHlwZS5yZW5kZXJUZXh0PWZ1bmN0aW9uKHIsaSl7dmFyIG49ci53aWR0aC1yLngsbz1yLmhlaWdodC1yLnk7aWYoMCE9ci5kcmF3RGF0YS5sZW5ndGgmJih0aGlzLmNhbnZhc1JlbmRlckJ1ZmZlciYmdGhpcy5jYW52YXNSZW5kZXJCdWZmZXIuY29udGV4dD9yLmRpcnR5UmVuZGVyJiZ0aGlzLmNhbnZhc1JlbmRlckJ1ZmZlci5yZXNpemUobixvKToodGhpcy5jYW52YXNSZW5kZXJlcj1uZXcgZS5DYW52YXNSZW5kZXJlcix0aGlzLmNhbnZhc1JlbmRlckJ1ZmZlcj1uZXcgdC5DYW52YXNSZW5kZXJCdWZmZXIobixvKSksdGhpcy5jYW52YXNSZW5kZXJCdWZmZXIuY29udGV4dCkpe2lmKChyLnh8fHIueSkmJihyLmRpcnR5UmVuZGVyJiZ0aGlzLmNhbnZhc1JlbmRlckJ1ZmZlci5jb250ZXh0LnRyYW5zbGF0ZSgtci54LC1yLnkpLGkudHJhbnNmb3JtKDEsMCwwLDEsci54LHIueSkpLHIuZGlydHlSZW5kZXIpe3ZhciBhPXRoaXMuY2FudmFzUmVuZGVyQnVmZmVyLnN1cmZhY2U7dGhpcy5jYW52YXNSZW5kZXJlci5yZW5kZXJUZXh0KHIsdGhpcy5jYW52YXNSZW5kZXJCdWZmZXIuY29udGV4dCk7dmFyIHM9ci4kdGV4dHVyZTtzP2kuY29udGV4dC51cGRhdGVUZXh0dXJlKHMsYSk6KHM9aS5jb250ZXh0LmNyZWF0ZVRleHR1cmUoYSksci4kdGV4dHVyZT1zKSxyLiR0ZXh0dXJlV2lkdGg9YS53aWR0aCxyLiR0ZXh0dXJlSGVpZ2h0PWEuaGVpZ2h0fXZhciBsPXIuJHRleHR1cmVXaWR0aCxoPXIuJHRleHR1cmVIZWlnaHQ7aS5jb250ZXh0LmRyYXdUZXh0dXJlKHIuJHRleHR1cmUsMCwwLGwsaCwwLDAsbCxoLGwsaCksKHIueHx8ci55KSYmKHIuZGlydHlSZW5kZXImJnRoaXMuY2FudmFzUmVuZGVyQnVmZmVyLmNvbnRleHQudHJhbnNsYXRlKHIueCxyLnkpLGkudHJhbnNmb3JtKDEsMCwwLDEsLXIueCwtci55KSksci5kaXJ0eVJlbmRlcj0hMX19LG8ucHJvdG90eXBlLnJlbmRlckdyYXBoaWNzPWZ1bmN0aW9uKHIsaSxuKXt2YXIgbz1yLndpZHRoLGE9ci5oZWlnaHQ7aWYoISgwPj1vfHwwPj1hKSYmbyYmYSYmMCE9ci5kcmF3RGF0YS5sZW5ndGgmJih0aGlzLmNhbnZhc1JlbmRlckJ1ZmZlciYmdGhpcy5jYW52YXNSZW5kZXJCdWZmZXIuY29udGV4dD8oci5kaXJ0eVJlbmRlcnx8bikmJnRoaXMuY2FudmFzUmVuZGVyQnVmZmVyLnJlc2l6ZShvLGEpOih0aGlzLmNhbnZhc1JlbmRlcmVyPW5ldyBlLkNhbnZhc1JlbmRlcmVyLHRoaXMuY2FudmFzUmVuZGVyQnVmZmVyPW5ldyB0LkNhbnZhc1JlbmRlckJ1ZmZlcihvLGEpKSx0aGlzLmNhbnZhc1JlbmRlckJ1ZmZlci5jb250ZXh0KSl7KHIueHx8ci55KSYmKChyLmRpcnR5UmVuZGVyfHxuKSYmdGhpcy5jYW52YXNSZW5kZXJCdWZmZXIuY29udGV4dC50cmFuc2xhdGUoLXIueCwtci55KSxpLnRyYW5zZm9ybSgxLDAsMCwxLHIueCxyLnkpKTt2YXIgcz10aGlzLmNhbnZhc1JlbmRlckJ1ZmZlci5zdXJmYWNlO2lmKG4pe3RoaXMuY2FudmFzUmVuZGVyZXIucmVuZGVyR3JhcGhpY3Mocix0aGlzLmNhbnZhc1JlbmRlckJ1ZmZlci5jb250ZXh0LCEwKSxlLldlYkdMVXRpbHMuZGVsZXRlV2ViR0xUZXh0dXJlKHMpO3ZhciBsPWkuY29udGV4dC5nZXRXZWJHTFRleHR1cmUocyk7aS5jb250ZXh0LmRyYXdUZXh0dXJlKGwsMCwwLG8sYSwwLDAsbyxhLHMud2lkdGgscy5oZWlnaHQpfWVsc2V7aWYoci5kaXJ0eVJlbmRlcil7dGhpcy5jYW52YXNSZW5kZXJlci5yZW5kZXJHcmFwaGljcyhyLHRoaXMuY2FudmFzUmVuZGVyQnVmZmVyLmNvbnRleHQpO3ZhciBsPXIuJHRleHR1cmU7bD9pLmNvbnRleHQudXBkYXRlVGV4dHVyZShsLHMpOihsPWkuY29udGV4dC5jcmVhdGVUZXh0dXJlKHMpLHIuJHRleHR1cmU9bCksci4kdGV4dHVyZVdpZHRoPXMud2lkdGgsci4kdGV4dHVyZUhlaWdodD1zLmhlaWdodH12YXIgaD1yLiR0ZXh0dXJlV2lkdGgsdT1yLiR0ZXh0dXJlSGVpZ2h0O2kuY29udGV4dC5kcmF3VGV4dHVyZShyLiR0ZXh0dXJlLDAsMCxoLHUsMCwwLGgsdSxoLHUpfShyLnh8fHIueSkmJigoci5kaXJ0eVJlbmRlcnx8bikmJnRoaXMuY2FudmFzUmVuZGVyQnVmZmVyLmNvbnRleHQudHJhbnNsYXRlKHIueCxyLnkpLGkudHJhbnNmb3JtKDEsMCwwLDEsLXIueCwtci55KSksbnx8KHIuZGlydHlSZW5kZXI9ITEpfX0sby5wcm90b3R5cGUucmVuZGVyR3JvdXA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZS5kcmF3RGF0YSxpPXIubGVuZ3RoLG49MDtpPm47bisrKXt2YXIgbz1yW25dO3RoaXMucmVuZGVyTm9kZShvLHQpfX0sby5wcm90b3R5cGUuY3JlYXRlUmVuZGVyQnVmZmVyPWZ1bmN0aW9uKGUscil7dmFyIGk9bi5wb3AoKTtyZXR1cm4gaT9pLnJlc2l6ZShlLHIpOihpPW5ldyB0LldlYkdMUmVuZGVyQnVmZmVyKGUsciksaS4kY29tcHV0ZURyYXdDYWxsPSExKSxpfSxvfSgpO3QuV2ViR0xSZW5kZXJlcj1vLF9fcmVmbGVjdChvLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJHTFJlbmRlcmVyXCIsW1wiZWdyZXQuc3lzLlN5c3RlbVJlbmRlcmVyXCJdKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUpe2lmKHdpbmRvdy5sb2NhdGlvbil7dmFyIHQ9bG9jYXRpb24uc2VhcmNoO2lmKFwiXCI9PXQpcmV0dXJuXCJcIjt0PXQuc2xpY2UoMSk7Zm9yKHZhciByPXQuc3BsaXQoXCImXCIpLGk9ci5sZW5ndGgsbj0wO2k+bjtuKyspe3ZhciBvPXJbbl0sYT1vLnNwbGl0KFwiPVwiKTtpZihhWzBdPT1lKXJldHVybiBhWzFdfX1yZXR1cm5cIlwifXQuZ2V0T3B0aW9uPXIsZS5nZXRPcHRpb249cn0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbihyKXtmdW5jdGlvbiBpKGUsdCl7dmFyIGk9ci5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmluaXQoZSx0KSxpLmluaXRPcmllbnRhdGlvbigpLGl9cmV0dXJuIF9fZXh0ZW5kcyhpLHIpLGkucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24ocixpKXt2YXIgbj10aGlzLnJlYWRPcHRpb24ocixpKSxvPW5ldyBlLlN0YWdlO28uJHNjcmVlbj10aGlzLG8uJHNjYWxlTW9kZT1uLnNjYWxlTW9kZSxvLiRvcmllbnRhdGlvbj1uLm9yaWVudGF0aW9uLG8uJG1heFRvdWNoZXM9bi5tYXhUb3VjaGVzLG8uZnJhbWVSYXRlPW4uZnJhbWVSYXRlLG8udGV4dHVyZVNjYWxlRmFjdG9yPW4udGV4dHVyZVNjYWxlRmFjdG9yO3ZhciBhPW5ldyBlLnN5cy5SZW5kZXJCdWZmZXIodm9pZCAwLHZvaWQgMCwhMCkscz1hLnN1cmZhY2U7dGhpcy5hdHRhY2hDYW52YXMocixzKTt2YXIgbD1uZXcgdC5XZWJUb3VjaEhhbmRsZXIobyxzKSxoPW5ldyBlLnN5cy5QbGF5ZXIoYSxvLG4uZW50cnlDbGFzc05hbWUpLHU9bmV3IGUud2ViLldlYkhpZGVIYW5kbGVyKG8pLGM9bmV3IHQuSFRNTElucHV0O2guc2hvd1BhaW50UmVjdChuLnNob3dQYWludFJlY3QpLChuLnNob3dGUFN8fG4uc2hvd0xvZykmJmguZGlzcGxheUZQUyhuLnNob3dGUFMsbi5zaG93TG9nLG4ubG9nRmlsdGVyLG4uZnBzU3R5bGVzKSx0aGlzLnBsYXllck9wdGlvbj1uLHRoaXMuY29udGFpbmVyPXIsdGhpcy5jYW52YXM9cyx0aGlzLnN0YWdlPW8sdGhpcy5wbGF5ZXI9aCx0aGlzLndlYlRvdWNoSGFuZGxlcj1sLHRoaXMud2ViSW5wdXQ9Yyx0aGlzLndlYkhpZGU9dSxlLndlYi4kY2FjaGVUZXh0QWRhcHRlcihjLG8scixzKSx0aGlzLnVwZGF0ZVNjcmVlblNpemUoKSx0aGlzLnVwZGF0ZU1heFRvdWNoZXMoKSxoLnN0YXJ0KCl9LGkucHJvdG90eXBlLmluaXRPcmllbnRhdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKCl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLlN0YWdlT3JpZW50YXRpb25FdmVudC5kaXNwYXRjaFN0YWdlT3JpZW50YXRpb25FdmVudCh0LnN0YWdlLGUuU3RhZ2VPcmllbnRhdGlvbkV2ZW50Lk9SSUVOVEFUSU9OX0NIQU5HRSl9LDM1MCl9KX0saS5wcm90b3R5cGUucmVhZE9wdGlvbj1mdW5jdGlvbih0LHIpe3ZhciBpPXt9O2kuZW50cnlDbGFzc05hbWU9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWVudHJ5LWNsYXNzXCIpLGkuc2NhbGVNb2RlPXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zY2FsZS1tb2RlXCIpfHxlLlN0YWdlU2NhbGVNb2RlLk5PX1NDQUxFLGkuZnJhbWVSYXRlPSt0LmdldEF0dHJpYnV0ZShcImRhdGEtZnJhbWUtcmF0ZVwiKXx8MzAsaS5jb250ZW50V2lkdGg9K3QuZ2V0QXR0cmlidXRlKFwiZGF0YS1jb250ZW50LXdpZHRoXCIpfHw0ODAsaS5jb250ZW50SGVpZ2h0PSt0LmdldEF0dHJpYnV0ZShcImRhdGEtY29udGVudC1oZWlnaHRcIil8fDgwMCxpLm9yaWVudGF0aW9uPXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1vcmllbnRhdGlvblwiKXx8ZS5PcmllbnRhdGlvbk1vZGUuQVVUTyxpLm1heFRvdWNoZXM9K3QuZ2V0QXR0cmlidXRlKFwiZGF0YS1tdWx0aS1maW5nZXJlZFwiKXx8MixpLnRleHR1cmVTY2FsZUZhY3Rvcj0rdC5nZXRBdHRyaWJ1dGUoXCJ0ZXh0dXJlLXNjYWxlLWZhY3RvclwiKXx8MSxcIndlYmdsXCI9PXIucmVuZGVyTW9kZT9pLnNob3dQYWludFJlY3Q9ITE6aS5zaG93UGFpbnRSZWN0PVwidHJ1ZVwiPT10LmdldEF0dHJpYnV0ZShcImRhdGEtc2hvdy1wYWludC1yZWN0XCIpLGkuc2hvd0ZQUz1cInRydWVcIj09dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNob3ctZnBzXCIpO2Zvcih2YXIgbj10LmdldEF0dHJpYnV0ZShcImRhdGEtc2hvdy1mcHMtc3R5bGVcIil8fFwiXCIsbz1uLnNwbGl0KFwiLFwiKSxhPXt9LHM9MDtzPG8ubGVuZ3RoO3MrKyl7dmFyIGw9b1tzXS5zcGxpdChcIjpcIik7YVtsWzBdXT1sWzFdfXJldHVybiBpLmZwc1N0eWxlcz1hLGkuc2hvd0xvZz1cInRydWVcIj09dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNob3ctbG9nXCIpLGkubG9nRmlsdGVyPXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1sb2ctZmlsdGVyXCIpLGl9LGkucHJvdG90eXBlLmF0dGFjaENhbnZhcz1mdW5jdGlvbihlLHQpe3ZhciByPXQuc3R5bGU7ci5jdXJzb3I9XCJpbmhlcml0XCIsci5wb3NpdGlvbj1cImFic29sdXRlXCIsci50b3A9XCIwXCIsci5ib3R0b209XCIwXCIsci5sZWZ0PVwiMFwiLHIucmlnaHQ9XCIwXCIsZS5hcHBlbmRDaGlsZCh0KSxyPWUuc3R5bGUsci5vdmVyZmxvdz1cImhpZGRlblwiLHIucG9zaXRpb249XCJyZWxhdGl2ZVwiLHIud2Via2l0VHJhbnNmb3JtPVwidHJhbnNsYXRlWigwKVwifSxpLnByb3RvdHlwZS51cGRhdGVTY3JlZW5TaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jYW52YXM7aWYoIXQudXNlclR5cGluZyl7dmFyIHI9dGhpcy5wbGF5ZXJPcHRpb24saT10aGlzLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPSExLG89dGhpcy5zdGFnZS4kb3JpZW50YXRpb247byE9ZS5PcmllbnRhdGlvbk1vZGUuQVVUTyYmKG49byE9ZS5PcmllbnRhdGlvbk1vZGUuUE9SVFJBSVQmJmkuaGVpZ2h0Pmkud2lkdGh8fG89PWUuT3JpZW50YXRpb25Nb2RlLlBPUlRSQUlUJiZpLndpZHRoPmkuaGVpZ2h0KTt2YXIgYT1uP2kuaGVpZ2h0Omkud2lkdGgscz1uP2kud2lkdGg6aS5oZWlnaHQ7ZS5DYXBhYmlsaXRpZXMuJGJvdW5kaW5nQ2xpZW50V2lkdGg9YSxlLkNhcGFiaWxpdGllcy4kYm91bmRpbmdDbGllbnRIZWlnaHQ9czt2YXIgbD1lLnN5cy5zY3JlZW5BZGFwdGVyLmNhbGN1bGF0ZVN0YWdlU2l6ZSh0aGlzLnN0YWdlLiRzY2FsZU1vZGUsYSxzLHIuY29udGVudFdpZHRoLHIuY29udGVudEhlaWdodCksaD1sLnN0YWdlV2lkdGgsdT1sLnN0YWdlSGVpZ2h0LGM9bC5kaXNwbGF5V2lkdGgsZD1sLmRpc3BsYXlIZWlnaHQ7XG50LndpZHRoIT09aCYmKHQud2lkdGg9aCksdC5oZWlnaHQhPT11JiYodC5oZWlnaHQ9dSksdC5zdHlsZVtlLndlYi5nZXRQcmVmaXhTdHlsZU5hbWUoXCJ0cmFuc2Zvcm1PcmlnaW5cIildPVwiMCUgMCUgMHB4XCIsdC5zdHlsZS53aWR0aD1jK1wicHhcIix0LnN0eWxlLmhlaWdodD1kK1wicHhcIjt2YXIgcD0wO24/bz09ZS5PcmllbnRhdGlvbk1vZGUuTEFORFNDQVBFPyhwPTkwLHQuc3R5bGUudG9wPShpLmhlaWdodC1jKS8yK1wicHhcIix0LnN0eWxlLmxlZnQ9KGkud2lkdGgrZCkvMitcInB4XCIpOihwPS05MCx0LnN0eWxlLnRvcD0oaS5oZWlnaHQrYykvMitcInB4XCIsdC5zdHlsZS5sZWZ0PShpLndpZHRoLWQpLzIrXCJweFwiKToodC5zdHlsZS50b3A9KGkuaGVpZ2h0LWQpLzIrXCJweFwiLHQuc3R5bGUubGVmdD0oaS53aWR0aC1jKS8yK1wicHhcIik7dmFyIGY9XCJyb3RhdGUoXCIrcCtcImRlZylcIjt0LnN0eWxlW2Uud2ViLmdldFByZWZpeFN0eWxlTmFtZShcInRyYW5zZm9ybVwiKV09Zjt2YXIgZz1jL2gsdj1kL3U7dGhpcy53ZWJUb3VjaEhhbmRsZXIudXBkYXRlU2NhbGVNb2RlKGcsdixwKSx0aGlzLndlYklucHV0LiR1cGRhdGVTaXplKCksdGhpcy5wbGF5ZXIudXBkYXRlU3RhZ2VTaXplKGgsdSl9fSxpLnByb3RvdHlwZS5zZXRDb250ZW50U2l6ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMucGxheWVyT3B0aW9uO3IuY29udGVudFdpZHRoPWUsci5jb250ZW50SGVpZ2h0PXQsdGhpcy51cGRhdGVTY3JlZW5TaXplKCl9LGkucHJvdG90eXBlLnVwZGF0ZU1heFRvdWNoZXM9ZnVuY3Rpb24oKXt0aGlzLndlYlRvdWNoSGFuZGxlci4kdXBkYXRlTWF4VG91Y2hlcygpfSxpfShlLkhhc2hPYmplY3QpO3QuV2ViUGxheWVyPXIsX19yZWZsZWN0KHIucHJvdG90eXBlLFwiZWdyZXQud2ViLldlYlBsYXllclwiLFtcImVncmV0LnN5cy5TY3JlZW5cIl0pfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIodCxyKXtzfHwocz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGw9cy5nZXRDb250ZXh0KFwiMmRcIikpO3ZhciBpPXQuJGdldFRleHR1cmVXaWR0aCgpLG49dC4kZ2V0VGV4dHVyZUhlaWdodCgpO251bGw9PXImJihyPWUuJFRlbXBSZWN0YW5nbGUsci54PTAsci55PTAsci53aWR0aD1pLHIuaGVpZ2h0PW4pLHIueD1NYXRoLm1pbihyLngsaS0xKSxyLnk9TWF0aC5taW4oci55LG4tMSksci53aWR0aD1NYXRoLm1pbihyLndpZHRoLGktci54KSxyLmhlaWdodD1NYXRoLm1pbihyLmhlaWdodCxuLXIueSk7dmFyIG89ci53aWR0aCxhPXIuaGVpZ2h0LGg9cztpZihoLnN0eWxlLndpZHRoPW8rXCJweFwiLGguc3R5bGUuaGVpZ2h0PWErXCJweFwiLHMud2lkdGg9byxzLmhlaWdodD1hLFwid2ViZ2xcIj09ZS5DYXBhYmlsaXRpZXMuJHJlbmRlck1vZGUpe3ZhciB1PXZvaWQgMDt0LiRyZW5kZXJCdWZmZXI/dT10Oih1PW5ldyBlLlJlbmRlclRleHR1cmUsdS5kcmF3VG9UZXh0dXJlKG5ldyBlLkJpdG1hcCh0KSkpO2Zvcih2YXIgYz11LiRyZW5kZXJCdWZmZXIuZ2V0UGl4ZWxzKHIueCxyLnksbyxhKSxkPW5ldyBJbWFnZURhdGEobyxhKSxwPTA7cDxjLmxlbmd0aDtwKyspZC5kYXRhW3BdPWNbcF07cmV0dXJuIGwucHV0SW1hZ2VEYXRhKGQsMCwwKSx0LiRyZW5kZXJCdWZmZXJ8fHUuZGlzcG9zZSgpLGh9dmFyIGY9dCxnPU1hdGgucm91bmQoZi5fb2Zmc2V0WCksdj1NYXRoLnJvdW5kKGYuX29mZnNldFkpLHk9Zi5fYml0bWFwV2lkdGgsbT1mLl9iaXRtYXBIZWlnaHQ7cmV0dXJuIGwuZHJhd0ltYWdlKGYuX2JpdG1hcERhdGEuc291cmNlLGYuX2JpdG1hcFgrci54L2UuJFRleHR1cmVTY2FsZUZhY3RvcixmLl9iaXRtYXBZK3IueS9lLiRUZXh0dXJlU2NhbGVGYWN0b3IseSpyLndpZHRoL2ksbSpyLmhlaWdodC9uLGcsdixyLndpZHRoLHIuaGVpZ2h0KSxofWZ1bmN0aW9uIGkodCxpKXt0cnl7dmFyIG49cih0aGlzLGkpLG89bi50b0RhdGFVUkwodCk7cmV0dXJuIG99Y2F0Y2goYSl7ZS4kZXJyb3IoMTAzMyl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gbihlLHQscil7dmFyIG49aS5jYWxsKHRoaXMsZSxyKTtpZihudWxsIT1uKXt2YXIgbz1uLnJlcGxhY2UoL15kYXRhOmltYWdlW147XSovLFwiZGF0YTppbWFnZS9vY3RldC1zdHJlYW1cIiksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTthLmRvd25sb2FkPXQsYS5ocmVmPW87dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJIVE1MRXZlbnRzXCIpO3MuaW5pdEV2ZW50KFwiY2xpY2tcIiwhMSwhMSksYS5kaXNwYXRjaEV2ZW50KHMpfX1mdW5jdGlvbiBvKHQscil7cmV0dXJuIGUuJHdhcm4oMTA0MSxcImdldFBpeGVsMzJcIixcImdldFBpeGVsc1wiKSx0aGlzLmdldFBpeGVscyh0LHIpfWZ1bmN0aW9uIGEodCxpLG4sbyl7dm9pZCAwPT09biYmKG49MSksdm9pZCAwPT09byYmKG89MSk7dHJ5e3ZhciBhPShyKHRoaXMpLGwuZ2V0SW1hZ2VEYXRhKHQsaSxuLG8pLmRhdGEpO3JldHVybiBhfWNhdGNoKHMpe2UuJGVycm9yKDEwMzkpfX12YXIgcyxsO2UuVGV4dHVyZS5wcm90b3R5cGUudG9EYXRhVVJMPWksZS5UZXh0dXJlLnByb3RvdHlwZS5zYXZlVG9GaWxlPW4sZS5UZXh0dXJlLnByb3RvdHlwZS5nZXRQaXhlbDMyPW8sZS5UZXh0dXJlLnByb3RvdHlwZS5nZXRQaXhlbHM9YX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUpe2Zvcih2YXIgdD1zLnBhcnNlRnJvbVN0cmluZyhlLFwidGV4dC94bWxcIikscj10LmNoaWxkTm9kZXMubGVuZ3RoLG49MDtyPm47bisrKXt2YXIgbz10LmNoaWxkTm9kZXNbbl07aWYoMT09by5ub2RlVHlwZSlyZXR1cm4gaShvLG51bGwpfXJldHVybiBudWxsfWZ1bmN0aW9uIGkoZSx0KXtpZihcInBhcnNlcmVycm9yXCI9PWUubG9jYWxOYW1lKXRocm93IG5ldyBFcnJvcihlLnRleHRDb250ZW50KTtmb3IodmFyIHI9bmV3IG8oZS5sb2NhbE5hbWUsdCxlLnByZWZpeCxlLm5hbWVzcGFjZVVSSSxlLm5vZGVOYW1lKSxuPWUuYXR0cmlidXRlcyxzPXIuYXR0cmlidXRlcyxsPW4ubGVuZ3RoLGg9MDtsPmg7aCsrKXt2YXIgdT1uW2hdLGM9dS5uYW1lOzAhPWMuaW5kZXhPZihcInhtbG5zOlwiKSYmKHNbY109dS52YWx1ZSxyW1wiJFwiK2NdPXUudmFsdWUpfXZhciBkPWUuY2hpbGROb2RlcztsPWQubGVuZ3RoO2Zvcih2YXIgcD1yLmNoaWxkcmVuLGg9MDtsPmg7aCsrKXt2YXIgZj1kW2hdLGc9Zi5ub2RlVHlwZSx2PW51bGw7aWYoMT09Zyl2PWkoZixyKTtlbHNlIGlmKDM9PWcpe3ZhciB5PWYudGV4dENvbnRlbnQudHJpbSgpO3kmJih2PW5ldyBhKHkscikpfXYmJnAucHVzaCh2KX1yZXR1cm4gcn12YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm5vZGVUeXBlPWUsdGhpcy5wYXJlbnQ9dH1yZXR1cm4gZX0oKTt0LlhNTE5vZGU9bixfX3JlZmxlY3Qobi5wcm90b3R5cGUsXCJlZ3JldC53ZWIuWE1MTm9kZVwiKTt2YXIgbz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyl7dmFyIGE9ZS5jYWxsKHRoaXMsMSxyKXx8dGhpcztyZXR1cm4gYS5hdHRyaWJ1dGVzPXt9LGEuY2hpbGRyZW49W10sYS5sb2NhbE5hbWU9dCxhLnByZWZpeD1pLGEubmFtZXNwYWNlPW4sYS5uYW1lPW8sYX1yZXR1cm4gX19leHRlbmRzKHQsZSksdH0obik7dC5YTUw9byxfX3JlZmxlY3Qoby5wcm90b3R5cGUsXCJlZ3JldC53ZWIuWE1MXCIpO3ZhciBhPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgaT1lLmNhbGwodGhpcywzLHIpfHx0aGlzO3JldHVybiBpLnRleHQ9dCxpfXJldHVybiBfX2V4dGVuZHModCxlKSx0fShuKTt0LlhNTFRleHQ9YSxfX3JlZmxlY3QoYS5wcm90b3R5cGUsXCJlZ3JldC53ZWIuWE1MVGV4dFwiKTt2YXIgcz1uZXcgRE9NUGFyc2VyO2UuWE1MPXtwYXJzZTpyfX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIHI9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHIub25DaGFuZ2U9ZnVuY3Rpb24odCl7dmFyIGk9bmV3IGUuT3JpZW50YXRpb25FdmVudChlLkV2ZW50LkNIQU5HRSk7aS5iZXRhPXQuYmV0YSxpLmdhbW1hPXQuZ2FtbWEsaS5hbHBoYT10LmFscGhhLHIuZGlzcGF0Y2hFdmVudChpKX0scn1yZXR1cm4gX19leHRlbmRzKHIsdCksci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uXCIsdGhpcy5vbkNoYW5nZSl9LHIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uXCIsdGhpcy5vbkNoYW5nZSl9LHJ9KGUuRXZlbnREaXNwYXRjaGVyKTt0LldlYkRldmljZU9yaWVudGF0aW9uPXIsX19yZWZsZWN0KHIucHJvdG90eXBlLFwiZWdyZXQud2ViLldlYkRldmljZU9yaWVudGF0aW9uXCIsW1wiZWdyZXQuRGV2aWNlT3JpZW50YXRpb25cIl0pfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpLGVncmV0LkRldmljZU9yaWVudGF0aW9uPWVncmV0LndlYi5XZWJEZXZpY2VPcmllbnRhdGlvbjt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbih0KXtmdW5jdGlvbiByKHIpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5vblVwZGF0ZT1mdW5jdGlvbih0KXt2YXIgcj1uZXcgZS5HZW9sb2NhdGlvbkV2ZW50KGUuRXZlbnQuQ0hBTkdFKSxuPXQuY29vcmRzO3IuYWx0aXR1ZGU9bi5hbHRpdHVkZSxyLmhlYWRpbmc9bi5oZWFkaW5nLHIuYWNjdXJhY3k9bi5hY2N1cmFjeSxyLmxhdGl0dWRlPW4ubGF0aXR1ZGUsci5sb25naXR1ZGU9bi5sb25naXR1ZGUsci5zcGVlZD1uLnNwZWVkLHIuYWx0aXR1ZGVBY2N1cmFjeT1uLmFsdGl0dWRlQWNjdXJhY3ksaS5kaXNwYXRjaEV2ZW50KHIpfSxpLm9uRXJyb3I9ZnVuY3Rpb24odCl7dmFyIHI9ZS5HZW9sb2NhdGlvbkV2ZW50LlVOQVZBSUxBQkxFO3QuY29kZT09dC5QRVJNSVNTSU9OX0RFTklFRCYmKHI9ZS5HZW9sb2NhdGlvbkV2ZW50LlBFUk1JU1NJT05fREVOSUVEKTt2YXIgbj1uZXcgZS5HZW9sb2NhdGlvbkV2ZW50KGUuSU9FcnJvckV2ZW50LklPX0VSUk9SKTtuLmVycm9yVHlwZT1yLG4uZXJyb3JNZXNzYWdlPXQubWVzc2FnZSxpLmRpc3BhdGNoRXZlbnQobil9LGkuZ2VvbG9jYXRpb249bmF2aWdhdG9yLmdlb2xvY2F0aW9uLGl9cmV0dXJuIF9fZXh0ZW5kcyhyLHQpLHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZW9sb2NhdGlvbjt0P3RoaXMud2F0Y2hJZD10LndhdGNoUG9zaXRpb24odGhpcy5vblVwZGF0ZSx0aGlzLm9uRXJyb3IpOnRoaXMub25FcnJvcih7Y29kZToyLG1lc3NhZ2U6ZS5zeXMudHIoMzAwNCksUEVSTUlTU0lPTl9ERU5JRUQ6MSxQT1NJVElPTl9VTkFWQUlMQUJMRToyfSl9LHIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdlb2xvY2F0aW9uO2UuY2xlYXJXYXRjaCh0aGlzLndhdGNoSWQpfSxyfShlLkV2ZW50RGlzcGF0Y2hlcik7dC5XZWJHZW9sb2NhdGlvbj1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJHZW9sb2NhdGlvblwiLFtcImVncmV0Lkdlb2xvY2F0aW9uXCJdKSxlLkdlb2xvY2F0aW9uPWUud2ViLldlYkdlb2xvY2F0aW9ufSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe3ZhciByPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoKXt2YXIgcj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gci5vbkNoYW5nZT1mdW5jdGlvbih0KXt2YXIgaT1uZXcgZS5Nb3Rpb25FdmVudChlLkV2ZW50LkNIQU5HRSksbj17eDp0LmFjY2VsZXJhdGlvbi54LHk6dC5hY2NlbGVyYXRpb24ueSx6OnQuYWNjZWxlcmF0aW9uLnp9LG89e3g6dC5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5LngseTp0LmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkueSx6OnQuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eS56fSxhPXthbHBoYTp0LnJvdGF0aW9uUmF0ZS5hbHBoYSxiZXRhOnQucm90YXRpb25SYXRlLmJldGEsZ2FtbWE6dC5yb3RhdGlvblJhdGUuZ2FtbWF9O2kuYWNjZWxlcmF0aW9uPW4saS5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5PW8saS5yb3RhdGlvblJhdGU9YSxyLmRpc3BhdGNoRXZlbnQoaSl9LHJ9cmV0dXJuIF9fZXh0ZW5kcyhyLHQpLHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2Vtb3Rpb25cIix0aGlzLm9uQ2hhbmdlKX0sci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlbW90aW9uXCIsdGhpcy5vbkNoYW5nZSl9LHJ9KGUuRXZlbnREaXNwYXRjaGVyKTt0LldlYk1vdGlvbj1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJNb3Rpb25cIixbXCJlZ3JldC5Nb3Rpb25cIl0pLGUuTW90aW9uPWUud2ViLldlYk1vdGlvbn0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiByKHQpe3N3aXRjaChudWxsPT1pJiYoaT17ZXJyb3I6Y29uc29sZS5lcnJvcixkZWJ1Zzpjb25zb2xlLmRlYnVnLHdhcm46Y29uc29sZS53YXJuLGluZm86Y29uc29sZS5pbmZvLGxvZzpjb25zb2xlLmxvZ30pLHQpe2Nhc2UgZS5Mb2dnZXIuT0ZGOmNvbnNvbGUuZXJyb3I9ZnVuY3Rpb24oKXt9O2Nhc2UgZS5Mb2dnZXIuRVJST1I6Y29uc29sZS53YXJuPWZ1bmN0aW9uKCl7fTtjYXNlIGUuTG9nZ2VyLldBUk46Y29uc29sZS5pbmZvPWZ1bmN0aW9uKCl7fSxjb25zb2xlLmxvZz1mdW5jdGlvbigpe307Y2FzZSBlLkxvZ2dlci5JTkZPOmNvbnNvbGUuZGVidWc9ZnVuY3Rpb24oKXt9fXN3aXRjaCh0KXtjYXNlIGUuTG9nZ2VyLkFMTDpjYXNlIGUuTG9nZ2VyW1widHJ1ZVwiXTpjb25zb2xlLmRlYnVnPWkuZGVidWc7Y2FzZSBlLkxvZ2dlci5JTkZPOmNvbnNvbGUubG9nPWkubG9nLGNvbnNvbGUuaW5mbz1pLmluZm87Y2FzZSBlLkxvZ2dlci5XQVJOOmNvbnNvbGUud2Fybj1pLndhcm47Y2FzZSBlLkxvZ2dlci5FUlJPUjpjb25zb2xlLmVycm9yPWkuZXJyb3J9fXZhciBpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLkxvZ2dlcixcImxvZ0xldmVsXCIse3NldDpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSksdm9pZCAwPT13aW5kb3cuSFRNTFZpZGVvRWxlbWVudCYmKHdpbmRvdy5IVE1MVmlkZW9FbGVtZW50PUhUTUxEaXZFbGVtZW50KTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1cImVncmV0LkJpdG1hcERhdGFcIjtlLnJlZ2lzdGVyQ2xhc3MoSFRNTEltYWdlRWxlbWVudCxyKSxlLnJlZ2lzdGVyQ2xhc3MoSFRNTENhbnZhc0VsZW1lbnQsciksZS5yZWdpc3RlckNsYXNzKEhUTUxWaWRlb0VsZW1lbnQscil9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gdC5oYXNoQ29kZT10LiRoYXNoQ29kZT1lLiRoYXNoQ291bnQrKyx0fWUuJHRvQml0bWFwRGF0YT10fShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmNhbGw9ZnVuY3Rpb24oZSx0KXt9LGUuYWRkQ2FsbGJhY2s9ZnVuY3Rpb24oZSx0KXt9LGV9KCk7dC5XZWJFeHRlcm5hbEludGVyZmFjZT1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJFeHRlcm5hbEludGVyZmFjZVwiLFtcImVncmV0LkV4dGVybmFsSW50ZXJmYWNlXCJdKSxlLkV4dGVybmFsSW50ZXJmYWNlPXJ9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0LmZyYWdtZW50U3JjPVwicHJlY2lzaW9uIGxvd3AgZmxvYXQ7XFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxudmFyeWluZyB2ZWM0IHZDb2xvcjtcXG52b2lkIG1haW4odm9pZCkge1xcbmdsX0ZyYWdDb2xvciA9IHZDb2xvcjtcXG59XCIsdH1yZXR1cm4gX19leHRlbmRzKHQsZSksdH0oZS5FZ3JldFNoYWRlcik7ZS5QcmltaXRpdmVTaGFkZXI9dCxfX3JlZmxlY3QodC5wcm90b3R5cGUsXCJlZ3JldC53ZWIuUHJpbWl0aXZlU2hhZGVyXCIpfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5mcmFnbWVudFNyYz1cInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O3VuaWZvcm0gdmVjMiBibHVyO3VuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO3ZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO3VuaWZvcm0gdmVjMiB1VGV4dHVyZVNpemU7dm9pZCBtYWluKCl7Y29uc3QgaW50IHNhbXBsZVJhZGl1cyA9IDU7Y29uc3QgaW50IHNhbXBsZXMgPSBzYW1wbGVSYWRpdXMgKiAyICsgMTt2ZWMyIGJsdXJVdiA9IGJsdXIgLyB1VGV4dHVyZVNpemU7dmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMCk7dmVjMiB1diA9IHZlYzIoMC4wLCAwLjApO2JsdXJVdiAvPSBmbG9hdChzYW1wbGVSYWRpdXMpO2ZvciAoaW50IGkgPSAtc2FtcGxlUmFkaXVzOyBpIDw9IHNhbXBsZVJhZGl1czsgaSsrKSB7dXYueCA9IHZUZXh0dXJlQ29vcmQueCArIGZsb2F0KGkpICogYmx1clV2Lng7dXYueSA9IHZUZXh0dXJlQ29vcmQueSArIGZsb2F0KGkpICogYmx1clV2Lnk7Y29sb3IgKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB1dik7fWNvbG9yIC89IGZsb2F0KHNhbXBsZXMpO2dsX0ZyYWdDb2xvciA9IGNvbG9yO31cIix0LnVuaWZvcm1zPXtwcm9qZWN0aW9uVmVjdG9yOnt0eXBlOlwiMmZcIix2YWx1ZTp7eDowLHk6MH0sZGlydHk6ITB9LGJsdXI6e3R5cGU6XCIyZlwiLHZhbHVlOnt4OjIseToyfSxkaXJ0eTohMH0sdVRleHR1cmVTaXplOnt0eXBlOlwiMmZcIix2YWx1ZTp7eDoxMDAseToxMDB9LGRpcnR5OiEwfX0sdH1yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUuc2V0Qmx1cj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMudW5pZm9ybXMuYmx1cjsoci52YWx1ZS54IT1lfHxyLnZhbHVlLnkhPXQpJiYoci52YWx1ZS54PWUsci52YWx1ZS55PXQsci5kaXJ0eT0hMCl9LHQucHJvdG90eXBlLnNldFRleHR1cmVTaXplPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy51bmlmb3Jtcy51VGV4dHVyZVNpemU7KGUhPXIudmFsdWUueHx8dCE9ci52YWx1ZS55KSYmKHIudmFsdWUueD1lLHIudmFsdWUueT10LHIuZGlydHk9ITApfSx0fShlLlRleHR1cmVTaGFkZXIpO2UuQmx1clNoYWRlcj10LF9fcmVmbGVjdCh0LnByb3RvdHlwZSxcImVncmV0LndlYi5CbHVyU2hhZGVyXCIpfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5mcmFnbWVudFNyYz1cInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XFxudW5pZm9ybSBtYXQ0IG1hdHJpeDtcXG51bmlmb3JtIHZlYzQgY29sb3JBZGQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxudm9pZCBtYWluKHZvaWQpIHtcXG52ZWM0IHRleENvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcXG5pZih0ZXhDb2xvci5hID4gMC4pIHt0ZXhDb2xvciA9IHZlYzQodGV4Q29sb3IucmdiIC8gdGV4Q29sb3IuYSwgdGV4Q29sb3IuYSk7XFxufXZlYzQgbG9jQ29sb3IgPSBjbGFtcCh0ZXhDb2xvciAqIG1hdHJpeCArIGNvbG9yQWRkLCAwLiwgMS4pO1xcbmdsX0ZyYWdDb2xvciA9IHZDb2xvciAqIHZlYzQobG9jQ29sb3IucmdiICogbG9jQ29sb3IuYSwgbG9jQ29sb3IuYSk7XFxufVwiLHQudW5pZm9ybXM9e3Byb2plY3Rpb25WZWN0b3I6e3R5cGU6XCIyZlwiLHZhbHVlOnt4OjAseTowfSxkaXJ0eTohMH0sbWF0cml4Ont0eXBlOlwibWF0NFwiLHZhbHVlOlsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSxkaXJ0eTohMH0sY29sb3JBZGQ6e3R5cGU6XCI0ZlwiLHZhbHVlOnt4OjAseTowLHo6MCx3OjB9LGRpcnR5OiEwfX0sdH1yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUuc2V0TWF0cml4PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudW5pZm9ybXMubWF0cml4Oyh0LnZhbHVlWzBdIT1lWzBdfHx0LnZhbHVlWzBdIT1lWzBdfHx0LnZhbHVlWzFdIT1lWzFdfHx0LnZhbHVlWzJdIT1lWzJdfHx0LnZhbHVlWzNdIT1lWzNdfHx0LnZhbHVlWzRdIT1lWzVdfHx0LnZhbHVlWzVdIT1lWzZdfHx0LnZhbHVlWzZdIT1lWzddfHx0LnZhbHVlWzddIT1lWzhdfHx0LnZhbHVlWzhdIT1lWzEwXXx8dC52YWx1ZVs5XSE9ZVsxMV18fHQudmFsdWVbMTBdIT1lWzEyXXx8dC52YWx1ZVsxMV0hPWVbMTNdfHx0LnZhbHVlWzEyXSE9ZVsxNV18fHQudmFsdWVbMTNdIT1lWzE2XXx8dC52YWx1ZVsxNF0hPWVbMTddfHx0LnZhbHVlWzE1XSE9ZVsxOF0pJiYodC52YWx1ZVswXT1lWzBdLHQudmFsdWVbMV09ZVsxXSx0LnZhbHVlWzJdPWVbMl0sdC52YWx1ZVszXT1lWzNdLHQudmFsdWVbNF09ZVs1XSx0LnZhbHVlWzVdPWVbNl0sdC52YWx1ZVs2XT1lWzddLHQudmFsdWVbN109ZVs4XSx0LnZhbHVlWzhdPWVbMTBdLHQudmFsdWVbOV09ZVsxMV0sdC52YWx1ZVsxMF09ZVsxMl0sdC52YWx1ZVsxMV09ZVsxM10sdC52YWx1ZVsxMl09ZVsxNV0sdC52YWx1ZVsxM109ZVsxNl0sdC52YWx1ZVsxNF09ZVsxN10sdC52YWx1ZVsxNV09ZVsxOF0sdC5kaXJ0eT0hMCk7dmFyIHI9dGhpcy51bmlmb3Jtcy5jb2xvckFkZDsoci52YWx1ZS54IT1lWzRdLzI1NXx8ci52YWx1ZS55IT1lWzldLzI1NXx8ci52YWx1ZS56IT1lWzE0XS8yNTV8fHIudmFsdWUudyE9ZVsxOV0vMjU1KSYmKHIudmFsdWUueD1lWzRdLzI1NSxyLnZhbHVlLnk9ZVs5XS8yNTUsci52YWx1ZS56PWVbMTRdLzI1NSxyLnZhbHVlLnc9ZVsxOV0vMjU1LHIuZGlydHk9ITApfSx0fShlLlRleHR1cmVTaGFkZXIpO2UuQ29sb3JUcmFuc2Zvcm1TaGFkZXI9dCxfX3JlZmxlY3QodC5wcm90b3R5cGUsXCJlZ3JldC53ZWIuQ29sb3JUcmFuc2Zvcm1TaGFkZXJcIil9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7dmFyIGVncmV0OyFmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0LmZyYWdtZW50U3JjPVtcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcInVuaWZvcm0gZmxvYXQgZGlzdGFuY2U7XCIsXCJ1bmlmb3JtIGZsb2F0IGFuZ2xlO1wiLFwidW5pZm9ybSB2ZWM0IGNvbG9yO1wiLFwidW5pZm9ybSBmbG9hdCBhbHBoYTtcIixcInVuaWZvcm0gZmxvYXQgYmx1clg7XCIsXCJ1bmlmb3JtIGZsb2F0IGJsdXJZO1wiLFwidW5pZm9ybSBmbG9hdCBzdHJlbmd0aDtcIixcInVuaWZvcm0gZmxvYXQgaW5uZXI7XCIsXCJ1bmlmb3JtIGZsb2F0IGtub2Nrb3V0O1wiLFwidW5pZm9ybSBmbG9hdCBoaWRlT2JqZWN0O1wiLFwidW5pZm9ybSB2ZWMyIHVUZXh0dXJlU2l6ZTt2ZWMyIHB4ID0gdmVjMigxLjAgLyB1VGV4dHVyZVNpemUueCwgMS4wIC8gdVRleHR1cmVTaXplLnkpO1wiLFwiZmxvYXQgcmFuZG9tKHZlYzMgc2NhbGUsIGZsb2F0IHNlZWQpXCIsXCJ7XCIsXCJyZXR1cm4gZnJhY3Qoc2luKGRvdChnbF9GcmFnQ29vcmQueHl6ICsgc2VlZCwgc2NhbGUpKSAqIDQzNzU4LjU0NTMgKyBzZWVkKTtcIixcIn1cIixcInZvaWQgbWFpbih2b2lkKSB7XCIsXCJjb25zdCBmbG9hdCBsaW5lYXJTYW1wbGluZ1RpbWVzID0gNy4wO1wiLFwiY29uc3QgZmxvYXQgY2lyY2xlU2FtcGxpbmdUaW1lcyA9IDEyLjA7XCIsXCJ2ZWM0IG93bkNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcInZlYzQgY3VyQ29sb3I7XCIsXCJmbG9hdCB0b3RhbEFscGhhID0gMC4wO1wiLFwiZmxvYXQgbWF4VG90YWxBbHBoYSA9IDAuMDtcIixcImZsb2F0IGN1ckRpc3RhbmNlWCA9IDAuMDtcIixcImZsb2F0IGN1ckRpc3RhbmNlWSA9IDAuMDtcIixcImZsb2F0IG9mZnNldFggPSBkaXN0YW5jZSAqIGNvcyhhbmdsZSkgKiBweC54O1wiLFwiZmxvYXQgb2Zmc2V0WSA9IGRpc3RhbmNlICogc2luKGFuZ2xlKSAqIHB4Lnk7XCIsXCJjb25zdCBmbG9hdCBQSSA9IDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQ7XCIsXCJmbG9hdCBjb3NBbmdsZTtcIixcImZsb2F0IHNpbkFuZ2xlO1wiLFwiZmxvYXQgb2Zmc2V0ID0gUEkgKiAyLjAgLyBjaXJjbGVTYW1wbGluZ1RpbWVzICogcmFuZG9tKHZlYzMoMTIuOTg5OCwgNzguMjMzLCAxNTEuNzE4MiksIDAuMCk7XCIsXCJmbG9hdCBzdGVwWCA9IGJsdXJYICogcHgueCAvIGxpbmVhclNhbXBsaW5nVGltZXM7XCIsXCJmbG9hdCBzdGVwWSA9IGJsdXJZICogcHgueSAvIGxpbmVhclNhbXBsaW5nVGltZXM7XCIsXCJmb3IgKGZsb2F0IGEgPSAwLjA7IGEgPD0gUEkgKiAyLjA7IGEgKz0gUEkgKiAyLjAgLyBjaXJjbGVTYW1wbGluZ1RpbWVzKSB7XCIsXCJjb3NBbmdsZSA9IGNvcyhhICsgb2Zmc2V0KTtcIixcInNpbkFuZ2xlID0gc2luKGEgKyBvZmZzZXQpO1wiLFwiZm9yIChmbG9hdCBpID0gMS4wOyBpIDw9IGxpbmVhclNhbXBsaW5nVGltZXM7IGkrKykge1wiLFwiY3VyRGlzdGFuY2VYID0gaSAqIHN0ZXBYICogY29zQW5nbGU7XCIsXCJjdXJEaXN0YW5jZVkgPSBpICogc3RlcFkgKiBzaW5BbmdsZTtcIixcImN1ckNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCArIGN1ckRpc3RhbmNlWCAtIG9mZnNldFgsIHZUZXh0dXJlQ29vcmQueSArIGN1ckRpc3RhbmNlWSArIG9mZnNldFkpKTtcIixcInRvdGFsQWxwaGEgKz0gKGxpbmVhclNhbXBsaW5nVGltZXMgLSBpKSAqIGN1ckNvbG9yLmE7XCIsXCJtYXhUb3RhbEFscGhhICs9IChsaW5lYXJTYW1wbGluZ1RpbWVzIC0gaSk7XCIsXCJ9XCIsXCJ9XCIsXCJvd25Db2xvci5hID0gbWF4KG93bkNvbG9yLmEsIDAuMDAwMSk7XCIsXCJvd25Db2xvci5yZ2IgPSBvd25Db2xvci5yZ2IgLyBvd25Db2xvci5hO1wiLFwiZmxvYXQgb3V0ZXJHbG93QWxwaGEgPSAodG90YWxBbHBoYSAvIG1heFRvdGFsQWxwaGEpICogc3RyZW5ndGggKiBhbHBoYSAqICgxLiAtIGlubmVyKSAqIG1heChtaW4oaGlkZU9iamVjdCwga25vY2tvdXQpLCAxLiAtIG93bkNvbG9yLmEpO1wiLFwiZmxvYXQgaW5uZXJHbG93QWxwaGEgPSAoKG1heFRvdGFsQWxwaGEgLSB0b3RhbEFscGhhKSAvIG1heFRvdGFsQWxwaGEpICogc3RyZW5ndGggKiBhbHBoYSAqIGlubmVyICogb3duQ29sb3IuYTtcIixcIm93bkNvbG9yLmEgPSBtYXgob3duQ29sb3IuYSAqIGtub2Nrb3V0ICogKDEuIC0gaGlkZU9iamVjdCksIDAuMDAwMSk7XCIsXCJ2ZWMzIG1peDEgPSBtaXgob3duQ29sb3IucmdiLCBjb2xvci5yZ2IsIGlubmVyR2xvd0FscGhhIC8gKGlubmVyR2xvd0FscGhhICsgb3duQ29sb3IuYSkpO1wiLFwidmVjMyBtaXgyID0gbWl4KG1peDEsIGNvbG9yLnJnYiwgb3V0ZXJHbG93QWxwaGEgLyAoaW5uZXJHbG93QWxwaGEgKyBvd25Db2xvci5hICsgb3V0ZXJHbG93QWxwaGEpKTtcIixcImZsb2F0IHJlc3VsdEFscGhhID0gbWluKG93bkNvbG9yLmEgKyBvdXRlckdsb3dBbHBoYSArIGlubmVyR2xvd0FscGhhLCAxLik7XCIsXCJnbF9GcmFnQ29sb3IgPSB2ZWM0KG1peDIgKiByZXN1bHRBbHBoYSwgcmVzdWx0QWxwaGEpO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLHQudW5pZm9ybXM9e3Byb2plY3Rpb25WZWN0b3I6e3R5cGU6XCIyZlwiLHZhbHVlOnt4OjAseTowfSxkaXJ0eTohMH0sZGlzdGFuY2U6e3R5cGU6XCIxZlwiLHZhbHVlOjE1LGRpcnR5OiEwfSxhbmdsZTp7dHlwZTpcIjFmXCIsdmFsdWU6MSxkaXJ0eTohMH0sY29sb3I6e3R5cGU6XCI0ZlwiLHZhbHVlOnt4OjEseTowLHo6MCx3OjB9LGRpcnR5OiEwfSxhbHBoYTp7dHlwZTpcIjFmXCIsdmFsdWU6MSxkaXJ0eTohMH0sYmx1clg6e3R5cGU6XCIxZlwiLHZhbHVlOjEsZGlydHk6ITB9LGJsdXJZOnt0eXBlOlwiMWZcIix2YWx1ZToxLGRpcnR5OiEwfSxzdHJlbmd0aDp7dHlwZTpcIjFmXCIsdmFsdWU6MSxkaXJ0eTohMH0saW5uZXI6e3R5cGU6XCIxZlwiLHZhbHVlOjEsZGlydHk6ITB9LGtub2Nrb3V0Ont0eXBlOlwiMWZcIix2YWx1ZToxLGRpcnR5OiEwfSxoaWRlT2JqZWN0Ont0eXBlOlwiMWZcIix2YWx1ZTowLGRpcnR5OiEwfSx1VGV4dHVyZVNpemU6e3R5cGU6XCIyZlwiLHZhbHVlOnt4OjEwMCx5OjEwMH0sZGlydHk6ITB9fSx0fXJldHVybiBfX2V4dGVuZHModCxlKSx0LnByb3RvdHlwZS5zZXREaXN0YW5jZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnVuaWZvcm1zLmRpc3RhbmNlO3QudmFsdWUhPWUmJih0LnZhbHVlPWUsdC5kaXJ0eT0hMCl9LHQucHJvdG90eXBlLnNldEFuZ2xlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudW5pZm9ybXMuYW5nbGU7dC52YWx1ZSE9ZSYmKHQudmFsdWU9ZSx0LmRpcnR5PSEwKX0sdC5wcm90b3R5cGUuc2V0Q29sb3I9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMudW5pZm9ybXMuY29sb3I7KGkudmFsdWUueCE9ZXx8aS52YWx1ZS55IT10fHxpLnZhbHVlLnohPXIpJiYoaS52YWx1ZS54PWUsaS52YWx1ZS55PXQsaS52YWx1ZS56PXIsaS5kaXJ0eT0hMCl9LHQucHJvdG90eXBlLnNldEFscGhhPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudW5pZm9ybXMuYWxwaGE7dC52YWx1ZSE9ZSYmKHQudmFsdWU9ZSx0LmRpcnR5PSEwKX0sdC5wcm90b3R5cGUuc2V0Qmx1clg9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy51bmlmb3Jtcy5ibHVyWDt0LnZhbHVlIT1lJiYodC52YWx1ZT1lLHQuZGlydHk9ITApfSx0LnByb3RvdHlwZS5zZXRCbHVyWT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnVuaWZvcm1zLmJsdXJZO3QudmFsdWUhPWUmJih0LnZhbHVlPWUsdC5kaXJ0eT0hMCl9LHQucHJvdG90eXBlLnNldFN0cmVuZ3RoPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudW5pZm9ybXMuc3RyZW5ndGg7dC52YWx1ZSE9ZSYmKHQudmFsdWU9ZSx0LmRpcnR5PSEwKX0sdC5wcm90b3R5cGUuc2V0SW5uZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy51bmlmb3Jtcy5pbm5lcjt0LnZhbHVlIT1lJiYodC52YWx1ZT1lLHQuZGlydHk9ITApfSx0LnByb3RvdHlwZS5zZXRLbm9ja291dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnVuaWZvcm1zLmtub2Nrb3V0O3QudmFsdWUhPWUmJih0LnZhbHVlPWUsdC5kaXJ0eT0hMCl9LHQucHJvdG90eXBlLnNldEhpZGVPYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy51bmlmb3Jtcy5oaWRlT2JqZWN0O3QudmFsdWUhPWUmJih0LnZhbHVlPWUsdC5kaXJ0eT0hMCl9LHQucHJvdG90eXBlLnNldFRleHR1cmVTaXplPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy51bmlmb3Jtcy51VGV4dHVyZVNpemU7KGUhPXIudmFsdWUueHx8dCE9ci52YWx1ZS55KSYmKHIudmFsdWUueD1lLHIudmFsdWUueT10LHIuZGlydHk9ITApfSx0fShlLlRleHR1cmVTaGFkZXIpO2UuR2xvd1NoYWRlcj10LF9fcmVmbGVjdCh0LnByb3RvdHlwZSxcImVncmV0LndlYi5HbG93U2hhZGVyXCIpfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt0aGlzLmdsPW51bGwsdGhpcy5tYXhBdHRpYnM9MTAsdGhpcy5hdHRyaWJTdGF0ZT1bXSx0aGlzLnRlbXBBdHRyaWJTdGF0ZT1bXSx0aGlzLmN1cnJlbnRTaGFkZXI9bnVsbCx0aGlzLmRlZmF1bHRTaGFkZXI9bnVsbCx0aGlzLnByaW1pdGl2ZVNoYWRlcj1udWxsLHRoaXMuY29sb3JUcmFuc2Zvcm1TaGFkZXI9bnVsbCx0aGlzLmJsdXJTaGFkZXI9bnVsbCx0aGlzLmdsb3dTaGFkZXI9bnVsbDtmb3IodmFyIHQ9MDt0PHRoaXMubWF4QXR0aWJzO3QrKyl0aGlzLmF0dHJpYlN0YXRlW3RdPSExO3RoaXMuc2V0Q29udGV4dChlKX1yZXR1cm4gdC5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbih0KXt0aGlzLmdsPXQsdGhpcy5wcmltaXRpdmVTaGFkZXI9bmV3IGUuUHJpbWl0aXZlU2hhZGVyKHQpLHRoaXMuZGVmYXVsdFNoYWRlcj1uZXcgZS5UZXh0dXJlU2hhZGVyKHQpLHRoaXMuY29sb3JUcmFuc2Zvcm1TaGFkZXI9bmV3IGUuQ29sb3JUcmFuc2Zvcm1TaGFkZXIodCksdGhpcy5nbG93U2hhZGVyPW5ldyBlLkdsb3dTaGFkZXIodCksdGhpcy5ibHVyU2hhZGVyPW5ldyBlLkJsdXJTaGFkZXIodCksdGhpcy5wcmltaXRpdmVTaGFkZXIuaW5pdCgpLHRoaXMuZGVmYXVsdFNoYWRlci5pbml0KCksdGhpcy5jb2xvclRyYW5zZm9ybVNoYWRlci5pbml0KCksdGhpcy5ibHVyU2hhZGVyLmluaXQoKSx0aGlzLmdsb3dTaGFkZXIuaW5pdCgpfSx0LnByb3RvdHlwZS5hY3RpdmF0ZVNoYWRlcj1mdW5jdGlvbihlLHQpe3RoaXMuY3VycmVudFNoYWRlciE9ZSYmKHRoaXMuZ2wudXNlUHJvZ3JhbShlLnByb2dyYW0pLHRoaXMuc2V0QXR0cmlicyhlLmF0dHJpYnV0ZXMpLGUuc2V0QXR0cmliUG9pbnRlcih0KSx0aGlzLmN1cnJlbnRTaGFkZXI9ZSl9LHQucHJvdG90eXBlLnNldEF0dHJpYnM9ZnVuY3Rpb24oZSl7dmFyIHQscjtmb3Iocj10aGlzLnRlbXBBdHRyaWJTdGF0ZS5sZW5ndGgsdD0wO3I+dDt0KyspdGhpcy50ZW1wQXR0cmliU3RhdGVbdF09ITE7Zm9yKHI9ZS5sZW5ndGgsdD0wO3I+dDt0Kyspe3ZhciBpPWVbdF07dGhpcy50ZW1wQXR0cmliU3RhdGVbaV09ITB9dmFyIG49dGhpcy5nbDtmb3Iocj10aGlzLmF0dHJpYlN0YXRlLmxlbmd0aCx0PTA7cj50O3QrKyl0aGlzLmF0dHJpYlN0YXRlW3RdIT09dGhpcy50ZW1wQXR0cmliU3RhdGVbdF0mJih0aGlzLmF0dHJpYlN0YXRlW3RdPXRoaXMudGVtcEF0dHJpYlN0YXRlW3RdLHRoaXMudGVtcEF0dHJpYlN0YXRlW3RdP24uZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodCk6bi5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkodCkpfSx0fSgpO2UuV2ViR0xTaGFkZXJNYW5hZ2VyPXQsX19yZWZsZWN0KHQucHJvdG90eXBlLFwiZWdyZXQud2ViLldlYkdMU2hhZGVyTWFuYWdlclwiKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmRyYXdEYXRhPVtdLHRoaXMuZHJhd0RhdGFMZW49MH1yZXR1cm4gZS5wcm90b3R5cGUucHVzaERyYXdSZWN0PWZ1bmN0aW9uKCl7aWYoMD09dGhpcy5kcmF3RGF0YUxlbnx8MSE9dGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuLTFdLnR5cGUpe3ZhciBlPXRoaXMuZHJhd0RhdGFbdGhpcy5kcmF3RGF0YUxlbl18fHt9O2UudHlwZT0xLGUuY291bnQ9MCx0aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dPWUsdGhpcy5kcmF3RGF0YUxlbisrfXRoaXMuZHJhd0RhdGFbdGhpcy5kcmF3RGF0YUxlbi0xXS5jb3VudCs9Mn0sZS5wcm90b3R5cGUucHVzaERyYXdUZXh0dXJlPWZ1bmN0aW9uKGUsdCxyLGksbil7aWYodm9pZCAwPT09dCYmKHQ9Mikscil7dmFyIG89dGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXXx8e307by50eXBlPTAsby50ZXh0dXJlPWUsby5maWx0ZXI9cixvLmNvdW50PXQsby50ZXh0dXJlV2lkdGg9aSxvLnRleHR1cmVIZWlnaHQ9bix0aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dPW8sdGhpcy5kcmF3RGF0YUxlbisrfWVsc2V7aWYoMD09dGhpcy5kcmF3RGF0YUxlbnx8MCE9dGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuLTFdLnR5cGV8fGUhPXRoaXMuZHJhd0RhdGFbdGhpcy5kcmF3RGF0YUxlbi0xXS50ZXh0dXJlfHx0aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW4tMV0uZmlsdGVyKXt2YXIgbz10aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dfHx7fTtvLnR5cGU9MCxvLnRleHR1cmU9ZSxvLmNvdW50PTAsdGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXT1vLHRoaXMuZHJhd0RhdGFMZW4rK310aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW4tMV0uY291bnQrPXR9fSxlLnByb3RvdHlwZS5wdXNoUHVzaE1hc2s9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIHQ9dGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXXx8e307dC50eXBlPTIsdC5jb3VudD0yKmUsdGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXT10LHRoaXMuZHJhd0RhdGFMZW4rK30sZS5wcm90b3R5cGUucHVzaFBvcE1hc2s9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIHQ9dGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXXx8e307dC50eXBlPTMsdC5jb3VudD0yKmUsdGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXT10LHRoaXMuZHJhd0RhdGFMZW4rK30sZS5wcm90b3R5cGUucHVzaFNldEJsZW5kPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmRyYXdEYXRhTGVuLHI9ITEsaT10LTE7aT49MDtpLS0pe3ZhciBuPXRoaXMuZHJhd0RhdGFbaV07aWYobil7aWYoKDA9PW4udHlwZXx8MT09bi50eXBlKSYmKHI9ITApLCFyJiY0PT1uLnR5cGUpe3RoaXMuZHJhd0RhdGEuc3BsaWNlKGksMSksdGhpcy5kcmF3RGF0YUxlbi0tO2NvbnRpbnVlfWlmKDQ9PW4udHlwZSl7aWYobi52YWx1ZT09ZSlyZXR1cm47YnJlYWt9fX12YXIgbz10aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dfHx7fTtvLnR5cGU9NCxvLnZhbHVlPWUsdGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXT1vLHRoaXMuZHJhd0RhdGFMZW4rK30sZS5wcm90b3R5cGUucHVzaFJlc2l6ZT1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcy5kcmF3RGF0YVt0aGlzLmRyYXdEYXRhTGVuXXx8e307aS50eXBlPTUsaS5idWZmZXI9ZSxpLndpZHRoPXQsaS5oZWlnaHQ9cix0aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dPWksdGhpcy5kcmF3RGF0YUxlbisrfSxlLnByb3RvdHlwZS5wdXNoQ2xlYXJDb2xvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZHJhd0RhdGFbdGhpcy5kcmF3RGF0YUxlbl18fHt9O2UudHlwZT02LHRoaXMuZHJhd0RhdGFbdGhpcy5kcmF3RGF0YUxlbl09ZSx0aGlzLmRyYXdEYXRhTGVuKyt9LGUucHJvdG90eXBlLnB1c2hBY3RpdmF0ZUJ1ZmZlcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5kcmF3RGF0YUxlbixyPSExLGk9dC0xO2k+PTA7aS0tKXt2YXIgbj10aGlzLmRyYXdEYXRhW2ldOyFufHwoNCE9bi50eXBlJiY3IT1uLnR5cGUmJihyPSEwKSxyfHw3IT1uLnR5cGUpfHwodGhpcy5kcmF3RGF0YS5zcGxpY2UoaSwxKSx0aGlzLmRyYXdEYXRhTGVuLS0pfXZhciBvPXRoaXMuZHJhd0RhdGFbdGhpcy5kcmF3RGF0YUxlbl18fHt9O28udHlwZT03LG8uYnVmZmVyPWUsby53aWR0aD1lLnJvb3RSZW5kZXJUYXJnZXQud2lkdGgsby5oZWlnaHQ9ZS5yb290UmVuZGVyVGFyZ2V0LmhlaWdodCx0aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dPW8sdGhpcy5kcmF3RGF0YUxlbisrfSxlLnByb3RvdHlwZS5wdXNoRW5hYmxlU2Npc3Nvcj1mdW5jdGlvbihlLHQscixpKXt2YXIgbj10aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dfHx7fTtuLnR5cGU9OCxuLng9ZSxuLnk9dCxuLndpZHRoPXIsbi5oZWlnaHQ9aSx0aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dPW4sdGhpcy5kcmF3RGF0YUxlbisrfSxlLnByb3RvdHlwZS5wdXNoRGlzYWJsZVNjaXNzb3I9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dfHx7fTtlLnR5cGU9OSx0aGlzLmRyYXdEYXRhW3RoaXMuZHJhd0RhdGFMZW5dPWUsdGhpcy5kcmF3RGF0YUxlbisrfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8dGhpcy5kcmF3RGF0YUxlbjtlKyspe3ZhciB0PXRoaXMuZHJhd0RhdGFbZV07dC50eXBlPTAsdC5jb3VudD0wLHQudGV4dHVyZT1udWxsLHQuZmlsdGVyPW51bGwsdC51dj1udWxsLHQudmFsdWU9XCJcIix0LmJ1ZmZlcj1udWxsLHQud2lkdGg9MCx0LmhlaWdodD0wfXRoaXMuZHJhd0RhdGFMZW49MH0sZX0oKTtlLldlYkdMRHJhd0NtZE1hbmFnZXI9dCxfX3JlZmxlY3QodC5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViR0xEcmF3Q21kTWFuYWdlclwiKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLnNpemU9MmUzLHRoaXMudmVydGV4TWF4U2l6ZT00KnRoaXMuc2l6ZSx0aGlzLmluZGljZXNNYXhTaXplPTYqdGhpcy5zaXplLHRoaXMudmVydFNpemU9NSx0aGlzLnZlcnRpY2VzPW51bGwsdGhpcy5pbmRpY2VzPW51bGwsdGhpcy5pbmRpY2VzRm9yTWVzaD1udWxsLHRoaXMudmVydGV4SW5kZXg9MCx0aGlzLmluZGV4SW5kZXg9MCx0aGlzLmhhc01lc2g9ITE7dmFyIGU9dGhpcy52ZXJ0ZXhNYXhTaXplKnRoaXMudmVydFNpemUsdD10aGlzLmluZGljZXNNYXhTaXplO3RoaXMudmVydGljZXM9bmV3IEZsb2F0MzJBcnJheShlKSx0aGlzLmluZGljZXM9bmV3IFVpbnQxNkFycmF5KHQpLHRoaXMuaW5kaWNlc0Zvck1lc2g9bmV3IFVpbnQxNkFycmF5KHQpO2Zvcih2YXIgcj0wLGk9MDt0PnI7cis9NixpKz00KXRoaXMuaW5kaWNlc1tyKzBdPWkrMCx0aGlzLmluZGljZXNbcisxXT1pKzEsdGhpcy5pbmRpY2VzW3IrMl09aSsyLHRoaXMuaW5kaWNlc1tyKzNdPWkrMCx0aGlzLmluZGljZXNbcis0XT1pKzIsdGhpcy5pbmRpY2VzW3IrNV09aSszfXJldHVybiBlLnByb3RvdHlwZS5yZWFjaE1heFNpemU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9NCksdm9pZCAwPT09dCYmKHQ9NiksdGhpcy52ZXJ0ZXhJbmRleD50aGlzLnZlcnRleE1heFNpemUtZXx8dGhpcy5pbmRleEluZGV4PnRoaXMuaW5kaWNlc01heFNpemUtdH0sZS5wcm90b3R5cGUuZ2V0VmVydGljZXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZlcnRpY2VzLnN1YmFycmF5KDAsdGhpcy52ZXJ0ZXhJbmRleCp0aGlzLnZlcnRTaXplKTtyZXR1cm4gZX0sZS5wcm90b3R5cGUuZ2V0SW5kaWNlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGljZXN9LGUucHJvdG90eXBlLmdldE1lc2hJbmRpY2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kaWNlc0Zvck1lc2h9LGUucHJvdG90eXBlLmNoYW5nZVRvTWVzaEluZGljZXM9ZnVuY3Rpb24oKXtpZighdGhpcy5oYXNNZXNoKXtmb3IodmFyIGU9MCx0PXRoaXMuaW5kZXhJbmRleDt0PmU7KytlKXRoaXMuaW5kaWNlc0Zvck1lc2hbZV09dGhpcy5pbmRpY2VzW2VdO3RoaXMuaGFzTWVzaD0hMH19LGUucHJvdG90eXBlLmlzTWVzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc01lc2h9LGUucHJvdG90eXBlLmNhY2hlQXJyYXlzPWZ1bmN0aW9uKGUsdCxyLGksbixvLGEscyxsLGgsdSxjLGQscCxmKXt2YXIgZz1lLHY9Zy5hLHk9Zy5iLG09Zy5jLHg9Zy5kLGI9Zy50eCx3PWcudHk7KDAhPWF8fDAhPXMpJiZnLmFwcGVuZCgxLDAsMCwxLGEscyksKG4vbCE9MXx8by9oIT0xKSYmZy5hcHBlbmQobC9uLDAsMCxoL28sMCwwKTt2YXIgRT1nLmEsVD1nLmIsUz1nLmMsXz1nLmQsQz1nLnR4LFI9Zy50eTtpZihnLmE9dixnLmI9eSxnLmM9bSxnLmQ9eCxnLnR4PWIsZy50eT13LHApe3ZhciBMPXRoaXMudmVydGljZXMsRD10aGlzLnZlcnRleEluZGV4KnRoaXMudmVydFNpemUsQT0wLCQ9MCxNPTAsST0wLE89MCxCPTAsUD0wO2ZvcihBPTAsTT1kLmxlbmd0aDtNPkE7QSs9MikkPTUqQS8yLEI9cFtBXSxQPXBbQSsxXSxJPWRbQV0sTz1kW0ErMV0sTFtEKyQrMF09RSpCK1MqUCtDLExbRCskKzFdPVQqQitfKlArUixMW0QrJCsyXT0ocitJKm4pL3UsTFtEKyQrM109KGkrTypvKS9jLExbRCskKzRdPXQ7aWYodGhpcy5oYXNNZXNoKWZvcih2YXIgRj0wLFc9Zi5sZW5ndGg7Vz5GOysrRil0aGlzLmluZGljZXNGb3JNZXNoW3RoaXMuaW5kZXhJbmRleCtGXT1mW0ZdK3RoaXMudmVydGV4SW5kZXg7dGhpcy52ZXJ0ZXhJbmRleCs9ZC5sZW5ndGgvMix0aGlzLmluZGV4SW5kZXgrPWYubGVuZ3RofWVsc2V7dmFyIEg9dSxHPWMsaz1uLE49bztyLz1ILGkvPUcsbi89SCxvLz1HO3ZhciBMPXRoaXMudmVydGljZXMsRD10aGlzLnZlcnRleEluZGV4KnRoaXMudmVydFNpemU7aWYoTFtEKytdPUMsTFtEKytdPVIsTFtEKytdPXIsTFtEKytdPWksTFtEKytdPXQsTFtEKytdPUUqaytDLExbRCsrXT1UKmsrUixMW0QrK109bityLExbRCsrXT1pLExbRCsrXT10LExbRCsrXT1FKmsrUypOK0MsTFtEKytdPV8qTitUKmsrUixMW0QrK109bityLExbRCsrXT1vK2ksTFtEKytdPXQsTFtEKytdPVMqTitDLExbRCsrXT1fKk4rUixMW0QrK109cixMW0QrK109bytpLExbRCsrXT10LHRoaXMuaGFzTWVzaCl7dmFyIFU9dGhpcy5pbmRpY2VzRm9yTWVzaDtVW3RoaXMuaW5kZXhJbmRleCswXT0wK3RoaXMudmVydGV4SW5kZXgsVVt0aGlzLmluZGV4SW5kZXgrMV09MSt0aGlzLnZlcnRleEluZGV4LFVbdGhpcy5pbmRleEluZGV4KzJdPTIrdGhpcy52ZXJ0ZXhJbmRleCxVW3RoaXMuaW5kZXhJbmRleCszXT0wK3RoaXMudmVydGV4SW5kZXgsVVt0aGlzLmluZGV4SW5kZXgrNF09Mit0aGlzLnZlcnRleEluZGV4LFVbdGhpcy5pbmRleEluZGV4KzVdPTMrdGhpcy52ZXJ0ZXhJbmRleH10aGlzLnZlcnRleEluZGV4Kz00LHRoaXMuaW5kZXhJbmRleCs9Nn19LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5oYXNNZXNoPSExLHRoaXMudmVydGV4SW5kZXg9MCx0aGlzLmluZGV4SW5kZXg9MH0sZX0oKTtlLldlYkdMVmVydGV4QXJyYXlPYmplY3Q9dCxfX3JlZmxlY3QodC5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViR0xWZXJ0ZXhBcnJheU9iamVjdFwiKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpKXt2YXIgbj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uY2xlYXJDb2xvcj1bMCwwLDAsMF0sbi51c2VGcmFtZUJ1ZmZlcj0hMCxuLmdsPXQsbi53aWR0aD1yfHwxLG4uaGVpZ2h0PWl8fDEsbi50ZXh0dXJlPW4uY3JlYXRlVGV4dHVyZSgpLG4uZnJhbWVCdWZmZXI9dC5jcmVhdGVGcmFtZWJ1ZmZlcigpLHQuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsbi5mcmFtZUJ1ZmZlciksdC5mcmFtZWJ1ZmZlclRleHR1cmUyRCh0LkZSQU1FQlVGRkVSLHQuQ09MT1JfQVRUQUNITUVOVDAsdC5URVhUVVJFXzJELG4udGV4dHVyZSwwKSxuLnN0ZW5jaWxCdWZmZXI9dC5jcmVhdGVSZW5kZXJidWZmZXIoKSx0LmJpbmRSZW5kZXJidWZmZXIodC5SRU5ERVJCVUZGRVIsbi5zdGVuY2lsQnVmZmVyKSx0LnJlbmRlcmJ1ZmZlclN0b3JhZ2UodC5SRU5ERVJCVUZGRVIsdC5ERVBUSF9TVEVOQ0lMLG4ud2lkdGgsbi5oZWlnaHQpLHQuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIodC5GUkFNRUJVRkZFUix0LkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCx0LlJFTkRFUkJVRkZFUixuLnN0ZW5jaWxCdWZmZXIpLG59cmV0dXJuIF9fZXh0ZW5kcyh0LGUpLHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ2w7ci5iaW5kVGV4dHVyZShyLlRFWFRVUkVfMkQsdGhpcy50ZXh0dXJlKSxyLnRleEltYWdlMkQoci5URVhUVVJFXzJELDAsci5SR0JBLGUsdCwwLHIuUkdCQSxyLlVOU0lHTkVEX0JZVEUsbnVsbCksci5iaW5kRnJhbWVidWZmZXIoci5GUkFNRUJVRkZFUix0aGlzLmZyYW1lQnVmZmVyKSxyLmJpbmRSZW5kZXJidWZmZXIoci5SRU5ERVJCVUZGRVIsdGhpcy5zdGVuY2lsQnVmZmVyKSxyLnJlbmRlcmJ1ZmZlclN0b3JhZ2Uoci5SRU5ERVJCVUZGRVIsci5ERVBUSF9TVEVOQ0lMLGUsdCksdGhpcy53aWR0aD1lLHRoaXMuaGVpZ2h0PXR9LHQucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nbDtlLmJpbmRGcmFtZWJ1ZmZlcihlLkZSQU1FQlVGRkVSLHRoaXMuZ2V0RnJhbWVCdWZmZXIoKSl9LHQucHJvdG90eXBlLmdldEZyYW1lQnVmZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlRnJhbWVCdWZmZXI/dGhpcy5mcmFtZUJ1ZmZlcjpudWxsfSx0LnByb3RvdHlwZS5jcmVhdGVUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nbCx0PWUuY3JlYXRlVGV4dHVyZSgpO3JldHVybiBlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCx0KSxlLnRleEltYWdlMkQoZS5URVhUVVJFXzJELDAsZS5SR0JBLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsMCxlLlJHQkEsZS5VTlNJR05FRF9CWVRFLG51bGwpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX01BR19GSUxURVIsZS5MSU5FQVIpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX01JTl9GSUxURVIsZS5MSU5FQVIpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX1dSQVBfUyxlLkNMQU1QX1RPX0VER0UpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX1dSQVBfVCxlLkNMQU1QX1RPX0VER0UpLHR9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2w7ZSYmdGhpcy5hY3RpdmF0ZSgpLHQuY29sb3JNYXNrKCEwLCEwLCEwLCEwKSx0LmNsZWFyQ29sb3IodGhpcy5jbGVhckNvbG9yWzBdLHRoaXMuY2xlYXJDb2xvclsxXSx0aGlzLmNsZWFyQ29sb3JbMl0sdGhpcy5jbGVhckNvbG9yWzNdKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVCl9LHR9KGUuSGFzaE9iamVjdCk7dC5XZWJHTFJlbmRlclRhcmdldD1yLF9fcmVmbGVjdChyLnByb3RvdHlwZSxcImVncmV0LndlYi5XZWJHTFJlbmRlclRhcmdldFwiKX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsdCl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtyZXR1cm4gaXNOYU4oZSl8fGlzTmFOKHQpfHwoci53aWR0aD1lLHIuaGVpZ2h0PXQpLHJ9dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKGUsaSl7dGhpcy5nbElEPW51bGwsdGhpcy5wcm9qZWN0aW9uWD0wLzAsdGhpcy5wcm9qZWN0aW9uWT0wLzAsdGhpcy5zaGFkZXJNYW5hZ2VyPW51bGwsdGhpcy5jb250ZXh0TG9zdD0hMSx0aGlzLiRzY2lzc29yU3RhdGU9ITEsdGhpcy52ZXJ0U2l6ZT01LHRoaXMuYmx1ckZpbHRlcj1udWxsLHRoaXMuc3VyZmFjZT1yKGUsaSksdGhpcy5pbml0V2ViR0woKSx0aGlzLiRidWZmZXJTdGFjaz1bXTt2YXIgbj10aGlzLmNvbnRleHQ7dGhpcy52ZXJ0ZXhCdWZmZXI9bi5jcmVhdGVCdWZmZXIoKSx0aGlzLmluZGV4QnVmZmVyPW4uY3JlYXRlQnVmZmVyKCksbi5iaW5kQnVmZmVyKG4uQVJSQVlfQlVGRkVSLHRoaXMudmVydGV4QnVmZmVyKSxuLmJpbmRCdWZmZXIobi5FTEVNRU5UX0FSUkFZX0JVRkZFUix0aGlzLmluZGV4QnVmZmVyKSx0aGlzLmRyYXdDbWRNYW5hZ2VyPW5ldyB0LldlYkdMRHJhd0NtZE1hbmFnZXIsdGhpcy52YW89bmV3IHQuV2ViR0xWZXJ0ZXhBcnJheU9iamVjdCx0aGlzLnNldEdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbihcInNvdXJjZS1vdmVyXCIpfXJldHVybiBpLmdldEluc3RhbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZToodGhpcy5pbnN0YW5jZT1uZXcgaShlLHQpLHRoaXMuaW5zdGFuY2UpfSxpLnByb3RvdHlwZS5wdXNoQnVmZmVyPWZ1bmN0aW9uKGUpe3RoaXMuJGJ1ZmZlclN0YWNrLnB1c2goZSksZSE9dGhpcy5jdXJyZW50QnVmZmVyJiYodGhpcy5jdXJyZW50QnVmZmVyLHRoaXMuZHJhd0NtZE1hbmFnZXIucHVzaEFjdGl2YXRlQnVmZmVyKGUpKSx0aGlzLmN1cnJlbnRCdWZmZXI9ZX0saS5wcm90b3R5cGUucG9wQnVmZmVyPWZ1bmN0aW9uKCl7aWYoISh0aGlzLiRidWZmZXJTdGFjay5sZW5ndGg8PTEpKXt2YXIgZT10aGlzLiRidWZmZXJTdGFjay5wb3AoKSx0PXRoaXMuJGJ1ZmZlclN0YWNrW3RoaXMuJGJ1ZmZlclN0YWNrLmxlbmd0aC0xXTtlIT10JiZ0aGlzLmRyYXdDbWRNYW5hZ2VyLnB1c2hBY3RpdmF0ZUJ1ZmZlcih0KSx0aGlzLmN1cnJlbnRCdWZmZXI9dH19LGkucHJvdG90eXBlLmFjdGl2YXRlQnVmZmVyPWZ1bmN0aW9uKGUpe2Uucm9vdFJlbmRlclRhcmdldC5hY3RpdmF0ZSgpLHRoaXMuYmluZEluZGljZXN8fCh0aGlzLnVwbG9hZEluZGljZXNBcnJheSh0aGlzLnZhby5nZXRJbmRpY2VzKCkpLHRoaXMuYmluZEluZGljZXM9ITApLGUucmVzdG9yZVN0ZW5jaWwoKSxlLnJlc3RvcmVTY2lzc29yKCksdGhpcy5vblJlc2l6ZShlLndpZHRoLGUuaGVpZ2h0KX0saS5wcm90b3R5cGUudXBsb2FkVmVydGljZXNBcnJheT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRleHQ7dC5idWZmZXJEYXRhKHQuQVJSQVlfQlVGRkVSLGUsdC5TVFJFQU1fRFJBVyl9LGkucHJvdG90eXBlLnVwbG9hZEluZGljZXNBcnJheT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRleHQ7dC5idWZmZXJEYXRhKHQuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZSx0LlNUQVRJQ19EUkFXKX0saS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuc3VyZmFjZS53aWR0aD10aGlzLnN1cmZhY2UuaGVpZ2h0PTB9LGkucHJvdG90eXBlLm9uUmVzaXplPWZ1bmN0aW9uKGUsdCl7ZT1lfHx0aGlzLnN1cmZhY2Uud2lkdGgsdD10fHx0aGlzLnN1cmZhY2UuaGVpZ2h0LHRoaXMucHJvamVjdGlvblg9ZS8yLHRoaXMucHJvamVjdGlvblk9LXQvMix0aGlzLmNvbnRleHQmJnRoaXMuY29udGV4dC52aWV3cG9ydCgwLDAsZSx0KX0saS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLnN1cmZhY2U7cj8oaS53aWR0aDxlJiYoaS53aWR0aD1lKSxpLmhlaWdodDx0JiYoaS5oZWlnaHQ9dCkpOihpLndpZHRoIT1lJiYoaS53aWR0aD1lKSxpLmhlaWdodCE9dCYmKGkuaGVpZ2h0PXQpKSx0aGlzLm9uUmVzaXplKCl9LGkucHJvdG90eXBlLmluaXRXZWJHTD1mdW5jdGlvbigpe3RoaXMub25SZXNpemUoKSx0aGlzLnN1cmZhY2UuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIix0aGlzLmhhbmRsZUNvbnRleHRMb3N0LmJpbmQodGhpcyksITEpLHRoaXMuc3VyZmFjZS5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIix0aGlzLmhhbmRsZUNvbnRleHRSZXN0b3JlZC5iaW5kKHRoaXMpLCExKSx0aGlzLmdldFdlYkdMQ29udGV4dCgpLHRoaXMuc2hhZGVyTWFuYWdlcj1uZXcgdC5XZWJHTFNoYWRlck1hbmFnZXIodGhpcy5jb250ZXh0KX0saS5wcm90b3R5cGUuaGFuZGxlQ29udGV4dExvc3Q9ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHRMb3N0PSEwfSxpLnByb3RvdHlwZS5oYW5kbGVDb250ZXh0UmVzdG9yZWQ9ZnVuY3Rpb24oKXt0aGlzLmluaXRXZWJHTCgpLHRoaXMuY29udGV4dExvc3Q9ITF9LGkucHJvdG90eXBlLmdldFdlYkdMQ29udGV4dD1mdW5jdGlvbigpe2Zvcih2YXIgdCxyPXthbnRpYWxpYXM6aS5hbnRpYWxpYXMsc3RlbmNpbDohMH0sbj1bXCJ3ZWJnbFwiLFwiZXhwZXJpbWVudGFsLXdlYmdsXCJdLG89MDtvPG4ubGVuZ3RoO28rKyl7dHJ5e3Q9dGhpcy5zdXJmYWNlLmdldENvbnRleHQobltvXSxyKX1jYXRjaChhKXt9aWYodClicmVha310fHxlLiRlcnJvcigxMDIxKSx0aGlzLnNldENvbnRleHQodCl9LGkucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oZSl7dGhpcy5jb250ZXh0PWUsZS5pZD1pLmdsQ29udGV4dElkKyssdGhpcy5nbElEPWUuaWQsZS5kaXNhYmxlKGUuREVQVEhfVEVTVCksZS5kaXNhYmxlKGUuQ1VMTF9GQUNFKSxlLmVuYWJsZShlLkJMRU5EKSxlLmNvbG9yTWFzayghMCwhMCwhMCwhMCksZS5hY3RpdmVUZXh0dXJlKGUuVEVYVFVSRTApfSxpLnByb3RvdHlwZS5lbmFibGVTdGVuY2lsVGVzdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGV4dDtlLmVuYWJsZShlLlNURU5DSUxfVEVTVCl9LGkucHJvdG90eXBlLmRpc2FibGVTdGVuY2lsVGVzdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGV4dDtlLmRpc2FibGUoZS5TVEVOQ0lMX1RFU1QpfSxpLnByb3RvdHlwZS5lbmFibGVTY2lzc29yVGVzdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRleHQ7dC5lbmFibGUodC5TQ0lTU09SX1RFU1QpLHQuc2Npc3NvcihlLngsZS55LGUud2lkdGgsZS5oZWlnaHQpfSxpLnByb3RvdHlwZS5kaXNhYmxlU2Npc3NvclRlc3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnRleHQ7ZS5kaXNhYmxlKGUuU0NJU1NPUl9URVNUKX0saS5wcm90b3R5cGUuZ2V0UGl4ZWxzPWZ1bmN0aW9uKGUsdCxyLGksbil7dmFyIG89dGhpcy5jb250ZXh0O28ucmVhZFBpeGVscyhlLHQscixpLG8uUkdCQSxvLlVOU0lHTkVEX0JZVEUsbil9LGkucHJvdG90eXBlLmNyZWF0ZVRleHR1cmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250ZXh0LHI9dC5jcmVhdGVUZXh0dXJlKCk7cmV0dXJuIHI/KHIuZ2xDb250ZXh0PXQsdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsciksdC5waXhlbFN0b3JlaSh0LlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwxKSx0LnRleEltYWdlMkQodC5URVhUVVJFXzJELDAsdC5SR0JBLHQuUkdCQSx0LlVOU0lHTkVEX0JZVEUsZSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfTUFHX0ZJTFRFUix0LkxJTkVBUiksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfTUlOX0ZJTFRFUix0LkxJTkVBUiksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9TLHQuQ0xBTVBfVE9fRURHRSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9ULHQuQ0xBTVBfVE9fRURHRSkscik6dm9pZCh0aGlzLmNvbnRleHRMb3N0PSEwKX0saS5wcm90b3R5cGUuY3JlYXRlVGV4dHVyZUZyb21Db21wcmVzc2VkRGF0YT1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybiBudWxsfSxpLnByb3RvdHlwZS51cGRhdGVUZXh0dXJlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb250ZXh0O3IuYmluZFRleHR1cmUoci5URVhUVVJFXzJELGUpLHIudGV4SW1hZ2UyRChyLlRFWFRVUkVfMkQsMCxyLlJHQkEsci5SR0JBLHIuVU5TSUdORURfQllURSx0KX0saS5wcm90b3R5cGUuZ2V0V2ViR0xUZXh0dXJlPWZ1bmN0aW9uKGUpe3JldHVybiBlLndlYkdMVGV4dHVyZXx8KFwiaW1hZ2VcIj09ZS5mb3JtYXQ/ZS53ZWJHTFRleHR1cmU9dGhpcy5jcmVhdGVUZXh0dXJlKGUuc291cmNlKTpcInB2clwiPT1lLmZvcm1hdCYmKGUud2ViR0xUZXh0dXJlPXRoaXMuY3JlYXRlVGV4dHVyZUZyb21Db21wcmVzc2VkRGF0YShlLnNvdXJjZS5wdnJ0Y0RhdGEsZS53aWR0aCxlLmhlaWdodCxlLnNvdXJjZS5taXBtYXBzQ291bnQsZS5zb3VyY2UuZm9ybWF0KSksZS4kZGVsZXRlU291cmNlJiZlLndlYkdMVGV4dHVyZSYmKGUuc291cmNlPW51bGwpKSxlLndlYkdMVGV4dHVyZX0saS5wcm90b3R5cGUuY2xlYXJSZWN0PWZ1bmN0aW9uKGUsdCxyLGkpe2lmKDAhPWV8fDAhPXR8fHIhPXRoaXMuc3VyZmFjZS53aWR0aHx8aSE9dGhpcy5zdXJmYWNlLmhlaWdodCl7dmFyIG49dGhpcy5jdXJyZW50QnVmZmVyO2lmKG4uJGhhc1NjaXNzb3IpdGhpcy5zZXRHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24oXCJkZXN0aW5hdGlvbi1vdXRcIiksdGhpcy5kcmF3UmVjdChlLHQscixpKSx0aGlzLnNldEdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbihcInNvdXJjZS1vdmVyXCIpO2Vsc2V7dmFyIG89bi5nbG9iYWxNYXRyaXg7MD09by5iJiYwPT1vLmM/KGU9ZSpvLmErby50eCx0PXQqby5kK28udHkscio9by5hLGkqPW8uZCx0aGlzLmVuYWJsZVNjaXNzb3IoZSwtdC1pK24uaGVpZ2h0LHIsaSksdGhpcy5jbGVhcigpLHRoaXMuZGlzYWJsZVNjaXNzb3IoKSk6KHRoaXMuc2V0R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKFwiZGVzdGluYXRpb24tb3V0XCIpLHRoaXMuZHJhd1JlY3QoZSx0LHIsaSksdGhpcy5zZXRHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24oXCJzb3VyY2Utb3ZlclwiKSl9fWVsc2UgdGhpcy5jbGVhcigpfSxpLnByb3RvdHlwZS5zZXRHbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ZnVuY3Rpb24oZSl7dGhpcy5kcmF3Q21kTWFuYWdlci5wdXNoU2V0QmxlbmQoZSl9LGkucHJvdG90eXBlLmRyYXdJbWFnZT1mdW5jdGlvbihlLHQscixpLG4sbyxhLHMsbCxoLHUpe3ZhciBjPXRoaXMuY3VycmVudEJ1ZmZlcjtpZighdGhpcy5jb250ZXh0TG9zdCYmZSYmYyl7dmFyIGQ7aWYoZS50ZXh0dXJlfHxlLnNvdXJjZSYmZS5zb3VyY2UudGV4dHVyZSlkPWUudGV4dHVyZXx8ZS5zb3VyY2UudGV4dHVyZSxjLnNhdmVUcmFuc2Zvcm0oKSxjLnRyYW5zZm9ybSgxLDAsMCwtMSwwLGwrMiphKTtlbHNle2lmKCFlLnNvdXJjZSYmIWUud2ViR0xUZXh0dXJlKXJldHVybjtkPXRoaXMuZ2V0V2ViR0xUZXh0dXJlKGUpfWQmJih0aGlzLmRyYXdUZXh0dXJlKGQsdCxyLGksbixvLGEscyxsLGgsdSksZS5zb3VyY2UmJmUuc291cmNlLnRleHR1cmUmJmMucmVzdG9yZVRyYW5zZm9ybSgpKX19LGkucHJvdG90eXBlLmRyYXdNZXNoPWZ1bmN0aW9uKGUsdCxyLGksbixvLGEscyxsLGgsdSxjLGQscCxmKXt2YXIgZz10aGlzLmN1cnJlbnRCdWZmZXI7aWYoIXRoaXMuY29udGV4dExvc3QmJmUmJmcpe3ZhciB2O2lmKGUudGV4dHVyZXx8ZS5zb3VyY2UmJmUuc291cmNlLnRleHR1cmUpdj1lLnRleHR1cmV8fGUuc291cmNlLnRleHR1cmUsZy5zYXZlVHJhbnNmb3JtKCksZy50cmFuc2Zvcm0oMSwwLDAsLTEsMCxsKzIqYSk7ZWxzZXtpZighZS5zb3VyY2UmJiFlLndlYkdMVGV4dHVyZSlyZXR1cm47dj10aGlzLmdldFdlYkdMVGV4dHVyZShlKX12JiZ0aGlzLmRyYXdUZXh0dXJlKHYsdCxyLGksbixvLGEscyxsLGgsdSxjLGQscCxmKX19LGkucHJvdG90eXBlLmRyYXdUZXh0dXJlPWZ1bmN0aW9uKGUsdCxyLGksbixvLGEscyxsLGgsdSxjLGQscCxmKXt2YXIgZz10aGlzLmN1cnJlbnRCdWZmZXI7aWYoIXRoaXMuY29udGV4dExvc3QmJmUmJmcpe2QmJnA/dGhpcy52YW8ucmVhY2hNYXhTaXplKGQubGVuZ3RoLzIscC5sZW5ndGgpJiZ0aGlzLiRkcmF3V2ViR0woKTp0aGlzLnZhby5yZWFjaE1heFNpemUoKSYmdGhpcy4kZHJhd1dlYkdMKCksYyYmdGhpcy52YW8uY2hhbmdlVG9NZXNoSW5kaWNlcygpO3ZhciB2PWcuZ2xvYmFsTWF0cml4LHk9Zy5nbG9iYWxBbHBoYSxtPXA/cC5sZW5ndGgvMzoyO3RoaXMuZHJhd0NtZE1hbmFnZXIucHVzaERyYXdUZXh0dXJlKGUsbSx0aGlzLiRmaWx0ZXIpLHRoaXMudmFvLmNhY2hlQXJyYXlzKHYseSx0LHIsaSxuLG8sYSxzLGwsaCx1LGMsZCxwKX19LGkucHJvdG90eXBlLmRyYXdSZWN0PWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPXRoaXMuY3VycmVudEJ1ZmZlcjshdGhpcy5jb250ZXh0TG9zdCYmbiYmKHRoaXMudmFvLnJlYWNoTWF4U2l6ZSgpJiZ0aGlzLiRkcmF3V2ViR0woKSx0aGlzLmRyYXdDbWRNYW5hZ2VyLnB1c2hEcmF3UmVjdCgpLHRoaXMudmFvLmNhY2hlQXJyYXlzKG4uZ2xvYmFsTWF0cml4LG4uZ2xvYmFsQWxwaGEsMCwwLHIsaSxlLHQscixpLHIsaSkpfSxpLnByb3RvdHlwZS5wdXNoTWFzaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmN1cnJlbnRCdWZmZXI7aWYoIXRoaXMuY29udGV4dExvc3QmJnQpe3QuJHN0ZW5jaWxMaXN0LnB1c2goZSksdGhpcy52YW8ucmVhY2hNYXhTaXplKCkmJnRoaXMuJGRyYXdXZWJHTCgpO1xudmFyIHI9ZS5sZW5ndGg7aWYocil7dGhpcy5kcmF3Q21kTWFuYWdlci5wdXNoUHVzaE1hc2socik7Zm9yKHZhciBpPTA7cj5pO2krKyl7dmFyIG49ZVtpXTt0aGlzLnZhby5jYWNoZUFycmF5cyh0Lmdsb2JhbE1hdHJpeCx0Lmdsb2JhbEFscGhhLDAsMCxuLndpZHRoLG4uaGVpZ2h0LG4ubWluWCxuLm1pblksbi53aWR0aCxuLmhlaWdodCxuLndpZHRoLG4uaGVpZ2h0KX19ZWxzZSB0aGlzLmRyYXdDbWRNYW5hZ2VyLnB1c2hQdXNoTWFzaygpLHRoaXMudmFvLmNhY2hlQXJyYXlzKHQuZ2xvYmFsTWF0cml4LHQuZ2xvYmFsQWxwaGEsMCwwLGUud2lkdGgsZS5oZWlnaHQsZS54LGUueSxlLndpZHRoLGUuaGVpZ2h0LGUud2lkdGgsZS5oZWlnaHQpfX0saS5wcm90b3R5cGUucG9wTWFzaz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY3VycmVudEJ1ZmZlcjtpZighdGhpcy5jb250ZXh0TG9zdCYmZSl7dmFyIHQ9ZS4kc3RlbmNpbExpc3QucG9wKCk7dGhpcy52YW8ucmVhY2hNYXhTaXplKCkmJnRoaXMuJGRyYXdXZWJHTCgpO3ZhciByPXQubGVuZ3RoO2lmKHIpe3RoaXMuZHJhd0NtZE1hbmFnZXIucHVzaFBvcE1hc2socik7Zm9yKHZhciBpPTA7cj5pO2krKyl7dmFyIG49dFtpXTt0aGlzLnZhby5jYWNoZUFycmF5cyhlLmdsb2JhbE1hdHJpeCxlLmdsb2JhbEFscGhhLDAsMCxuLndpZHRoLG4uaGVpZ2h0LG4ubWluWCxuLm1pblksbi53aWR0aCxuLmhlaWdodCxuLndpZHRoLG4uaGVpZ2h0KX19ZWxzZSB0aGlzLmRyYXdDbWRNYW5hZ2VyLnB1c2hQb3BNYXNrKCksdGhpcy52YW8uY2FjaGVBcnJheXMoZS5nbG9iYWxNYXRyaXgsZS5nbG9iYWxBbHBoYSwwLDAsdC53aWR0aCx0LmhlaWdodCx0LngsdC55LHQud2lkdGgsdC5oZWlnaHQsdC53aWR0aCx0LmhlaWdodCl9fSxpLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuZHJhd0NtZE1hbmFnZXIucHVzaENsZWFyQ29sb3IoKX0saS5wcm90b3R5cGUuZW5hYmxlU2Npc3Nvcj1mdW5jdGlvbihlLHQscixpKXt2YXIgbj10aGlzLmN1cnJlbnRCdWZmZXI7dGhpcy5kcmF3Q21kTWFuYWdlci5wdXNoRW5hYmxlU2Npc3NvcihlLHQscixpKSxuLiRoYXNTY2lzc29yPSEwfSxpLnByb3RvdHlwZS5kaXNhYmxlU2Npc3Nvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY3VycmVudEJ1ZmZlcjt0aGlzLmRyYXdDbWRNYW5hZ2VyLnB1c2hEaXNhYmxlU2Npc3NvcigpLGUuJGhhc1NjaXNzb3I9ITF9LGkucHJvdG90eXBlLiRkcmF3V2ViR0w9ZnVuY3Rpb24oKXtpZigwIT10aGlzLmRyYXdDbWRNYW5hZ2VyLmRyYXdEYXRhTGVuJiYhdGhpcy5jb250ZXh0TG9zdCl7dGhpcy51cGxvYWRWZXJ0aWNlc0FycmF5KHRoaXMudmFvLmdldFZlcnRpY2VzKCkpLHRoaXMudmFvLmlzTWVzaCgpJiZ0aGlzLnVwbG9hZEluZGljZXNBcnJheSh0aGlzLnZhby5nZXRNZXNoSW5kaWNlcygpKTtmb3IodmFyIGU9dGhpcy5kcmF3Q21kTWFuYWdlci5kcmF3RGF0YUxlbix0PTAscj0wO2U+cjtyKyspe3ZhciBpPXRoaXMuZHJhd0NtZE1hbmFnZXIuZHJhd0RhdGFbcl07dD10aGlzLmRyYXdEYXRhKGksdCksNz09aS50eXBlJiYodGhpcy5hY3RpdmF0ZWRCdWZmZXI9aS5idWZmZXIpLCgwPT1pLnR5cGV8fDE9PWkudHlwZXx8Mj09aS50eXBlfHwzPT1pLnR5cGUpJiZ0aGlzLmFjdGl2YXRlZEJ1ZmZlciYmdGhpcy5hY3RpdmF0ZWRCdWZmZXIuJGNvbXB1dGVEcmF3Q2FsbCYmdGhpcy5hY3RpdmF0ZWRCdWZmZXIuJGRyYXdDYWxscysrfXRoaXMudmFvLmlzTWVzaCgpJiZ0aGlzLnVwbG9hZEluZGljZXNBcnJheSh0aGlzLnZhby5nZXRJbmRpY2VzKCkpLHRoaXMuZHJhd0NtZE1hbmFnZXIuY2xlYXIoKSx0aGlzLnZhby5jbGVhcigpfX0saS5wcm90b3R5cGUuZHJhd0RhdGE9ZnVuY3Rpb24oZSx0KXtpZihlKXt2YXIgcjtzd2l0Y2goZS50eXBlKXtjYXNlIDA6dmFyIGk9ZS5maWx0ZXI7aT9cImNvbG9yVHJhbnNmb3JtXCI9PWkudHlwZT8ocj10aGlzLnNoYWRlck1hbmFnZXIuY29sb3JUcmFuc2Zvcm1TaGFkZXIsci5zZXRNYXRyaXgoaS4kbWF0cml4KSk6XCJibHVyXCI9PWkudHlwZT8ocj10aGlzLnNoYWRlck1hbmFnZXIuYmx1clNoYWRlcixyLnNldEJsdXIoaS4kYmx1clgsaS4kYmx1clkpLHIuc2V0VGV4dHVyZVNpemUoZS50ZXh0dXJlV2lkdGgsZS50ZXh0dXJlSGVpZ2h0KSk6XCJnbG93XCI9PWkudHlwZSYmKHI9dGhpcy5zaGFkZXJNYW5hZ2VyLmdsb3dTaGFkZXIsci5zZXREaXN0YW5jZShpLiRkaXN0YW5jZXx8MCksci5zZXRBbmdsZShpLiRhbmdsZT9pLiRhbmdsZS8xODAqTWF0aC5QSTowKSxyLnNldENvbG9yKGkuJHJlZC8yNTUsaS4kZ3JlZW4vMjU1LGkuJGJsdWUvMjU1KSxyLnNldEFscGhhKGkuJGFscGhhKSxyLnNldEJsdXJYKGkuJGJsdXJYKSxyLnNldEJsdXJZKGkuJGJsdXJZKSxyLnNldFN0cmVuZ3RoKGkuJHN0cmVuZ3RoKSxyLnNldElubmVyKGkuJGlubmVyPzE6MCksci5zZXRLbm9ja291dChpLiRrbm9ja291dD8wOjEpLHIuc2V0SGlkZU9iamVjdChpLiRoaWRlT2JqZWN0PzE6MCksci5zZXRUZXh0dXJlU2l6ZShlLnRleHR1cmVXaWR0aCxlLnRleHR1cmVIZWlnaHQpKTpyPXRoaXMuc2hhZGVyTWFuYWdlci5kZWZhdWx0U2hhZGVyLHIuc2V0UHJvamVjdGlvbih0aGlzLnByb2plY3Rpb25YLHRoaXMucHJvamVjdGlvblkpLHRoaXMuc2hhZGVyTWFuYWdlci5hY3RpdmF0ZVNoYWRlcihyLDQqdGhpcy52ZXJ0U2l6ZSksci5zeW5jVW5pZm9ybXMoKSx0Kz10aGlzLmRyYXdUZXh0dXJlRWxlbWVudHMoZSx0KTticmVhaztjYXNlIDE6cj10aGlzLnNoYWRlck1hbmFnZXIucHJpbWl0aXZlU2hhZGVyLHIuc2V0UHJvamVjdGlvbih0aGlzLnByb2plY3Rpb25YLHRoaXMucHJvamVjdGlvblkpLHRoaXMuc2hhZGVyTWFuYWdlci5hY3RpdmF0ZVNoYWRlcihyLDQqdGhpcy52ZXJ0U2l6ZSksci5zeW5jVW5pZm9ybXMoKSx0Kz10aGlzLmRyYXdSZWN0RWxlbWVudHMoZSx0KTticmVhaztjYXNlIDI6cj10aGlzLnNoYWRlck1hbmFnZXIucHJpbWl0aXZlU2hhZGVyLHIuc2V0UHJvamVjdGlvbih0aGlzLnByb2plY3Rpb25YLHRoaXMucHJvamVjdGlvblkpLHRoaXMuc2hhZGVyTWFuYWdlci5hY3RpdmF0ZVNoYWRlcihyLDQqdGhpcy52ZXJ0U2l6ZSksci5zeW5jVW5pZm9ybXMoKSx0Kz10aGlzLmRyYXdQdXNoTWFza0VsZW1lbnRzKGUsdCk7YnJlYWs7Y2FzZSAzOnI9dGhpcy5zaGFkZXJNYW5hZ2VyLnByaW1pdGl2ZVNoYWRlcixyLnNldFByb2plY3Rpb24odGhpcy5wcm9qZWN0aW9uWCx0aGlzLnByb2plY3Rpb25ZKSx0aGlzLnNoYWRlck1hbmFnZXIuYWN0aXZhdGVTaGFkZXIociw0KnRoaXMudmVydFNpemUpLHIuc3luY1VuaWZvcm1zKCksdCs9dGhpcy5kcmF3UG9wTWFza0VsZW1lbnRzKGUsdCk7YnJlYWs7Y2FzZSA0OnRoaXMuc2V0QmxlbmRNb2RlKGUudmFsdWUpO2JyZWFrO2Nhc2UgNTplLmJ1ZmZlci5yb290UmVuZGVyVGFyZ2V0LnJlc2l6ZShlLndpZHRoLGUuaGVpZ2h0KSx0aGlzLm9uUmVzaXplKGUud2lkdGgsZS5oZWlnaHQpO2JyZWFrO2Nhc2UgNjppZih0aGlzLmFjdGl2YXRlZEJ1ZmZlcil7dmFyIG49dGhpcy5hY3RpdmF0ZWRCdWZmZXIucm9vdFJlbmRlclRhcmdldDsoMCE9bi53aWR0aHx8MCE9bi5oZWlnaHQpJiZuLmNsZWFyKCl9YnJlYWs7Y2FzZSA3OnRoaXMuYWN0aXZhdGVCdWZmZXIoZS5idWZmZXIpO2JyZWFrO2Nhc2UgODp2YXIgbz10aGlzLmFjdGl2YXRlZEJ1ZmZlcjtvJiZvLmVuYWJsZVNjaXNzb3IoZS54LGUueSxlLndpZHRoLGUuaGVpZ2h0KTticmVhaztjYXNlIDk6bz10aGlzLmFjdGl2YXRlZEJ1ZmZlcixvJiZvLmRpc2FibGVTY2lzc29yKCl9cmV0dXJuIHR9fSxpLnByb3RvdHlwZS5kcmF3VGV4dHVyZUVsZW1lbnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb250ZXh0O3IuYmluZFRleHR1cmUoci5URVhUVVJFXzJELGUudGV4dHVyZSk7dmFyIGk9MyplLmNvdW50O3JldHVybiByLmRyYXdFbGVtZW50cyhyLlRSSUFOR0xFUyxpLHIuVU5TSUdORURfU0hPUlQsMip0KSxpfSxpLnByb3RvdHlwZS5kcmF3UmVjdEVsZW1lbnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb250ZXh0LGk9MyplLmNvdW50O3JldHVybiByLmRyYXdFbGVtZW50cyhyLlRSSUFOR0xFUyxpLHIuVU5TSUdORURfU0hPUlQsMip0KSxpfSxpLnByb3RvdHlwZS5kcmF3UHVzaE1hc2tFbGVtZW50cz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY29udGV4dCxpPTMqZS5jb3VudCxuPXRoaXMuYWN0aXZhdGVkQnVmZmVyO2lmKG4pezA9PW4uc3RlbmNpbEhhbmRsZUNvdW50JiYobi5lbmFibGVTdGVuY2lsKCksci5jbGVhcihyLlNURU5DSUxfQlVGRkVSX0JJVCkpO3ZhciBvPW4uc3RlbmNpbEhhbmRsZUNvdW50O24uc3RlbmNpbEhhbmRsZUNvdW50Kyssci5jb2xvck1hc2soITEsITEsITEsITEpLHIuc3RlbmNpbEZ1bmMoci5FUVVBTCxvLDI1NSksci5zdGVuY2lsT3Aoci5LRUVQLHIuS0VFUCxyLklOQ1IpLHIuZHJhd0VsZW1lbnRzKHIuVFJJQU5HTEVTLGksci5VTlNJR05FRF9TSE9SVCwyKnQpLHIuc3RlbmNpbEZ1bmMoci5FUVVBTCxvKzEsMjU1KSxyLmNvbG9yTWFzayghMCwhMCwhMCwhMCksci5zdGVuY2lsT3Aoci5LRUVQLHIuS0VFUCxyLktFRVApfXJldHVybiBpfSxpLnByb3RvdHlwZS5kcmF3UG9wTWFza0VsZW1lbnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb250ZXh0LGk9MyplLmNvdW50LG49dGhpcy5hY3RpdmF0ZWRCdWZmZXI7aWYobilpZihuLnN0ZW5jaWxIYW5kbGVDb3VudC0tLDA9PW4uc3RlbmNpbEhhbmRsZUNvdW50KW4uZGlzYWJsZVN0ZW5jaWwoKTtlbHNle3ZhciBvPW4uc3RlbmNpbEhhbmRsZUNvdW50O3IuY29sb3JNYXNrKCExLCExLCExLCExKSxyLnN0ZW5jaWxGdW5jKHIuRVFVQUwsbysxLDI1NSksci5zdGVuY2lsT3Aoci5LRUVQLHIuS0VFUCxyLkRFQ1IpLHIuZHJhd0VsZW1lbnRzKHIuVFJJQU5HTEVTLGksci5VTlNJR05FRF9TSE9SVCwyKnQpLHIuc3RlbmNpbEZ1bmMoci5FUVVBTCxvLDI1NSksci5jb2xvck1hc2soITAsITAsITAsITApLHIuc3RlbmNpbE9wKHIuS0VFUCxyLktFRVAsci5LRUVQKX1yZXR1cm4gaX0saS5wcm90b3R5cGUuc2V0QmxlbmRNb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGV4dCxyPWkuYmxlbmRNb2Rlc0ZvckdMW2VdO3ImJnQuYmxlbmRGdW5jKHJbMF0sclsxXSl9LGkucHJvdG90eXBlLmRyYXdUYXJnZXRXaWR0aEZpbHRlcnM9ZnVuY3Rpb24oZSxyKXt2YXIgaSxuPXIsbz1lLmxlbmd0aDtpZihvPjEpZm9yKHZhciBhPTA7by0xPmE7YSsrKXt2YXIgcz1lW2FdLGw9ci5yb290UmVuZGVyVGFyZ2V0LndpZHRoLGg9ci5yb290UmVuZGVyVGFyZ2V0LmhlaWdodDtpPXQuV2ViR0xSZW5kZXJCdWZmZXIuY3JlYXRlKGwsaCksaS5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApLGkuZ2xvYmFsQWxwaGE9MSx0aGlzLmRyYXdUb1JlbmRlclRhcmdldChzLHIsaSksciE9biYmdC5XZWJHTFJlbmRlckJ1ZmZlci5yZWxlYXNlKHIpLHI9aX12YXIgdT1lW28tMV07dGhpcy5kcmF3VG9SZW5kZXJUYXJnZXQodSxyLHRoaXMuY3VycmVudEJ1ZmZlciksciE9biYmdC5XZWJHTFJlbmRlckJ1ZmZlci5yZWxlYXNlKHIpfSxpLnByb3RvdHlwZS5kcmF3VG9SZW5kZXJUYXJnZXQ9ZnVuY3Rpb24ocixpLG4pe2lmKCF0aGlzLmNvbnRleHRMb3N0KXt0aGlzLnZhby5yZWFjaE1heFNpemUoKSYmdGhpcy4kZHJhd1dlYkdMKCksdGhpcy5wdXNoQnVmZmVyKG4pO3ZhciBvLGE9aSxzPWkucm9vdFJlbmRlclRhcmdldC53aWR0aCxsPWkucm9vdFJlbmRlclRhcmdldC5oZWlnaHQ7XCJibHVyXCI9PXIudHlwZSYmKHRoaXMuYmx1ckZpbHRlcnx8KHRoaXMuYmx1ckZpbHRlcj1uZXcgZS5CbHVyRmlsdGVyKDIsMikpLDAhPXIuYmx1clgmJjAhPXIuYmx1clk/KHRoaXMuYmx1ckZpbHRlci5ibHVyWD1yLmJsdXJYLHRoaXMuYmx1ckZpbHRlci5ibHVyWT0wLG89dC5XZWJHTFJlbmRlckJ1ZmZlci5jcmVhdGUocyxsKSxvLnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCksby5nbG9iYWxBbHBoYT0xLHRoaXMuZHJhd1RvUmVuZGVyVGFyZ2V0KHRoaXMuYmx1ckZpbHRlcixpLG8pLGkhPWEmJnQuV2ViR0xSZW5kZXJCdWZmZXIucmVsZWFzZShpKSxpPW8sdGhpcy5ibHVyRmlsdGVyLmJsdXJYPTAsdGhpcy5ibHVyRmlsdGVyLmJsdXJZPXIuYmx1clkpOih0aGlzLmJsdXJGaWx0ZXIuYmx1clg9ci5ibHVyWCx0aGlzLmJsdXJGaWx0ZXIuYmx1clk9ci5ibHVyWSkscj10aGlzLmJsdXJGaWx0ZXIpLG4uc2F2ZVRyYW5zZm9ybSgpLG4udHJhbnNmb3JtKDEsMCwwLC0xLDAsbCksdGhpcy52YW8uY2FjaGVBcnJheXMobi5nbG9iYWxNYXRyaXgsbi5nbG9iYWxBbHBoYSwwLDAscyxsLDAsMCxzLGwscyxsKSxuLnJlc3RvcmVUcmFuc2Zvcm0oKTt2YXIgaDtoPVwiYmx1clwiPT1yLnR5cGU/e3R5cGU6XCJibHVyXCIsJGJsdXJYOnIuJGJsdXJYLCRibHVyWTpyLiRibHVyWX06cix0aGlzLmRyYXdDbWRNYW5hZ2VyLnB1c2hEcmF3VGV4dHVyZShpLnJvb3RSZW5kZXJUYXJnZXQudGV4dHVyZSwyLGgscyxsKSxpIT1hJiZ0LldlYkdMUmVuZGVyQnVmZmVyLnJlbGVhc2UoaSksdGhpcy5wb3BCdWZmZXIoKX19LGkuaW5pdEJsZW5kTW9kZT1mdW5jdGlvbigpe2kuYmxlbmRNb2Rlc0ZvckdMPXt9LGkuYmxlbmRNb2Rlc0ZvckdMW1wic291cmNlLW92ZXJcIl09WzEsNzcxXSxpLmJsZW5kTW9kZXNGb3JHTC5saWdodGVyPVsxLDFdLGkuYmxlbmRNb2Rlc0ZvckdMW1wibGlnaHRlci1pblwiXT1bNzcwLDc3MV0saS5ibGVuZE1vZGVzRm9yR0xbXCJkZXN0aW5hdGlvbi1vdXRcIl09WzAsNzcxXSxpLmJsZW5kTW9kZXNGb3JHTFtcImRlc3RpbmF0aW9uLWluXCJdPVswLDc3MF19LGl9KCk7aS5nbENvbnRleHRJZD0wLGkuYmxlbmRNb2Rlc0ZvckdMPW51bGwsdC5XZWJHTFJlbmRlckNvbnRleHQ9aSxfX3JlZmxlY3QoaS5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViR0xSZW5kZXJDb250ZXh0XCIpLGkuaW5pdEJsZW5kTW9kZSgpfSh0PWUud2VifHwoZS53ZWI9e30pKX0oZWdyZXR8fChlZ3JldD17fSkpO3ZhciBlZ3JldDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKHQpe3ZhciByPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG4oaSxuLG8pe3ZhciBhPXIuY2FsbCh0aGlzKXx8dGhpcztpZihhLmdsb2JhbEFscGhhPTEsYS5zdGVuY2lsU3RhdGU9ITEsYS4kc3RlbmNpbExpc3Q9W10sYS5zdGVuY2lsSGFuZGxlQ291bnQ9MCxhLiRzY2lzc29yU3RhdGU9ITEsYS5zY2lzc29yUmVjdD1uZXcgZS5SZWN0YW5nbGUsYS4kaGFzU2Npc3Nvcj0hMSxhLmRpcnR5UmVnaW9uUG9saWN5PSEwLGEuX2RpcnR5UmVnaW9uUG9saWN5PSEwLGEuJGRyYXdDYWxscz0wLGEuJGNvbXB1dGVEcmF3Q2FsbD0hMSxhLmdsb2JhbE1hdHJpeD1uZXcgZS5NYXRyaXgsYS5zYXZlZEdsb2JhbE1hdHJpeD1uZXcgZS5NYXRyaXgsYS5jb250ZXh0PXQuV2ViR0xSZW5kZXJDb250ZXh0LmdldEluc3RhbmNlKGksbiksYS5yb290UmVuZGVyVGFyZ2V0PW5ldyB0LldlYkdMUmVuZGVyVGFyZ2V0KGEuY29udGV4dC5jb250ZXh0LDMsMyksaSYmbiYmYS5yZXNpemUoaSxuKSxhLnJvb3Q9byxhLnJvb3QpYS5jb250ZXh0LnB1c2hCdWZmZXIoYSksYS5zdXJmYWNlPWEuY29udGV4dC5zdXJmYWNlO2Vsc2V7dmFyIHM9YS5jb250ZXh0LmFjdGl2YXRlZEJ1ZmZlcjtzJiZzLnJvb3RSZW5kZXJUYXJnZXQuYWN0aXZhdGUoKSxhLnN1cmZhY2U9YS5yb290UmVuZGVyVGFyZ2V0fXJldHVybiBhfXJldHVybiBfX2V4dGVuZHMobixyKSxuLnByb3RvdHlwZS5lbmFibGVTdGVuY2lsPWZ1bmN0aW9uKCl7dGhpcy5zdGVuY2lsU3RhdGV8fCh0aGlzLmNvbnRleHQuZW5hYmxlU3RlbmNpbFRlc3QoKSx0aGlzLnN0ZW5jaWxTdGF0ZT0hMCl9LG4ucHJvdG90eXBlLmRpc2FibGVTdGVuY2lsPWZ1bmN0aW9uKCl7dGhpcy5zdGVuY2lsU3RhdGUmJih0aGlzLmNvbnRleHQuZGlzYWJsZVN0ZW5jaWxUZXN0KCksdGhpcy5zdGVuY2lsU3RhdGU9ITEpfSxuLnByb3RvdHlwZS5yZXN0b3JlU3RlbmNpbD1mdW5jdGlvbigpe3RoaXMuc3RlbmNpbFN0YXRlP3RoaXMuY29udGV4dC5lbmFibGVTdGVuY2lsVGVzdCgpOnRoaXMuY29udGV4dC5kaXNhYmxlU3RlbmNpbFRlc3QoKX0sbi5wcm90b3R5cGUuZW5hYmxlU2Npc3Nvcj1mdW5jdGlvbihlLHQscixpKXt0aGlzLiRzY2lzc29yU3RhdGV8fCh0aGlzLiRzY2lzc29yU3RhdGU9ITAsdGhpcy5zY2lzc29yUmVjdC5zZXRUbyhlLHQscixpKSx0aGlzLmNvbnRleHQuZW5hYmxlU2Npc3NvclRlc3QodGhpcy5zY2lzc29yUmVjdCkpfSxuLnByb3RvdHlwZS5kaXNhYmxlU2Npc3Nvcj1mdW5jdGlvbigpe3RoaXMuJHNjaXNzb3JTdGF0ZSYmKHRoaXMuJHNjaXNzb3JTdGF0ZT0hMSx0aGlzLnNjaXNzb3JSZWN0LnNldEVtcHR5KCksdGhpcy5jb250ZXh0LmRpc2FibGVTY2lzc29yVGVzdCgpKX0sbi5wcm90b3R5cGUucmVzdG9yZVNjaXNzb3I9ZnVuY3Rpb24oKXt0aGlzLiRzY2lzc29yU3RhdGU/dGhpcy5jb250ZXh0LmVuYWJsZVNjaXNzb3JUZXN0KHRoaXMuc2Npc3NvclJlY3QpOnRoaXMuY29udGV4dC5kaXNhYmxlU2Npc3NvclRlc3QoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwid2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdFJlbmRlclRhcmdldC53aWR0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJoZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdFJlbmRlclRhcmdldC5oZWlnaHR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmNvbnRleHQucHVzaEJ1ZmZlcih0aGlzKSxlPWV8fDEsdD10fHwxLChlIT10aGlzLnJvb3RSZW5kZXJUYXJnZXQud2lkdGh8fHQhPXRoaXMucm9vdFJlbmRlclRhcmdldC5oZWlnaHQpJiYodGhpcy5jb250ZXh0LmRyYXdDbWRNYW5hZ2VyLnB1c2hSZXNpemUodGhpcyxlLHQpLHRoaXMucm9vdFJlbmRlclRhcmdldC53aWR0aD1lLHRoaXMucm9vdFJlbmRlclRhcmdldC5oZWlnaHQ9dCksdGhpcy5yb290JiZ0aGlzLmNvbnRleHQucmVzaXplKGUsdCxyKSx0aGlzLmNvbnRleHQuY2xlYXIoKSx0aGlzLmNvbnRleHQucG9wQnVmZmVyKCl9LG4ucHJvdG90eXBlLnJlc2l6ZVRvPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuY29udGV4dC5wdXNoQnVmZmVyKHRoaXMpO3ZhciBvPXRoaXMucm9vdFJlbmRlclRhcmdldC53aWR0aCxhPXRoaXMucm9vdFJlbmRlclRhcmdldC5oZWlnaHQscz1uLmNyZWF0ZShvLGEpO3RoaXMuY29udGV4dC5wdXNoQnVmZmVyKHMpLHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5yb290UmVuZGVyVGFyZ2V0LDAsMCxvLGEsMCwwLG8sYSxvLGEpLHRoaXMuY29udGV4dC5wb3BCdWZmZXIoKSx0aGlzLnJlc2l6ZShlLHQpLHRoaXMuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSx0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHMucm9vdFJlbmRlclRhcmdldCwwLDAsbyxhLHIsaSxvLGEsbyxhKSxuLnJlbGVhc2UocyksdGhpcy5jb250ZXh0LnBvcEJ1ZmZlcigpfSxuLnByb3RvdHlwZS5zZXREaXJ0eVJlZ2lvblBvbGljeT1mdW5jdGlvbihlKXt0aGlzLmRpcnR5UmVnaW9uUG9saWN5PVwib25cIj09ZX0sbi5wcm90b3R5cGUuYmVnaW5DbGlwPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmNvbnRleHQucHVzaEJ1ZmZlcih0aGlzKSx0aGlzLnJvb3QmJih0aGlzLl9kaXJ0eVJlZ2lvblBvbGljeT8odGhpcy5yb290UmVuZGVyVGFyZ2V0LnVzZUZyYW1lQnVmZmVyPSEwLHRoaXMucm9vdFJlbmRlclRhcmdldC5hY3RpdmF0ZSgpKToodGhpcy5yb290UmVuZGVyVGFyZ2V0LnVzZUZyYW1lQnVmZmVyPSExLHRoaXMucm9vdFJlbmRlclRhcmdldC5hY3RpdmF0ZSgpLHRoaXMuY29udGV4dC5jbGVhcigpKSksdD0rdHx8MCxyPStyfHwwLHRoaXMuc2V0VHJhbnNmb3JtKDEsMCwwLDEsdCxyKTt2YXIgaT1lLmxlbmd0aDtpZigxPT1pJiYwPT1lWzBdLm1pblgmJjA9PWVbMF0ubWluWSYmZVswXS53aWR0aD09dGhpcy5yb290UmVuZGVyVGFyZ2V0LndpZHRoJiZlWzBdLmhlaWdodD09dGhpcy5yb290UmVuZGVyVGFyZ2V0LmhlaWdodClyZXR1cm4gdGhpcy5tYXNrUHVzaGVkPSExLHRoaXMucm9vdFJlbmRlclRhcmdldC51c2VGcmFtZUJ1ZmZlciYmdGhpcy5jb250ZXh0LmNsZWFyKCksdm9pZCB0aGlzLmNvbnRleHQucG9wQnVmZmVyKCk7Zm9yKHZhciBuPTA7aT5uO24rKyl7dmFyIG89ZVtuXTt0aGlzLmNvbnRleHQuY2xlYXJSZWN0KG8ubWluWCxvLm1pblksby53aWR0aCxvLmhlaWdodCl9aWYoaT4wKXtpZih0aGlzLiRoYXNTY2lzc29yfHwxIT1pKXRoaXMuc2Npc3NvckVuYWJsZWQ9ITE7ZWxzZXt2YXIgbz1lWzBdO2U9ZS5zbGljZSgxKTt2YXIgYT1vLm1pblgrdCxzPW8ubWluWStyLGw9by53aWR0aCxoPW8uaGVpZ2h0O3RoaXMuY29udGV4dC5lbmFibGVTY2lzc29yKGEsLXMtaCt0aGlzLmhlaWdodCxsLGgpLHRoaXMuc2Npc3NvckVuYWJsZWQ9ITB9ZS5sZW5ndGg+MD8odGhpcy5jb250ZXh0LnB1c2hNYXNrKGUpLHRoaXMubWFza1B1c2hlZD0hMCk6dGhpcy5tYXNrUHVzaGVkPSExLHRoaXMub2Zmc2V0WD10LHRoaXMub2Zmc2V0WT1yfWVsc2UgdGhpcy5tYXNrUHVzaGVkPSExO3RoaXMuY29udGV4dC5wb3BCdWZmZXIoKX0sbi5wcm90b3R5cGUuZW5kQ2xpcD1mdW5jdGlvbigpeyh0aGlzLm1hc2tQdXNoZWR8fHRoaXMuc2Npc3NvckVuYWJsZWQpJiYodGhpcy5jb250ZXh0LnB1c2hCdWZmZXIodGhpcyksdGhpcy5tYXNrUHVzaGVkJiYodGhpcy5zZXRUcmFuc2Zvcm0oMSwwLDAsMSx0aGlzLm9mZnNldFgsdGhpcy5vZmZzZXRZKSx0aGlzLmNvbnRleHQucG9wTWFzaygpKSx0aGlzLnNjaXNzb3JFbmFibGVkJiZ0aGlzLmNvbnRleHQuZGlzYWJsZVNjaXNzb3IoKSx0aGlzLmNvbnRleHQucG9wQnVmZmVyKCkpfSxuLnByb3RvdHlwZS5nZXRQaXhlbHM9ZnVuY3Rpb24oZSx0LHIsaSl7dm9pZCAwPT09ciYmKHI9MSksdm9pZCAwPT09aSYmKGk9MSk7dmFyIG49bmV3IFVpbnQ4QXJyYXkoNCpyKmkpLG89dGhpcy5yb290UmVuZGVyVGFyZ2V0LnVzZUZyYW1lQnVmZmVyO3RoaXMucm9vdFJlbmRlclRhcmdldC51c2VGcmFtZUJ1ZmZlcj0hMCx0aGlzLnJvb3RSZW5kZXJUYXJnZXQuYWN0aXZhdGUoKSx0aGlzLmNvbnRleHQuZ2V0UGl4ZWxzKGUsdCxyLGksbiksdGhpcy5yb290UmVuZGVyVGFyZ2V0LnVzZUZyYW1lQnVmZmVyPW8sdGhpcy5yb290UmVuZGVyVGFyZ2V0LmFjdGl2YXRlKCk7Zm9yKHZhciBhPW5ldyBVaW50OEFycmF5KDQqcippKSxzPTA7aT5zO3MrKylmb3IodmFyIGw9MDtyPmw7bCsrKWFbNCoociooaS1zLTEpK2wpXT1uWzQqKHIqcytsKV0sYVs0KihyKihpLXMtMSkrbCkrMV09bls0KihyKnMrbCkrMV0sYVs0KihyKihpLXMtMSkrbCkrMl09bls0KihyKnMrbCkrMl0sYVs0KihyKihpLXMtMSkrbCkrM109bls0KihyKnMrbCkrM107cmV0dXJuIGF9LG4ucHJvdG90eXBlLnRvRGF0YVVSTD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNvbnRleHQuc3VyZmFjZS50b0RhdGFVUkwoZSx0KX0sbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY29udGV4dC5kZXN0cm95KCl9LG4ucHJvdG90eXBlLm9uUmVuZGVyRmluaXNoPWZ1bmN0aW9uKCl7dGhpcy4kZHJhd0NhbGxzPTAsdGhpcy5yb290JiYoIXRoaXMuX2RpcnR5UmVnaW9uUG9saWN5JiZ0aGlzLmRpcnR5UmVnaW9uUG9saWN5JiZ0aGlzLmRyYXdTdXJmYWNlVG9GcmFtZUJ1ZmZlcigwLDAsdGhpcy5yb290UmVuZGVyVGFyZ2V0LndpZHRoLHRoaXMucm9vdFJlbmRlclRhcmdldC5oZWlnaHQsMCwwLHRoaXMucm9vdFJlbmRlclRhcmdldC53aWR0aCx0aGlzLnJvb3RSZW5kZXJUYXJnZXQuaGVpZ2h0LCEwKSx0aGlzLl9kaXJ0eVJlZ2lvblBvbGljeSYmdGhpcy5kcmF3RnJhbWVCdWZmZXJUb1N1cmZhY2UoMCwwLHRoaXMucm9vdFJlbmRlclRhcmdldC53aWR0aCx0aGlzLnJvb3RSZW5kZXJUYXJnZXQuaGVpZ2h0LDAsMCx0aGlzLnJvb3RSZW5kZXJUYXJnZXQud2lkdGgsdGhpcy5yb290UmVuZGVyVGFyZ2V0LmhlaWdodCksdGhpcy5fZGlydHlSZWdpb25Qb2xpY3k9dGhpcy5kaXJ0eVJlZ2lvblBvbGljeSl9LG4ucHJvdG90eXBlLmRyYXdGcmFtZUJ1ZmZlclRvU3VyZmFjZT1mdW5jdGlvbihlLHQscixpLG4sbyxhLHMsbCl7dm9pZCAwPT09bCYmKGw9ITEpLHRoaXMucm9vdFJlbmRlclRhcmdldC51c2VGcmFtZUJ1ZmZlcj0hMSx0aGlzLnJvb3RSZW5kZXJUYXJnZXQuYWN0aXZhdGUoKSx0aGlzLmNvbnRleHQuZGlzYWJsZVN0ZW5jaWxUZXN0KCksdGhpcy5jb250ZXh0LmRpc2FibGVTY2lzc29yVGVzdCgpLHRoaXMuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSx0aGlzLmdsb2JhbEFscGhhPTEsdGhpcy5jb250ZXh0LnNldEdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbihcInNvdXJjZS1vdmVyXCIpLGwmJnRoaXMuY29udGV4dC5jbGVhcigpLHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5yb290UmVuZGVyVGFyZ2V0LGUsdCxyLGksbixvLGEscyxyLGkpLHRoaXMuY29udGV4dC4kZHJhd1dlYkdMKCksdGhpcy5yb290UmVuZGVyVGFyZ2V0LnVzZUZyYW1lQnVmZmVyPSEwLHRoaXMucm9vdFJlbmRlclRhcmdldC5hY3RpdmF0ZSgpLHRoaXMucmVzdG9yZVN0ZW5jaWwoKSx0aGlzLnJlc3RvcmVTY2lzc29yKCl9LG4ucHJvdG90eXBlLmRyYXdTdXJmYWNlVG9GcmFtZUJ1ZmZlcj1mdW5jdGlvbihlLHQscixpLG4sbyxhLHMsbCl7dm9pZCAwPT09bCYmKGw9ITEpLHRoaXMucm9vdFJlbmRlclRhcmdldC51c2VGcmFtZUJ1ZmZlcj0hMCx0aGlzLnJvb3RSZW5kZXJUYXJnZXQuYWN0aXZhdGUoKSx0aGlzLmNvbnRleHQuZGlzYWJsZVN0ZW5jaWxUZXN0KCksdGhpcy5jb250ZXh0LmRpc2FibGVTY2lzc29yVGVzdCgpLHRoaXMuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSx0aGlzLmdsb2JhbEFscGhhPTEsdGhpcy5jb250ZXh0LnNldEdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbihcInNvdXJjZS1vdmVyXCIpLGwmJnRoaXMuY29udGV4dC5jbGVhcigpLHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5jb250ZXh0LnN1cmZhY2UsZSx0LHIsaSxuLG8sYSxzLHIsaSksdGhpcy5jb250ZXh0LiRkcmF3V2ViR0woKSx0aGlzLnJvb3RSZW5kZXJUYXJnZXQudXNlRnJhbWVCdWZmZXI9ITEsdGhpcy5yb290UmVuZGVyVGFyZ2V0LmFjdGl2YXRlKCksdGhpcy5yZXN0b3JlU3RlbmNpbCgpLHRoaXMucmVzdG9yZVNjaXNzb3IoKX0sbi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQuY2xlYXIoKX0sbi5wcm90b3R5cGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKGUsdCxyLGksbixvKXt2YXIgYT10aGlzLmdsb2JhbE1hdHJpeDthLmE9ZSxhLmI9dCxhLmM9cixhLmQ9aSxhLnR4PW4sYS50eT1vfSxuLnByb3RvdHlwZS50cmFuc2Zvcm09ZnVuY3Rpb24oZSx0LHIsaSxuLG8pe3ZhciBhPXRoaXMuZ2xvYmFsTWF0cml4LHM9YS5hLGw9YS5iLGg9YS5jLHU9YS5kOygxIT1lfHwwIT10fHwwIT1yfHwxIT1pKSYmKGEuYT1lKnMrdCpoLGEuYj1lKmwrdCp1LGEuYz1yKnMraSpoLGEuZD1yKmwraSp1KSxhLnR4PW4qcytvKmgrYS50eCxhLnR5PW4qbCtvKnUrYS50eX0sbi5wcm90b3R5cGUudHJhbnNsYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5nbG9iYWxNYXRyaXg7ci50eCs9ZSxyLnR5Kz10fSxuLnByb3RvdHlwZS5zYXZlVHJhbnNmb3JtPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nbG9iYWxNYXRyaXgsdD10aGlzLnNhdmVkR2xvYmFsTWF0cml4O3QuYT1lLmEsdC5iPWUuYix0LmM9ZS5jLHQuZD1lLmQsdC50eD1lLnR4LHQudHk9ZS50eX0sbi5wcm90b3R5cGUucmVzdG9yZVRyYW5zZm9ybT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2xvYmFsTWF0cml4LHQ9dGhpcy5zYXZlZEdsb2JhbE1hdHJpeDtlLmE9dC5hLGUuYj10LmIsZS5jPXQuYyxlLmQ9dC5kLGUudHg9dC50eCxlLnR5PXQudHl9LG4uY3JlYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5wb3AoKTtpZihyKXtyLnJlc2l6ZShlLHQpO3ZhciBvPXIuZ2xvYmFsTWF0cml4O28uYT0xLG8uYj0wLG8uYz0wLG8uZD0xLG8udHg9MCxvLnR5PTB9ZWxzZSByPW5ldyBuKGUsdCksci4kY29tcHV0ZURyYXdDYWxsPSExO3JldHVybiByfSxuLnJlbGVhc2U9ZnVuY3Rpb24oZSl7aS5wdXNoKGUpfSxufShlLkhhc2hPYmplY3QpO3QuV2ViR0xSZW5kZXJCdWZmZXI9cixfX3JlZmxlY3Qoci5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViR0xSZW5kZXJCdWZmZXJcIixbXCJlZ3JldC5zeXMuUmVuZGVyQnVmZmVyXCJdKTt2YXIgaT1bXX0odD1lLndlYnx8KGUud2ViPXt9KSl9KGVncmV0fHwoZWdyZXQ9e30pKTt2YXIgZWdyZXQ7IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbih0KXt2YXIgcj1mdW5jdGlvbih0KXtmdW5jdGlvbiByKHIsaSxuLG8sYSl7dmFyIHM9dC5jYWxsKHRoaXMpfHx0aGlzO2lmKHMuc2hvd1BhbmxlPSEwLHMuZnBzSGVpZ2h0PTAscy5XSURUSD0xMDEscy5IRUlHSFQ9MjAscy5iZ0NhbnZhc0NvbG9yPVwiIzE4MzA0YlwiLHMuZnBzRnJvbnRDb2xvcj1cIiMxOGZlZmVcIixzLldJRFRIX0NPU1Q9MzMscy5jb3N0MUNvbG9yPVwiIzE4ZmVmZVwiLHMuY29zdDJDb2xvcj1cIiNmZmZmMDBcIixzLmNvc3QzQ29sb3I9XCIjZmYwMDAwXCIscy5hcnJGcHM9W10scy5hcnJDb3N0PVtdLHMuYXJyTG9nPVtdLGl8fG4pe1wiY2FudmFzXCI9PWUuQ2FwYWJpbGl0aWVzLnJlbmRlck1vZGU/cy5yZW5kZXJNb2RlPVwiQ2FudmFzXCI6cy5yZW5kZXJNb2RlPVwiV2ViR0xcIixzLnBhbmVsWD12b2lkIDA9PT1hLng/MDpwYXJzZUludChhLngpLHMucGFuZWxZPXZvaWQgMD09PWEueT8wOnBhcnNlSW50KGEueSkscy5mb250Q29sb3I9dm9pZCAwPT09YS50ZXh0Q29sb3I/XCIjZmZmZmZmXCI6YS50ZXh0Q29sb3IucmVwbGFjZShcIjB4XCIsXCIjXCIpLHMuZm9udFNpemU9dm9pZCAwPT09YS5zaXplPzEyOnBhcnNlSW50KGEuc2l6ZSksZS5DYXBhYmlsaXRpZXMuaXNNb2JpbGUmJihzLmZvbnRTaXplLT0yKTt2YXIgbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2wuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLGwuc3R5bGUuYmFja2dyb3VuZD1cInJnYmEoMCwwLDAsXCIrYS5iZ0FscGhhK1wiKVwiLGwuc3R5bGUubGVmdD1zLnBhbmVsWCtcInB4XCIsbC5zdHlsZS50b3A9cy5wYW5lbFkrXCJweFwiLGwuc3R5bGUucG9pbnRlckV2ZW50cz1cIm5vbmVcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGwpO3ZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aC5zdHlsZS5jb2xvcj1zLmZvbnRDb2xvcixoLnN0eWxlLmZvbnRTaXplPXMuZm9udFNpemUrXCJweFwiLGguc3R5bGUubGluZUhlaWdodD1zLmZvbnRTaXplK1wicHhcIixoLnN0eWxlLm1hcmdpbj1cIjRweCA0cHggNHB4IDRweFwiLHMuY29udGFpbmVyPWgsbC5hcHBlbmRDaGlsZChoKSxpJiZzLmFkZEZwcygpLG4mJnMuYWRkTG9nKCl9cmV0dXJuIHN9cmV0dXJuIF9fZXh0ZW5kcyhyLHQpLHIucHJvdG90eXBlLmFkZEZwcz1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5zdHlsZS5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIsdGhpcy5jb250YWluZXJGcHM9ZSx0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlKTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Quc3R5bGUucGFkZGluZ0JvdHRvbT1cIjJweFwiLHRoaXMuZnBzPXQsdGhpcy5jb250YWluZXJGcHMuYXBwZW5kQ2hpbGQodCksdC5pbm5lckhUTUw9XCIwIEZQUyBcIit0aGlzLnJlbmRlck1vZGUrXCI8YnIvPm1pbjAgbWF4MCBhdmcwXCI7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTt0aGlzLmNvbnRhaW5lckZwcy5hcHBlbmRDaGlsZChyKSxyLndpZHRoPXRoaXMuV0lEVEgsci5oZWlnaHQ9dGhpcy5IRUlHSFQsdGhpcy5jYW52YXNGcHM9cjt2YXIgaT1yLmdldENvbnRleHQoXCIyZFwiKTt0aGlzLmNvbnRleHRGcHM9aSxpLmZpbGxTdHlsZT10aGlzLmJnQ2FudmFzQ29sb3IsaS5maWxsUmVjdCgwLDAsdGhpcy5XSURUSCx0aGlzLkhFSUdIVCk7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0aGlzLmRpdkRhdGFzPW4sdGhpcy5jb250YWluZXJGcHMuYXBwZW5kQ2hpbGQobik7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtvLnN0eWxlW1wiZmxvYXRcIl09XCJsZWZ0XCIsby5pbm5lckhUTUw9XCJEcmF3PGJyLz5EaXJ0eTxici8+Q29zdFwiLG4uYXBwZW5kQ2hpbGQobyk7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnN0eWxlLnBhZGRpbmdMZWZ0PW8ub2Zmc2V0V2lkdGgrMjArXCJweFwiLG4uYXBwZW5kQ2hpbGQoYSk7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0aGlzLmRpdkRyYXc9cyxzLmlubmVySFRNTD1cIjA8YnIvPjA8YnIvPlwiLGEuYXBwZW5kQ2hpbGQocyk7dmFyIGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0aGlzLmRpdkNvc3Q9bCxsLmlubmVySFRNTD0nPGZvbnQgIHN0eWxlPVwiY29sb3I6Jyt0aGlzLmNvc3QxQ29sb3IrJ1wiPjA8Zm9udC8+IDxmb250ICBzdHlsZT1cImNvbG9yOicrdGhpcy5jb3N0MkNvbG9yKydcIj4wPGZvbnQvPiA8Zm9udCAgc3R5bGU9XCJjb2xvcjonK3RoaXMuY29zdDNDb2xvcisnXCI+MDxmb250Lz4nLGEuYXBwZW5kQ2hpbGQobCkscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHRoaXMuY2FudmFzQ29zdD1yLHRoaXMuY29udGFpbmVyRnBzLmFwcGVuZENoaWxkKHIpLHIud2lkdGg9dGhpcy5XSURUSCxyLmhlaWdodD10aGlzLkhFSUdIVCxpPXIuZ2V0Q29udGV4dChcIjJkXCIpLHRoaXMuY29udGV4dENvc3Q9aSxpLmZpbGxTdHlsZT10aGlzLmJnQ2FudmFzQ29sb3IsaS5maWxsUmVjdCgwLDAsdGhpcy5XSURUSCx0aGlzLkhFSUdIVCksaS5maWxsU3R5bGU9XCIjMDAwMDAwXCIsaS5maWxsUmVjdCh0aGlzLldJRFRIX0NPU1QsMCwxLHRoaXMuSEVJR0hUKSxpLmZpbGxSZWN0KDIqdGhpcy5XSURUSF9DT1NUKzEsMCwxLHRoaXMuSEVJR0hUKSx0aGlzLmZwc0hlaWdodD10aGlzLmNvbnRhaW5lci5vZmZzZXRIZWlnaHR9LHIucHJvdG90eXBlLmFkZExvZz1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5zdHlsZS5tYXhXaWR0aD1kb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLTgtdGhpcy5wYW5lbFgrXCJweFwiLGUuc3R5bGUud29yZFdyYXA9XCJicmVhay13b3JkXCIsdGhpcy5sb2c9ZSx0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlKX0sci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ITEpO3ZhciByLGksbixvO3Q/KHI9dGhpcy5hcnJGcHNbdGhpcy5hcnJGcHMubGVuZ3RoLTFdLGk9dGhpcy5hcnJDb3N0W3RoaXMuYXJyQ29zdC5sZW5ndGgtMV1bMF0sbj10aGlzLmFyckNvc3RbdGhpcy5hcnJDb3N0Lmxlbmd0aC0xXVsxXSxvPXRoaXMuYXJyQ29zdFt0aGlzLmFyckNvc3QubGVuZ3RoLTFdWzJdKToocj1lLmZwcyxpPWUuY29zdFRpY2tlcixuPWUuY29zdERpcnR5LG89ZS5jb3N0UmVuZGVyLHRoaXMubGFzdE51bURyYXc9ZS5kcmF3LHRoaXMubGFzdE51bURpcnR5PWUuZGlydHksdGhpcy5hcnJGcHMucHVzaChyKSx0aGlzLmFyckNvc3QucHVzaChbaSxuLG9dKSk7dmFyIGE9MCxzPXRoaXMuYXJyRnBzLmxlbmd0aDtzPjEwMSYmKHM9MTAxLHRoaXMuYXJyRnBzLnNoaWZ0KCkpO2Zvcih2YXIgbD10aGlzLmFyckZwc1swXSxoPXRoaXMuYXJyRnBzWzBdLHU9MDtzPnU7dSsrKXt2YXIgYz10aGlzLmFyckZwc1t1XTthKz1jLGw+Yz9sPWM6Yz5oJiYoaD1jKX12YXIgZD10aGlzLldJRFRILHA9dGhpcy5IRUlHSFQsZj10aGlzLmNvbnRleHRGcHM7Zi5kcmF3SW1hZ2UodGhpcy5jYW52YXNGcHMsMSwwLGQtMSxwLDAsMCxkLTEscCksZi5maWxsU3R5bGU9dGhpcy5iZ0NhbnZhc0NvbG9yLGYuZmlsbFJlY3QoZC0xLDAsMSxwKTt2YXIgZz1NYXRoLmZsb29yKHIvNjAqMjApOzE+ZyYmKGc9MSksZi5maWxsU3R5bGU9dGhpcy5mcHNGcm9udENvbG9yLGYuZmlsbFJlY3QoZC0xLDIwLWcsMSxnKTt2YXIgdj10aGlzLldJRFRIX0NPU1Q7Zj10aGlzLmNvbnRleHRDb3N0LGYuZHJhd0ltYWdlKHRoaXMuY2FudmFzQ29zdCwxLDAsdi0xLHAsMCwwLHYtMSxwKSxmLmRyYXdJbWFnZSh0aGlzLmNhbnZhc0Nvc3QsdisyLDAsdi0xLHAsdisxLDAsdi0xLHApLGYuZHJhd0ltYWdlKHRoaXMuY2FudmFzQ29zdCwyKnYrMywwLHYtMSxwLDIqdisyLDAsdi0xLHApO3ZhciB5PU1hdGguZmxvb3IoaS8yKTsxPnk/eT0xOnk+MjAmJih5PTIwKTt2YXIgbT1NYXRoLmZsb29yKG4vMik7MT5tP209MTptPjIwJiYobT0yMCk7dmFyIHg9TWF0aC5mbG9vcihvLzIpOzE+eD94PTE6eD4yMCYmKHg9MjApLGYuZmlsbFN0eWxlPXRoaXMuYmdDYW52YXNDb2xvcixmLmZpbGxSZWN0KHYtMSwwLDEscCksZi5maWxsUmVjdCgyKnYsMCwxLHApLGYuZmlsbFJlY3QoMyp2KzEsMCwxLHApLGYuZmlsbFN0eWxlPXRoaXMuY29zdDFDb2xvcixmLmZpbGxSZWN0KHYtMSwyMC15LDEseSksZi5maWxsU3R5bGU9dGhpcy5jb3N0MkNvbG9yLGYuZmlsbFJlY3QoMip2LDIwLW0sMSxtKSxmLmZpbGxTdHlsZT10aGlzLmNvc3QzQ29sb3IsZi5maWxsUmVjdCgzKnYrMSwyMC14LDEseCk7dmFyIGI9TWF0aC5mbG9vcihhL3MpLHc9citcIiBGUFMgXCIrdGhpcy5yZW5kZXJNb2RlO3RoaXMuc2hvd1BhbmxlJiYodys9XCI8YnIvPm1pblwiK2wrXCIgbWF4XCIraCtcIiBhdmdcIitiLHRoaXMuZGl2RHJhdy5pbm5lckhUTUw9dGhpcy5sYXN0TnVtRHJhdytcIjxici8+XCIrdGhpcy5sYXN0TnVtRGlydHkrXCIlPGJyLz5cIix0aGlzLmRpdkNvc3QuaW5uZXJIVE1MPSc8Zm9udCAgc3R5bGU9XCJjb2xvcjojMThmZWZlXCI+JytpKyc8Zm9udC8+IDxmb250ICBzdHlsZT1cImNvbG9yOiNmZmZmMDBcIj4nK24rJzxmb250Lz4gPGZvbnQgIHN0eWxlPVwiY29sb3I6I2ZmMDAwMFwiPicrbytcIjxmb250Lz5cIiksdGhpcy5mcHMuaW5uZXJIVE1MPXd9LHIucHJvdG90eXBlLnVwZGF0ZUluZm89ZnVuY3Rpb24oZSl7Zm9yKHRoaXMuYXJyTG9nLnB1c2goZSksdGhpcy5sb2cuaW5uZXJIVE1MPXRoaXMuYXJyTG9nLmpvaW4oXCI8YnIvPlwiKTtkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDx0aGlzLmxvZy5vZmZzZXRIZWlnaHQrdGhpcy5mcHNIZWlnaHQrdGhpcy5wYW5lbFkrMip0aGlzLmZvbnRTaXplOyl0aGlzLmFyckxvZy5zaGlmdCgpLHRoaXMubG9nLmlubmVySFRNTD10aGlzLmFyckxvZy5qb2luKFwiPGJyLz5cIil9LHJ9KGUuRGlzcGxheU9iamVjdCk7dC5XZWJGcHM9cixfX3JlZmxlY3Qoci5wcm90b3R5cGUsXCJlZ3JldC53ZWIuV2ViRnBzXCIsW1wiZWdyZXQuRlBTRGlzcGxheVwiXSksZS5GUFNEaXNwbGF5PXJ9KHQ9ZS53ZWJ8fChlLndlYj17fSkpfShlZ3JldHx8KGVncmV0PXt9KSk7Il19
